{"version":3,"sources":["out-vscode/vs/code/electron-sandbox/processExplorer/fake","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/fastDomNode.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/iframe.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/list/list.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/list/splice.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/scrollbar/scrollbarState.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/tree/tree.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/collections.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/color.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/decorators.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/diff/diffChange.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/errors.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/arrays.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/functional.ts","out-vscode/vs/code/electron-sandbox/processExplorer/vs/base/common/insane/insane.js","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/iterator.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/keyCodes.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/lifecycle.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/linkedList.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/numbers.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/platform.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/process.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/path.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/range.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/list/rangeMap.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/stopwatch.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/event.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/browser.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/canIUse.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/event.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/keyboardEvent.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/mouseEvent.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/cancellation.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/codicons.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/tree/treeIcons.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/scrollable.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/stream.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/strings.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/buffer.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/hash.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/diff/diff.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/tree/indexTreeModel.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/tree/objectTreeModel.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/types.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/extpath.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/objects.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/uri.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/map.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/filters.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/marshalling.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/network.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/resources.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/common/async.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/dom.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/dnd.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/globalMouseMoveMonitor.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/touch.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/list/rowCache.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/widget.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/scrollbar/scrollbarArrow.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/scrollbar/abstractScrollbar.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/scrollbar/horizontalScrollbar.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/scrollbar/verticalScrollbar.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/parts/contextmenu/common/contextmenu.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/parts/ipc/common/ipc.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/parts/ipc/common/ipc.electron.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/parts/sandbox/electron-sandbox/globals.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/parts/contextmenu/electron-sandbox/contextmenu.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/parts/ipc/electron-sandbox/ipc.electron.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/aria/aria.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/codicons/codiconStyles.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/scrollbar/scrollableElement.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/list/listView.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/list/listWidget.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/tree/abstractTree.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/base/browser/ui/tree/dataTree.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/instantiation/common/descriptors.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/instantiation/common/extensions.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/instantiation/common/instantiation.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/diagnostics/common/diagnostics.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/files/common/files.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/ipc/electron-sandbox/mainProcessService.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/ipc/electron-sandbox/services.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/native/electron-sandbox/nativeHostService.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/windows/common/windows.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/platform/windows/electron-sandbox/window.ts","out-vscode/vs/code/electron-sandbox/processExplorer/file:/Volumes/DATA/projects/vscode-web/vscode/src/vs/code/electron-sandbox/processExplorer/processExplorerMain.ts"],"sourcesContent":["}).call(this);","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class FastDomNode<T extends HTMLElement> {\n\n\tpublic readonly domNode: T;\n\tprivate _maxWidth: number;\n\tprivate _width: number;\n\tprivate _height: number;\n\tprivate _top: number;\n\tprivate _left: number;\n\tprivate _bottom: number;\n\tprivate _right: number;\n\tprivate _fontFamily: string;\n\tprivate _fontWeight: string;\n\tprivate _fontSize: number;\n\tprivate _fontFeatureSettings: string;\n\tprivate _lineHeight: number;\n\tprivate _letterSpacing: number;\n\tprivate _className: string;\n\tprivate _display: string;\n\tprivate _position: string;\n\tprivate _visibility: string;\n\tprivate _backgroundColor: string;\n\tprivate _layerHint: boolean;\n\tprivate _contain: 'none' | 'strict' | 'content' | 'size' | 'layout' | 'style' | 'paint';\n\tprivate _boxShadow: string;\n\n\tconstructor(domNode: T) {\n\t\tthis.domNode = domNode;\n\t\tthis._maxWidth = -1;\n\t\tthis._width = -1;\n\t\tthis._height = -1;\n\t\tthis._top = -1;\n\t\tthis._left = -1;\n\t\tthis._bottom = -1;\n\t\tthis._right = -1;\n\t\tthis._fontFamily = '';\n\t\tthis._fontWeight = '';\n\t\tthis._fontSize = -1;\n\t\tthis._fontFeatureSettings = '';\n\t\tthis._lineHeight = -1;\n\t\tthis._letterSpacing = -100;\n\t\tthis._className = '';\n\t\tthis._display = '';\n\t\tthis._position = '';\n\t\tthis._visibility = '';\n\t\tthis._backgroundColor = '';\n\t\tthis._layerHint = false;\n\t\tthis._contain = 'none';\n\t\tthis._boxShadow = '';\n\t}\n\n\tpublic setMaxWidth(maxWidth: number): void {\n\t\tif (this._maxWidth === maxWidth) {\n\t\t\treturn;\n\t\t}\n\t\tthis._maxWidth = maxWidth;\n\t\tthis.domNode.style.maxWidth = this._maxWidth + 'px';\n\t}\n\n\tpublic setWidth(width: number): void {\n\t\tif (this._width === width) {\n\t\t\treturn;\n\t\t}\n\t\tthis._width = width;\n\t\tthis.domNode.style.width = this._width + 'px';\n\t}\n\n\tpublic setHeight(height: number): void {\n\t\tif (this._height === height) {\n\t\t\treturn;\n\t\t}\n\t\tthis._height = height;\n\t\tthis.domNode.style.height = this._height + 'px';\n\t}\n\n\tpublic setTop(top: number): void {\n\t\tif (this._top === top) {\n\t\t\treturn;\n\t\t}\n\t\tthis._top = top;\n\t\tthis.domNode.style.top = this._top + 'px';\n\t}\n\n\tpublic unsetTop(): void {\n\t\tif (this._top === -1) {\n\t\t\treturn;\n\t\t}\n\t\tthis._top = -1;\n\t\tthis.domNode.style.top = '';\n\t}\n\n\tpublic setLeft(left: number): void {\n\t\tif (this._left === left) {\n\t\t\treturn;\n\t\t}\n\t\tthis._left = left;\n\t\tthis.domNode.style.left = this._left + 'px';\n\t}\n\n\tpublic setBottom(bottom: number): void {\n\t\tif (this._bottom === bottom) {\n\t\t\treturn;\n\t\t}\n\t\tthis._bottom = bottom;\n\t\tthis.domNode.style.bottom = this._bottom + 'px';\n\t}\n\n\tpublic setRight(right: number): void {\n\t\tif (this._right === right) {\n\t\t\treturn;\n\t\t}\n\t\tthis._right = right;\n\t\tthis.domNode.style.right = this._right + 'px';\n\t}\n\n\tpublic setFontFamily(fontFamily: string): void {\n\t\tif (this._fontFamily === fontFamily) {\n\t\t\treturn;\n\t\t}\n\t\tthis._fontFamily = fontFamily;\n\t\tthis.domNode.style.fontFamily = this._fontFamily;\n\t}\n\n\tpublic setFontWeight(fontWeight: string): void {\n\t\tif (this._fontWeight === fontWeight) {\n\t\t\treturn;\n\t\t}\n\t\tthis._fontWeight = fontWeight;\n\t\tthis.domNode.style.fontWeight = this._fontWeight;\n\t}\n\n\tpublic setFontSize(fontSize: number): void {\n\t\tif (this._fontSize === fontSize) {\n\t\t\treturn;\n\t\t}\n\t\tthis._fontSize = fontSize;\n\t\tthis.domNode.style.fontSize = this._fontSize + 'px';\n\t}\n\n\tpublic setFontFeatureSettings(fontFeatureSettings: string): void {\n\t\tif (this._fontFeatureSettings === fontFeatureSettings) {\n\t\t\treturn;\n\t\t}\n\t\tthis._fontFeatureSettings = fontFeatureSettings;\n\t\tthis.domNode.style.fontFeatureSettings = this._fontFeatureSettings;\n\t}\n\n\tpublic setLineHeight(lineHeight: number): void {\n\t\tif (this._lineHeight === lineHeight) {\n\t\t\treturn;\n\t\t}\n\t\tthis._lineHeight = lineHeight;\n\t\tthis.domNode.style.lineHeight = this._lineHeight + 'px';\n\t}\n\n\tpublic setLetterSpacing(letterSpacing: number): void {\n\t\tif (this._letterSpacing === letterSpacing) {\n\t\t\treturn;\n\t\t}\n\t\tthis._letterSpacing = letterSpacing;\n\t\tthis.domNode.style.letterSpacing = this._letterSpacing + 'px';\n\t}\n\n\tpublic setClassName(className: string): void {\n\t\tif (this._className === className) {\n\t\t\treturn;\n\t\t}\n\t\tthis._className = className;\n\t\tthis.domNode.className = this._className;\n\t}\n\n\tpublic toggleClassName(className: string, shouldHaveIt?: boolean): void {\n\t\tthis.domNode.classList.toggle(className, shouldHaveIt);\n\t\tthis._className = this.domNode.className;\n\t}\n\n\tpublic setDisplay(display: string): void {\n\t\tif (this._display === display) {\n\t\t\treturn;\n\t\t}\n\t\tthis._display = display;\n\t\tthis.domNode.style.display = this._display;\n\t}\n\n\tpublic setPosition(position: string): void {\n\t\tif (this._position === position) {\n\t\t\treturn;\n\t\t}\n\t\tthis._position = position;\n\t\tthis.domNode.style.position = this._position;\n\t}\n\n\tpublic setVisibility(visibility: string): void {\n\t\tif (this._visibility === visibility) {\n\t\t\treturn;\n\t\t}\n\t\tthis._visibility = visibility;\n\t\tthis.domNode.style.visibility = this._visibility;\n\t}\n\n\tpublic setBackgroundColor(backgroundColor: string): void {\n\t\tif (this._backgroundColor === backgroundColor) {\n\t\t\treturn;\n\t\t}\n\t\tthis._backgroundColor = backgroundColor;\n\t\tthis.domNode.style.backgroundColor = this._backgroundColor;\n\t}\n\n\tpublic setLayerHinting(layerHint: boolean): void {\n\t\tif (this._layerHint === layerHint) {\n\t\t\treturn;\n\t\t}\n\t\tthis._layerHint = layerHint;\n\t\tthis.domNode.style.transform = this._layerHint ? 'translate3d(0px, 0px, 0px)' : '';\n\t}\n\n\tpublic setBoxShadow(boxShadow: string): void {\n\t\tif (this._boxShadow === boxShadow) {\n\t\t\treturn;\n\t\t}\n\t\tthis._boxShadow = boxShadow;\n\t\tthis.domNode.style.boxShadow = boxShadow;\n\t}\n\n\tpublic setContain(contain: 'none' | 'strict' | 'content' | 'size' | 'layout' | 'style' | 'paint'): void {\n\t\tif (this._contain === contain) {\n\t\t\treturn;\n\t\t}\n\t\tthis._contain = contain;\n\t\t(<any>this.domNode.style).contain = this._contain;\n\t}\n\n\tpublic setAttribute(name: string, value: string): void {\n\t\tthis.domNode.setAttribute(name, value);\n\t}\n\n\tpublic removeAttribute(name: string): void {\n\t\tthis.domNode.removeAttribute(name);\n\t}\n\n\tpublic appendChild(child: FastDomNode<T>): void {\n\t\tthis.domNode.appendChild(child.domNode);\n\t}\n\n\tpublic removeChild(child: FastDomNode<T>): void {\n\t\tthis.domNode.removeChild(child.domNode);\n\t}\n}\n\nexport function createFastDomNode<T extends HTMLElement>(domNode: T): FastDomNode<T> {\n\treturn new FastDomNode(domNode);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Represents a window in a possible chain of iframes\n */\nexport interface IWindowChainElement {\n\t/**\n\t * The window object for it\n\t */\n\twindow: Window;\n\t/**\n\t * The iframe element inside the window.parent corresponding to window\n\t */\n\tiframeElement: Element | null;\n}\n\nlet hasDifferentOriginAncestorFlag: boolean = false;\nlet sameOriginWindowChainCache: IWindowChainElement[] | null = null;\n\nfunction getParentWindowIfSameOrigin(w: Window): Window | null {\n\tif (!w.parent || w.parent === w) {\n\t\treturn null;\n\t}\n\n\t// Cannot really tell if we have access to the parent window unless we try to access something in it\n\ttry {\n\t\tlet location = w.location;\n\t\tlet parentLocation = w.parent.location;\n\t\tif (location.origin !== 'null' && parentLocation.origin !== 'null') {\n\t\t\tif (location.protocol !== parentLocation.protocol || location.hostname !== parentLocation.hostname || location.port !== parentLocation.port) {\n\t\t\t\thasDifferentOriginAncestorFlag = true;\n\t\t\t\treturn null;\n\t\t\t}\n\t\t}\n\t} catch (e) {\n\t\thasDifferentOriginAncestorFlag = true;\n\t\treturn null;\n\t}\n\n\treturn w.parent;\n}\n\nexport class IframeUtils {\n\n\t/**\n\t * Returns a chain of embedded windows with the same origin (which can be accessed programmatically).\n\t * Having a chain of length 1 might mean that the current execution environment is running outside of an iframe or inside an iframe embedded in a window with a different origin.\n\t * To distinguish if at one point the current execution environment is running inside a window with a different origin, see hasDifferentOriginAncestor()\n\t */\n\tpublic static getSameOriginWindowChain(): IWindowChainElement[] {\n\t\tif (!sameOriginWindowChainCache) {\n\t\t\tsameOriginWindowChainCache = [];\n\t\t\tlet w: Window | null = window;\n\t\t\tlet parent: Window | null;\n\t\t\tdo {\n\t\t\t\tparent = getParentWindowIfSameOrigin(w);\n\t\t\t\tif (parent) {\n\t\t\t\t\tsameOriginWindowChainCache.push({\n\t\t\t\t\t\twindow: w,\n\t\t\t\t\t\tiframeElement: w.frameElement || null\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tsameOriginWindowChainCache.push({\n\t\t\t\t\t\twindow: w,\n\t\t\t\t\t\tiframeElement: null\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tw = parent;\n\t\t\t} while (w);\n\t\t}\n\t\treturn sameOriginWindowChainCache.slice(0);\n\t}\n\n\t/**\n\t * Returns true if the current execution environment is chained in a list of iframes which at one point ends in a window with a different origin.\n\t * Returns false if the current execution environment is not running inside an iframe or if the entire chain of iframes have the same origin.\n\t */\n\tpublic static hasDifferentOriginAncestor(): boolean {\n\t\tif (!sameOriginWindowChainCache) {\n\t\t\tthis.getSameOriginWindowChain();\n\t\t}\n\t\treturn hasDifferentOriginAncestorFlag;\n\t}\n\n\t/**\n\t * Returns the position of `childWindow` relative to `ancestorWindow`\n\t */\n\tpublic static getPositionOfChildWindowRelativeToAncestorWindow(childWindow: Window, ancestorWindow: Window | null) {\n\n\t\tif (!ancestorWindow || childWindow === ancestorWindow) {\n\t\t\treturn {\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0\n\t\t\t};\n\t\t}\n\n\t\tlet top = 0, left = 0;\n\n\t\tlet windowChain = this.getSameOriginWindowChain();\n\n\t\tfor (const windowChainEl of windowChain) {\n\n\t\t\ttop += windowChainEl.window.scrollY;\n\t\t\tleft += windowChainEl.window.scrollX;\n\n\t\t\tif (windowChainEl.window === ancestorWindow) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif (!windowChainEl.iframeElement) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tlet boundingRect = windowChainEl.iframeElement.getBoundingClientRect();\n\t\t\ttop += boundingRect.top;\n\t\t\tleft += boundingRect.left;\n\t\t}\n\n\t\treturn {\n\t\t\ttop: top,\n\t\t\tleft: left\n\t\t};\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { GestureEvent } from 'vs/base/browser/touch';\nimport { IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IDragAndDropData } from 'vs/base/browser/dnd';\n\nexport interface IListVirtualDelegate<T> {\n\tgetHeight(element: T): number;\n\tgetTemplateId(element: T): string;\n\thasDynamicHeight?(element: T): boolean;\n\tsetDynamicHeight?(element: T, height: number): void;\n}\n\nexport interface IListRenderer<T, TTemplateData> {\n\treadonly templateId: string;\n\trenderTemplate(container: HTMLElement): TTemplateData;\n\trenderElement(element: T, index: number, templateData: TTemplateData, height: number | undefined): void;\n\tdisposeElement?(element: T, index: number, templateData: TTemplateData, height: number | undefined): void;\n\tdisposeTemplate(templateData: TTemplateData): void;\n}\n\nexport interface IListEvent<T> {\n\telements: T[];\n\tindexes: number[];\n\tbrowserEvent?: UIEvent;\n}\n\nexport interface IListMouseEvent<T> {\n\tbrowserEvent: MouseEvent;\n\telement: T | undefined;\n\tindex: number | undefined;\n}\n\nexport interface IListTouchEvent<T> {\n\tbrowserEvent: TouchEvent;\n\telement: T | undefined;\n\tindex: number | undefined;\n}\n\nexport interface IListGestureEvent<T> {\n\tbrowserEvent: GestureEvent;\n\telement: T | undefined;\n\tindex: number | undefined;\n}\n\nexport interface IListDragEvent<T> {\n\tbrowserEvent: DragEvent;\n\telement: T | undefined;\n\tindex: number | undefined;\n}\n\nexport interface IListContextMenuEvent<T> {\n\tbrowserEvent: UIEvent;\n\telement: T | undefined;\n\tindex: number | undefined;\n\tanchor: HTMLElement | { x: number; y: number; };\n}\n\nexport interface IIdentityProvider<T> {\n\tgetId(element: T): { toString(): string; };\n}\n\nexport interface IKeyboardNavigationLabelProvider<T> {\n\n\t/**\n\t * Return a keyboard navigation label(s) which will be used by\n\t * the list for filtering/navigating. Return `undefined` to make\n\t * an element always match.\n\t */\n\tgetKeyboardNavigationLabel(element: T): { toString(): string | undefined; } | { toString(): string | undefined; }[] | undefined;\n}\n\nexport interface IKeyboardNavigationDelegate {\n\tmightProducePrintableCharacter(event: IKeyboardEvent): boolean;\n}\n\nexport const enum ListDragOverEffect {\n\tCopy,\n\tMove\n}\n\nexport interface IListDragOverReaction {\n\taccept: boolean;\n\teffect?: ListDragOverEffect;\n\tfeedback?: number[]; // use -1 for entire list\n}\n\nexport const ListDragOverReactions = {\n\treject(): IListDragOverReaction { return { accept: false }; },\n\taccept(): IListDragOverReaction { return { accept: true }; },\n};\n\nexport interface IListDragAndDrop<T> {\n\tgetDragURI(element: T): string | null;\n\tgetDragLabel?(elements: T[], originalEvent: DragEvent): string | undefined;\n\tonDragStart?(data: IDragAndDropData, originalEvent: DragEvent): void;\n\tonDragOver(data: IDragAndDropData, targetElement: T | undefined, targetIndex: number | undefined, originalEvent: DragEvent): boolean | IListDragOverReaction;\n\tdrop(data: IDragAndDropData, targetElement: T | undefined, targetIndex: number | undefined, originalEvent: DragEvent): void;\n\tonDragEnd?(originalEvent: DragEvent): void;\n}\n\nexport class ListError extends Error {\n\n\tconstructor(user: string, message: string) {\n\t\tsuper(`ListError [${user}] ${message}`);\n\t}\n}\n\nexport abstract class CachedListVirtualDelegate<T extends object> implements IListVirtualDelegate<T> {\n\n\tprivate cache = new WeakMap<T, number>();\n\n\tgetHeight(element: T): number {\n\t\treturn this.cache.get(element) ?? this.estimateHeight(element);\n\t}\n\n\tprotected abstract estimateHeight(element: T): number;\n\tabstract getTemplateId(element: T): string;\n\n\tsetDynamicHeight(element: T, height: number): void {\n\t\tif (height > 0) {\n\t\t\tthis.cache.set(element, height);\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ISpliceable } from 'vs/base/common/sequence';\n\nexport interface ISpreadSpliceable<T> {\n\tsplice(start: number, deleteCount: number, ...elements: T[]): void;\n}\n\nexport class CombinedSpliceable<T> implements ISpliceable<T> {\n\n\tconstructor(private spliceables: ISpliceable<T>[]) { }\n\n\tsplice(start: number, deleteCount: number, elements: T[]): void {\n\t\tthis.spliceables.forEach(s => s.splice(start, deleteCount, elements));\n\t}\n}","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\n */\nconst MINIMUM_SLIDER_SIZE = 20;\n\nexport class ScrollbarState {\n\n\t/**\n\t * For the vertical scrollbar: the width.\n\t * For the horizontal scrollbar: the height.\n\t */\n\tprivate _scrollbarSize: number;\n\n\t/**\n\t * For the vertical scrollbar: the height of the pair horizontal scrollbar.\n\t * For the horizontal scrollbar: the width of the pair vertical scrollbar.\n\t */\n\tprivate readonly _oppositeScrollbarSize: number;\n\n\t/**\n\t * For the vertical scrollbar: the height of the scrollbar's arrows.\n\t * For the horizontal scrollbar: the width of the scrollbar's arrows.\n\t */\n\tprivate readonly _arrowSize: number;\n\n\t// --- variables\n\t/**\n\t * For the vertical scrollbar: the viewport height.\n\t * For the horizontal scrollbar: the viewport width.\n\t */\n\tprivate _visibleSize: number;\n\n\t/**\n\t * For the vertical scrollbar: the scroll height.\n\t * For the horizontal scrollbar: the scroll width.\n\t */\n\tprivate _scrollSize: number;\n\n\t/**\n\t * For the vertical scrollbar: the scroll top.\n\t * For the horizontal scrollbar: the scroll left.\n\t */\n\tprivate _scrollPosition: number;\n\n\t// --- computed variables\n\n\t/**\n\t * `visibleSize` - `oppositeScrollbarSize`\n\t */\n\tprivate _computedAvailableSize: number;\n\t/**\n\t * (`scrollSize` > 0 && `scrollSize` > `visibleSize`)\n\t */\n\tprivate _computedIsNeeded: boolean;\n\n\tprivate _computedSliderSize: number;\n\tprivate _computedSliderRatio: number;\n\tprivate _computedSliderPosition: number;\n\n\tconstructor(arrowSize: number, scrollbarSize: number, oppositeScrollbarSize: number, visibleSize: number, scrollSize: number, scrollPosition: number) {\n\t\tthis._scrollbarSize = Math.round(scrollbarSize);\n\t\tthis._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n\t\tthis._arrowSize = Math.round(arrowSize);\n\n\t\tthis._visibleSize = visibleSize;\n\t\tthis._scrollSize = scrollSize;\n\t\tthis._scrollPosition = scrollPosition;\n\n\t\tthis._computedAvailableSize = 0;\n\t\tthis._computedIsNeeded = false;\n\t\tthis._computedSliderSize = 0;\n\t\tthis._computedSliderRatio = 0;\n\t\tthis._computedSliderPosition = 0;\n\n\t\tthis._refreshComputedValues();\n\t}\n\n\tpublic clone(): ScrollbarState {\n\t\treturn new ScrollbarState(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n\t}\n\n\tpublic setVisibleSize(visibleSize: number): boolean {\n\t\tconst iVisibleSize = Math.round(visibleSize);\n\t\tif (this._visibleSize !== iVisibleSize) {\n\t\t\tthis._visibleSize = iVisibleSize;\n\t\t\tthis._refreshComputedValues();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setScrollSize(scrollSize: number): boolean {\n\t\tconst iScrollSize = Math.round(scrollSize);\n\t\tif (this._scrollSize !== iScrollSize) {\n\t\t\tthis._scrollSize = iScrollSize;\n\t\t\tthis._refreshComputedValues();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setScrollPosition(scrollPosition: number): boolean {\n\t\tconst iScrollPosition = Math.round(scrollPosition);\n\t\tif (this._scrollPosition !== iScrollPosition) {\n\t\t\tthis._scrollPosition = iScrollPosition;\n\t\t\tthis._refreshComputedValues();\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tpublic setScrollbarSize(scrollbarSize: number): void {\n\t\tthis._scrollbarSize = scrollbarSize;\n\t}\n\n\tprivate static _computeValues(oppositeScrollbarSize: number, arrowSize: number, visibleSize: number, scrollSize: number, scrollPosition: number) {\n\t\tconst computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\n\t\tconst computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\n\t\tconst computedIsNeeded = (scrollSize > 0 && scrollSize > visibleSize);\n\n\t\tif (!computedIsNeeded) {\n\t\t\t// There is no need for a slider\n\t\t\treturn {\n\t\t\t\tcomputedAvailableSize: Math.round(computedAvailableSize),\n\t\t\t\tcomputedIsNeeded: computedIsNeeded,\n\t\t\t\tcomputedSliderSize: Math.round(computedRepresentableSize),\n\t\t\t\tcomputedSliderRatio: 0,\n\t\t\t\tcomputedSliderPosition: 0,\n\t\t\t};\n\t\t}\n\n\t\t// We must artificially increase the size of the slider if needed, since the slider would be too small to grab with the mouse otherwise\n\t\tconst computedSliderSize = Math.round(Math.max(MINIMUM_SLIDER_SIZE, Math.floor(visibleSize * computedRepresentableSize / scrollSize)));\n\n\t\t// The slider can move from 0 to `computedRepresentableSize` - `computedSliderSize`\n\t\t// in the same way `scrollPosition` can move from 0 to `scrollSize` - `visibleSize`.\n\t\tconst computedSliderRatio = (computedRepresentableSize - computedSliderSize) / (scrollSize - visibleSize);\n\t\tconst computedSliderPosition = (scrollPosition * computedSliderRatio);\n\n\t\treturn {\n\t\t\tcomputedAvailableSize: Math.round(computedAvailableSize),\n\t\t\tcomputedIsNeeded: computedIsNeeded,\n\t\t\tcomputedSliderSize: Math.round(computedSliderSize),\n\t\t\tcomputedSliderRatio: computedSliderRatio,\n\t\t\tcomputedSliderPosition: Math.round(computedSliderPosition),\n\t\t};\n\t}\n\n\tprivate _refreshComputedValues(): void {\n\t\tconst r = ScrollbarState._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n\t\tthis._computedAvailableSize = r.computedAvailableSize;\n\t\tthis._computedIsNeeded = r.computedIsNeeded;\n\t\tthis._computedSliderSize = r.computedSliderSize;\n\t\tthis._computedSliderRatio = r.computedSliderRatio;\n\t\tthis._computedSliderPosition = r.computedSliderPosition;\n\t}\n\n\tpublic getArrowSize(): number {\n\t\treturn this._arrowSize;\n\t}\n\n\tpublic getScrollPosition(): number {\n\t\treturn this._scrollPosition;\n\t}\n\n\tpublic getRectangleLargeSize(): number {\n\t\treturn this._computedAvailableSize;\n\t}\n\n\tpublic getRectangleSmallSize(): number {\n\t\treturn this._scrollbarSize;\n\t}\n\n\tpublic isNeeded(): boolean {\n\t\treturn this._computedIsNeeded;\n\t}\n\n\tpublic getSliderSize(): number {\n\t\treturn this._computedSliderSize;\n\t}\n\n\tpublic getSliderPosition(): number {\n\t\treturn this._computedSliderPosition;\n\t}\n\n\t/**\n\t * Compute a desired `scrollPosition` such that `offset` ends up in the center of the slider.\n\t * `offset` is based on the same coordinate system as the `sliderPosition`.\n\t */\n\tpublic getDesiredScrollPositionFromOffset(offset: number): number {\n\t\tif (!this._computedIsNeeded) {\n\t\t\t// no need for a slider\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst desiredSliderPosition = offset - this._arrowSize - this._computedSliderSize / 2;\n\t\treturn Math.round(desiredSliderPosition / this._computedSliderRatio);\n\t}\n\n\t/**\n\t * Compute a desired `scrollPosition` from if offset is before or after the slider position.\n\t * If offset is before slider, treat as a page up (or left).  If after, page down (or right).\n\t * `offset` and `_computedSliderPosition` are based on the same coordinate system.\n\t * `_visibleSize` corresponds to a \"page\" of lines in the returned coordinate system.\n\t */\n\tpublic getDesiredScrollPositionFromOffsetPaged(offset: number): number {\n\t\tif (!this._computedIsNeeded) {\n\t\t\t// no need for a slider\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst correctedOffset = offset - this._arrowSize;  // compensate if has arrows\n\t\tlet desiredScrollPosition = this._scrollPosition;\n\t\tif (correctedOffset < this._computedSliderPosition) {\n\t\t\tdesiredScrollPosition -= this._visibleSize;  // page up/left\n\t\t} else {\n\t\t\tdesiredScrollPosition += this._visibleSize;  // page down/right\n\t\t}\n\t\treturn desiredScrollPosition;\n\t}\n\n\t/**\n\t * Compute a desired `scrollPosition` such that the slider moves by `delta`.\n\t */\n\tpublic getDesiredScrollPositionFromDelta(delta: number): number {\n\t\tif (!this._computedIsNeeded) {\n\t\t\t// no need for a slider\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst desiredSliderPosition = this._computedSliderPosition + delta;\n\t\treturn Math.round(desiredSliderPosition / this._computedSliderRatio);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from 'vs/base/common/event';\nimport { IListRenderer, IListDragOverReaction, IListDragAndDrop, ListDragOverEffect } from 'vs/base/browser/ui/list/list';\nimport { IDragAndDropData } from 'vs/base/browser/dnd';\n\nexport const enum TreeVisibility {\n\n\t/**\n\t * The tree node should be hidden.\n\t */\n\tHidden,\n\n\t/**\n\t * The tree node should be visible.\n\t */\n\tVisible,\n\n\t/**\n\t * The tree node should be visible if any of its descendants is visible.\n\t */\n\tRecurse\n}\n\n/**\n * A composed filter result containing the visibility result as well as\n * metadata.\n */\nexport interface ITreeFilterDataResult<TFilterData> {\n\n\t/**\n\t * Whether the node should be visible.\n\t */\n\tvisibility: boolean | TreeVisibility;\n\n\t/**\n\t * Metadata about the element's visibility which gets forwarded to the\n\t * renderer once the element gets rendered.\n\t */\n\tdata: TFilterData;\n}\n\n/**\n * The result of a filter call can be a boolean value indicating whether\n * the element should be visible or not, a value of type `TreeVisibility` or\n * an object composed of the visibility result as well as additional metadata\n * which gets forwarded to the renderer once the element gets rendered.\n */\nexport type TreeFilterResult<TFilterData> = boolean | TreeVisibility | ITreeFilterDataResult<TFilterData>;\n\n/**\n * A tree filter is responsible for controlling the visibility of\n * elements in a tree.\n */\nexport interface ITreeFilter<T, TFilterData = void> {\n\n\t/**\n\t * Returns whether this elements should be visible and, if affirmative,\n\t * additional metadata which gets forwarded to the renderer once the element\n\t * gets rendered.\n\t *\n\t * @param element The tree element.\n\t */\n\tfilter(element: T, parentVisibility: TreeVisibility): TreeFilterResult<TFilterData>;\n}\n\nexport interface ITreeSorter<T> {\n\tcompare(element: T, otherElement: T): number;\n}\n\nexport interface ITreeElement<T> {\n\treadonly element: T;\n\treadonly children?: Iterable<ITreeElement<T>>;\n\treadonly collapsible?: boolean;\n\treadonly collapsed?: boolean;\n}\n\nexport interface ITreeNode<T, TFilterData = void> {\n\treadonly element: T;\n\treadonly children: ITreeNode<T, TFilterData>[];\n\treadonly depth: number;\n\treadonly visibleChildrenCount: number;\n\treadonly visibleChildIndex: number;\n\treadonly collapsible: boolean;\n\treadonly collapsed: boolean;\n\treadonly visible: boolean;\n\treadonly filterData: TFilterData | undefined;\n}\n\nexport interface ICollapseStateChangeEvent<T, TFilterData> {\n\tnode: ITreeNode<T, TFilterData>;\n\tdeep: boolean;\n}\n\nexport interface ITreeModelSpliceEvent<T, TFilterData> {\n\tinsertedNodes: ITreeNode<T, TFilterData>[];\n\tdeletedNodes: ITreeNode<T, TFilterData>[];\n}\n\nexport interface ITreeModel<T, TFilterData, TRef> {\n\treadonly rootRef: TRef;\n\n\treadonly onDidSplice: Event<ITreeModelSpliceEvent<T, TFilterData>>;\n\treadonly onDidChangeCollapseState: Event<ICollapseStateChangeEvent<T, TFilterData>>;\n\treadonly onDidChangeRenderNodeCount: Event<ITreeNode<T, TFilterData>>;\n\n\thas(location: TRef): boolean;\n\n\tgetListIndex(location: TRef): number;\n\tgetListRenderCount(location: TRef): number;\n\tgetNode(location?: TRef): ITreeNode<T, any>;\n\tgetNodeLocation(node: ITreeNode<T, any>): TRef;\n\tgetParentNodeLocation(location: TRef): TRef | undefined;\n\n\tgetFirstElementChild(location: TRef): T | undefined;\n\tgetLastElementAncestor(location?: TRef): T | undefined;\n\n\tisCollapsible(location: TRef): boolean;\n\tsetCollapsible(location: TRef, collapsible?: boolean): boolean;\n\tisCollapsed(location: TRef): boolean;\n\tsetCollapsed(location: TRef, collapsed?: boolean, recursive?: boolean): boolean;\n\texpandTo(location: TRef): void;\n\n\trerender(location: TRef): void;\n\trefilter(): void;\n}\n\nexport interface ITreeRenderer<T, TFilterData = void, TTemplateData = void> extends IListRenderer<ITreeNode<T, TFilterData>, TTemplateData> {\n\trenderTwistie?(element: T, twistieElement: HTMLElement): boolean;\n\tonDidChangeTwistieState?: Event<T>;\n}\n\nexport interface ITreeEvent<T> {\n\telements: T[];\n\tbrowserEvent?: UIEvent;\n}\n\nexport enum TreeMouseEventTarget {\n\tUnknown,\n\tTwistie,\n\tElement\n}\n\nexport interface ITreeMouseEvent<T> {\n\tbrowserEvent: MouseEvent;\n\telement: T | null;\n\ttarget: TreeMouseEventTarget;\n}\n\nexport interface ITreeContextMenuEvent<T> {\n\tbrowserEvent: UIEvent;\n\telement: T | null;\n\tanchor: HTMLElement | { x: number; y: number; };\n}\n\nexport interface ITreeNavigator<T> {\n\tcurrent(): T | null;\n\tprevious(): T | null;\n\tfirst(): T | null;\n\tlast(): T | null;\n\tnext(): T | null;\n}\n\nexport interface IDataSource<TInput, T> {\n\thasChildren?(element: TInput | T): boolean;\n\tgetChildren(element: TInput | T): Iterable<T>;\n}\n\nexport interface IAsyncDataSource<TInput, T> {\n\thasChildren(element: TInput | T): boolean;\n\tgetChildren(element: TInput | T): Iterable<T> | Promise<Iterable<T>>;\n}\n\nexport const enum TreeDragOverBubble {\n\tDown,\n\tUp\n}\n\nexport interface ITreeDragOverReaction extends IListDragOverReaction {\n\tbubble?: TreeDragOverBubble;\n\tautoExpand?: boolean;\n}\n\nexport const TreeDragOverReactions = {\n\tacceptBubbleUp(): ITreeDragOverReaction { return { accept: true, bubble: TreeDragOverBubble.Up }; },\n\tacceptBubbleDown(autoExpand = false): ITreeDragOverReaction { return { accept: true, bubble: TreeDragOverBubble.Down, autoExpand }; },\n\tacceptCopyBubbleUp(): ITreeDragOverReaction { return { accept: true, bubble: TreeDragOverBubble.Up, effect: ListDragOverEffect.Copy }; },\n\tacceptCopyBubbleDown(autoExpand = false): ITreeDragOverReaction { return { accept: true, bubble: TreeDragOverBubble.Down, effect: ListDragOverEffect.Copy, autoExpand }; }\n};\n\nexport interface ITreeDragAndDrop<T> extends IListDragAndDrop<T> {\n\tonDragOver(data: IDragAndDropData, targetElement: T | undefined, targetIndex: number | undefined, originalEvent: DragEvent): boolean | ITreeDragOverReaction;\n}\n\nexport class TreeError extends Error {\n\n\tconstructor(user: string, message: string) {\n\t\tsuper(`TreeError [${user}] ${message}`);\n\t}\n}\n\nexport class WeakMapper<K extends object, V> {\n\n\tconstructor(private fn: (k: K) => V) { }\n\n\tprivate _map = new WeakMap<K, V>();\n\n\tmap(key: K): V {\n\t\tlet result = this._map.get(key);\n\n\t\tif (!result) {\n\t\t\tresult = this.fn(key);\n\t\t\tthis._map.set(key, result);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * An interface for a JavaScript object that\n * acts a dictionary. The keys are strings.\n */\nexport type IStringDictionary<V> = Record<string, V>;\n\n\n/**\n * An interface for a JavaScript object that\n * acts a dictionary. The keys are numbers.\n */\nexport type INumberDictionary<V> = Record<number, V>;\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * Returns an array which contains all values that reside\n * in the given dictionary.\n */\nexport function values<T>(from: IStringDictionary<T> | INumberDictionary<T>): T[] {\n\tconst result: T[] = [];\n\tfor (let key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tresult.push((from as any)[key]);\n\t\t}\n\t}\n\treturn result;\n}\n\n/**\n * Iterates over each entry in the provided dictionary. The iterator allows\n * to remove elements and will stop when the callback returns {{false}}.\n */\nexport function forEach<T>(from: IStringDictionary<T> | INumberDictionary<T>, callback: (entry: { key: any; value: T; }, remove: () => void) => any): void {\n\tfor (let key in from) {\n\t\tif (hasOwnProperty.call(from, key)) {\n\t\t\tconst result = callback({ key: key, value: (from as any)[key] }, function () {\n\t\t\t\tdelete (from as any)[key];\n\t\t\t});\n\t\t\tif (result === false) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * Groups the collection into a dictionary based on the provided\n * group function.\n */\nexport function groupBy<T>(data: T[], groupFn: (element: T) => string): IStringDictionary<T[]> {\n\tconst result: IStringDictionary<T[]> = Object.create(null);\n\tfor (const element of data) {\n\t\tconst key = groupFn(element);\n\t\tlet target = result[key];\n\t\tif (!target) {\n\t\t\ttarget = result[key] = [];\n\t\t}\n\t\ttarget.push(element);\n\t}\n\treturn result;\n}\n\n/**\n * Groups the collection into a dictionary based on the provided\n * group function.\n */\nexport function groupByNumber<T>(data: T[], groupFn: (element: T) => number): Map<number, T[]> {\n\tconst result = new Map<number, T[]>();\n\tfor (const element of data) {\n\t\tconst key = groupFn(element);\n\t\tlet target = result.get(key);\n\t\tif (!target) {\n\t\t\ttarget = [];\n\t\t\tresult.set(key, target);\n\t\t}\n\t\ttarget.push(element);\n\t}\n\treturn result;\n}\n\nexport function fromMap<T>(original: Map<string, T>): IStringDictionary<T> {\n\tconst result: IStringDictionary<T> = Object.create(null);\n\tif (original) {\n\t\toriginal.forEach((value, key) => {\n\t\t\tresult[key] = value;\n\t\t});\n\t}\n\treturn result;\n}\n\nexport function diffSets<T>(before: Set<T>, after: Set<T>): { removed: T[], added: T[] } {\n\tconst removed: T[] = [];\n\tconst added: T[] = [];\n\tfor (let element of before) {\n\t\tif (!after.has(element)) {\n\t\t\tremoved.push(element);\n\t\t}\n\t}\n\tfor (let element of after) {\n\t\tif (!before.has(element)) {\n\t\t\tadded.push(element);\n\t\t}\n\t}\n\treturn { removed, added };\n}\n\nexport function diffMaps<K, V>(before: Map<K, V>, after: Map<K, V>): { removed: V[], added: V[] } {\n\tconst removed: V[] = [];\n\tconst added: V[] = [];\n\tfor (let [index, value] of before) {\n\t\tif (!after.has(index)) {\n\t\t\tremoved.push(value);\n\t\t}\n\t}\n\tfor (let [index, value] of after) {\n\t\tif (!before.has(index)) {\n\t\t\tadded.push(value);\n\t\t}\n\t}\n\treturn { removed, added };\n}\nexport class SetMap<K, V> {\n\n\tprivate map = new Map<K, Set<V>>();\n\n\tadd(key: K, value: V): void {\n\t\tlet values = this.map.get(key);\n\n\t\tif (!values) {\n\t\t\tvalues = new Set<V>();\n\t\t\tthis.map.set(key, values);\n\t\t}\n\n\t\tvalues.add(value);\n\t}\n\n\tdelete(key: K, value: V): void {\n\t\tconst values = this.map.get(key);\n\n\t\tif (!values) {\n\t\t\treturn;\n\t\t}\n\n\t\tvalues.delete(value);\n\n\t\tif (values.size === 0) {\n\t\t\tthis.map.delete(key);\n\t\t}\n\t}\n\n\tforEach(key: K, fn: (value: V) => void): void {\n\t\tconst values = this.map.get(key);\n\n\t\tif (!values) {\n\t\t\treturn;\n\t\t}\n\n\t\tvalues.forEach(fn);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from 'vs/base/common/charCode';\n\nfunction roundFloat(number: number, decimalPoints: number): number {\n\tconst decimal = Math.pow(10, decimalPoints);\n\treturn Math.round(number * decimal) / decimal;\n}\n\nexport class RGBA {\n\t_rgbaBrand: void;\n\n\t/**\n\t * Red: integer in [0-255]\n\t */\n\treadonly r: number;\n\n\t/**\n\t * Green: integer in [0-255]\n\t */\n\treadonly g: number;\n\n\t/**\n\t * Blue: integer in [0-255]\n\t */\n\treadonly b: number;\n\n\t/**\n\t * Alpha: float in [0-1]\n\t */\n\treadonly a: number;\n\n\tconstructor(r: number, g: number, b: number, a: number = 1) {\n\t\tthis.r = Math.min(255, Math.max(0, r)) | 0;\n\t\tthis.g = Math.min(255, Math.max(0, g)) | 0;\n\t\tthis.b = Math.min(255, Math.max(0, b)) | 0;\n\t\tthis.a = roundFloat(Math.max(Math.min(1, a), 0), 3);\n\t}\n\n\tstatic equals(a: RGBA, b: RGBA): boolean {\n\t\treturn a.r === b.r && a.g === b.g && a.b === b.b && a.a === b.a;\n\t}\n}\n\nexport class HSLA {\n\n\t_hslaBrand: void;\n\n\t/**\n\t * Hue: integer in [0, 360]\n\t */\n\treadonly h: number;\n\n\t/**\n\t * Saturation: float in [0, 1]\n\t */\n\treadonly s: number;\n\n\t/**\n\t * Luminosity: float in [0, 1]\n\t */\n\treadonly l: number;\n\n\t/**\n\t * Alpha: float in [0, 1]\n\t */\n\treadonly a: number;\n\n\tconstructor(h: number, s: number, l: number, a: number) {\n\t\tthis.h = Math.max(Math.min(360, h), 0) | 0;\n\t\tthis.s = roundFloat(Math.max(Math.min(1, s), 0), 3);\n\t\tthis.l = roundFloat(Math.max(Math.min(1, l), 0), 3);\n\t\tthis.a = roundFloat(Math.max(Math.min(1, a), 0), 3);\n\t}\n\n\tstatic equals(a: HSLA, b: HSLA): boolean {\n\t\treturn a.h === b.h && a.s === b.s && a.l === b.l && a.a === b.a;\n\t}\n\n\t/**\n\t * Converts an RGB color value to HSL. Conversion formula\n\t * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n\t * Assumes r, g, and b are contained in the set [0, 255] and\n\t * returns h in the set [0, 360], s, and l in the set [0, 1].\n\t */\n\tstatic fromRGBA(rgba: RGBA): HSLA {\n\t\tconst r = rgba.r / 255;\n\t\tconst g = rgba.g / 255;\n\t\tconst b = rgba.b / 255;\n\t\tconst a = rgba.a;\n\n\t\tconst max = Math.max(r, g, b);\n\t\tconst min = Math.min(r, g, b);\n\t\tlet h = 0;\n\t\tlet s = 0;\n\t\tconst l = (min + max) / 2;\n\t\tconst chroma = max - min;\n\n\t\tif (chroma > 0) {\n\t\t\ts = Math.min((l <= 0.5 ? chroma / (2 * l) : chroma / (2 - (2 * l))), 1);\n\n\t\t\tswitch (max) {\n\t\t\t\tcase r: h = (g - b) / chroma + (g < b ? 6 : 0); break;\n\t\t\t\tcase g: h = (b - r) / chroma + 2; break;\n\t\t\t\tcase b: h = (r - g) / chroma + 4; break;\n\t\t\t}\n\n\t\t\th *= 60;\n\t\t\th = Math.round(h);\n\t\t}\n\t\treturn new HSLA(h, s, l, a);\n\t}\n\n\tprivate static _hue2rgb(p: number, q: number, t: number): number {\n\t\tif (t < 0) {\n\t\t\tt += 1;\n\t\t}\n\t\tif (t > 1) {\n\t\t\tt -= 1;\n\t\t}\n\t\tif (t < 1 / 6) {\n\t\t\treturn p + (q - p) * 6 * t;\n\t\t}\n\t\tif (t < 1 / 2) {\n\t\t\treturn q;\n\t\t}\n\t\tif (t < 2 / 3) {\n\t\t\treturn p + (q - p) * (2 / 3 - t) * 6;\n\t\t}\n\t\treturn p;\n\t}\n\n\t/**\n\t * Converts an HSL color value to RGB. Conversion formula\n\t * adapted from http://en.wikipedia.org/wiki/HSL_color_space.\n\t * Assumes h in the set [0, 360] s, and l are contained in the set [0, 1] and\n\t * returns r, g, and b in the set [0, 255].\n\t */\n\tstatic toRGBA(hsla: HSLA): RGBA {\n\t\tconst h = hsla.h / 360;\n\t\tconst { s, l, a } = hsla;\n\t\tlet r: number, g: number, b: number;\n\n\t\tif (s === 0) {\n\t\t\tr = g = b = l; // achromatic\n\t\t} else {\n\t\t\tconst q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n\t\t\tconst p = 2 * l - q;\n\t\t\tr = HSLA._hue2rgb(p, q, h + 1 / 3);\n\t\t\tg = HSLA._hue2rgb(p, q, h);\n\t\t\tb = HSLA._hue2rgb(p, q, h - 1 / 3);\n\t\t}\n\n\t\treturn new RGBA(Math.round(r * 255), Math.round(g * 255), Math.round(b * 255), a);\n\t}\n}\n\nexport class HSVA {\n\n\t_hsvaBrand: void;\n\n\t/**\n\t * Hue: integer in [0, 360]\n\t */\n\treadonly h: number;\n\n\t/**\n\t * Saturation: float in [0, 1]\n\t */\n\treadonly s: number;\n\n\t/**\n\t * Value: float in [0, 1]\n\t */\n\treadonly v: number;\n\n\t/**\n\t * Alpha: float in [0, 1]\n\t */\n\treadonly a: number;\n\n\tconstructor(h: number, s: number, v: number, a: number) {\n\t\tthis.h = Math.max(Math.min(360, h), 0) | 0;\n\t\tthis.s = roundFloat(Math.max(Math.min(1, s), 0), 3);\n\t\tthis.v = roundFloat(Math.max(Math.min(1, v), 0), 3);\n\t\tthis.a = roundFloat(Math.max(Math.min(1, a), 0), 3);\n\t}\n\n\tstatic equals(a: HSVA, b: HSVA): boolean {\n\t\treturn a.h === b.h && a.s === b.s && a.v === b.v && a.a === b.a;\n\t}\n\n\t// from http://www.rapidtables.com/convert/color/rgb-to-hsv.htm\n\tstatic fromRGBA(rgba: RGBA): HSVA {\n\t\tconst r = rgba.r / 255;\n\t\tconst g = rgba.g / 255;\n\t\tconst b = rgba.b / 255;\n\t\tconst cmax = Math.max(r, g, b);\n\t\tconst cmin = Math.min(r, g, b);\n\t\tconst delta = cmax - cmin;\n\t\tconst s = cmax === 0 ? 0 : (delta / cmax);\n\t\tlet m: number;\n\n\t\tif (delta === 0) {\n\t\t\tm = 0;\n\t\t} else if (cmax === r) {\n\t\t\tm = ((((g - b) / delta) % 6) + 6) % 6;\n\t\t} else if (cmax === g) {\n\t\t\tm = ((b - r) / delta) + 2;\n\t\t} else {\n\t\t\tm = ((r - g) / delta) + 4;\n\t\t}\n\n\t\treturn new HSVA(Math.round(m * 60), s, cmax, rgba.a);\n\t}\n\n\t// from http://www.rapidtables.com/convert/color/hsv-to-rgb.htm\n\tstatic toRGBA(hsva: HSVA): RGBA {\n\t\tconst { h, s, v, a } = hsva;\n\t\tconst c = v * s;\n\t\tconst x = c * (1 - Math.abs((h / 60) % 2 - 1));\n\t\tconst m = v - c;\n\t\tlet [r, g, b] = [0, 0, 0];\n\n\t\tif (h < 60) {\n\t\t\tr = c;\n\t\t\tg = x;\n\t\t} else if (h < 120) {\n\t\t\tr = x;\n\t\t\tg = c;\n\t\t} else if (h < 180) {\n\t\t\tg = c;\n\t\t\tb = x;\n\t\t} else if (h < 240) {\n\t\t\tg = x;\n\t\t\tb = c;\n\t\t} else if (h < 300) {\n\t\t\tr = x;\n\t\t\tb = c;\n\t\t} else if (h <= 360) {\n\t\t\tr = c;\n\t\t\tb = x;\n\t\t}\n\n\t\tr = Math.round((r + m) * 255);\n\t\tg = Math.round((g + m) * 255);\n\t\tb = Math.round((b + m) * 255);\n\n\t\treturn new RGBA(r, g, b, a);\n\t}\n}\n\nexport class Color {\n\n\tstatic fromHex(hex: string): Color {\n\t\treturn Color.Format.CSS.parseHex(hex) || Color.red;\n\t}\n\n\treadonly rgba: RGBA;\n\tprivate _hsla?: HSLA;\n\tget hsla(): HSLA {\n\t\tif (this._hsla) {\n\t\t\treturn this._hsla;\n\t\t} else {\n\t\t\treturn HSLA.fromRGBA(this.rgba);\n\t\t}\n\t}\n\n\tprivate _hsva?: HSVA;\n\tget hsva(): HSVA {\n\t\tif (this._hsva) {\n\t\t\treturn this._hsva;\n\t\t}\n\t\treturn HSVA.fromRGBA(this.rgba);\n\t}\n\n\tconstructor(arg: RGBA | HSLA | HSVA) {\n\t\tif (!arg) {\n\t\t\tthrow new Error('Color needs a value');\n\t\t} else if (arg instanceof RGBA) {\n\t\t\tthis.rgba = arg;\n\t\t} else if (arg instanceof HSLA) {\n\t\t\tthis._hsla = arg;\n\t\t\tthis.rgba = HSLA.toRGBA(arg);\n\t\t} else if (arg instanceof HSVA) {\n\t\t\tthis._hsva = arg;\n\t\t\tthis.rgba = HSVA.toRGBA(arg);\n\t\t} else {\n\t\t\tthrow new Error('Invalid color ctor argument');\n\t\t}\n\t}\n\n\tequals(other: Color | null): boolean {\n\t\treturn !!other && RGBA.equals(this.rgba, other.rgba) && HSLA.equals(this.hsla, other.hsla) && HSVA.equals(this.hsva, other.hsva);\n\t}\n\n\t/**\n\t * http://www.w3.org/TR/WCAG20/#relativeluminancedef\n\t * Returns the number in the set [0, 1]. O => Darkest Black. 1 => Lightest white.\n\t */\n\tgetRelativeLuminance(): number {\n\t\tconst R = Color._relativeLuminanceForComponent(this.rgba.r);\n\t\tconst G = Color._relativeLuminanceForComponent(this.rgba.g);\n\t\tconst B = Color._relativeLuminanceForComponent(this.rgba.b);\n\t\tconst luminance = 0.2126 * R + 0.7152 * G + 0.0722 * B;\n\n\t\treturn roundFloat(luminance, 4);\n\t}\n\n\tprivate static _relativeLuminanceForComponent(color: number): number {\n\t\tconst c = color / 255;\n\t\treturn (c <= 0.03928) ? c / 12.92 : Math.pow(((c + 0.055) / 1.055), 2.4);\n\t}\n\n\t/**\n\t * http://www.w3.org/TR/WCAG20/#contrast-ratiodef\n\t * Returns the contrast ration number in the set [1, 21].\n\t */\n\tgetContrastRatio(another: Color): number {\n\t\tconst lum1 = this.getRelativeLuminance();\n\t\tconst lum2 = another.getRelativeLuminance();\n\t\treturn lum1 > lum2 ? (lum1 + 0.05) / (lum2 + 0.05) : (lum2 + 0.05) / (lum1 + 0.05);\n\t}\n\n\t/**\n\t *\thttp://24ways.org/2010/calculating-color-contrast\n\t *  Return 'true' if darker color otherwise 'false'\n\t */\n\tisDarker(): boolean {\n\t\tconst yiq = (this.rgba.r * 299 + this.rgba.g * 587 + this.rgba.b * 114) / 1000;\n\t\treturn yiq < 128;\n\t}\n\n\t/**\n\t *\thttp://24ways.org/2010/calculating-color-contrast\n\t *  Return 'true' if lighter color otherwise 'false'\n\t */\n\tisLighter(): boolean {\n\t\tconst yiq = (this.rgba.r * 299 + this.rgba.g * 587 + this.rgba.b * 114) / 1000;\n\t\treturn yiq >= 128;\n\t}\n\n\tisLighterThan(another: Color): boolean {\n\t\tconst lum1 = this.getRelativeLuminance();\n\t\tconst lum2 = another.getRelativeLuminance();\n\t\treturn lum1 > lum2;\n\t}\n\n\tisDarkerThan(another: Color): boolean {\n\t\tconst lum1 = this.getRelativeLuminance();\n\t\tconst lum2 = another.getRelativeLuminance();\n\t\treturn lum1 < lum2;\n\t}\n\n\tlighten(factor: number): Color {\n\t\treturn new Color(new HSLA(this.hsla.h, this.hsla.s, this.hsla.l + this.hsla.l * factor, this.hsla.a));\n\t}\n\n\tdarken(factor: number): Color {\n\t\treturn new Color(new HSLA(this.hsla.h, this.hsla.s, this.hsla.l - this.hsla.l * factor, this.hsla.a));\n\t}\n\n\ttransparent(factor: number): Color {\n\t\tconst { r, g, b, a } = this.rgba;\n\t\treturn new Color(new RGBA(r, g, b, a * factor));\n\t}\n\n\tisTransparent(): boolean {\n\t\treturn this.rgba.a === 0;\n\t}\n\n\tisOpaque(): boolean {\n\t\treturn this.rgba.a === 1;\n\t}\n\n\topposite(): Color {\n\t\treturn new Color(new RGBA(255 - this.rgba.r, 255 - this.rgba.g, 255 - this.rgba.b, this.rgba.a));\n\t}\n\n\tblend(c: Color): Color {\n\t\tconst rgba = c.rgba;\n\n\t\t// Convert to 0..1 opacity\n\t\tconst thisA = this.rgba.a;\n\t\tconst colorA = rgba.a;\n\n\t\tconst a = thisA + colorA * (1 - thisA);\n\t\tif (a < 1e-6) {\n\t\t\treturn Color.transparent;\n\t\t}\n\n\t\tconst r = this.rgba.r * thisA / a + rgba.r * colorA * (1 - thisA) / a;\n\t\tconst g = this.rgba.g * thisA / a + rgba.g * colorA * (1 - thisA) / a;\n\t\tconst b = this.rgba.b * thisA / a + rgba.b * colorA * (1 - thisA) / a;\n\n\t\treturn new Color(new RGBA(r, g, b, a));\n\t}\n\n\tmakeOpaque(opaqueBackground: Color): Color {\n\t\tif (this.isOpaque() || opaqueBackground.rgba.a !== 1) {\n\t\t\t// only allow to blend onto a non-opaque color onto a opaque color\n\t\t\treturn this;\n\t\t}\n\n\t\tconst { r, g, b, a } = this.rgba;\n\n\t\t// https://stackoverflow.com/questions/12228548/finding-equivalent-color-with-opacity\n\t\treturn new Color(new RGBA(\n\t\t\topaqueBackground.rgba.r - a * (opaqueBackground.rgba.r - r),\n\t\t\topaqueBackground.rgba.g - a * (opaqueBackground.rgba.g - g),\n\t\t\topaqueBackground.rgba.b - a * (opaqueBackground.rgba.b - b),\n\t\t\t1\n\t\t));\n\t}\n\n\tflatten(...backgrounds: Color[]): Color {\n\t\tconst background = backgrounds.reduceRight((accumulator, color) => {\n\t\t\treturn Color._flatten(color, accumulator);\n\t\t});\n\t\treturn Color._flatten(this, background);\n\t}\n\n\tprivate static _flatten(foreground: Color, background: Color) {\n\t\tconst backgroundAlpha = 1 - foreground.rgba.a;\n\t\treturn new Color(new RGBA(\n\t\t\tbackgroundAlpha * background.rgba.r + foreground.rgba.a * foreground.rgba.r,\n\t\t\tbackgroundAlpha * background.rgba.g + foreground.rgba.a * foreground.rgba.g,\n\t\t\tbackgroundAlpha * background.rgba.b + foreground.rgba.a * foreground.rgba.b\n\t\t));\n\t}\n\n\ttoString(): string {\n\t\treturn '' + Color.Format.CSS.format(this);\n\t}\n\n\tstatic getLighterColor(of: Color, relative: Color, factor?: number): Color {\n\t\tif (of.isLighterThan(relative)) {\n\t\t\treturn of;\n\t\t}\n\t\tfactor = factor ? factor : 0.5;\n\t\tconst lum1 = of.getRelativeLuminance();\n\t\tconst lum2 = relative.getRelativeLuminance();\n\t\tfactor = factor * (lum2 - lum1) / lum2;\n\t\treturn of.lighten(factor);\n\t}\n\n\tstatic getDarkerColor(of: Color, relative: Color, factor?: number): Color {\n\t\tif (of.isDarkerThan(relative)) {\n\t\t\treturn of;\n\t\t}\n\t\tfactor = factor ? factor : 0.5;\n\t\tconst lum1 = of.getRelativeLuminance();\n\t\tconst lum2 = relative.getRelativeLuminance();\n\t\tfactor = factor * (lum1 - lum2) / lum1;\n\t\treturn of.darken(factor);\n\t}\n\n\tstatic readonly white = new Color(new RGBA(255, 255, 255, 1));\n\tstatic readonly black = new Color(new RGBA(0, 0, 0, 1));\n\tstatic readonly red = new Color(new RGBA(255, 0, 0, 1));\n\tstatic readonly blue = new Color(new RGBA(0, 0, 255, 1));\n\tstatic readonly green = new Color(new RGBA(0, 255, 0, 1));\n\tstatic readonly cyan = new Color(new RGBA(0, 255, 255, 1));\n\tstatic readonly lightgrey = new Color(new RGBA(211, 211, 211, 1));\n\tstatic readonly transparent = new Color(new RGBA(0, 0, 0, 0));\n}\n\nexport namespace Color {\n\texport namespace Format {\n\t\texport namespace CSS {\n\n\t\t\texport function formatRGB(color: Color): string {\n\t\t\t\tif (color.rgba.a === 1) {\n\t\t\t\t\treturn `rgb(${color.rgba.r}, ${color.rgba.g}, ${color.rgba.b})`;\n\t\t\t\t}\n\n\t\t\t\treturn Color.Format.CSS.formatRGBA(color);\n\t\t\t}\n\n\t\t\texport function formatRGBA(color: Color): string {\n\t\t\t\treturn `rgba(${color.rgba.r}, ${color.rgba.g}, ${color.rgba.b}, ${+(color.rgba.a).toFixed(2)})`;\n\t\t\t}\n\n\t\t\texport function formatHSL(color: Color): string {\n\t\t\t\tif (color.hsla.a === 1) {\n\t\t\t\t\treturn `hsl(${color.hsla.h}, ${(color.hsla.s * 100).toFixed(2)}%, ${(color.hsla.l * 100).toFixed(2)}%)`;\n\t\t\t\t}\n\n\t\t\t\treturn Color.Format.CSS.formatHSLA(color);\n\t\t\t}\n\n\t\t\texport function formatHSLA(color: Color): string {\n\t\t\t\treturn `hsla(${color.hsla.h}, ${(color.hsla.s * 100).toFixed(2)}%, ${(color.hsla.l * 100).toFixed(2)}%, ${color.hsla.a.toFixed(2)})`;\n\t\t\t}\n\n\t\t\tfunction _toTwoDigitHex(n: number): string {\n\t\t\t\tconst r = n.toString(16);\n\t\t\t\treturn r.length !== 2 ? '0' + r : r;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Formats the color as #RRGGBB\n\t\t\t */\n\t\t\texport function formatHex(color: Color): string {\n\t\t\t\treturn `#${_toTwoDigitHex(color.rgba.r)}${_toTwoDigitHex(color.rgba.g)}${_toTwoDigitHex(color.rgba.b)}`;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Formats the color as #RRGGBBAA\n\t\t\t * If 'compact' is set, colors without transparancy will be printed as #RRGGBB\n\t\t\t */\n\t\t\texport function formatHexA(color: Color, compact = false): string {\n\t\t\t\tif (compact && color.rgba.a === 1) {\n\t\t\t\t\treturn Color.Format.CSS.formatHex(color);\n\t\t\t\t}\n\n\t\t\t\treturn `#${_toTwoDigitHex(color.rgba.r)}${_toTwoDigitHex(color.rgba.g)}${_toTwoDigitHex(color.rgba.b)}${_toTwoDigitHex(Math.round(color.rgba.a * 255))}`;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * The default format will use HEX if opaque and RGBA otherwise.\n\t\t\t */\n\t\t\texport function format(color: Color): string | null {\n\t\t\t\tif (color.isOpaque()) {\n\t\t\t\t\treturn Color.Format.CSS.formatHex(color);\n\t\t\t\t}\n\n\t\t\t\treturn Color.Format.CSS.formatRGBA(color);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Converts an Hex color value to a Color.\n\t\t\t * returns r, g, and b are contained in the set [0, 255]\n\t\t\t * @param hex string (#RGB, #RGBA, #RRGGBB or #RRGGBBAA).\n\t\t\t */\n\t\t\texport function parseHex(hex: string): Color | null {\n\t\t\t\tconst length = hex.length;\n\n\t\t\t\tif (length === 0) {\n\t\t\t\t\t// Invalid color\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (hex.charCodeAt(0) !== CharCode.Hash) {\n\t\t\t\t\t// Does not begin with a #\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\n\t\t\t\tif (length === 7) {\n\t\t\t\t\t// #RRGGBB format\n\t\t\t\t\tconst r = 16 * _parseHexDigit(hex.charCodeAt(1)) + _parseHexDigit(hex.charCodeAt(2));\n\t\t\t\t\tconst g = 16 * _parseHexDigit(hex.charCodeAt(3)) + _parseHexDigit(hex.charCodeAt(4));\n\t\t\t\t\tconst b = 16 * _parseHexDigit(hex.charCodeAt(5)) + _parseHexDigit(hex.charCodeAt(6));\n\t\t\t\t\treturn new Color(new RGBA(r, g, b, 1));\n\t\t\t\t}\n\n\t\t\t\tif (length === 9) {\n\t\t\t\t\t// #RRGGBBAA format\n\t\t\t\t\tconst r = 16 * _parseHexDigit(hex.charCodeAt(1)) + _parseHexDigit(hex.charCodeAt(2));\n\t\t\t\t\tconst g = 16 * _parseHexDigit(hex.charCodeAt(3)) + _parseHexDigit(hex.charCodeAt(4));\n\t\t\t\t\tconst b = 16 * _parseHexDigit(hex.charCodeAt(5)) + _parseHexDigit(hex.charCodeAt(6));\n\t\t\t\t\tconst a = 16 * _parseHexDigit(hex.charCodeAt(7)) + _parseHexDigit(hex.charCodeAt(8));\n\t\t\t\t\treturn new Color(new RGBA(r, g, b, a / 255));\n\t\t\t\t}\n\n\t\t\t\tif (length === 4) {\n\t\t\t\t\t// #RGB format\n\t\t\t\t\tconst r = _parseHexDigit(hex.charCodeAt(1));\n\t\t\t\t\tconst g = _parseHexDigit(hex.charCodeAt(2));\n\t\t\t\t\tconst b = _parseHexDigit(hex.charCodeAt(3));\n\t\t\t\t\treturn new Color(new RGBA(16 * r + r, 16 * g + g, 16 * b + b));\n\t\t\t\t}\n\n\t\t\t\tif (length === 5) {\n\t\t\t\t\t// #RGBA format\n\t\t\t\t\tconst r = _parseHexDigit(hex.charCodeAt(1));\n\t\t\t\t\tconst g = _parseHexDigit(hex.charCodeAt(2));\n\t\t\t\t\tconst b = _parseHexDigit(hex.charCodeAt(3));\n\t\t\t\t\tconst a = _parseHexDigit(hex.charCodeAt(4));\n\t\t\t\t\treturn new Color(new RGBA(16 * r + r, 16 * g + g, 16 * b + b, (16 * a + a) / 255));\n\t\t\t\t}\n\n\t\t\t\t// Invalid color\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tfunction _parseHexDigit(charCode: CharCode): number {\n\t\t\t\tswitch (charCode) {\n\t\t\t\t\tcase CharCode.Digit0: return 0;\n\t\t\t\t\tcase CharCode.Digit1: return 1;\n\t\t\t\t\tcase CharCode.Digit2: return 2;\n\t\t\t\t\tcase CharCode.Digit3: return 3;\n\t\t\t\t\tcase CharCode.Digit4: return 4;\n\t\t\t\t\tcase CharCode.Digit5: return 5;\n\t\t\t\t\tcase CharCode.Digit6: return 6;\n\t\t\t\t\tcase CharCode.Digit7: return 7;\n\t\t\t\t\tcase CharCode.Digit8: return 8;\n\t\t\t\t\tcase CharCode.Digit9: return 9;\n\t\t\t\t\tcase CharCode.a: return 10;\n\t\t\t\t\tcase CharCode.A: return 10;\n\t\t\t\t\tcase CharCode.b: return 11;\n\t\t\t\t\tcase CharCode.B: return 11;\n\t\t\t\t\tcase CharCode.c: return 12;\n\t\t\t\t\tcase CharCode.C: return 12;\n\t\t\t\t\tcase CharCode.d: return 13;\n\t\t\t\t\tcase CharCode.D: return 13;\n\t\t\t\t\tcase CharCode.e: return 14;\n\t\t\t\t\tcase CharCode.E: return 14;\n\t\t\t\t\tcase CharCode.f: return 15;\n\t\t\t\t\tcase CharCode.F: return 15;\n\t\t\t\t}\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function createDecorator(mapFn: (fn: Function, key: string) => Function): Function {\n\treturn (target: any, key: string, descriptor: any) => {\n\t\tlet fnKey: string | null = null;\n\t\tlet fn: Function | null = null;\n\n\t\tif (typeof descriptor.value === 'function') {\n\t\t\tfnKey = 'value';\n\t\t\tfn = descriptor.value;\n\t\t} else if (typeof descriptor.get === 'function') {\n\t\t\tfnKey = 'get';\n\t\t\tfn = descriptor.get;\n\t\t}\n\n\t\tif (!fn) {\n\t\t\tthrow new Error('not supported');\n\t\t}\n\n\t\tdescriptor[fnKey!] = mapFn(fn, key);\n\t};\n}\n\nlet memoizeId = 0;\nexport function createMemoizer() {\n\tconst memoizeKeyPrefix = `$memoize${memoizeId++}`;\n\tlet self: any = undefined;\n\n\tconst result = function memoize(target: any, key: string, descriptor: any) {\n\t\tlet fnKey: string | null = null;\n\t\tlet fn: Function | null = null;\n\n\t\tif (typeof descriptor.value === 'function') {\n\t\t\tfnKey = 'value';\n\t\t\tfn = descriptor.value;\n\n\t\t\tif (fn!.length !== 0) {\n\t\t\t\tconsole.warn('Memoize should only be used in functions with zero parameters');\n\t\t\t}\n\t\t} else if (typeof descriptor.get === 'function') {\n\t\t\tfnKey = 'get';\n\t\t\tfn = descriptor.get;\n\t\t}\n\n\t\tif (!fn) {\n\t\t\tthrow new Error('not supported');\n\t\t}\n\n\t\tconst memoizeKey = `${memoizeKeyPrefix}:${key}`;\n\t\tdescriptor[fnKey!] = function (...args: any[]) {\n\t\t\tself = this;\n\n\t\t\tif (!this.hasOwnProperty(memoizeKey)) {\n\t\t\t\tObject.defineProperty(this, memoizeKey, {\n\t\t\t\t\tconfigurable: true,\n\t\t\t\t\tenumerable: false,\n\t\t\t\t\twritable: true,\n\t\t\t\t\tvalue: fn!.apply(this, args)\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn this[memoizeKey];\n\t\t};\n\t};\n\n\tresult.clear = () => {\n\t\tif (typeof self === 'undefined') {\n\t\t\treturn;\n\t\t}\n\t\tObject.getOwnPropertyNames(self).forEach(property => {\n\t\t\tif (property.indexOf(memoizeKeyPrefix) === 0) {\n\t\t\t\tdelete self[property];\n\t\t\t}\n\t\t});\n\t};\n\n\treturn result;\n}\n\nexport function memoize(target: any, key: string, descriptor: any) {\n\treturn createMemoizer()(target, key, descriptor);\n}\n\nexport interface IDebounceReducer<T> {\n\t(previousValue: T, ...args: any[]): T;\n}\n\nexport function debounce<T>(delay: number, reducer?: IDebounceReducer<T>, initialValueProvider?: () => T): Function {\n\treturn createDecorator((fn, key) => {\n\t\tconst timerKey = `$debounce$${key}`;\n\t\tconst resultKey = `$debounce$result$${key}`;\n\n\t\treturn function (this: any, ...args: any[]) {\n\t\t\tif (!this[resultKey]) {\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t}\n\n\t\t\tclearTimeout(this[timerKey]);\n\n\t\t\tif (reducer) {\n\t\t\t\tthis[resultKey] = reducer(this[resultKey], ...args);\n\t\t\t\targs = [this[resultKey]];\n\t\t\t}\n\n\t\t\tthis[timerKey] = setTimeout(() => {\n\t\t\t\tfn.apply(this, args);\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t}, delay);\n\t\t};\n\t});\n}\n\nexport function throttle<T>(delay: number, reducer?: IDebounceReducer<T>, initialValueProvider?: () => T): Function {\n\treturn createDecorator((fn, key) => {\n\t\tconst timerKey = `$throttle$timer$${key}`;\n\t\tconst resultKey = `$throttle$result$${key}`;\n\t\tconst lastRunKey = `$throttle$lastRun$${key}`;\n\t\tconst pendingKey = `$throttle$pending$${key}`;\n\n\t\treturn function (this: any, ...args: any[]) {\n\t\t\tif (!this[resultKey]) {\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t}\n\t\t\tif (this[lastRunKey] === null || this[lastRunKey] === undefined) {\n\t\t\t\tthis[lastRunKey] = -Number.MAX_VALUE;\n\t\t\t}\n\n\t\t\tif (reducer) {\n\t\t\t\tthis[resultKey] = reducer(this[resultKey], ...args);\n\t\t\t}\n\n\t\t\tif (this[pendingKey]) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextTime = this[lastRunKey] + delay;\n\t\t\tif (nextTime <= Date.now()) {\n\t\t\t\tthis[lastRunKey] = Date.now();\n\t\t\t\tfn.apply(this, [this[resultKey]]);\n\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t} else {\n\t\t\t\tthis[pendingKey] = true;\n\t\t\t\tthis[timerKey] = setTimeout(() => {\n\t\t\t\t\tthis[pendingKey] = false;\n\t\t\t\t\tthis[lastRunKey] = Date.now();\n\t\t\t\t\tfn.apply(this, [this[resultKey]]);\n\t\t\t\t\tthis[resultKey] = initialValueProvider ? initialValueProvider() : undefined;\n\t\t\t\t}, nextTime - Date.now());\n\t\t\t}\n\t\t};\n\t});\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Represents information about a specific difference between two sequences.\n */\nexport class DiffChange {\n\n\t/**\n\t * The position of the first element in the original sequence which\n\t * this change affects.\n\t */\n\tpublic originalStart: number;\n\n\t/**\n\t * The number of elements from the original sequence which were\n\t * affected.\n\t */\n\tpublic originalLength: number;\n\n\t/**\n\t * The position of the first element in the modified sequence which\n\t * this change affects.\n\t */\n\tpublic modifiedStart: number;\n\n\t/**\n\t * The number of elements from the modified sequence which were\n\t * affected (added).\n\t */\n\tpublic modifiedLength: number;\n\n\t/**\n\t * Constructs a new DiffChange with the given sequence information\n\t * and content.\n\t */\n\tconstructor(originalStart: number, originalLength: number, modifiedStart: number, modifiedLength: number) {\n\t\t//Debug.Assert(originalLength > 0 || modifiedLength > 0, \"originalLength and modifiedLength cannot both be <= 0\");\n\t\tthis.originalStart = originalStart;\n\t\tthis.originalLength = originalLength;\n\t\tthis.modifiedStart = modifiedStart;\n\t\tthis.modifiedLength = modifiedLength;\n\t}\n\n\t/**\n\t * The end point (exclusive) of the change in the original sequence.\n\t */\n\tpublic getOriginalEnd() {\n\t\treturn this.originalStart + this.originalLength;\n\t}\n\n\t/**\n\t * The end point (exclusive) of the change in the modified sequence.\n\t */\n\tpublic getModifiedEnd() {\n\t\treturn this.modifiedStart + this.modifiedLength;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IAction } from 'vs/base/common/actions';\n\nexport interface ErrorListenerCallback {\n\t(error: any): void;\n}\n\nexport interface ErrorListenerUnbind {\n\t(): void;\n}\n\n// Avoid circular dependency on EventEmitter by implementing a subset of the interface.\nexport class ErrorHandler {\n\tprivate unexpectedErrorHandler: (e: any) => void;\n\tprivate listeners: ErrorListenerCallback[];\n\n\tconstructor() {\n\n\t\tthis.listeners = [];\n\n\t\tthis.unexpectedErrorHandler = function (e: any) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (e.stack) {\n\t\t\t\t\tthrow new Error(e.message + '\\n\\n' + e.stack);\n\t\t\t\t}\n\n\t\t\t\tthrow e;\n\t\t\t}, 0);\n\t\t};\n\t}\n\n\taddListener(listener: ErrorListenerCallback): ErrorListenerUnbind {\n\t\tthis.listeners.push(listener);\n\n\t\treturn () => {\n\t\t\tthis._removeListener(listener);\n\t\t};\n\t}\n\n\tprivate emit(e: any): void {\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistener(e);\n\t\t});\n\t}\n\n\tprivate _removeListener(listener: ErrorListenerCallback): void {\n\t\tthis.listeners.splice(this.listeners.indexOf(listener), 1);\n\t}\n\n\tsetUnexpectedErrorHandler(newUnexpectedErrorHandler: (e: any) => void): void {\n\t\tthis.unexpectedErrorHandler = newUnexpectedErrorHandler;\n\t}\n\n\tgetUnexpectedErrorHandler(): (e: any) => void {\n\t\treturn this.unexpectedErrorHandler;\n\t}\n\n\tonUnexpectedError(e: any): void {\n\t\tthis.unexpectedErrorHandler(e);\n\t\tthis.emit(e);\n\t}\n\n\t// For external errors, we don't want the listeners to be called\n\tonUnexpectedExternalError(e: any): void {\n\t\tthis.unexpectedErrorHandler(e);\n\t}\n}\n\nexport const errorHandler = new ErrorHandler();\n\nexport function setUnexpectedErrorHandler(newUnexpectedErrorHandler: (e: any) => void): void {\n\terrorHandler.setUnexpectedErrorHandler(newUnexpectedErrorHandler);\n}\n\nexport function onUnexpectedError(e: any): undefined {\n\t// ignore errors from cancelled promises\n\tif (!isPromiseCanceledError(e)) {\n\t\terrorHandler.onUnexpectedError(e);\n\t}\n\treturn undefined;\n}\n\nexport function onUnexpectedExternalError(e: any): undefined {\n\t// ignore errors from cancelled promises\n\tif (!isPromiseCanceledError(e)) {\n\t\terrorHandler.onUnexpectedExternalError(e);\n\t}\n\treturn undefined;\n}\n\nexport interface SerializedError {\n\treadonly $isError: true;\n\treadonly name: string;\n\treadonly message: string;\n\treadonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError;\nexport function transformErrorForSerialization(error: any): any;\nexport function transformErrorForSerialization(error: any): any {\n\tif (error instanceof Error) {\n\t\tlet { name, message } = error;\n\t\tconst stack: string = (<any>error).stacktrace || (<any>error).stack;\n\t\treturn {\n\t\t\t$isError: true,\n\t\t\tname,\n\t\t\tmessage,\n\t\t\tstack\n\t\t};\n\t}\n\n\t// return as is\n\treturn error;\n}\n\n// see https://github.com/v8/v8/wiki/Stack%20Trace%20API#basic-stack-traces\nexport interface V8CallSite {\n\tgetThis(): any;\n\tgetTypeName(): string;\n\tgetFunction(): string;\n\tgetFunctionName(): string;\n\tgetMethodName(): string;\n\tgetFileName(): string;\n\tgetLineNumber(): number;\n\tgetColumnNumber(): number;\n\tgetEvalOrigin(): string;\n\tisToplevel(): boolean;\n\tisEval(): boolean;\n\tisNative(): boolean;\n\tisConstructor(): boolean;\n\ttoString(): string;\n}\n\nconst canceledName = 'Canceled';\n\n/**\n * Checks if the given error is a promise in canceled state\n */\nexport function isPromiseCanceledError(error: any): boolean {\n\treturn error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\n\n// !!!IMPORTANT!!!\n// Do NOT change this class because it is also used as an API-type.\nexport class CancellationError extends Error {\n\tconstructor() {\n\t\tsuper(canceledName);\n\t\tthis.name = this.message;\n\t}\n}\n\n/**\n * Returns an error that signals cancellation.\n */\nexport function canceled(): Error {\n\tconst error = new Error(canceledName);\n\terror.name = error.message;\n\treturn error;\n}\n\nexport function illegalArgument(name?: string): Error {\n\tif (name) {\n\t\treturn new Error(`Illegal argument: ${name}`);\n\t} else {\n\t\treturn new Error('Illegal argument');\n\t}\n}\n\nexport function illegalState(name?: string): Error {\n\tif (name) {\n\t\treturn new Error(`Illegal state: ${name}`);\n\t} else {\n\t\treturn new Error('Illegal state');\n\t}\n}\n\nexport function readonly(name?: string): Error {\n\treturn name\n\t\t? new Error(`readonly property '${name} cannot be changed'`)\n\t\t: new Error('readonly property cannot be changed');\n}\n\nexport function disposed(what: string): Error {\n\tconst result = new Error(`${what} has been disposed`);\n\tresult.name = 'DISPOSED';\n\treturn result;\n}\n\nexport function getErrorMessage(err: any): string {\n\tif (!err) {\n\t\treturn 'Error';\n\t}\n\n\tif (err.message) {\n\t\treturn err.message;\n\t}\n\n\tif (err.stack) {\n\t\treturn err.stack.split('\\n')[0];\n\t}\n\n\treturn String(err);\n}\n\nexport class NotImplementedError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper('NotImplemented');\n\t\tif (message) {\n\t\t\tthis.message = message;\n\t\t}\n\t}\n}\n\nexport class NotSupportedError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper('NotSupported');\n\t\tif (message) {\n\t\t\tthis.message = message;\n\t\t}\n\t}\n}\n\nexport class ExpectedError extends Error {\n\treadonly isExpected = true;\n}\n\nexport interface IErrorOptions {\n\tactions?: readonly IAction[];\n}\n\nexport interface IErrorWithActions {\n\tactions?: readonly IAction[];\n}\n\nexport function isErrorWithActions(obj: unknown): obj is IErrorWithActions {\n\tconst candidate = obj as IErrorWithActions | undefined;\n\n\treturn candidate instanceof Error && Array.isArray(candidate.actions);\n}\n\nexport function createErrorWithActions(message: string, options: IErrorOptions = Object.create(null)): Error & IErrorWithActions {\n\tconst result = new Error(message);\n\n\tif (options.actions) {\n\t\t(result as IErrorWithActions).actions = options.actions;\n\t}\n\n\treturn result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { canceled } from 'vs/base/common/errors';\nimport { ISplice } from 'vs/base/common/sequence';\n\n/**\n * Returns the last element of an array.\n * @param array The array.\n * @param n Which element from the end (default is zero).\n */\nexport function tail<T>(array: ArrayLike<T>, n: number = 0): T {\n\treturn array[array.length - (1 + n)];\n}\n\nexport function tail2<T>(arr: T[]): [T[], T] {\n\tif (arr.length === 0) {\n\t\tthrow new Error('Invalid tail call');\n\t}\n\n\treturn [arr.slice(0, arr.length - 1), arr[arr.length - 1]];\n}\n\nexport function equals<T>(one: ReadonlyArray<T> | undefined, other: ReadonlyArray<T> | undefined, itemEquals: (a: T, b: T) => boolean = (a, b) => a === b): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\n\tif (!one || !other) {\n\t\treturn false;\n\t}\n\n\tif (one.length !== other.length) {\n\t\treturn false;\n\t}\n\n\tfor (let i = 0, len = one.length; i < len; i++) {\n\t\tif (!itemEquals(one[i], other[i])) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport function binarySearch<T>(array: ReadonlyArray<T>, key: T, comparator: (op1: T, op2: T) => number): number {\n\tlet low = 0,\n\t\thigh = array.length - 1;\n\n\twhile (low <= high) {\n\t\tconst mid = ((low + high) / 2) | 0;\n\t\tconst comp = comparator(array[mid], key);\n\t\tif (comp < 0) {\n\t\t\tlow = mid + 1;\n\t\t} else if (comp > 0) {\n\t\t\thigh = mid - 1;\n\t\t} else {\n\t\t\treturn mid;\n\t\t}\n\t}\n\treturn -(low + 1);\n}\n\n/**\n * Takes a sorted array and a function p. The array is sorted in such a way that all elements where p(x) is false\n * are located before all elements where p(x) is true.\n * @returns the least x for which p(x) is true or array.length if no element fullfills the given function.\n */\nexport function findFirstInSorted<T>(array: ReadonlyArray<T>, p: (x: T) => boolean): number {\n\tlet low = 0, high = array.length;\n\tif (high === 0) {\n\t\treturn 0; // no children\n\t}\n\twhile (low < high) {\n\t\tconst mid = Math.floor((low + high) / 2);\n\t\tif (p(array[mid])) {\n\t\t\thigh = mid;\n\t\t} else {\n\t\t\tlow = mid + 1;\n\t\t}\n\t}\n\treturn low;\n}\n\ntype Compare<T> = (a: T, b: T) => number;\n\n\nexport function quickSelect<T>(nth: number, data: T[], compare: Compare<T>): T {\n\n\tnth = nth | 0;\n\n\tif (nth >= data.length) {\n\t\tthrow new TypeError('invalid index');\n\t}\n\n\tlet pivotValue = data[Math.floor(data.length * Math.random())];\n\tlet lower: T[] = [];\n\tlet higher: T[] = [];\n\tlet pivots: T[] = [];\n\n\tfor (let value of data) {\n\t\tconst val = compare(value, pivotValue);\n\t\tif (val < 0) {\n\t\t\tlower.push(value);\n\t\t} else if (val > 0) {\n\t\t\thigher.push(value);\n\t\t} else {\n\t\t\tpivots.push(value);\n\t\t}\n\t}\n\n\tif (nth < lower.length) {\n\t\treturn quickSelect(nth, lower, compare);\n\t} else if (nth < lower.length + pivots.length) {\n\t\treturn pivots[0];\n\t} else {\n\t\treturn quickSelect(nth - (lower.length + pivots.length), higher, compare);\n\t}\n}\n\nexport function groupBy<T>(data: ReadonlyArray<T>, compare: (a: T, b: T) => number): T[][] {\n\tconst result: T[][] = [];\n\tlet currentGroup: T[] | undefined = undefined;\n\tfor (const element of data.slice(0).sort(compare)) {\n\t\tif (!currentGroup || compare(currentGroup[0], element) !== 0) {\n\t\t\tcurrentGroup = [element];\n\t\t\tresult.push(currentGroup);\n\t\t} else {\n\t\t\tcurrentGroup.push(element);\n\t\t}\n\t}\n\treturn result;\n}\n\ninterface IMutableSplice<T> extends ISplice<T> {\n\tdeleteCount: number;\n}\n\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nexport function sortedDiff<T>(before: ReadonlyArray<T>, after: ReadonlyArray<T>, compare: (a: T, b: T) => number): ISplice<T>[] {\n\tconst result: IMutableSplice<T>[] = [];\n\n\tfunction pushSplice(start: number, deleteCount: number, toInsert: T[]): void {\n\t\tif (deleteCount === 0 && toInsert.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst latest = result[result.length - 1];\n\n\t\tif (latest && latest.start + latest.deleteCount === start) {\n\t\t\tlatest.deleteCount += deleteCount;\n\t\t\tlatest.toInsert.push(...toInsert);\n\t\t} else {\n\t\t\tresult.push({ start, deleteCount, toInsert });\n\t\t}\n\t}\n\n\tlet beforeIdx = 0;\n\tlet afterIdx = 0;\n\n\twhile (true) {\n\t\tif (beforeIdx === before.length) {\n\t\t\tpushSplice(beforeIdx, 0, after.slice(afterIdx));\n\t\t\tbreak;\n\t\t}\n\t\tif (afterIdx === after.length) {\n\t\t\tpushSplice(beforeIdx, before.length - beforeIdx, []);\n\t\t\tbreak;\n\t\t}\n\n\t\tconst beforeElement = before[beforeIdx];\n\t\tconst afterElement = after[afterIdx];\n\t\tconst n = compare(beforeElement, afterElement);\n\t\tif (n === 0) {\n\t\t\t// equal\n\t\t\tbeforeIdx += 1;\n\t\t\tafterIdx += 1;\n\t\t} else if (n < 0) {\n\t\t\t// beforeElement is smaller -> before element removed\n\t\t\tpushSplice(beforeIdx, 1, []);\n\t\t\tbeforeIdx += 1;\n\t\t} else if (n > 0) {\n\t\t\t// beforeElement is greater -> after element added\n\t\t\tpushSplice(beforeIdx, 0, [afterElement]);\n\t\t\tafterIdx += 1;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Takes two *sorted* arrays and computes their delta (removed, added elements).\n * Finishes in `Math.min(before.length, after.length)` steps.\n */\nexport function delta<T>(before: ReadonlyArray<T>, after: ReadonlyArray<T>, compare: (a: T, b: T) => number): { removed: T[], added: T[] } {\n\tconst splices = sortedDiff(before, after, compare);\n\tconst removed: T[] = [];\n\tconst added: T[] = [];\n\n\tfor (const splice of splices) {\n\t\tremoved.push(...before.slice(splice.start, splice.start + splice.deleteCount));\n\t\tadded.push(...splice.toInsert);\n\t}\n\n\treturn { removed, added };\n}\n\n/**\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @return The first n elemnts from array when sorted with compare.\n */\nexport function top<T>(array: ReadonlyArray<T>, compare: (a: T, b: T) => number, n: number): T[] {\n\tif (n === 0) {\n\t\treturn [];\n\t}\n\tconst result = array.slice(0, n).sort(compare);\n\ttopStep(array, compare, result, n, array.length);\n\treturn result;\n}\n\n/**\n * Asynchronous variant of `top()` allowing for splitting up work in batches between which the event loop can run.\n *\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @param batch The number of elements to examine before yielding to the event loop.\n * @return The first n elemnts from array when sorted with compare.\n */\nexport function topAsync<T>(array: T[], compare: (a: T, b: T) => number, n: number, batch: number, token?: CancellationToken): Promise<T[]> {\n\tif (n === 0) {\n\t\treturn Promise.resolve([]);\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\t(async () => {\n\t\t\tconst o = array.length;\n\t\t\tconst result = array.slice(0, n).sort(compare);\n\t\t\tfor (let i = n, m = Math.min(n + batch, o); i < o; i = m, m = Math.min(m + batch, o)) {\n\t\t\t\tif (i > n) {\n\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve)); // nextTick() would starve I/O.\n\t\t\t\t}\n\t\t\t\tif (token && token.isCancellationRequested) {\n\t\t\t\t\tthrow canceled();\n\t\t\t\t}\n\t\t\t\ttopStep(array, compare, result, i, m);\n\t\t\t}\n\t\t\treturn result;\n\t\t})()\n\t\t\t.then(resolve, reject);\n\t});\n}\n\nfunction topStep<T>(array: ReadonlyArray<T>, compare: (a: T, b: T) => number, result: T[], i: number, m: number): void {\n\tfor (const n = result.length; i < m; i++) {\n\t\tconst element = array[i];\n\t\tif (compare(element, result[n - 1]) < 0) {\n\t\t\tresult.pop();\n\t\t\tconst j = findFirstInSorted(result, e => compare(element, e) < 0);\n\t\t\tresult.splice(j, 0, element);\n\t\t}\n\t}\n}\n\n/**\n * @returns New array with all falsy values removed. The original array IS NOT modified.\n */\nexport function coalesce<T>(array: ReadonlyArray<T | undefined | null>): T[] {\n\treturn <T[]>array.filter(e => !!e);\n}\n\n/**\n * Remove all falsey values from `array`. The original array IS modified.\n */\nexport function coalesceInPlace<T>(array: Array<T | undefined | null>): void {\n\tlet to = 0;\n\tfor (let i = 0; i < array.length; i++) {\n\t\tif (!!array[i]) {\n\t\t\tarray[to] = array[i];\n\t\t\tto += 1;\n\t\t}\n\t}\n\tarray.length = to;\n}\n\n/**\n * Moves the element in the array for the provided positions.\n */\nexport function move(array: any[], from: number, to: number): void {\n\tarray.splice(to, 0, array.splice(from, 1)[0]);\n}\n\n/**\n * @returns false if the provided object is an array and not empty.\n */\nexport function isFalsyOrEmpty(obj: any): boolean {\n\treturn !Array.isArray(obj) || obj.length === 0;\n}\n\n/**\n * @returns True if the provided object is an array and has at least one element.\n */\nexport function isNonEmptyArray<T>(obj: T[] | undefined | null): obj is T[];\nexport function isNonEmptyArray<T>(obj: readonly T[] | undefined | null): obj is readonly T[];\nexport function isNonEmptyArray<T>(obj: T[] | readonly T[] | undefined | null): obj is T[] | readonly T[] {\n\treturn Array.isArray(obj) && obj.length > 0;\n}\n\n/**\n * Removes duplicates from the given array. The optional keyFn allows to specify\n * how elements are checked for equalness by returning a unique string for each.\n */\nexport function distinct<T>(array: ReadonlyArray<T>, keyFn?: (t: T) => string): T[] {\n\tif (!keyFn) {\n\t\treturn array.filter((element, position) => {\n\t\t\treturn array.indexOf(element) === position;\n\t\t});\n\t}\n\n\tconst seen: { [key: string]: boolean; } = Object.create(null);\n\treturn array.filter((elem) => {\n\t\tconst key = keyFn(elem);\n\t\tif (seen[key]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tseen[key] = true;\n\n\t\treturn true;\n\t});\n}\n\nexport function distinctES6<T>(array: ReadonlyArray<T>): T[] {\n\tconst seen = new Set<T>();\n\treturn array.filter(element => {\n\t\tif (seen.has(element)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tseen.add(element);\n\t\treturn true;\n\t});\n}\n\nexport function uniqueFilter<T>(keyFn: (t: T) => string): (t: T) => boolean {\n\tconst seen: { [key: string]: boolean; } = Object.create(null);\n\n\treturn element => {\n\t\tconst key = keyFn(element);\n\n\t\tif (seen[key]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tseen[key] = true;\n\t\treturn true;\n\t};\n}\n\nexport function lastIndex<T>(array: ReadonlyArray<T>, fn: (item: T) => boolean): number {\n\tfor (let i = array.length - 1; i >= 0; i--) {\n\t\tconst element = array[i];\n\n\t\tif (fn(element)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\nexport function firstOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue: NotFound): T | NotFound;\nexport function firstOrDefault<T>(array: ReadonlyArray<T>): T | undefined;\nexport function firstOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue?: NotFound): T | NotFound | undefined {\n\treturn array.length > 0 ? array[0] : notFoundValue;\n}\n\nexport function commonPrefixLength<T>(one: ReadonlyArray<T>, other: ReadonlyArray<T>, equals: (a: T, b: T) => boolean = (a, b) => a === b): number {\n\tlet result = 0;\n\n\tfor (let i = 0, len = Math.min(one.length, other.length); i < len && equals(one[i], other[i]); i++) {\n\t\tresult++;\n\t}\n\n\treturn result;\n}\n\nexport function flatten<T>(arr: T[][]): T[] {\n\treturn (<T[]>[]).concat(...arr);\n}\n\nexport function range(to: number): number[];\nexport function range(from: number, to: number): number[];\nexport function range(arg: number, to?: number): number[] {\n\tlet from = typeof to === 'number' ? arg : 0;\n\n\tif (typeof to === 'number') {\n\t\tfrom = arg;\n\t} else {\n\t\tfrom = 0;\n\t\tto = arg;\n\t}\n\n\tconst result: number[] = [];\n\n\tif (from <= to) {\n\t\tfor (let i = from; i < to; i++) {\n\t\t\tresult.push(i);\n\t\t}\n\t} else {\n\t\tfor (let i = from; i > to; i--) {\n\t\t\tresult.push(i);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function index<T>(array: ReadonlyArray<T>, indexer: (t: T) => string): { [key: string]: T; };\nexport function index<T, R>(array: ReadonlyArray<T>, indexer: (t: T) => string, mapper: (t: T) => R): { [key: string]: R; };\nexport function index<T, R>(array: ReadonlyArray<T>, indexer: (t: T) => string, mapper?: (t: T) => R): { [key: string]: R; } {\n\treturn array.reduce((r, t) => {\n\t\tr[indexer(t)] = mapper ? mapper(t) : t;\n\t\treturn r;\n\t}, Object.create(null));\n}\n\n/**\n * Inserts an element into an array. Returns a function which, when\n * called, will remove that element from the array.\n */\nexport function insert<T>(array: T[], element: T): () => void {\n\tarray.push(element);\n\n\treturn () => remove(array, element);\n}\n\n/**\n * Removes an element from an array if it can be found.\n */\nexport function remove<T>(array: T[], element: T): T | undefined {\n\tconst index = array.indexOf(element);\n\tif (index > -1) {\n\t\tarray.splice(index, 1);\n\n\t\treturn element;\n\t}\n\n\treturn undefined;\n}\n\n/**\n * Insert `insertArr` inside `target` at `insertIndex`.\n * Please don't touch unless you understand https://jsperf.com/inserting-an-array-within-an-array\n */\nexport function arrayInsert<T>(target: T[], insertIndex: number, insertArr: T[]): T[] {\n\tconst before = target.slice(0, insertIndex);\n\tconst after = target.slice(insertIndex);\n\treturn before.concat(insertArr, after);\n}\n\n/**\n * Uses Fisher-Yates shuffle to shuffle the given array\n */\nexport function shuffle<T>(array: T[], _seed?: number): void {\n\tlet rand: () => number;\n\n\tif (typeof _seed === 'number') {\n\t\tlet seed = _seed;\n\t\t// Seeded random number generator in JS. Modified from:\n\t\t// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n\t\trand = () => {\n\t\t\tconst x = Math.sin(seed++) * 179426549; // throw away most significant digits and reduce any potential bias\n\t\t\treturn x - Math.floor(x);\n\t\t};\n\t} else {\n\t\trand = Math.random;\n\t}\n\n\tfor (let i = array.length - 1; i > 0; i -= 1) {\n\t\tconst j = Math.floor(rand() * (i + 1));\n\t\tconst temp = array[i];\n\t\tarray[i] = array[j];\n\t\tarray[j] = temp;\n\t}\n}\n\n/**\n * Pushes an element to the start of the array, if found.\n */\nexport function pushToStart<T>(arr: T[], value: T): void {\n\tconst index = arr.indexOf(value);\n\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t\tarr.unshift(value);\n\t}\n}\n\n/**\n * Pushes an element to the end of the array, if found.\n */\nexport function pushToEnd<T>(arr: T[], value: T): void {\n\tconst index = arr.indexOf(value);\n\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t\tarr.push(value);\n\t}\n}\n\nexport function mapArrayOrNot<T, U>(items: T | T[], fn: (_: T) => U): U | U[] {\n\treturn Array.isArray(items) ?\n\t\titems.map(fn) :\n\t\tfn(items);\n}\n\nexport function asArray<T>(x: T | T[]): T[];\nexport function asArray<T>(x: T | readonly T[]): readonly T[];\nexport function asArray<T>(x: T | T[]): T[] {\n\treturn Array.isArray(x) ? x : [x];\n}\n\nexport function getRandomElement<T>(arr: T[]): T | undefined {\n\treturn arr[Math.floor(Math.random() * arr.length)];\n}\n\n/**\n * Returns the first mapped value of the array which is not undefined.\n */\nexport function mapFind<T, R>(array: Iterable<T>, mapFn: (value: T) => R | undefined): R | undefined {\n\tfor (const value of array) {\n\t\tconst mapped = mapFn(value);\n\t\tif (mapped !== undefined) {\n\t\t\treturn mapped;\n\t\t}\n\t}\n\n\treturn undefined;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function once<T extends Function>(this: unknown, fn: T): T {\n\tconst _this = this;\n\tlet didCall = false;\n\tlet result: unknown;\n\n\treturn function () {\n\t\tif (didCall) {\n\t\t\treturn result;\n\t\t}\n\n\t\tdidCall = true;\n\t\tresult = fn.apply(_this, arguments);\n\n\t\treturn result;\n\t} as unknown as T;\n}\n","/*\nThe MIT License (MIT)\n\nCopyright  2015 Nicolas Bevacqua\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of\nthe Software, and to permit persons to whom the Software is furnished to do so,\nsubject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS\nFOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR\nCOPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER\nIN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN\nCONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n*/\n\nlet __insane_func;\n\n(function () { function r(e, n, t) { function o(i, f) { if (!n[i]) { if (!e[i]) { var c = \"function\" == typeof require && require; if (!f && c) return c(i, !0); if (u) return u(i, !0); var a = new Error(\"Cannot find module '\" + i + \"'\"); throw a.code = \"MODULE_NOT_FOUND\", a } var p = n[i] = { exports: {} }; e[i][0].call(p.exports, function (r) { var n = e[i][1][r]; return o(n || r) }, p, p.exports, r, e, n, t) } return n[i].exports } for (var u = \"function\" == typeof require && require, i = 0; i < t.length; i++)o(t[i]); return o } return r })()({\n\t1: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar toMap = require('./toMap');\n\t\tvar uris = ['background', 'base', 'cite', 'href', 'longdesc', 'src', 'usemap'];\n\n\t\tmodule.exports = {\n\t\t\turis: toMap(uris) // attributes that have an href and hence need to be sanitized\n\t\t};\n\n\t}, { \"./toMap\": 10 }], 2: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar defaults = {\n\t\t\tallowedAttributes: {\n\t\t\t\t'*': ['title', 'accesskey'],\n\t\t\t\ta: ['href', 'name', 'target', 'aria-label'],\n\t\t\t\tiframe: ['allowfullscreen', 'frameborder', 'src'],\n\t\t\t\timg: ['src', 'alt', 'title', 'aria-label']\n\t\t\t},\n\t\t\tallowedClasses: {},\n\t\t\tallowedSchemes: ['http', 'https', 'mailto'],\n\t\t\tallowedTags: [\n\t\t\t\t'a', 'abbr', 'article', 'b', 'blockquote', 'br', 'caption', 'code', 'del', 'details', 'div', 'em',\n\t\t\t\t'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'i', 'img', 'ins', 'kbd', 'li', 'main', 'mark',\n\t\t\t\t'ol', 'p', 'pre', 'section', 'span', 'strike', 'strong', 'sub', 'summary', 'sup', 'table',\n\t\t\t\t'tbody', 'td', 'th', 'thead', 'tr', 'u', 'ul'\n\t\t\t],\n\t\t\tfilter: null\n\t\t};\n\n\t\tmodule.exports = defaults;\n\n\t}, {}], 3: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar toMap = require('./toMap');\n\t\tvar voids = ['area', 'br', 'col', 'hr', 'img', 'wbr', 'input', 'base', 'basefont', 'link', 'meta'];\n\n\t\tmodule.exports = {\n\t\t\tvoids: toMap(voids)\n\t\t};\n\n\t}, { \"./toMap\": 10 }], 4: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar assign = require('assignment');\n\t\tvar parser = require('./parser');\n\t\tvar sanitizer = require('./sanitizer');\n\t\tvar defaults = require('./defaults');\n\n\t\tfunction insane(html, options, strict) {\n\t\t\tvar buffer = [];\n\t\t\tvar configuration = strict === true ? options : assign({}, defaults, options);\n\t\t\tvar handler = sanitizer(buffer, configuration);\n\n\t\t\tparser(html, handler);\n\n\t\t\treturn buffer.join('');\n\t\t}\n\n\t\tinsane.defaults = defaults;\n\t\tmodule.exports = insane;\n\t\t__insane_func = insane;\n\n\t}, { \"./defaults\": 2, \"./parser\": 7, \"./sanitizer\": 8, \"assignment\": 6, \"he\": 9 }], 5: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tmodule.exports = function lowercase(string) {\n\t\t\treturn typeof string === 'string' ? string.toLowerCase() : string;\n\t\t};\n\n\t}, {}], 6: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tfunction assignment(result) {\n\t\t\tvar stack = Array.prototype.slice.call(arguments, 1);\n\t\t\tvar item;\n\t\t\tvar key;\n\t\t\twhile (stack.length) {\n\t\t\t\titem = stack.shift();\n\t\t\t\tfor (key in item) {\n\t\t\t\t\tif (item.hasOwnProperty(key)) {\n\t\t\t\t\t\tif (Object.prototype.toString.call(result[key]) === '[object Object]') {\n\t\t\t\t\t\t\tresult[key] = assignment(result[key], item[key]);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult[key] = item[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tmodule.exports = assignment;\n\n\t}, {}], 7: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar lowercase = require('./lowercase');\n\t\tvar attributes = require('./attributes');\n\t\tvar elements = require('./elements');\n\t\tvar rstart = /^<\\s*([\\w:-]+)((?:\\s+[\\w:-]+(?:\\s*=\\s*(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>\\s]+))?)*)\\s*(\\/?)\\s*>/;\n\t\tvar rend = /^<\\s*\\/\\s*([\\w:-]+)[^>]*>/;\n\t\tvar rattrs = /([\\w:-]+)(?:\\s*=\\s*(?:(?:\"((?:[^\"])*)\")|(?:'((?:[^'])*)')|([^>\\s]+)))?/g;\n\t\tvar rtag = /^</;\n\t\tvar rtagend = /^<\\s*\\//;\n\n\t\tfunction createStack() {\n\t\t\tvar stack = [];\n\t\t\tstack.lastItem = function lastItem() {\n\t\t\t\treturn stack[stack.length - 1];\n\t\t\t};\n\t\t\treturn stack;\n\t\t}\n\n\t\tfunction parser(html, handler) {\n\t\t\tvar stack = createStack();\n\t\t\tvar last = html;\n\t\t\tvar chars;\n\n\t\t\twhile (html) {\n\t\t\t\tparsePart();\n\t\t\t}\n\t\t\tparseEndTag(); // clean up any remaining tags\n\n\t\t\tfunction parsePart() {\n\t\t\t\tchars = true;\n\t\t\t\tparseTag();\n\n\t\t\t\tvar same = html === last;\n\t\t\t\tlast = html;\n\n\t\t\t\tif (same) { // discard, because it's invalid\n\t\t\t\t\thtml = '';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseTag() {\n\t\t\t\tif (html.substr(0, 4) === '<!--') { // comments\n\t\t\t\t\tparseComment();\n\t\t\t\t} else if (rtagend.test(html)) {\n\t\t\t\t\tparseEdge(rend, parseEndTag);\n\t\t\t\t} else if (rtag.test(html)) {\n\t\t\t\t\tparseEdge(rstart, parseStartTag);\n\t\t\t\t}\n\t\t\t\tparseTagDecode();\n\t\t\t}\n\n\t\t\tfunction parseEdge(regex, parser) {\n\t\t\t\tvar match = html.match(regex);\n\t\t\t\tif (match) {\n\t\t\t\t\thtml = html.substring(match[0].length);\n\t\t\t\t\tmatch[0].replace(regex, parser);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseComment() {\n\t\t\t\tvar index = html.indexOf('-->');\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\tif (handler.comment) {\n\t\t\t\t\t\thandler.comment(html.substring(4, index));\n\t\t\t\t\t}\n\t\t\t\t\thtml = html.substring(index + 3);\n\t\t\t\t\tchars = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseTagDecode() {\n\t\t\t\tif (!chars) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tvar text;\n\t\t\t\tvar index = html.indexOf('<');\n\t\t\t\tif (index >= 0) {\n\t\t\t\t\ttext = html.substring(0, index);\n\t\t\t\t\thtml = html.substring(index);\n\t\t\t\t} else {\n\t\t\t\t\ttext = html;\n\t\t\t\t\thtml = '';\n\t\t\t\t}\n\t\t\t\tif (handler.chars) {\n\t\t\t\t\thandler.chars(text);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseStartTag(tag, tagName, rest, unary) {\n\t\t\t\tvar attrs = {};\n\t\t\t\tvar low = lowercase(tagName);\n\t\t\t\tvar u = elements.voids[low] || !!unary;\n\n\t\t\t\trest.replace(rattrs, attrReplacer);\n\n\t\t\t\tif (!u) {\n\t\t\t\t\tstack.push(low);\n\t\t\t\t}\n\t\t\t\tif (handler.start) {\n\t\t\t\t\thandler.start(low, attrs, u);\n\t\t\t\t}\n\n\t\t\t\tfunction attrReplacer(match, name, doubleQuotedValue, singleQuotedValue, unquotedValue) {\n\t\t\t\t\tif (doubleQuotedValue === void 0 && singleQuotedValue === void 0 && unquotedValue === void 0) {\n\t\t\t\t\t\tattrs[name] = void 0; // attribute is like <button disabled></button>\n\t\t\t\t\t} else {\n\t\t\t\t\t\tattrs[name] = he.decode(doubleQuotedValue || singleQuotedValue || unquotedValue || '');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction parseEndTag(tag, tagName) {\n\t\t\t\tvar i;\n\t\t\t\tvar pos = 0;\n\t\t\t\tvar low = lowercase(tagName);\n\t\t\t\tif (low) {\n\t\t\t\t\tfor (pos = stack.length - 1; pos >= 0; pos--) {\n\t\t\t\t\t\tif (stack[pos] === low) {\n\t\t\t\t\t\t\tbreak; // find the closest opened tag of the same type\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pos >= 0) {\n\t\t\t\t\tfor (i = stack.length - 1; i >= pos; i--) {\n\t\t\t\t\t\tif (handler.end) { // close all the open elements, up the stack\n\t\t\t\t\t\t\thandler.end(stack[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tstack.length = pos;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports = parser;\n\n\t}, { \"./attributes\": 1, \"./elements\": 3, \"./lowercase\": 5, \"he\": 9 }], 8: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar he = require('he');\n\t\tvar lowercase = require('./lowercase');\n\t\tvar attributes = require('./attributes');\n\t\tvar elements = require('./elements');\n\n\t\tfunction sanitizer(buffer, options) {\n\t\t\tvar last;\n\t\t\tvar context;\n\t\t\tvar o = options || {};\n\n\t\t\treset();\n\n\t\t\treturn {\n\t\t\t\tstart: start,\n\t\t\t\tend: end,\n\t\t\t\tchars: chars\n\t\t\t};\n\n\t\t\tfunction out(value) {\n\t\t\t\tbuffer.push(value);\n\t\t\t}\n\n\t\t\tfunction start(tag, attrs, unary) {\n\t\t\t\tvar low = lowercase(tag);\n\n\t\t\t\tif (context.ignoring) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\t\t\t\tif ((o.allowedTags || []).indexOf(low) === -1) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\t\t\t\tif (o.filter && !o.filter({ tag: low, attrs: attrs })) {\n\t\t\t\t\tignore(low); return;\n\t\t\t\t}\n\n\t\t\t\tout('<');\n\t\t\t\tout(low);\n\t\t\t\tObject.keys(attrs).forEach(parse);\n\t\t\t\tout(unary ? '/>' : '>');\n\n\t\t\t\tfunction parse(key) {\n\t\t\t\t\tvar value = attrs[key];\n\t\t\t\t\tvar classesOk = (o.allowedClasses || {})[low] || [];\n\t\t\t\t\tvar attrsOk = (o.allowedAttributes || {})[low] || [];\n\t\t\t\t\tattrsOk = attrsOk.concat((o.allowedAttributes || {})['*'] || []);\n\t\t\t\t\tvar valid;\n\t\t\t\t\tvar lkey = lowercase(key);\n\t\t\t\t\tif (lkey === 'class' && attrsOk.indexOf(lkey) === -1) {\n\t\t\t\t\t\tvalue = value.split(' ').filter(isValidClass).join(' ').trim();\n\t\t\t\t\t\tvalid = value.length;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalid = attrsOk.indexOf(lkey) !== -1 && (attributes.uris[lkey] !== true || testUrl(value));\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tout(' ');\n\t\t\t\t\t\tout(key);\n\t\t\t\t\t\tif (typeof value === 'string') {\n\t\t\t\t\t\t\tout('=\"');\n\t\t\t\t\t\t\tout(he.encode(value));\n\t\t\t\t\t\t\tout('\"');\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tfunction isValidClass(className) {\n\t\t\t\t\t\treturn classesOk && classesOk.indexOf(className) !== -1;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction end(tag) {\n\t\t\t\tvar low = lowercase(tag);\n\t\t\t\tvar allowed = (o.allowedTags || []).indexOf(low) !== -1;\n\t\t\t\tif (allowed) {\n\t\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\t\tout('</');\n\t\t\t\t\t\tout(low);\n\t\t\t\t\t\tout('>');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tunignore(low);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tunignore(low);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction testUrl(text) {\n\t\t\t\tvar start = text[0];\n\t\t\t\tif (start === '#' || start === '/') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar colon = text.indexOf(':');\n\t\t\t\tif (colon === -1) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar questionmark = text.indexOf('?');\n\t\t\t\tif (questionmark !== -1 && colon > questionmark) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\tvar hash = text.indexOf('#');\n\t\t\t\tif (hash !== -1 && colon > hash) {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn o.allowedSchemes.some(matches);\n\n\t\t\t\tfunction matches(scheme) {\n\t\t\t\t\treturn text.indexOf(scheme + ':') === 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction chars(text) {\n\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\tout(o.transformText ? o.transformText(text) : text);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction ignore(tag) {\n\t\t\t\tif (elements.voids[tag]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (context.ignoring === false) {\n\t\t\t\t\tcontext = { ignoring: tag, depth: 1 };\n\t\t\t\t} else if (context.ignoring === tag) {\n\t\t\t\t\tcontext.depth++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction unignore(tag) {\n\t\t\t\tif (context.ignoring === tag) {\n\t\t\t\t\tif (--context.depth <= 0) {\n\t\t\t\t\t\treset();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction reset() {\n\t\t\t\tcontext = { ignoring: false, depth: 0 };\n\t\t\t}\n\t\t}\n\n\t\tmodule.exports = sanitizer;\n\n\t}, { \"./attributes\": 1, \"./elements\": 3, \"./lowercase\": 5, \"he\": 9 }], 9: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tvar escapes = {\n\t\t\t'&': '&amp;',\n\t\t\t'<': '&lt;',\n\t\t\t'>': '&gt;',\n\t\t\t'\"': '&quot;',\n\t\t\t\"'\": '&#39;'\n\t\t};\n\t\tvar unescapes = {\n\t\t\t'&amp;': '&',\n\t\t\t'&lt;': '<',\n\t\t\t'&gt;': '>',\n\t\t\t'&quot;': '\"',\n\t\t\t'&#39;': \"'\"\n\t\t};\n\t\tvar rescaped = /(&amp;|&lt;|&gt;|&quot;|&#39;)/g;\n\t\tvar runescaped = /[&<>\"']/g;\n\n\t\tfunction escapeHtmlChar(match) {\n\t\t\treturn escapes[match];\n\t\t}\n\t\tfunction unescapeHtmlChar(match) {\n\t\t\treturn unescapes[match];\n\t\t}\n\n\t\tfunction escapeHtml(text) {\n\t\t\treturn text == null ? '' : String(text).replace(runescaped, escapeHtmlChar);\n\t\t}\n\n\t\tfunction unescapeHtml(html) {\n\t\t\treturn html == null ? '' : String(html).replace(rescaped, unescapeHtmlChar);\n\t\t}\n\n\t\tescapeHtml.options = unescapeHtml.options = {};\n\n\t\tmodule.exports = {\n\t\t\tencode: escapeHtml,\n\t\t\tescape: escapeHtml,\n\t\t\tdecode: unescapeHtml,\n\t\t\tunescape: unescapeHtml,\n\t\t\tversion: '1.0.0-browser'\n\t\t};\n\n\t}, {}], 10: [function (require, module, exports) {\n\t\t'use strict';\n\n\t\tfunction toMap(list) {\n\t\t\treturn list.reduce(asKey, {});\n\t\t}\n\n\t\tfunction asKey(accumulator, item) {\n\t\t\taccumulator[item] = true;\n\t\t\treturn accumulator;\n\t\t}\n\n\t\tmodule.exports = toMap;\n\n\t}, {}]\n}, {}, [4]);\n\n// ESM-comment-begin\ndefine(\"vs/base/common/insane/insane\", function() { return { insane: __insane_func }; });\n// ESM-comment-end\n\n// ESM-uncomment-begin\n// export var insane = __insane_func;\n// ESM-uncomment-end\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport namespace Iterable {\n\n\texport function is<T = any>(thing: any): thing is IterableIterator<T> {\n\t\treturn thing && typeof thing === 'object' && typeof thing[Symbol.iterator] === 'function';\n\t}\n\n\tconst _empty: Iterable<any> = Object.freeze([]);\n\texport function empty<T = any>(): Iterable<T> {\n\t\treturn _empty;\n\t}\n\n\texport function* single<T>(element: T): Iterable<T> {\n\t\tyield element;\n\t}\n\n\texport function from<T>(iterable: Iterable<T> | undefined | null): Iterable<T> {\n\t\treturn iterable || _empty;\n\t}\n\n\texport function isEmpty<T>(iterable: Iterable<T> | undefined | null): boolean {\n\t\treturn !iterable || iterable[Symbol.iterator]().next().done === true;\n\t}\n\n\texport function first<T>(iterable: Iterable<T>): T | undefined {\n\t\treturn iterable[Symbol.iterator]().next().value;\n\t}\n\n\texport function some<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): boolean {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\texport function find<T, R extends T>(iterable: Iterable<T>, predicate: (t: T) => t is R): T | undefined;\n\texport function find<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): T | undefined;\n\texport function find<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): T | undefined {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\treturn element;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\texport function filter<T, R extends T>(iterable: Iterable<T>, predicate: (t: T) => t is R): Iterable<R>;\n\texport function filter<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): Iterable<T>;\n\texport function* filter<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): Iterable<T> {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\tyield element;\n\t\t\t}\n\t\t}\n\t}\n\n\texport function* map<T, R>(iterable: Iterable<T>, fn: (t: T) => R): Iterable<R> {\n\t\tfor (const element of iterable) {\n\t\t\tyield fn(element);\n\t\t}\n\t}\n\n\texport function* concat<T>(...iterables: Iterable<T>[]): Iterable<T> {\n\t\tfor (const iterable of iterables) {\n\t\t\tfor (const element of iterable) {\n\t\t\t\tyield element;\n\t\t\t}\n\t\t}\n\t}\n\n\texport function* concatNested<T>(iterables: Iterable<Iterable<T>>): Iterable<T> {\n\t\tfor (const iterable of iterables) {\n\t\t\tfor (const element of iterable) {\n\t\t\t\tyield element;\n\t\t\t}\n\t\t}\n\t}\n\n\texport function reduce<T, R>(iterable: Iterable<T>, reducer: (previousValue: R, currentValue: T) => R, initialValue: R): R {\n\t\tlet value = initialValue;\n\t\tfor (const element of iterable) {\n\t\t\tvalue = reducer(value, element);\n\t\t}\n\t\treturn value;\n\t}\n\n\t/**\n\t * Returns an iterable slice of the array, with the same semantics as `array.slice()`.\n\t */\n\texport function* slice<T>(arr: ReadonlyArray<T>, from: number, to = arr.length): Iterable<T> {\n\t\tif (from < 0) {\n\t\t\tfrom += arr.length;\n\t\t}\n\n\t\tif (to < 0) {\n\t\t\tto += arr.length;\n\t\t} else if (to > arr.length) {\n\t\t\tto = arr.length;\n\t\t}\n\n\t\tfor (; from < to; from++) {\n\t\t\tyield arr[from];\n\t\t}\n\t}\n\n\t/**\n\t * Consumes `atMost` elements from iterable and returns the consumed elements,\n\t * and an iterable for the rest of the elements.\n\t */\n\texport function consume<T>(iterable: Iterable<T>, atMost: number = Number.POSITIVE_INFINITY): [T[], Iterable<T>] {\n\t\tconst consumed: T[] = [];\n\n\t\tif (atMost === 0) {\n\t\t\treturn [consumed, iterable];\n\t\t}\n\n\t\tconst iterator = iterable[Symbol.iterator]();\n\n\t\tfor (let i = 0; i < atMost; i++) {\n\t\t\tconst next = iterator.next();\n\n\t\t\tif (next.done) {\n\t\t\t\treturn [consumed, Iterable.empty()];\n\t\t\t}\n\n\t\t\tconsumed.push(next.value);\n\t\t}\n\n\t\treturn [consumed, { [Symbol.iterator]() { return iterator; } }];\n\t}\n\n\t/**\n\t * Returns whether the iterables are the same length and all items are\n\t * equal using the comparator function.\n\t */\n\texport function equals<T>(a: Iterable<T>, b: Iterable<T>, comparator = (at: T, bt: T) => at === bt) {\n\t\tconst ai = a[Symbol.iterator]();\n\t\tconst bi = b[Symbol.iterator]();\n\t\twhile (true) {\n\t\t\tconst an = ai.next();\n\t\t\tconst bn = bi.next();\n\n\t\t\tif (an.done !== bn.done) {\n\t\t\t\treturn false;\n\t\t\t} else if (an.done) {\n\t\t\t\treturn true;\n\t\t\t} else if (!comparator(an.value, bn.value)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { OperatingSystem } from 'vs/base/common/platform';\nimport { illegalArgument } from 'vs/base/common/errors';\n\n/**\n * Virtual Key Codes, the value does not hold any inherent meaning.\n * Inspired somewhat from https://msdn.microsoft.com/en-us/library/windows/desktop/dd375731(v=vs.85).aspx\n * But these are \"more general\", as they should work across browsers & OS`s.\n */\nexport const enum KeyCode {\n\tDependsOnKbLayout = -1,\n\n\t/**\n\t * Placed first to cover the 0 value of the enum.\n\t */\n\tUnknown = 0,\n\n\tBackspace = 1,\n\tTab = 2,\n\tEnter = 3,\n\tShift = 4,\n\tCtrl = 5,\n\tAlt = 6,\n\tPauseBreak = 7,\n\tCapsLock = 8,\n\tEscape = 9,\n\tSpace = 10,\n\tPageUp = 11,\n\tPageDown = 12,\n\tEnd = 13,\n\tHome = 14,\n\tLeftArrow = 15,\n\tUpArrow = 16,\n\tRightArrow = 17,\n\tDownArrow = 18,\n\tInsert = 19,\n\tDelete = 20,\n\n\tKEY_0 = 21,\n\tKEY_1 = 22,\n\tKEY_2 = 23,\n\tKEY_3 = 24,\n\tKEY_4 = 25,\n\tKEY_5 = 26,\n\tKEY_6 = 27,\n\tKEY_7 = 28,\n\tKEY_8 = 29,\n\tKEY_9 = 30,\n\n\tKEY_A = 31,\n\tKEY_B = 32,\n\tKEY_C = 33,\n\tKEY_D = 34,\n\tKEY_E = 35,\n\tKEY_F = 36,\n\tKEY_G = 37,\n\tKEY_H = 38,\n\tKEY_I = 39,\n\tKEY_J = 40,\n\tKEY_K = 41,\n\tKEY_L = 42,\n\tKEY_M = 43,\n\tKEY_N = 44,\n\tKEY_O = 45,\n\tKEY_P = 46,\n\tKEY_Q = 47,\n\tKEY_R = 48,\n\tKEY_S = 49,\n\tKEY_T = 50,\n\tKEY_U = 51,\n\tKEY_V = 52,\n\tKEY_W = 53,\n\tKEY_X = 54,\n\tKEY_Y = 55,\n\tKEY_Z = 56,\n\n\tMeta = 57,\n\tContextMenu = 58,\n\n\tF1 = 59,\n\tF2 = 60,\n\tF3 = 61,\n\tF4 = 62,\n\tF5 = 63,\n\tF6 = 64,\n\tF7 = 65,\n\tF8 = 66,\n\tF9 = 67,\n\tF10 = 68,\n\tF11 = 69,\n\tF12 = 70,\n\tF13 = 71,\n\tF14 = 72,\n\tF15 = 73,\n\tF16 = 74,\n\tF17 = 75,\n\tF18 = 76,\n\tF19 = 77,\n\n\tNumLock = 78,\n\tScrollLock = 79,\n\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t * For the US standard keyboard, the ';:' key\n\t */\n\tUS_SEMICOLON = 80,\n\t/**\n\t * For any country/region, the '+' key\n\t * For the US standard keyboard, the '=+' key\n\t */\n\tUS_EQUAL = 81,\n\t/**\n\t * For any country/region, the ',' key\n\t * For the US standard keyboard, the ',<' key\n\t */\n\tUS_COMMA = 82,\n\t/**\n\t * For any country/region, the '-' key\n\t * For the US standard keyboard, the '-_' key\n\t */\n\tUS_MINUS = 83,\n\t/**\n\t * For any country/region, the '.' key\n\t * For the US standard keyboard, the '.>' key\n\t */\n\tUS_DOT = 84,\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t * For the US standard keyboard, the '/?' key\n\t */\n\tUS_SLASH = 85,\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t * For the US standard keyboard, the '`~' key\n\t */\n\tUS_BACKTICK = 86,\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t * For the US standard keyboard, the '[{' key\n\t */\n\tUS_OPEN_SQUARE_BRACKET = 87,\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t * For the US standard keyboard, the '\\|' key\n\t */\n\tUS_BACKSLASH = 88,\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t * For the US standard keyboard, the ']}' key\n\t */\n\tUS_CLOSE_SQUARE_BRACKET = 89,\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t * For the US standard keyboard, the ''\"' key\n\t */\n\tUS_QUOTE = 90,\n\t/**\n\t * Used for miscellaneous characters; it can vary by keyboard.\n\t */\n\tOEM_8 = 91,\n\t/**\n\t * Either the angle bracket key or the backslash key on the RT 102-key keyboard.\n\t */\n\tOEM_102 = 92,\n\n\tNUMPAD_0 = 93, // VK_NUMPAD0, 0x60, Numeric keypad 0 key\n\tNUMPAD_1 = 94, // VK_NUMPAD1, 0x61, Numeric keypad 1 key\n\tNUMPAD_2 = 95, // VK_NUMPAD2, 0x62, Numeric keypad 2 key\n\tNUMPAD_3 = 96, // VK_NUMPAD3, 0x63, Numeric keypad 3 key\n\tNUMPAD_4 = 97, // VK_NUMPAD4, 0x64, Numeric keypad 4 key\n\tNUMPAD_5 = 98, // VK_NUMPAD5, 0x65, Numeric keypad 5 key\n\tNUMPAD_6 = 99, // VK_NUMPAD6, 0x66, Numeric keypad 6 key\n\tNUMPAD_7 = 100, // VK_NUMPAD7, 0x67, Numeric keypad 7 key\n\tNUMPAD_8 = 101, // VK_NUMPAD8, 0x68, Numeric keypad 8 key\n\tNUMPAD_9 = 102, // VK_NUMPAD9, 0x69, Numeric keypad 9 key\n\n\tNUMPAD_MULTIPLY = 103,\t// VK_MULTIPLY, 0x6A, Multiply key\n\tNUMPAD_ADD = 104,\t\t// VK_ADD, 0x6B, Add key\n\tNUMPAD_SEPARATOR = 105,\t// VK_SEPARATOR, 0x6C, Separator key\n\tNUMPAD_SUBTRACT = 106,\t// VK_SUBTRACT, 0x6D, Subtract key\n\tNUMPAD_DECIMAL = 107,\t// VK_DECIMAL, 0x6E, Decimal key\n\tNUMPAD_DIVIDE = 108,\t// VK_DIVIDE, 0x6F,\n\n\t/**\n\t * Cover all key codes when IME is processing input.\n\t */\n\tKEY_IN_COMPOSITION = 109,\n\n\tABNT_C1 = 110, // Brazilian (ABNT) Keyboard\n\tABNT_C2 = 111, // Brazilian (ABNT) Keyboard\n\n\t/**\n\t * Placed last to cover the length of the enum.\n\t * Please do not depend on this value!\n\t */\n\tMAX_VALUE\n}\n\nclass KeyCodeStrMap {\n\n\tprivate _keyCodeToStr: string[];\n\tprivate _strToKeyCode: { [str: string]: KeyCode; };\n\n\tconstructor() {\n\t\tthis._keyCodeToStr = [];\n\t\tthis._strToKeyCode = Object.create(null);\n\t}\n\n\tdefine(keyCode: KeyCode, str: string): void {\n\t\tthis._keyCodeToStr[keyCode] = str;\n\t\tthis._strToKeyCode[str.toLowerCase()] = keyCode;\n\t}\n\n\tkeyCodeToStr(keyCode: KeyCode): string {\n\t\treturn this._keyCodeToStr[keyCode];\n\t}\n\n\tstrToKeyCode(str: string): KeyCode {\n\t\treturn this._strToKeyCode[str.toLowerCase()] || KeyCode.Unknown;\n\t}\n}\n\nconst uiMap = new KeyCodeStrMap();\nconst userSettingsUSMap = new KeyCodeStrMap();\nconst userSettingsGeneralMap = new KeyCodeStrMap();\n\n(function () {\n\n\tfunction define(keyCode: KeyCode, uiLabel: string, usUserSettingsLabel: string = uiLabel, generalUserSettingsLabel: string = usUserSettingsLabel): void {\n\t\tuiMap.define(keyCode, uiLabel);\n\t\tuserSettingsUSMap.define(keyCode, usUserSettingsLabel);\n\t\tuserSettingsGeneralMap.define(keyCode, generalUserSettingsLabel);\n\t}\n\n\tdefine(KeyCode.Unknown, 'unknown');\n\n\tdefine(KeyCode.Backspace, 'Backspace');\n\tdefine(KeyCode.Tab, 'Tab');\n\tdefine(KeyCode.Enter, 'Enter');\n\tdefine(KeyCode.Shift, 'Shift');\n\tdefine(KeyCode.Ctrl, 'Ctrl');\n\tdefine(KeyCode.Alt, 'Alt');\n\tdefine(KeyCode.PauseBreak, 'PauseBreak');\n\tdefine(KeyCode.CapsLock, 'CapsLock');\n\tdefine(KeyCode.Escape, 'Escape');\n\tdefine(KeyCode.Space, 'Space');\n\tdefine(KeyCode.PageUp, 'PageUp');\n\tdefine(KeyCode.PageDown, 'PageDown');\n\tdefine(KeyCode.End, 'End');\n\tdefine(KeyCode.Home, 'Home');\n\n\tdefine(KeyCode.LeftArrow, 'LeftArrow', 'Left');\n\tdefine(KeyCode.UpArrow, 'UpArrow', 'Up');\n\tdefine(KeyCode.RightArrow, 'RightArrow', 'Right');\n\tdefine(KeyCode.DownArrow, 'DownArrow', 'Down');\n\tdefine(KeyCode.Insert, 'Insert');\n\tdefine(KeyCode.Delete, 'Delete');\n\n\tdefine(KeyCode.KEY_0, '0');\n\tdefine(KeyCode.KEY_1, '1');\n\tdefine(KeyCode.KEY_2, '2');\n\tdefine(KeyCode.KEY_3, '3');\n\tdefine(KeyCode.KEY_4, '4');\n\tdefine(KeyCode.KEY_5, '5');\n\tdefine(KeyCode.KEY_6, '6');\n\tdefine(KeyCode.KEY_7, '7');\n\tdefine(KeyCode.KEY_8, '8');\n\tdefine(KeyCode.KEY_9, '9');\n\n\tdefine(KeyCode.KEY_A, 'A');\n\tdefine(KeyCode.KEY_B, 'B');\n\tdefine(KeyCode.KEY_C, 'C');\n\tdefine(KeyCode.KEY_D, 'D');\n\tdefine(KeyCode.KEY_E, 'E');\n\tdefine(KeyCode.KEY_F, 'F');\n\tdefine(KeyCode.KEY_G, 'G');\n\tdefine(KeyCode.KEY_H, 'H');\n\tdefine(KeyCode.KEY_I, 'I');\n\tdefine(KeyCode.KEY_J, 'J');\n\tdefine(KeyCode.KEY_K, 'K');\n\tdefine(KeyCode.KEY_L, 'L');\n\tdefine(KeyCode.KEY_M, 'M');\n\tdefine(KeyCode.KEY_N, 'N');\n\tdefine(KeyCode.KEY_O, 'O');\n\tdefine(KeyCode.KEY_P, 'P');\n\tdefine(KeyCode.KEY_Q, 'Q');\n\tdefine(KeyCode.KEY_R, 'R');\n\tdefine(KeyCode.KEY_S, 'S');\n\tdefine(KeyCode.KEY_T, 'T');\n\tdefine(KeyCode.KEY_U, 'U');\n\tdefine(KeyCode.KEY_V, 'V');\n\tdefine(KeyCode.KEY_W, 'W');\n\tdefine(KeyCode.KEY_X, 'X');\n\tdefine(KeyCode.KEY_Y, 'Y');\n\tdefine(KeyCode.KEY_Z, 'Z');\n\n\tdefine(KeyCode.Meta, 'Meta');\n\tdefine(KeyCode.ContextMenu, 'ContextMenu');\n\n\tdefine(KeyCode.F1, 'F1');\n\tdefine(KeyCode.F2, 'F2');\n\tdefine(KeyCode.F3, 'F3');\n\tdefine(KeyCode.F4, 'F4');\n\tdefine(KeyCode.F5, 'F5');\n\tdefine(KeyCode.F6, 'F6');\n\tdefine(KeyCode.F7, 'F7');\n\tdefine(KeyCode.F8, 'F8');\n\tdefine(KeyCode.F9, 'F9');\n\tdefine(KeyCode.F10, 'F10');\n\tdefine(KeyCode.F11, 'F11');\n\tdefine(KeyCode.F12, 'F12');\n\tdefine(KeyCode.F13, 'F13');\n\tdefine(KeyCode.F14, 'F14');\n\tdefine(KeyCode.F15, 'F15');\n\tdefine(KeyCode.F16, 'F16');\n\tdefine(KeyCode.F17, 'F17');\n\tdefine(KeyCode.F18, 'F18');\n\tdefine(KeyCode.F19, 'F19');\n\n\tdefine(KeyCode.NumLock, 'NumLock');\n\tdefine(KeyCode.ScrollLock, 'ScrollLock');\n\n\tdefine(KeyCode.US_SEMICOLON, ';', ';', 'OEM_1');\n\tdefine(KeyCode.US_EQUAL, '=', '=', 'OEM_PLUS');\n\tdefine(KeyCode.US_COMMA, ',', ',', 'OEM_COMMA');\n\tdefine(KeyCode.US_MINUS, '-', '-', 'OEM_MINUS');\n\tdefine(KeyCode.US_DOT, '.', '.', 'OEM_PERIOD');\n\tdefine(KeyCode.US_SLASH, '/', '/', 'OEM_2');\n\tdefine(KeyCode.US_BACKTICK, '`', '`', 'OEM_3');\n\tdefine(KeyCode.ABNT_C1, 'ABNT_C1');\n\tdefine(KeyCode.ABNT_C2, 'ABNT_C2');\n\tdefine(KeyCode.US_OPEN_SQUARE_BRACKET, '[', '[', 'OEM_4');\n\tdefine(KeyCode.US_BACKSLASH, '\\\\', '\\\\', 'OEM_5');\n\tdefine(KeyCode.US_CLOSE_SQUARE_BRACKET, ']', ']', 'OEM_6');\n\tdefine(KeyCode.US_QUOTE, '\\'', '\\'', 'OEM_7');\n\tdefine(KeyCode.OEM_8, 'OEM_8');\n\tdefine(KeyCode.OEM_102, 'OEM_102');\n\n\tdefine(KeyCode.NUMPAD_0, 'NumPad0');\n\tdefine(KeyCode.NUMPAD_1, 'NumPad1');\n\tdefine(KeyCode.NUMPAD_2, 'NumPad2');\n\tdefine(KeyCode.NUMPAD_3, 'NumPad3');\n\tdefine(KeyCode.NUMPAD_4, 'NumPad4');\n\tdefine(KeyCode.NUMPAD_5, 'NumPad5');\n\tdefine(KeyCode.NUMPAD_6, 'NumPad6');\n\tdefine(KeyCode.NUMPAD_7, 'NumPad7');\n\tdefine(KeyCode.NUMPAD_8, 'NumPad8');\n\tdefine(KeyCode.NUMPAD_9, 'NumPad9');\n\n\tdefine(KeyCode.NUMPAD_MULTIPLY, 'NumPad_Multiply');\n\tdefine(KeyCode.NUMPAD_ADD, 'NumPad_Add');\n\tdefine(KeyCode.NUMPAD_SEPARATOR, 'NumPad_Separator');\n\tdefine(KeyCode.NUMPAD_SUBTRACT, 'NumPad_Subtract');\n\tdefine(KeyCode.NUMPAD_DECIMAL, 'NumPad_Decimal');\n\tdefine(KeyCode.NUMPAD_DIVIDE, 'NumPad_Divide');\n\n})();\n\nexport namespace KeyCodeUtils {\n\texport function toString(keyCode: KeyCode): string {\n\t\treturn uiMap.keyCodeToStr(keyCode);\n\t}\n\texport function fromString(key: string): KeyCode {\n\t\treturn uiMap.strToKeyCode(key);\n\t}\n\n\texport function toUserSettingsUS(keyCode: KeyCode): string {\n\t\treturn userSettingsUSMap.keyCodeToStr(keyCode);\n\t}\n\texport function toUserSettingsGeneral(keyCode: KeyCode): string {\n\t\treturn userSettingsGeneralMap.keyCodeToStr(keyCode);\n\t}\n\texport function fromUserSettings(key: string): KeyCode {\n\t\treturn userSettingsUSMap.strToKeyCode(key) || userSettingsGeneralMap.strToKeyCode(key);\n\t}\n}\n\n/**\n * Binary encoding strategy:\n * ```\n *    1111 11\n *    5432 1098 7654 3210\n *    ---- CSAW KKKK KKKK\n *  C = bit 11 = ctrlCmd flag\n *  S = bit 10 = shift flag\n *  A = bit 9 = alt flag\n *  W = bit 8 = winCtrl flag\n *  K = bits 0-7 = key code\n * ```\n */\nconst enum BinaryKeybindingsMask {\n\tCtrlCmd = (1 << 11) >>> 0,\n\tShift = (1 << 10) >>> 0,\n\tAlt = (1 << 9) >>> 0,\n\tWinCtrl = (1 << 8) >>> 0,\n\tKeyCode = 0x000000FF\n}\n\nexport const enum KeyMod {\n\tCtrlCmd = (1 << 11) >>> 0,\n\tShift = (1 << 10) >>> 0,\n\tAlt = (1 << 9) >>> 0,\n\tWinCtrl = (1 << 8) >>> 0,\n}\n\nexport function KeyChord(firstPart: number, secondPart: number): number {\n\tconst chordPart = ((secondPart & 0x0000FFFF) << 16) >>> 0;\n\treturn (firstPart | chordPart) >>> 0;\n}\n\nexport function createKeybinding(keybinding: number, OS: OperatingSystem): Keybinding | null {\n\tif (keybinding === 0) {\n\t\treturn null;\n\t}\n\tconst firstPart = (keybinding & 0x0000FFFF) >>> 0;\n\tconst chordPart = (keybinding & 0xFFFF0000) >>> 16;\n\tif (chordPart !== 0) {\n\t\treturn new ChordKeybinding([\n\t\t\tcreateSimpleKeybinding(firstPart, OS),\n\t\t\tcreateSimpleKeybinding(chordPart, OS)\n\t\t]);\n\t}\n\treturn new ChordKeybinding([createSimpleKeybinding(firstPart, OS)]);\n}\n\nexport function createSimpleKeybinding(keybinding: number, OS: OperatingSystem): SimpleKeybinding {\n\n\tconst ctrlCmd = (keybinding & BinaryKeybindingsMask.CtrlCmd ? true : false);\n\tconst winCtrl = (keybinding & BinaryKeybindingsMask.WinCtrl ? true : false);\n\n\tconst ctrlKey = (OS === OperatingSystem.Macintosh ? winCtrl : ctrlCmd);\n\tconst shiftKey = (keybinding & BinaryKeybindingsMask.Shift ? true : false);\n\tconst altKey = (keybinding & BinaryKeybindingsMask.Alt ? true : false);\n\tconst metaKey = (OS === OperatingSystem.Macintosh ? ctrlCmd : winCtrl);\n\tconst keyCode = (keybinding & BinaryKeybindingsMask.KeyCode);\n\n\treturn new SimpleKeybinding(ctrlKey, shiftKey, altKey, metaKey, keyCode);\n}\n\nexport class SimpleKeybinding {\n\tpublic readonly ctrlKey: boolean;\n\tpublic readonly shiftKey: boolean;\n\tpublic readonly altKey: boolean;\n\tpublic readonly metaKey: boolean;\n\tpublic readonly keyCode: KeyCode;\n\n\tconstructor(ctrlKey: boolean, shiftKey: boolean, altKey: boolean, metaKey: boolean, keyCode: KeyCode) {\n\t\tthis.ctrlKey = ctrlKey;\n\t\tthis.shiftKey = shiftKey;\n\t\tthis.altKey = altKey;\n\t\tthis.metaKey = metaKey;\n\t\tthis.keyCode = keyCode;\n\t}\n\n\tpublic equals(other: SimpleKeybinding): boolean {\n\t\treturn (\n\t\t\tthis.ctrlKey === other.ctrlKey\n\t\t\t&& this.shiftKey === other.shiftKey\n\t\t\t&& this.altKey === other.altKey\n\t\t\t&& this.metaKey === other.metaKey\n\t\t\t&& this.keyCode === other.keyCode\n\t\t);\n\t}\n\n\tpublic getHashCode(): string {\n\t\tconst ctrl = this.ctrlKey ? '1' : '0';\n\t\tconst shift = this.shiftKey ? '1' : '0';\n\t\tconst alt = this.altKey ? '1' : '0';\n\t\tconst meta = this.metaKey ? '1' : '0';\n\t\treturn `${ctrl}${shift}${alt}${meta}${this.keyCode}`;\n\t}\n\n\tpublic isModifierKey(): boolean {\n\t\treturn (\n\t\t\tthis.keyCode === KeyCode.Unknown\n\t\t\t|| this.keyCode === KeyCode.Ctrl\n\t\t\t|| this.keyCode === KeyCode.Meta\n\t\t\t|| this.keyCode === KeyCode.Alt\n\t\t\t|| this.keyCode === KeyCode.Shift\n\t\t);\n\t}\n\n\tpublic toChord(): ChordKeybinding {\n\t\treturn new ChordKeybinding([this]);\n\t}\n\n\t/**\n\t * Does this keybinding refer to the key code of a modifier and it also has the modifier flag?\n\t */\n\tpublic isDuplicateModifierCase(): boolean {\n\t\treturn (\n\t\t\t(this.ctrlKey && this.keyCode === KeyCode.Ctrl)\n\t\t\t|| (this.shiftKey && this.keyCode === KeyCode.Shift)\n\t\t\t|| (this.altKey && this.keyCode === KeyCode.Alt)\n\t\t\t|| (this.metaKey && this.keyCode === KeyCode.Meta)\n\t\t);\n\t}\n}\n\nexport class ChordKeybinding {\n\tpublic readonly parts: SimpleKeybinding[];\n\n\tconstructor(parts: SimpleKeybinding[]) {\n\t\tif (parts.length === 0) {\n\t\t\tthrow illegalArgument(`parts`);\n\t\t}\n\t\tthis.parts = parts;\n\t}\n\n\tpublic getHashCode(): string {\n\t\tlet result = '';\n\t\tfor (let i = 0, len = this.parts.length; i < len; i++) {\n\t\t\tif (i !== 0) {\n\t\t\t\tresult += ';';\n\t\t\t}\n\t\t\tresult += this.parts[i].getHashCode();\n\t\t}\n\t\treturn result;\n\t}\n\n\tpublic equals(other: ChordKeybinding | null): boolean {\n\t\tif (other === null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this.parts.length !== other.parts.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (let i = 0; i < this.parts.length; i++) {\n\t\t\tif (!this.parts[i].equals(other.parts[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n}\n\nexport type Keybinding = ChordKeybinding;\n\nexport class ResolvedKeybindingPart {\n\treadonly ctrlKey: boolean;\n\treadonly shiftKey: boolean;\n\treadonly altKey: boolean;\n\treadonly metaKey: boolean;\n\n\treadonly keyLabel: string | null;\n\treadonly keyAriaLabel: string | null;\n\n\tconstructor(ctrlKey: boolean, shiftKey: boolean, altKey: boolean, metaKey: boolean, kbLabel: string | null, kbAriaLabel: string | null) {\n\t\tthis.ctrlKey = ctrlKey;\n\t\tthis.shiftKey = shiftKey;\n\t\tthis.altKey = altKey;\n\t\tthis.metaKey = metaKey;\n\t\tthis.keyLabel = kbLabel;\n\t\tthis.keyAriaLabel = kbAriaLabel;\n\t}\n}\n\n/**\n * A resolved keybinding. Can be a simple keybinding or a chord keybinding.\n */\nexport abstract class ResolvedKeybinding {\n\t/**\n\t * This prints the binding in a format suitable for displaying in the UI.\n\t */\n\tpublic abstract getLabel(): string | null;\n\t/**\n\t * This prints the binding in a format suitable for ARIA.\n\t */\n\tpublic abstract getAriaLabel(): string | null;\n\t/**\n\t * This prints the binding in a format suitable for electron's accelerators.\n\t * See https://github.com/electron/electron/blob/master/docs/api/accelerator.md\n\t */\n\tpublic abstract getElectronAccelerator(): string | null;\n\t/**\n\t * This prints the binding in a format suitable for user settings.\n\t */\n\tpublic abstract getUserSettingsLabel(): string | null;\n\t/**\n\t * Is the user settings label reflecting the label?\n\t */\n\tpublic abstract isWYSIWYG(): boolean;\n\n\t/**\n\t * Is the binding a chord?\n\t */\n\tpublic abstract isChord(): boolean;\n\n\t/**\n\t * Returns the parts that comprise of the keybinding.\n\t * Simple keybindings return one element.\n\t */\n\tpublic abstract getParts(): ResolvedKeybindingPart[];\n\n\t/**\n\t * Returns the parts that should be used for dispatching.\n\t * Returns null for parts consisting of only modifier keys\n\t * @example keybinding \"Shift\" -> null\n\t * @example keybinding (\"D\" with shift == true) -> \"shift+D\"\n\t */\n\tpublic abstract getDispatchParts(): (string | null)[];\n\n\t/**\n\t * Returns the parts that should be used for dispatching single modifier keys\n\t * Returns null for parts that contain more than one modifier or a regular key.\n\t * @example keybinding \"Shift\" -> \"shift\"\n\t * @example keybinding (\"D\" with shift == true\") -> null\n\t */\n\tpublic abstract getSingleModifierDispatchParts(): (string | null)[];\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { once } from 'vs/base/common/functional';\nimport { Iterable } from 'vs/base/common/iterator';\n\n/**\n * Enables logging of potentially leaked disposables.\n *\n * A disposable is considered leaked if it is not disposed or not registered as the child of\n * another disposable. This tracking is very simple an only works for classes that either\n * extend Disposable or use a DisposableStore. This means there are a lot of false positives.\n */\nconst TRACK_DISPOSABLES = false;\nlet disposableTracker: IDisposableTracker | null = null;\n\nexport interface IDisposableTracker {\n\ttrackDisposable(x: IDisposable): void;\n\tmarkTracked(x: IDisposable): void;\n}\n\nexport function setDisposableTracker(tracker: IDisposableTracker | null): void {\n\tdisposableTracker = tracker;\n}\n\nif (TRACK_DISPOSABLES) {\n\tconst __is_disposable_tracked__ = '__is_disposable_tracked__';\n\tdisposableTracker = new class implements IDisposableTracker {\n\t\ttrackDisposable(x: IDisposable): void {\n\t\t\tconst stack = new Error('Potentially leaked disposable').stack!;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!(x as any)[__is_disposable_tracked__]) {\n\t\t\t\t\tconsole.log(stack);\n\t\t\t\t}\n\t\t\t}, 3000);\n\t\t}\n\n\t\tmarkTracked(x: IDisposable): void {\n\t\t\tif (x && x !== Disposable.None) {\n\t\t\t\ttry {\n\t\t\t\t\t(x as any)[__is_disposable_tracked__] = true;\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction markTracked<T extends IDisposable>(x: T): void {\n\tif (!disposableTracker) {\n\t\treturn;\n\t}\n\tdisposableTracker.markTracked(x);\n}\n\nexport function trackDisposable<T extends IDisposable>(x: T): T {\n\tif (!disposableTracker) {\n\t\treturn x;\n\t}\n\tdisposableTracker.trackDisposable(x);\n\treturn x;\n}\n\nexport class MultiDisposeError extends Error {\n\tconstructor(\n\t\tpublic readonly errors: any[]\n\t) {\n\t\tsuper(`Encountered errors while disposing of store. Errors: [${errors.join(', ')}]`);\n\t}\n}\n\nexport interface IDisposable {\n\tdispose(): void;\n}\n\nexport function isDisposable<E extends object>(thing: E): thing is E & IDisposable {\n\treturn typeof (<IDisposable>thing).dispose === 'function' && (<IDisposable>thing).dispose.length === 0;\n}\n\nexport function dispose<T extends IDisposable>(disposable: T): T;\nexport function dispose<T extends IDisposable>(disposable: T | undefined): T | undefined;\nexport function dispose<T extends IDisposable, A extends IterableIterator<T> = IterableIterator<T>>(disposables: IterableIterator<T>): A;\nexport function dispose<T extends IDisposable>(disposables: Array<T>): Array<T>;\nexport function dispose<T extends IDisposable>(disposables: ReadonlyArray<T>): ReadonlyArray<T>;\nexport function dispose<T extends IDisposable>(arg: T | IterableIterator<T> | undefined): any {\n\tif (Iterable.is(arg)) {\n\t\tlet errors: any[] = [];\n\n\t\tfor (const d of arg) {\n\t\t\tif (d) {\n\t\t\t\tmarkTracked(d);\n\t\t\t\ttry {\n\t\t\t\t\td.dispose();\n\t\t\t\t} catch (e) {\n\t\t\t\t\terrors.push(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (errors.length === 1) {\n\t\t\tthrow errors[0];\n\t\t} else if (errors.length > 1) {\n\t\t\tthrow new MultiDisposeError(errors);\n\t\t}\n\n\t\treturn Array.isArray(arg) ? [] : arg;\n\t} else if (arg) {\n\t\tmarkTracked(arg);\n\t\targ.dispose();\n\t\treturn arg;\n\t}\n}\n\n\nexport function combinedDisposable(...disposables: IDisposable[]): IDisposable {\n\tdisposables.forEach(markTracked);\n\treturn toDisposable(() => dispose(disposables));\n}\n\nexport function toDisposable(fn: () => void): IDisposable {\n\tconst self = trackDisposable({\n\t\tdispose: () => {\n\t\t\tmarkTracked(self);\n\t\t\tfn();\n\t\t}\n\t});\n\treturn self;\n}\n\nexport class DisposableStore implements IDisposable {\n\n\tstatic DISABLE_DISPOSED_WARNING = false;\n\n\tprivate _toDispose = new Set<IDisposable>();\n\tprivate _isDisposed = false;\n\n\t/**\n\t * Dispose of all registered disposables and mark this object as disposed.\n\t *\n\t * Any future disposables added to this object will be disposed of on `add`.\n\t */\n\tpublic dispose(): void {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tmarkTracked(this);\n\t\tthis._isDisposed = true;\n\t\tthis.clear();\n\t}\n\n\t/**\n\t * Dispose of all registered disposables but do not mark this object as disposed.\n\t */\n\tpublic clear(): void {\n\t\ttry {\n\t\t\tdispose(this._toDispose.values());\n\t\t} finally {\n\t\t\tthis._toDispose.clear();\n\t\t}\n\t}\n\n\tpublic add<T extends IDisposable>(t: T): T {\n\t\tif (!t) {\n\t\t\treturn t;\n\t\t}\n\t\tif ((t as unknown as DisposableStore) === this) {\n\t\t\tthrow new Error('Cannot register a disposable on itself!');\n\t\t}\n\n\t\tmarkTracked(t);\n\t\tif (this._isDisposed) {\n\t\t\tif (!DisposableStore.DISABLE_DISPOSED_WARNING) {\n\t\t\t\tconsole.warn(new Error('Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!').stack);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._toDispose.add(t);\n\t\t}\n\n\t\treturn t;\n\t}\n}\n\nexport abstract class Disposable implements IDisposable {\n\n\tstatic readonly None = Object.freeze<IDisposable>({ dispose() { } });\n\n\tprivate readonly _store = new DisposableStore();\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\tpublic dispose(): void {\n\t\tmarkTracked(this);\n\n\t\tthis._store.dispose();\n\t}\n\n\tprotected _register<T extends IDisposable>(t: T): T {\n\t\tif ((t as unknown as Disposable) === this) {\n\t\t\tthrow new Error('Cannot register a disposable on itself!');\n\t\t}\n\t\treturn this._store.add(t);\n\t}\n}\n\n/**\n * Manages the lifecycle of a disposable value that may be changed.\n *\n * This ensures that when the disposable value is changed, the previously held disposable is disposed of. You can\n * also register a `MutableDisposable` on a `Disposable` to ensure it is automatically cleaned up.\n */\nexport class MutableDisposable<T extends IDisposable> implements IDisposable {\n\tprivate _value?: T;\n\tprivate _isDisposed = false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\tget value(): T | undefined {\n\t\treturn this._isDisposed ? undefined : this._value;\n\t}\n\n\tset value(value: T | undefined) {\n\t\tif (this._isDisposed || value === this._value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._value?.dispose();\n\t\tif (value) {\n\t\t\tmarkTracked(value);\n\t\t}\n\t\tthis._value = value;\n\t}\n\n\tclear() {\n\t\tthis.value = undefined;\n\t}\n\n\tdispose(): void {\n\t\tthis._isDisposed = true;\n\t\tmarkTracked(this);\n\t\tthis._value?.dispose();\n\t\tthis._value = undefined;\n\t}\n}\n\nexport interface IReference<T> extends IDisposable {\n\treadonly object: T;\n}\n\nexport abstract class ReferenceCollection<T> {\n\n\tprivate readonly references: Map<string, { readonly object: T; counter: number; }> = new Map();\n\n\tacquire(key: string, ...args: any[]): IReference<T> {\n\t\tlet reference = this.references.get(key);\n\n\t\tif (!reference) {\n\t\t\treference = { counter: 0, object: this.createReferencedObject(key, ...args) };\n\t\t\tthis.references.set(key, reference);\n\t\t}\n\n\t\tconst { object } = reference;\n\t\tconst dispose = once(() => {\n\t\t\tif (--reference!.counter === 0) {\n\t\t\t\tthis.destroyReferencedObject(key, reference!.object);\n\t\t\t\tthis.references.delete(key);\n\t\t\t}\n\t\t});\n\n\t\treference.counter++;\n\n\t\treturn { object, dispose };\n\t}\n\n\tprotected abstract createReferencedObject(key: string, ...args: any[]): T;\n\tprotected abstract destroyReferencedObject(key: string, object: T): void;\n}\n\nexport class ImmortalReference<T> implements IReference<T> {\n\tconstructor(public object: T) { }\n\tdispose(): void { /* noop */ }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nclass Node<E> {\n\n\tstatic readonly Undefined = new Node<any>(undefined);\n\n\telement: E;\n\tnext: Node<E>;\n\tprev: Node<E>;\n\n\tconstructor(element: E) {\n\t\tthis.element = element;\n\t\tthis.next = Node.Undefined;\n\t\tthis.prev = Node.Undefined;\n\t}\n}\n\nexport class LinkedList<E> {\n\n\tprivate _first: Node<E> = Node.Undefined;\n\tprivate _last: Node<E> = Node.Undefined;\n\tprivate _size: number = 0;\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._first === Node.Undefined;\n\t}\n\n\tclear(): void {\n\t\tthis._first = Node.Undefined;\n\t\tthis._last = Node.Undefined;\n\t\tthis._size = 0;\n\t}\n\n\tunshift(element: E): () => void {\n\t\treturn this._insert(element, false);\n\t}\n\n\tpush(element: E): () => void {\n\t\treturn this._insert(element, true);\n\t}\n\n\tprivate _insert(element: E, atTheEnd: boolean): () => void {\n\t\tconst newNode = new Node(element);\n\t\tif (this._first === Node.Undefined) {\n\t\t\tthis._first = newNode;\n\t\t\tthis._last = newNode;\n\n\t\t} else if (atTheEnd) {\n\t\t\t// push\n\t\t\tconst oldLast = this._last!;\n\t\t\tthis._last = newNode;\n\t\t\tnewNode.prev = oldLast;\n\t\t\toldLast.next = newNode;\n\n\t\t} else {\n\t\t\t// unshift\n\t\t\tconst oldFirst = this._first;\n\t\t\tthis._first = newNode;\n\t\t\tnewNode.next = oldFirst;\n\t\t\toldFirst.prev = newNode;\n\t\t}\n\t\tthis._size += 1;\n\n\t\tlet didRemove = false;\n\t\treturn () => {\n\t\t\tif (!didRemove) {\n\t\t\t\tdidRemove = true;\n\t\t\t\tthis._remove(newNode);\n\t\t\t}\n\t\t};\n\t}\n\n\tshift(): E | undefined {\n\t\tif (this._first === Node.Undefined) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst res = this._first.element;\n\t\t\tthis._remove(this._first);\n\t\t\treturn res;\n\t\t}\n\t}\n\n\tpop(): E | undefined {\n\t\tif (this._last === Node.Undefined) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst res = this._last.element;\n\t\t\tthis._remove(this._last);\n\t\t\treturn res;\n\t\t}\n\t}\n\n\tprivate _remove(node: Node<E>): void {\n\t\tif (node.prev !== Node.Undefined && node.next !== Node.Undefined) {\n\t\t\t// middle\n\t\t\tconst anchor = node.prev;\n\t\t\tanchor.next = node.next;\n\t\t\tnode.next.prev = anchor;\n\n\t\t} else if (node.prev === Node.Undefined && node.next === Node.Undefined) {\n\t\t\t// only node\n\t\t\tthis._first = Node.Undefined;\n\t\t\tthis._last = Node.Undefined;\n\n\t\t} else if (node.next === Node.Undefined) {\n\t\t\t// last\n\t\t\tthis._last = this._last!.prev!;\n\t\t\tthis._last.next = Node.Undefined;\n\n\t\t} else if (node.prev === Node.Undefined) {\n\t\t\t// first\n\t\t\tthis._first = this._first!.next!;\n\t\t\tthis._first.prev = Node.Undefined;\n\t\t}\n\n\t\t// done\n\t\tthis._size -= 1;\n\t}\n\n\t*[Symbol.iterator](): Iterator<E> {\n\t\tlet node = this._first;\n\t\twhile (node !== Node.Undefined) {\n\t\t\tyield node.element;\n\t\t\tnode = node.next;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function clamp(value: number, min: number, max: number): number {\n\treturn Math.min(Math.max(value, min), max);\n}\n\nexport function rot(index: number, modulo: number): number {\n\treturn (modulo + (index % modulo)) % modulo;\n}\n\nexport class Counter {\n\tprivate _next = 0;\n\n\tgetNext(): number {\n\t\treturn this._next++;\n\t}\n}\n\nexport class MovingAverage {\n\n\tprivate _n = 1;\n\tprivate _val = 0;\n\n\tupdate(value: number): this {\n\t\tthis._val = this._val + (value - this._val) / this._n;\n\t\tthis._n += 1;\n\t\treturn this;\n\t}\n\n\tget value(): number {\n\t\treturn this._val;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nconst LANGUAGE_DEFAULT = 'en';\n\nlet _isWindows = false;\nlet _isMacintosh = false;\nlet _isLinux = false;\nlet _isLinuxSnap = false;\nlet _isNative = false;\nlet _isWeb = false;\nlet _isIOS = false;\nlet _locale: string | undefined = undefined;\nlet _language: string = LANGUAGE_DEFAULT;\nlet _translationsConfigFile: string | undefined = undefined;\nlet _userAgent: string | undefined = undefined;\n\ninterface NLSConfig {\n\tlocale: string;\n\tavailableLanguages: { [key: string]: string; };\n\t_translationsConfigFile: string;\n}\n\nexport interface IProcessEnvironment {\n\t[key: string]: string | undefined;\n}\n\n/**\n * This interface is intentionally not identical to node.js\n * process because it also works in sandboxed environments\n * where the process object is implemented differently. We\n * define the properties here that we need for `platform`\n * to work and nothing else.\n */\nexport interface INodeProcess {\n\tplatform: string;\n\tenv: IProcessEnvironment;\n\tnextTick?: (callback: (...args: any[]) => void) => void;\n\tversions?: {\n\t\telectron?: string;\n\t};\n\tsandboxed?: boolean;\n\ttype?: string;\n\tcwd: () => string;\n}\n\ndeclare const process: INodeProcess;\ndeclare const global: unknown;\ndeclare const self: unknown;\n\nexport const globals: any = (typeof self === 'object' ? self : typeof global === 'object' ? global : {});\n\nlet nodeProcess: INodeProcess | undefined = undefined;\nif (typeof globals.vscode !== 'undefined') {\n\t// Native environment (sandboxed)\n\tnodeProcess = globals.vscode.process;\n} else if (typeof process !== 'undefined') {\n\t// Native environment (non-sandboxed)\n\tnodeProcess = process;\n}\n\nconst isElectronRenderer = typeof nodeProcess?.versions?.electron === 'string' && nodeProcess.type === 'renderer';\nexport const isElectronSandboxed = isElectronRenderer && nodeProcess?.sandboxed;\nexport const browserCodeLoadingCacheStrategy: 'none' | 'code' | 'bypassHeatCheck' | 'bypassHeatCheckAndEagerCompile' | undefined = (() => {\n\n\t// Always enabled when sandbox is enabled\n\tif (isElectronSandboxed) {\n\t\treturn 'bypassHeatCheck';\n\t}\n\n\t// Otherwise, only enabled conditionally\n\tconst env = nodeProcess?.env['VSCODE_BROWSER_CODE_LOADING'];\n\tif (typeof env === 'string') {\n\t\tif (env === 'none' || env === 'code' || env === 'bypassHeatCheck' || env === 'bypassHeatCheckAndEagerCompile') {\n\t\t\treturn env;\n\t\t}\n\n\t\treturn 'bypassHeatCheck';\n\t}\n\n\treturn undefined;\n})();\nexport const isPreferringBrowserCodeLoad = typeof browserCodeLoadingCacheStrategy === 'string';\n\ninterface INavigator {\n\tuserAgent: string;\n\tlanguage: string;\n\tmaxTouchPoints?: number;\n}\ndeclare const navigator: INavigator;\n\n// Web environment\nif (typeof navigator === 'object' && !isElectronRenderer) {\n\t_userAgent = navigator.userAgent;\n\t_isWindows = _userAgent.indexOf('Windows') >= 0;\n\t_isMacintosh = _userAgent.indexOf('Macintosh') >= 0;\n\t_isIOS = (_userAgent.indexOf('Macintosh') >= 0 || _userAgent.indexOf('iPad') >= 0 || _userAgent.indexOf('iPhone') >= 0) && !!navigator.maxTouchPoints && navigator.maxTouchPoints > 0;\n\t_isLinux = _userAgent.indexOf('Linux') >= 0;\n\t_isWeb = true;\n\t_locale = navigator.language;\n\t_language = _locale;\n}\n\n// Native environment\nelse if (typeof nodeProcess === 'object') {\n\t_isWindows = (nodeProcess.platform === 'win32');\n\t_isMacintosh = (nodeProcess.platform === 'darwin');\n\t_isLinux = (nodeProcess.platform === 'linux');\n\t_isLinuxSnap = _isLinux && !!nodeProcess.env['SNAP'] && !!nodeProcess.env['SNAP_REVISION'];\n\t_locale = LANGUAGE_DEFAULT;\n\t_language = LANGUAGE_DEFAULT;\n\tconst rawNlsConfig = nodeProcess.env['VSCODE_NLS_CONFIG'];\n\tif (rawNlsConfig) {\n\t\ttry {\n\t\t\tconst nlsConfig: NLSConfig = JSON.parse(rawNlsConfig);\n\t\t\tconst resolved = nlsConfig.availableLanguages['*'];\n\t\t\t_locale = nlsConfig.locale;\n\t\t\t// VSCode's default language is 'en'\n\t\t\t_language = resolved ? resolved : LANGUAGE_DEFAULT;\n\t\t\t_translationsConfigFile = nlsConfig._translationsConfigFile;\n\t\t} catch (e) {\n\t\t}\n\t}\n\t_isNative = true;\n}\n\n// Unknown environment\nelse {\n\tconsole.error('Unable to resolve platform.');\n}\n\nexport const enum Platform {\n\tWeb,\n\tMac,\n\tLinux,\n\tWindows\n}\nexport function PlatformToString(platform: Platform) {\n\tswitch (platform) {\n\t\tcase Platform.Web: return 'Web';\n\t\tcase Platform.Mac: return 'Mac';\n\t\tcase Platform.Linux: return 'Linux';\n\t\tcase Platform.Windows: return 'Windows';\n\t}\n}\n\nlet _platform: Platform = Platform.Web;\nif (_isMacintosh) {\n\t_platform = Platform.Mac;\n} else if (_isWindows) {\n\t_platform = Platform.Windows;\n} else if (_isLinux) {\n\t_platform = Platform.Linux;\n}\n\nexport const isWindows = _isWindows;\nexport const isMacintosh = _isMacintosh;\nexport const isLinux = _isLinux;\nexport const isLinuxSnap = _isLinuxSnap;\nexport const isNative = _isNative;\nexport const isWeb = _isWeb;\nexport const isIOS = _isIOS;\nexport const platform = _platform;\nexport const userAgent = _userAgent;\n\n/**\n * The language used for the user interface. The format of\n * the string is all lower case (e.g. zh-tw for Traditional\n * Chinese)\n */\nexport const language = _language;\n\nexport namespace Language {\n\n\texport function value(): string {\n\t\treturn language;\n\t}\n\n\texport function isDefaultVariant(): boolean {\n\t\tif (language.length === 2) {\n\t\t\treturn language === 'en';\n\t\t} else if (language.length >= 3) {\n\t\t\treturn language[0] === 'e' && language[1] === 'n' && language[2] === '-';\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\texport function isDefault(): boolean {\n\t\treturn language === 'en';\n\t}\n}\n\n/**\n * The OS locale or the locale specified by --locale. The format of\n * the string is all lower case (e.g. zh-tw for Traditional\n * Chinese). The UI is not necessarily shown in the provided locale.\n */\nexport const locale = _locale;\n\n/**\n * The translatios that are available through language packs.\n */\nexport const translationsConfigFile = _translationsConfigFile;\n\ninterface ISetImmediate {\n\t(callback: (...args: unknown[]) => void): void;\n}\n\nexport const setImmediate: ISetImmediate = (function defineSetImmediate() {\n\tif (globals.setImmediate) {\n\t\treturn globals.setImmediate.bind(globals);\n\t}\n\tif (typeof globals.postMessage === 'function' && !globals.importScripts) {\n\t\tinterface IQueueElement {\n\t\t\tid: number;\n\t\t\tcallback: () => void;\n\t\t}\n\t\tlet pending: IQueueElement[] = [];\n\t\tglobals.addEventListener('message', (e: MessageEvent) => {\n\t\t\tif (e.data && e.data.vscodeSetImmediateId) {\n\t\t\t\tfor (let i = 0, len = pending.length; i < len; i++) {\n\t\t\t\t\tconst candidate = pending[i];\n\t\t\t\t\tif (candidate.id === e.data.vscodeSetImmediateId) {\n\t\t\t\t\t\tpending.splice(i, 1);\n\t\t\t\t\t\tcandidate.callback();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet lastId = 0;\n\t\treturn (callback: () => void) => {\n\t\t\tconst myId = ++lastId;\n\t\t\tpending.push({\n\t\t\t\tid: myId,\n\t\t\t\tcallback: callback\n\t\t\t});\n\t\t\tglobals.postMessage({ vscodeSetImmediateId: myId }, '*');\n\t\t};\n\t}\n\tif (typeof nodeProcess?.nextTick === 'function') {\n\t\treturn nodeProcess.nextTick.bind(nodeProcess);\n\t}\n\tconst _promise = Promise.resolve();\n\treturn (callback: (...args: unknown[]) => void) => _promise.then(callback);\n})();\n\nexport const enum OperatingSystem {\n\tWindows = 1,\n\tMacintosh = 2,\n\tLinux = 3\n}\nexport const OS = (_isMacintosh || _isIOS ? OperatingSystem.Macintosh : (_isWindows ? OperatingSystem.Windows : OperatingSystem.Linux));\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nexport function isLittleEndian(): boolean {\n\tif (!_isLittleEndianComputed) {\n\t\t_isLittleEndianComputed = true;\n\t\tconst test = new Uint8Array(2);\n\t\ttest[0] = 1;\n\t\ttest[1] = 2;\n\t\tconst view = new Uint16Array(test.buffer);\n\t\t_isLittleEndian = (view[0] === (2 << 8) + 1);\n\t}\n\treturn _isLittleEndian;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isWindows, isMacintosh, setImmediate, globals, INodeProcess } from 'vs/base/common/platform';\n\nlet safeProcess: INodeProcess & { nextTick: (callback: (...args: any[]) => void) => void; };\ndeclare const process: INodeProcess;\n\n// Native sandbox environment\nif (typeof globals.vscode !== 'undefined') {\n\tconst sandboxProcess: INodeProcess = globals.vscode.process;\n\tsafeProcess = {\n\t\tget platform() { return sandboxProcess.platform; },\n\t\tget env() { return sandboxProcess.env; },\n\t\tcwd() { return sandboxProcess.cwd(); },\n\t\tnextTick(callback: (...args: any[]) => void): void { return setImmediate(callback); }\n\t};\n}\n\n// Native node.js environment\nelse if (typeof process !== 'undefined') {\n\tsafeProcess = {\n\t\tget platform() { return process.platform; },\n\t\tget env() { return process.env; },\n\t\tcwd() { return process.env['VSCODE_CWD'] || process.cwd(); },\n\t\tnextTick(callback: (...args: any[]) => void): void { return process.nextTick!(callback); }\n\t};\n}\n\n// Web environment\nelse {\n\tsafeProcess = {\n\n\t\t// Supported\n\t\tget platform() { return isWindows ? 'win32' : isMacintosh ? 'darwin' : 'linux'; },\n\t\tnextTick(callback: (...args: any[]) => void): void { return setImmediate(callback); },\n\n\t\t// Unsupported\n\t\tget env() { return Object.create(null); },\n\t\tcwd() { return '/'; }\n\t};\n}\n\n/**\n * Provides safe access to the `cwd` property in node.js, sandboxed or web\n * environments.\n *\n * Note: in web, this property is hardcoded to be `/`.\n */\nexport const cwd = safeProcess.cwd;\n\n/**\n * Provides safe access to the `env` property in node.js, sandboxed or web\n * environments.\n *\n * Note: in web, this property is hardcoded to be `{}`.\n */\nexport const env = safeProcess.env;\n\n/**\n * Provides safe access to the `platform` property in node.js, sandboxed or web\n * environments.\n */\nexport const platform = safeProcess.platform;\n\n/**\n * Provides safe access to the `nextTick` method in node.js, sandboxed or web\n * environments.\n */\nexport const nextTick = safeProcess.nextTick;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// NOTE: VSCode's copy of nodejs path library to be usable in common (non-node) namespace\n// Copied from: https://github.com/nodejs/node/blob/v12.8.1/lib/path.js\n\n/**\n * Copyright Joyent, Inc. and other Node contributors.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to permit\n * persons to whom the Software is furnished to do so, subject to the\n * following conditions:\n *\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n * NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n * USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport * as process from 'vs/base/common/process';\n\nconst CHAR_UPPERCASE_A = 65;/* A */\nconst CHAR_LOWERCASE_A = 97; /* a */\nconst CHAR_UPPERCASE_Z = 90; /* Z */\nconst CHAR_LOWERCASE_Z = 122; /* z */\nconst CHAR_DOT = 46; /* . */\nconst CHAR_FORWARD_SLASH = 47; /* / */\nconst CHAR_BACKWARD_SLASH = 92; /* \\ */\nconst CHAR_COLON = 58; /* : */\nconst CHAR_QUESTION_MARK = 63; /* ? */\n\nclass ErrorInvalidArgType extends Error {\n\tcode: 'ERR_INVALID_ARG_TYPE';\n\tconstructor(name: string, expected: string, actual: unknown) {\n\t\t// determiner: 'must be' or 'must not be'\n\t\tlet determiner;\n\t\tif (typeof expected === 'string' && expected.indexOf('not ') === 0) {\n\t\t\tdeterminer = 'must not be';\n\t\t\texpected = expected.replace(/^not /, '');\n\t\t} else {\n\t\t\tdeterminer = 'must be';\n\t\t}\n\n\t\tconst type = name.indexOf('.') !== -1 ? 'property' : 'argument';\n\t\tlet msg = `The \"${name}\" ${type} ${determiner} of type ${expected}`;\n\n\t\tmsg += `. Received type ${typeof actual}`;\n\t\tsuper(msg);\n\n\t\tthis.code = 'ERR_INVALID_ARG_TYPE';\n\t}\n}\n\nfunction validateString(value: string, name: string) {\n\tif (typeof value !== 'string') {\n\t\tthrow new ErrorInvalidArgType(name, 'string', value);\n\t}\n}\n\nfunction isPathSeparator(code: number | undefined) {\n\treturn code === CHAR_FORWARD_SLASH || code === CHAR_BACKWARD_SLASH;\n}\n\nfunction isPosixPathSeparator(code: number | undefined) {\n\treturn code === CHAR_FORWARD_SLASH;\n}\n\nfunction isWindowsDeviceRoot(code: number) {\n\treturn code >= CHAR_UPPERCASE_A && code <= CHAR_UPPERCASE_Z ||\n\t\tcode >= CHAR_LOWERCASE_A && code <= CHAR_LOWERCASE_Z;\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeString(path: string, allowAboveRoot: boolean, separator: string, isPathSeparator: (code?: number) => boolean) {\n\tlet res = '';\n\tlet lastSegmentLength = 0;\n\tlet lastSlash = -1;\n\tlet dots = 0;\n\tlet code = 0;\n\tfor (let i = 0; i <= path.length; ++i) {\n\t\tif (i < path.length) {\n\t\t\tcode = path.charCodeAt(i);\n\t\t}\n\t\telse if (isPathSeparator(code)) {\n\t\t\tbreak;\n\t\t}\n\t\telse {\n\t\t\tcode = CHAR_FORWARD_SLASH;\n\t\t}\n\n\t\tif (isPathSeparator(code)) {\n\t\t\tif (lastSlash === i - 1 || dots === 1) {\n\t\t\t\t// NOOP\n\t\t\t} else if (dots === 2) {\n\t\t\t\tif (res.length < 2 || lastSegmentLength !== 2 ||\n\t\t\t\t\tres.charCodeAt(res.length - 1) !== CHAR_DOT ||\n\t\t\t\t\tres.charCodeAt(res.length - 2) !== CHAR_DOT) {\n\t\t\t\t\tif (res.length > 2) {\n\t\t\t\t\t\tconst lastSlashIndex = res.lastIndexOf(separator);\n\t\t\t\t\t\tif (lastSlashIndex === -1) {\n\t\t\t\t\t\t\tres = '';\n\t\t\t\t\t\t\tlastSegmentLength = 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres = res.slice(0, lastSlashIndex);\n\t\t\t\t\t\t\tlastSegmentLength = res.length - 1 - res.lastIndexOf(separator);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastSlash = i;\n\t\t\t\t\t\tdots = 0;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (res.length !== 0) {\n\t\t\t\t\t\tres = '';\n\t\t\t\t\t\tlastSegmentLength = 0;\n\t\t\t\t\t\tlastSlash = i;\n\t\t\t\t\t\tdots = 0;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (allowAboveRoot) {\n\t\t\t\t\tres += res.length > 0 ? `${separator}..` : '..';\n\t\t\t\t\tlastSegmentLength = 2;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (res.length > 0) {\n\t\t\t\t\tres += `${separator}${path.slice(lastSlash + 1, i)}`;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tres = path.slice(lastSlash + 1, i);\n\t\t\t\t}\n\t\t\t\tlastSegmentLength = i - lastSlash - 1;\n\t\t\t}\n\t\t\tlastSlash = i;\n\t\t\tdots = 0;\n\t\t} else if (code === CHAR_DOT && dots !== -1) {\n\t\t\t++dots;\n\t\t} else {\n\t\t\tdots = -1;\n\t\t}\n\t}\n\treturn res;\n}\n\nfunction _format(sep: string, pathObject: ParsedPath) {\n\tif (pathObject === null || typeof pathObject !== 'object') {\n\t\tthrow new ErrorInvalidArgType('pathObject', 'Object', pathObject);\n\t}\n\tconst dir = pathObject.dir || pathObject.root;\n\tconst base = pathObject.base ||\n\t\t`${pathObject.name || ''}${pathObject.ext || ''}`;\n\tif (!dir) {\n\t\treturn base;\n\t}\n\treturn dir === pathObject.root ? `${dir}${base}` : `${dir}${sep}${base}`;\n}\n\nexport interface ParsedPath {\n\troot: string;\n\tdir: string;\n\tbase: string;\n\text: string;\n\tname: string;\n}\n\nexport interface IPath {\n\tnormalize(path: string): string;\n\tisAbsolute(path: string): boolean;\n\tjoin(...paths: string[]): string;\n\tresolve(...pathSegments: string[]): string;\n\trelative(from: string, to: string): string;\n\tdirname(path: string): string;\n\tbasename(path: string, ext?: string): string;\n\textname(path: string): string;\n\tformat(pathObject: ParsedPath): string;\n\tparse(path: string): ParsedPath;\n\ttoNamespacedPath(path: string): string;\n\tsep: '\\\\' | '/';\n\tdelimiter: string;\n\twin32: IPath | null;\n\tposix: IPath | null;\n}\n\nexport const win32: IPath = {\n\t// path.resolve([from ...], to)\n\tresolve(...pathSegments: string[]): string {\n\t\tlet resolvedDevice = '';\n\t\tlet resolvedTail = '';\n\t\tlet resolvedAbsolute = false;\n\n\t\tfor (let i = pathSegments.length - 1; i >= -1; i--) {\n\t\t\tlet path;\n\t\t\tif (i >= 0) {\n\t\t\t\tpath = pathSegments[i];\n\t\t\t\tvalidateString(path, 'path');\n\n\t\t\t\t// Skip empty entries\n\t\t\t\tif (path.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else if (resolvedDevice.length === 0) {\n\t\t\t\tpath = process.cwd();\n\t\t\t} else {\n\t\t\t\t// Windows has the concept of drive-specific current working\n\t\t\t\t// directories. If we've resolved a drive letter but not yet an\n\t\t\t\t// absolute path, get cwd for that drive, or the process cwd if\n\t\t\t\t// the drive cwd is not available. We're sure the device is not\n\t\t\t\t// a UNC path at this points, because UNC paths are always absolute.\n\t\t\t\tpath = process.env[`=${resolvedDevice}`] || process.cwd();\n\n\t\t\t\t// Verify that a cwd was found and that it actually points\n\t\t\t\t// to our drive. If not, default to the drive's root.\n\t\t\t\tif (path === undefined ||\n\t\t\t\t\tpath.slice(0, 2).toLowerCase() !== resolvedDevice.toLowerCase() &&\n\t\t\t\t\tpath.charCodeAt(2) === CHAR_BACKWARD_SLASH) {\n\t\t\t\t\tpath = `${resolvedDevice}\\\\`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst len = path.length;\n\t\t\tlet rootEnd = 0;\n\t\t\tlet device = '';\n\t\t\tlet isAbsolute = false;\n\t\t\tconst code = path.charCodeAt(0);\n\n\t\t\t// Try to match a root\n\t\t\tif (len === 1) {\n\t\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t\t// `path` contains just a path separator\n\t\t\t\t\trootEnd = 1;\n\t\t\t\t\tisAbsolute = true;\n\t\t\t\t}\n\t\t\t} else if (isPathSeparator(code)) {\n\t\t\t\t// Possible UNC root\n\n\t\t\t\t// If we started with a separator, we know we at least have an\n\t\t\t\t// absolute path of some kind (UNC or otherwise)\n\t\t\t\tisAbsolute = true;\n\n\t\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t\t// Matched double path separator at beginning\n\t\t\t\t\tlet j = 2;\n\t\t\t\t\tlet last = j;\n\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\tconst firstPart = path.slice(last, j);\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (j === len || j !== last) {\n\t\t\t\t\t\t\t\t// We matched a UNC root\n\t\t\t\t\t\t\t\tdevice = `\\\\\\\\${firstPart}\\\\${path.slice(last, j)}`;\n\t\t\t\t\t\t\t\trootEnd = j;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trootEnd = 1;\n\t\t\t\t}\n\t\t\t} else if (isWindowsDeviceRoot(code) &&\n\t\t\t\tpath.charCodeAt(1) === CHAR_COLON) {\n\t\t\t\t// Possible device root\n\t\t\t\tdevice = path.slice(0, 2);\n\t\t\t\trootEnd = 2;\n\t\t\t\tif (len > 2 && isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\t\t// Treat separator following drive name as an absolute path\n\t\t\t\t\t// indicator\n\t\t\t\t\tisAbsolute = true;\n\t\t\t\t\trootEnd = 3;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (device.length > 0) {\n\t\t\t\tif (resolvedDevice.length > 0) {\n\t\t\t\t\tif (device.toLowerCase() !== resolvedDevice.toLowerCase()) {\n\t\t\t\t\t\t// This path points to another device so it is not applicable\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolvedDevice = device;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (resolvedAbsolute) {\n\t\t\t\tif (resolvedDevice.length > 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolvedTail = `${path.slice(rootEnd)}\\\\${resolvedTail}`;\n\t\t\t\tresolvedAbsolute = isAbsolute;\n\t\t\t\tif (isAbsolute && resolvedDevice.length > 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// At this point the path should be resolved to a full absolute path,\n\t\t// but handle relative paths to be safe (might happen when process.cwd()\n\t\t// fails)\n\n\t\t// Normalize the tail path\n\t\tresolvedTail = normalizeString(resolvedTail, !resolvedAbsolute, '\\\\',\n\t\t\tisPathSeparator);\n\n\t\treturn resolvedAbsolute ?\n\t\t\t`${resolvedDevice}\\\\${resolvedTail}` :\n\t\t\t`${resolvedDevice}${resolvedTail}` || '.';\n\t},\n\n\tnormalize(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tconst len = path.length;\n\t\tif (len === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tlet rootEnd = 0;\n\t\tlet device;\n\t\tlet isAbsolute = false;\n\t\tconst code = path.charCodeAt(0);\n\n\t\t// Try to match a root\n\t\tif (len === 1) {\n\t\t\t// `path` contains just a single char, exit early to avoid\n\t\t\t// unnecessary work\n\t\t\treturn isPosixPathSeparator(code) ? '\\\\' : path;\n\t\t}\n\t\tif (isPathSeparator(code)) {\n\t\t\t// Possible UNC root\n\n\t\t\t// If we started with a separator, we know we at least have an absolute\n\t\t\t// path of some kind (UNC or otherwise)\n\t\t\tisAbsolute = true;\n\n\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t// Matched double path separator at beginning\n\t\t\t\tlet j = 2;\n\t\t\t\tlet last = j;\n\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\tconst firstPart = path.slice(last, j);\n\t\t\t\t\t// Matched!\n\t\t\t\t\tlast = j;\n\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === len) {\n\t\t\t\t\t\t\t// We matched a UNC root only\n\t\t\t\t\t\t\t// Return the normalized version of the UNC root since there\n\t\t\t\t\t\t\t// is nothing left to process\n\t\t\t\t\t\t\treturn `\\\\\\\\${firstPart}\\\\${path.slice(last)}\\\\`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j !== last) {\n\t\t\t\t\t\t\t// We matched a UNC root with leftovers\n\t\t\t\t\t\t\tdevice = `\\\\\\\\${firstPart}\\\\${path.slice(last, j)}`;\n\t\t\t\t\t\t\trootEnd = j;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trootEnd = 1;\n\t\t\t}\n\t\t} else if (isWindowsDeviceRoot(code) && path.charCodeAt(1) === CHAR_COLON) {\n\t\t\t// Possible device root\n\t\t\tdevice = path.slice(0, 2);\n\t\t\trootEnd = 2;\n\t\t\tif (len > 2 && isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\t// Treat separator following drive name as an absolute path\n\t\t\t\t// indicator\n\t\t\t\tisAbsolute = true;\n\t\t\t\trootEnd = 3;\n\t\t\t}\n\t\t}\n\n\t\tlet tail = rootEnd < len ?\n\t\t\tnormalizeString(path.slice(rootEnd), !isAbsolute, '\\\\', isPathSeparator) :\n\t\t\t'';\n\t\tif (tail.length === 0 && !isAbsolute) {\n\t\t\ttail = '.';\n\t\t}\n\t\tif (tail.length > 0 && isPathSeparator(path.charCodeAt(len - 1))) {\n\t\t\ttail += '\\\\';\n\t\t}\n\t\tif (device === undefined) {\n\t\t\treturn isAbsolute ? `\\\\${tail}` : tail;\n\t\t}\n\t\treturn isAbsolute ? `${device}\\\\${tail}` : `${device}${tail}`;\n\t},\n\n\tisAbsolute(path: string): boolean {\n\t\tvalidateString(path, 'path');\n\t\tconst len = path.length;\n\t\tif (len === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst code = path.charCodeAt(0);\n\t\treturn isPathSeparator(code) ||\n\t\t\t// Possible device root\n\t\t\tlen > 2 &&\n\t\t\tisWindowsDeviceRoot(code) &&\n\t\t\tpath.charCodeAt(1) === CHAR_COLON &&\n\t\t\tisPathSeparator(path.charCodeAt(2));\n\t},\n\n\tjoin(...paths: string[]): string {\n\t\tif (paths.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\n\t\tlet joined;\n\t\tlet firstPart: string | undefined;\n\t\tfor (let i = 0; i < paths.length; ++i) {\n\t\t\tconst arg = paths[i];\n\t\t\tvalidateString(arg, 'path');\n\t\t\tif (arg.length > 0) {\n\t\t\t\tif (joined === undefined) {\n\t\t\t\t\tjoined = firstPart = arg;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjoined += `\\\\${arg}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (joined === undefined) {\n\t\t\treturn '.';\n\t\t}\n\n\t\t// Make sure that the joined path doesn't start with two slashes, because\n\t\t// normalize() will mistake it for an UNC path then.\n\t\t//\n\t\t// This step is skipped when it is very clear that the user actually\n\t\t// intended to point at an UNC path. This is assumed when the first\n\t\t// non-empty string arguments starts with exactly two slashes followed by\n\t\t// at least one more non-slash character.\n\t\t//\n\t\t// Note that for normalize() to treat a path as an UNC path it needs to\n\t\t// have at least 2 components, so we don't filter for that here.\n\t\t// This means that the user can use join to construct UNC paths from\n\t\t// a server name and a share name; for example:\n\t\t//   path.join('//server', 'share') -> '\\\\\\\\server\\\\share\\\\')\n\t\tlet needsReplace = true;\n\t\tlet slashCount = 0;\n\t\tif (typeof firstPart === 'string' && isPathSeparator(firstPart.charCodeAt(0))) {\n\t\t\t++slashCount;\n\t\t\tconst firstLen = firstPart.length;\n\t\t\tif (firstLen > 1 && isPathSeparator(firstPart.charCodeAt(1))) {\n\t\t\t\t++slashCount;\n\t\t\t\tif (firstLen > 2) {\n\t\t\t\t\tif (isPathSeparator(firstPart.charCodeAt(2))) {\n\t\t\t\t\t\t++slashCount;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We matched a UNC path in the first part\n\t\t\t\t\t\tneedsReplace = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (needsReplace) {\n\t\t\t// Find any more consecutive slashes we need to replace\n\t\t\twhile (slashCount < joined.length &&\n\t\t\t\tisPathSeparator(joined.charCodeAt(slashCount))) {\n\t\t\t\tslashCount++;\n\t\t\t}\n\n\t\t\t// Replace the slashes if needed\n\t\t\tif (slashCount >= 2) {\n\t\t\t\tjoined = `\\\\${joined.slice(slashCount)}`;\n\t\t\t}\n\t\t}\n\n\t\treturn win32.normalize(joined);\n\t},\n\n\n\t// It will solve the relative path from `from` to `to`, for instance:\n\t//  from = 'C:\\\\orandea\\\\test\\\\aaa'\n\t//  to = 'C:\\\\orandea\\\\impl\\\\bbb'\n\t// The output of the function should be: '..\\\\..\\\\impl\\\\bbb'\n\trelative(from: string, to: string): string {\n\t\tvalidateString(from, 'from');\n\t\tvalidateString(to, 'to');\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst fromOrig = win32.resolve(from);\n\t\tconst toOrig = win32.resolve(to);\n\n\t\tif (fromOrig === toOrig) {\n\t\t\treturn '';\n\t\t}\n\n\t\tfrom = fromOrig.toLowerCase();\n\t\tto = toOrig.toLowerCase();\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// Trim any leading backslashes\n\t\tlet fromStart = 0;\n\t\twhile (fromStart < from.length &&\n\t\t\tfrom.charCodeAt(fromStart) === CHAR_BACKWARD_SLASH) {\n\t\t\tfromStart++;\n\t\t}\n\t\t// Trim trailing backslashes (applicable to UNC paths only)\n\t\tlet fromEnd = from.length;\n\t\twhile (fromEnd - 1 > fromStart &&\n\t\t\tfrom.charCodeAt(fromEnd - 1) === CHAR_BACKWARD_SLASH) {\n\t\t\tfromEnd--;\n\t\t}\n\t\tconst fromLen = fromEnd - fromStart;\n\n\t\t// Trim any leading backslashes\n\t\tlet toStart = 0;\n\t\twhile (toStart < to.length &&\n\t\t\tto.charCodeAt(toStart) === CHAR_BACKWARD_SLASH) {\n\t\t\ttoStart++;\n\t\t}\n\t\t// Trim trailing backslashes (applicable to UNC paths only)\n\t\tlet toEnd = to.length;\n\t\twhile (toEnd - 1 > toStart &&\n\t\t\tto.charCodeAt(toEnd - 1) === CHAR_BACKWARD_SLASH) {\n\t\t\ttoEnd--;\n\t\t}\n\t\tconst toLen = toEnd - toStart;\n\n\t\t// Compare paths to find the longest common path from root\n\t\tconst length = fromLen < toLen ? fromLen : toLen;\n\t\tlet lastCommonSep = -1;\n\t\tlet i = 0;\n\t\tfor (; i < length; i++) {\n\t\t\tconst fromCode = from.charCodeAt(fromStart + i);\n\t\t\tif (fromCode !== to.charCodeAt(toStart + i)) {\n\t\t\t\tbreak;\n\t\t\t} else if (fromCode === CHAR_BACKWARD_SLASH) {\n\t\t\t\tlastCommonSep = i;\n\t\t\t}\n\t\t}\n\n\t\t// We found a mismatch before the first common path separator was seen, so\n\t\t// return the original `to`.\n\t\tif (i !== length) {\n\t\t\tif (lastCommonSep === -1) {\n\t\t\t\treturn toOrig;\n\t\t\t}\n\t\t} else {\n\t\t\tif (toLen > length) {\n\t\t\t\tif (to.charCodeAt(toStart + i) === CHAR_BACKWARD_SLASH) {\n\t\t\t\t\t// We get here if `from` is the exact base path for `to`.\n\t\t\t\t\t// For example: from='C:\\\\foo\\\\bar'; to='C:\\\\foo\\\\bar\\\\baz'\n\t\t\t\t\treturn toOrig.slice(toStart + i + 1);\n\t\t\t\t}\n\t\t\t\tif (i === 2) {\n\t\t\t\t\t// We get here if `from` is the device root.\n\t\t\t\t\t// For example: from='C:\\\\'; to='C:\\\\foo'\n\t\t\t\t\treturn toOrig.slice(toStart + i);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fromLen > length) {\n\t\t\t\tif (from.charCodeAt(fromStart + i) === CHAR_BACKWARD_SLASH) {\n\t\t\t\t\t// We get here if `to` is the exact base path for `from`.\n\t\t\t\t\t// For example: from='C:\\\\foo\\\\bar'; to='C:\\\\foo'\n\t\t\t\t\tlastCommonSep = i;\n\t\t\t\t} else if (i === 2) {\n\t\t\t\t\t// We get here if `to` is the device root.\n\t\t\t\t\t// For example: from='C:\\\\foo\\\\bar'; to='C:\\\\'\n\t\t\t\t\tlastCommonSep = 3;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastCommonSep === -1) {\n\t\t\t\tlastCommonSep = 0;\n\t\t\t}\n\t\t}\n\n\t\tlet out = '';\n\t\t// Generate the relative path based on the path difference between `to` and\n\t\t// `from`\n\t\tfor (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n\t\t\tif (i === fromEnd || from.charCodeAt(i) === CHAR_BACKWARD_SLASH) {\n\t\t\t\tout += out.length === 0 ? '..' : '\\\\..';\n\t\t\t}\n\t\t}\n\n\t\ttoStart += lastCommonSep;\n\n\t\t// Lastly, append the rest of the destination (`to`) path that comes after\n\t\t// the common path parts\n\t\tif (out.length > 0) {\n\t\t\treturn `${out}${toOrig.slice(toStart, toEnd)}`;\n\t\t}\n\n\t\tif (toOrig.charCodeAt(toStart) === CHAR_BACKWARD_SLASH) {\n\t\t\t++toStart;\n\t\t}\n\n\t\treturn toOrig.slice(toStart, toEnd);\n\t},\n\n\ttoNamespacedPath(path: string): string {\n\t\t// Note: this will *probably* throw somewhere.\n\t\tif (typeof path !== 'string') {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (path.length === 0) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst resolvedPath = win32.resolve(path);\n\n\t\tif (resolvedPath.length <= 2) {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (resolvedPath.charCodeAt(0) === CHAR_BACKWARD_SLASH) {\n\t\t\t// Possible UNC root\n\t\t\tif (resolvedPath.charCodeAt(1) === CHAR_BACKWARD_SLASH) {\n\t\t\t\tconst code = resolvedPath.charCodeAt(2);\n\t\t\t\tif (code !== CHAR_QUESTION_MARK && code !== CHAR_DOT) {\n\t\t\t\t\t// Matched non-long UNC root, convert the path to a long UNC path\n\t\t\t\t\treturn `\\\\\\\\?\\\\UNC\\\\${resolvedPath.slice(2)}`;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (isWindowsDeviceRoot(resolvedPath.charCodeAt(0)) &&\n\t\t\tresolvedPath.charCodeAt(1) === CHAR_COLON &&\n\t\t\tresolvedPath.charCodeAt(2) === CHAR_BACKWARD_SLASH) {\n\t\t\t// Matched device root, convert the path to a long UNC path\n\t\t\treturn `\\\\\\\\?\\\\${resolvedPath}`;\n\t\t}\n\n\t\treturn path;\n\t},\n\n\tdirname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tconst len = path.length;\n\t\tif (len === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tlet rootEnd = -1;\n\t\tlet offset = 0;\n\t\tconst code = path.charCodeAt(0);\n\n\t\tif (len === 1) {\n\t\t\t// `path` contains just a path separator, exit early to avoid\n\t\t\t// unnecessary work or a dot.\n\t\t\treturn isPathSeparator(code) ? path : '.';\n\t\t}\n\n\t\t// Try to match a root\n\t\tif (isPathSeparator(code)) {\n\t\t\t// Possible UNC root\n\n\t\t\trootEnd = offset = 1;\n\n\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t// Matched double path separator at beginning\n\t\t\t\tlet j = 2;\n\t\t\t\tlet last = j;\n\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t// Matched!\n\t\t\t\t\tlast = j;\n\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === len) {\n\t\t\t\t\t\t\t// We matched a UNC root only\n\t\t\t\t\t\t\treturn path;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j !== last) {\n\t\t\t\t\t\t\t// We matched a UNC root with leftovers\n\n\t\t\t\t\t\t\t// Offset by 1 to include the separator after the UNC root to\n\t\t\t\t\t\t\t// treat it as a \"normal root\" on top of a (UNC) root\n\t\t\t\t\t\t\trootEnd = offset = j + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Possible device root\n\t\t} else if (isWindowsDeviceRoot(code) && path.charCodeAt(1) === CHAR_COLON) {\n\t\t\trootEnd = len > 2 && isPathSeparator(path.charCodeAt(2)) ? 3 : 2;\n\t\t\toffset = rootEnd;\n\t\t}\n\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tfor (let i = len - 1; i >= offset; --i) {\n\t\t\tif (isPathSeparator(path.charCodeAt(i))) {\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tend = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We saw the first non-path separator\n\t\t\t\tmatchedSlash = false;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\tif (rootEnd === -1) {\n\t\t\t\treturn '.';\n\t\t\t}\n\n\t\t\tend = rootEnd;\n\t\t}\n\t\treturn path.slice(0, end);\n\t},\n\n\tbasename(path: string, ext?: string): string {\n\t\tif (ext !== undefined) {\n\t\t\tvalidateString(ext, 'ext');\n\t\t}\n\t\tvalidateString(path, 'path');\n\t\tlet start = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i;\n\n\t\t// Check for a drive letter prefix so as not to mistake the following\n\t\t// path separator as an extra separator at the end of the path that can be\n\t\t// disregarded\n\t\tif (path.length >= 2 &&\n\t\t\tisWindowsDeviceRoot(path.charCodeAt(0)) &&\n\t\t\tpath.charCodeAt(1) === CHAR_COLON) {\n\t\t\tstart = 2;\n\t\t}\n\n\t\tif (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n\t\t\tif (ext === path) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tlet extIdx = ext.length - 1;\n\t\t\tlet firstNonSlashEnd = -1;\n\t\t\tfor (i = path.length - 1; i >= start; --i) {\n\t\t\t\tconst code = path.charCodeAt(i);\n\t\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\t\tstart = i + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (firstNonSlashEnd === -1) {\n\t\t\t\t\t\t// We saw the first non-path separator, remember this index in case\n\t\t\t\t\t\t// we need it if the extension ends up not matching\n\t\t\t\t\t\tmatchedSlash = false;\n\t\t\t\t\t\tfirstNonSlashEnd = i + 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (extIdx >= 0) {\n\t\t\t\t\t\t// Try to match the explicit extension\n\t\t\t\t\t\tif (code === ext.charCodeAt(extIdx)) {\n\t\t\t\t\t\t\tif (--extIdx === -1) {\n\t\t\t\t\t\t\t\t// We matched the extension, so mark this as the end of our path\n\t\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\t\tend = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Extension does not match, so our result is the entire path\n\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\textIdx = -1;\n\t\t\t\t\t\t\tend = firstNonSlashEnd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (start === end) {\n\t\t\t\tend = firstNonSlashEnd;\n\t\t\t} else if (end === -1) {\n\t\t\t\tend = path.length;\n\t\t\t}\n\t\t\treturn path.slice(start, end);\n\t\t}\n\t\tfor (i = path.length - 1; i >= start; --i) {\n\t\t\tif (isPathSeparator(path.charCodeAt(i))) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// path component\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(start, end);\n\t},\n\n\textname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tlet start = 0;\n\t\tlet startDot = -1;\n\t\tlet startPart = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\n\t\t// Check for a drive letter prefix so as not to mistake the following\n\t\t// path separator as an extra separator at the end of the path that can be\n\t\t// disregarded\n\n\t\tif (path.length >= 2 &&\n\t\t\tpath.charCodeAt(1) === CHAR_COLON &&\n\t\t\tisWindowsDeviceRoot(path.charCodeAt(0))) {\n\t\t\tstart = startPart = 2;\n\t\t}\n\n\t\tfor (let i = path.length - 1; i >= start; --i) {\n\t\t\tconst code = path.charCodeAt(i);\n\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t}\n\t\t\t\telse if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (startDot === -1 ||\n\t\t\tend === -1 ||\n\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\tpreDotState === 0 ||\n\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t(preDotState === 1 &&\n\t\t\t\tstartDot === end - 1 &&\n\t\t\t\tstartDot === startPart + 1)) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(startDot, end);\n\t},\n\n\tformat: _format.bind(null, '\\\\'),\n\n\tparse(path) {\n\t\tvalidateString(path, 'path');\n\n\t\tconst ret = { root: '', dir: '', base: '', ext: '', name: '' };\n\t\tif (path.length === 0) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tconst len = path.length;\n\t\tlet rootEnd = 0;\n\t\tlet code = path.charCodeAt(0);\n\n\t\tif (len === 1) {\n\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t// `path` contains just a path separator, exit early to avoid\n\t\t\t\t// unnecessary work\n\t\t\t\tret.root = ret.dir = path;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t\tret.base = ret.name = path;\n\t\t\treturn ret;\n\t\t}\n\t\t// Try to match a root\n\t\tif (isPathSeparator(code)) {\n\t\t\t// Possible UNC root\n\n\t\t\trootEnd = 1;\n\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t// Matched double path separator at beginning\n\t\t\t\tlet j = 2;\n\t\t\t\tlet last = j;\n\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t// Matched!\n\t\t\t\t\tlast = j;\n\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === len) {\n\t\t\t\t\t\t\t// We matched a UNC root only\n\t\t\t\t\t\t\trootEnd = j;\n\t\t\t\t\t\t} else if (j !== last) {\n\t\t\t\t\t\t\t// We matched a UNC root with leftovers\n\t\t\t\t\t\t\trootEnd = j + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (isWindowsDeviceRoot(code) && path.charCodeAt(1) === CHAR_COLON) {\n\t\t\t// Possible device root\n\t\t\tif (len <= 2) {\n\t\t\t\t// `path` contains just a drive root, exit early to avoid\n\t\t\t\t// unnecessary work\n\t\t\t\tret.root = ret.dir = path;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t\trootEnd = 2;\n\t\t\tif (isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\tif (len === 3) {\n\t\t\t\t\t// `path` contains just a drive root, exit early to avoid\n\t\t\t\t\t// unnecessary work\n\t\t\t\t\tret.root = ret.dir = path;\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t\trootEnd = 3;\n\t\t\t}\n\t\t}\n\t\tif (rootEnd > 0) {\n\t\t\tret.root = path.slice(0, rootEnd);\n\t\t}\n\n\t\tlet startDot = -1;\n\t\tlet startPart = rootEnd;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i = path.length - 1;\n\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\n\t\t// Get non-dir info\n\t\tfor (; i >= rootEnd; --i) {\n\t\t\tcode = path.charCodeAt(i);\n\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t} else if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (end !== -1) {\n\t\t\tif (startDot === -1 ||\n\t\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\t\tpreDotState === 0 ||\n\t\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t\t(preDotState === 1 &&\n\t\t\t\t\tstartDot === end - 1 &&\n\t\t\t\t\tstartDot === startPart + 1)) {\n\t\t\t\tret.base = ret.name = path.slice(startPart, end);\n\t\t\t} else {\n\t\t\t\tret.name = path.slice(startPart, startDot);\n\t\t\t\tret.base = path.slice(startPart, end);\n\t\t\t\tret.ext = path.slice(startDot, end);\n\t\t\t}\n\t\t}\n\n\t\t// If the directory is the root, use the entire root as the `dir` including\n\t\t// the trailing slash if any (`C:\\abc` -> `C:\\`). Otherwise, strip out the\n\t\t// trailing slash (`C:\\abc\\def` -> `C:\\abc`).\n\t\tif (startPart > 0 && startPart !== rootEnd) {\n\t\t\tret.dir = path.slice(0, startPart - 1);\n\t\t} else {\n\t\t\tret.dir = ret.root;\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tsep: '\\\\',\n\tdelimiter: ';',\n\twin32: null,\n\tposix: null\n};\n\nexport const posix: IPath = {\n\t// path.resolve([from ...], to)\n\tresolve(...pathSegments: string[]): string {\n\t\tlet resolvedPath = '';\n\t\tlet resolvedAbsolute = false;\n\n\t\tfor (let i = pathSegments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n\t\t\tconst path = i >= 0 ? pathSegments[i] : process.cwd();\n\n\t\t\tvalidateString(path, 'path');\n\n\t\t\t// Skip empty entries\n\t\t\tif (path.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresolvedPath = `${path}/${resolvedPath}`;\n\t\t\tresolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\t}\n\n\t\t// At this point the path should be resolved to a full absolute path, but\n\t\t// handle relative paths to be safe (might happen when process.cwd() fails)\n\n\t\t// Normalize the path\n\t\tresolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, '/',\n\t\t\tisPosixPathSeparator);\n\n\t\tif (resolvedAbsolute) {\n\t\t\treturn `/${resolvedPath}`;\n\t\t}\n\t\treturn resolvedPath.length > 0 ? resolvedPath : '.';\n\t},\n\n\tnormalize(path: string): string {\n\t\tvalidateString(path, 'path');\n\n\t\tif (path.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\n\t\tconst isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\tconst trailingSeparator =\n\t\t\tpath.charCodeAt(path.length - 1) === CHAR_FORWARD_SLASH;\n\n\t\t// Normalize the path\n\t\tpath = normalizeString(path, !isAbsolute, '/', isPosixPathSeparator);\n\n\t\tif (path.length === 0) {\n\t\t\tif (isAbsolute) {\n\t\t\t\treturn '/';\n\t\t\t}\n\t\t\treturn trailingSeparator ? './' : '.';\n\t\t}\n\t\tif (trailingSeparator) {\n\t\t\tpath += '/';\n\t\t}\n\n\t\treturn isAbsolute ? `/${path}` : path;\n\t},\n\n\tisAbsolute(path: string): boolean {\n\t\tvalidateString(path, 'path');\n\t\treturn path.length > 0 && path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t},\n\n\tjoin(...paths: string[]): string {\n\t\tif (paths.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tlet joined;\n\t\tfor (let i = 0; i < paths.length; ++i) {\n\t\t\tconst arg = paths[i];\n\t\t\tvalidateString(arg, 'path');\n\t\t\tif (arg.length > 0) {\n\t\t\t\tif (joined === undefined) {\n\t\t\t\t\tjoined = arg;\n\t\t\t\t} else {\n\t\t\t\t\tjoined += `/${arg}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (joined === undefined) {\n\t\t\treturn '.';\n\t\t}\n\t\treturn posix.normalize(joined);\n\t},\n\n\trelative(from: string, to: string): string {\n\t\tvalidateString(from, 'from');\n\t\tvalidateString(to, 'to');\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// Trim leading forward slashes.\n\t\tfrom = posix.resolve(from);\n\t\tto = posix.resolve(to);\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst fromStart = 1;\n\t\tconst fromEnd = from.length;\n\t\tconst fromLen = fromEnd - fromStart;\n\t\tconst toStart = 1;\n\t\tconst toLen = to.length - toStart;\n\n\t\t// Compare paths to find the longest common path from root\n\t\tconst length = (fromLen < toLen ? fromLen : toLen);\n\t\tlet lastCommonSep = -1;\n\t\tlet i = 0;\n\t\tfor (; i < length; i++) {\n\t\t\tconst fromCode = from.charCodeAt(fromStart + i);\n\t\t\tif (fromCode !== to.charCodeAt(toStart + i)) {\n\t\t\t\tbreak;\n\t\t\t} else if (fromCode === CHAR_FORWARD_SLASH) {\n\t\t\t\tlastCommonSep = i;\n\t\t\t}\n\t\t}\n\t\tif (i === length) {\n\t\t\tif (toLen > length) {\n\t\t\t\tif (to.charCodeAt(toStart + i) === CHAR_FORWARD_SLASH) {\n\t\t\t\t\t// We get here if `from` is the exact base path for `to`.\n\t\t\t\t\t// For example: from='/foo/bar'; to='/foo/bar/baz'\n\t\t\t\t\treturn to.slice(toStart + i + 1);\n\t\t\t\t}\n\t\t\t\tif (i === 0) {\n\t\t\t\t\t// We get here if `from` is the root\n\t\t\t\t\t// For example: from='/'; to='/foo'\n\t\t\t\t\treturn to.slice(toStart + i);\n\t\t\t\t}\n\t\t\t} else if (fromLen > length) {\n\t\t\t\tif (from.charCodeAt(fromStart + i) === CHAR_FORWARD_SLASH) {\n\t\t\t\t\t// We get here if `to` is the exact base path for `from`.\n\t\t\t\t\t// For example: from='/foo/bar/baz'; to='/foo/bar'\n\t\t\t\t\tlastCommonSep = i;\n\t\t\t\t} else if (i === 0) {\n\t\t\t\t\t// We get here if `to` is the root.\n\t\t\t\t\t// For example: from='/foo/bar'; to='/'\n\t\t\t\t\tlastCommonSep = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet out = '';\n\t\t// Generate the relative path based on the path difference between `to`\n\t\t// and `from`.\n\t\tfor (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n\t\t\tif (i === fromEnd || from.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n\t\t\t\tout += out.length === 0 ? '..' : '/..';\n\t\t\t}\n\t\t}\n\n\t\t// Lastly, append the rest of the destination (`to`) path that comes after\n\t\t// the common path parts.\n\t\treturn `${out}${to.slice(toStart + lastCommonSep)}`;\n\t},\n\n\ttoNamespacedPath(path: string): string {\n\t\t// Non-op on posix systems\n\t\treturn path;\n\t},\n\n\tdirname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tif (path.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tconst hasRoot = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tfor (let i = path.length - 1; i >= 1; --i) {\n\t\t\tif (path.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tend = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We saw the first non-path separator\n\t\t\t\tmatchedSlash = false;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\treturn hasRoot ? '/' : '.';\n\t\t}\n\t\tif (hasRoot && end === 1) {\n\t\t\treturn '//';\n\t\t}\n\t\treturn path.slice(0, end);\n\t},\n\n\tbasename(path: string, ext?: string): string {\n\t\tif (ext !== undefined) {\n\t\t\tvalidateString(ext, 'ext');\n\t\t}\n\t\tvalidateString(path, 'path');\n\n\t\tlet start = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i;\n\n\t\tif (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n\t\t\tif (ext === path) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tlet extIdx = ext.length - 1;\n\t\t\tlet firstNonSlashEnd = -1;\n\t\t\tfor (i = path.length - 1; i >= 0; --i) {\n\t\t\t\tconst code = path.charCodeAt(i);\n\t\t\t\tif (code === CHAR_FORWARD_SLASH) {\n\t\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\t\tstart = i + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (firstNonSlashEnd === -1) {\n\t\t\t\t\t\t// We saw the first non-path separator, remember this index in case\n\t\t\t\t\t\t// we need it if the extension ends up not matching\n\t\t\t\t\t\tmatchedSlash = false;\n\t\t\t\t\t\tfirstNonSlashEnd = i + 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (extIdx >= 0) {\n\t\t\t\t\t\t// Try to match the explicit extension\n\t\t\t\t\t\tif (code === ext.charCodeAt(extIdx)) {\n\t\t\t\t\t\t\tif (--extIdx === -1) {\n\t\t\t\t\t\t\t\t// We matched the extension, so mark this as the end of our path\n\t\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\t\tend = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Extension does not match, so our result is the entire path\n\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\textIdx = -1;\n\t\t\t\t\t\t\tend = firstNonSlashEnd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (start === end) {\n\t\t\t\tend = firstNonSlashEnd;\n\t\t\t} else if (end === -1) {\n\t\t\t\tend = path.length;\n\t\t\t}\n\t\t\treturn path.slice(start, end);\n\t\t}\n\t\tfor (i = path.length - 1; i >= 0; --i) {\n\t\t\tif (path.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// path component\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(start, end);\n\t},\n\n\textname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tlet startDot = -1;\n\t\tlet startPart = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\t\tfor (let i = path.length - 1; i >= 0; --i) {\n\t\t\tconst code = path.charCodeAt(i);\n\t\t\tif (code === CHAR_FORWARD_SLASH) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t}\n\t\t\t\telse if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (startDot === -1 ||\n\t\t\tend === -1 ||\n\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\tpreDotState === 0 ||\n\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t(preDotState === 1 &&\n\t\t\t\tstartDot === end - 1 &&\n\t\t\t\tstartDot === startPart + 1)) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(startDot, end);\n\t},\n\n\tformat: _format.bind(null, '/'),\n\n\tparse(path: string): ParsedPath {\n\t\tvalidateString(path, 'path');\n\n\t\tconst ret = { root: '', dir: '', base: '', ext: '', name: '' };\n\t\tif (path.length === 0) {\n\t\t\treturn ret;\n\t\t}\n\t\tconst isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\tlet start;\n\t\tif (isAbsolute) {\n\t\t\tret.root = '/';\n\t\t\tstart = 1;\n\t\t} else {\n\t\t\tstart = 0;\n\t\t}\n\t\tlet startDot = -1;\n\t\tlet startPart = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i = path.length - 1;\n\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\n\t\t// Get non-dir info\n\t\tfor (; i >= start; --i) {\n\t\t\tconst code = path.charCodeAt(i);\n\t\t\tif (code === CHAR_FORWARD_SLASH) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t} else if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (end !== -1) {\n\t\t\tconst start = startPart === 0 && isAbsolute ? 1 : startPart;\n\t\t\tif (startDot === -1 ||\n\t\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\t\tpreDotState === 0 ||\n\t\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t\t(preDotState === 1 &&\n\t\t\t\t\tstartDot === end - 1 &&\n\t\t\t\t\tstartDot === startPart + 1)) {\n\t\t\t\tret.base = ret.name = path.slice(start, end);\n\t\t\t} else {\n\t\t\t\tret.name = path.slice(start, startDot);\n\t\t\t\tret.base = path.slice(start, end);\n\t\t\t\tret.ext = path.slice(startDot, end);\n\t\t\t}\n\t\t}\n\n\t\tif (startPart > 0) {\n\t\t\tret.dir = path.slice(0, startPart - 1);\n\t\t} else if (isAbsolute) {\n\t\t\tret.dir = '/';\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tsep: '/',\n\tdelimiter: ':',\n\twin32: null,\n\tposix: null\n};\n\nposix.win32 = win32.win32 = win32;\nposix.posix = win32.posix = posix;\n\nexport const normalize = (process.platform === 'win32' ? win32.normalize : posix.normalize);\nexport const isAbsolute = (process.platform === 'win32' ? win32.isAbsolute : posix.isAbsolute);\nexport const join = (process.platform === 'win32' ? win32.join : posix.join);\nexport const resolve = (process.platform === 'win32' ? win32.resolve : posix.resolve);\nexport const relative = (process.platform === 'win32' ? win32.relative : posix.relative);\nexport const dirname = (process.platform === 'win32' ? win32.dirname : posix.dirname);\nexport const basename = (process.platform === 'win32' ? win32.basename : posix.basename);\nexport const extname = (process.platform === 'win32' ? win32.extname : posix.extname);\nexport const format = (process.platform === 'win32' ? win32.format : posix.format);\nexport const parse = (process.platform === 'win32' ? win32.parse : posix.parse);\nexport const toNamespacedPath = (process.platform === 'win32' ? win32.toNamespacedPath : posix.toNamespacedPath);\nexport const sep = (process.platform === 'win32' ? win32.sep : posix.sep);\nexport const delimiter = (process.platform === 'win32' ? win32.delimiter : posix.delimiter);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface IRange {\n\tstart: number;\n\tend: number;\n}\n\nexport interface IRangedGroup {\n\trange: IRange;\n\tsize: number;\n}\n\nexport namespace Range {\n\n\t/**\n\t * Returns the intersection between two ranges as a range itself.\n\t * Returns `{ start: 0, end: 0 }` if the intersection is empty.\n\t */\n\texport function intersect(one: IRange, other: IRange): IRange {\n\t\tif (one.start >= other.end || other.start >= one.end) {\n\t\t\treturn { start: 0, end: 0 };\n\t\t}\n\n\t\tconst start = Math.max(one.start, other.start);\n\t\tconst end = Math.min(one.end, other.end);\n\n\t\tif (end - start <= 0) {\n\t\t\treturn { start: 0, end: 0 };\n\t\t}\n\n\t\treturn { start, end };\n\t}\n\n\texport function isEmpty(range: IRange): boolean {\n\t\treturn range.end - range.start <= 0;\n\t}\n\n\texport function intersects(one: IRange, other: IRange): boolean {\n\t\treturn !isEmpty(intersect(one, other));\n\t}\n\n\texport function relativeComplement(one: IRange, other: IRange): IRange[] {\n\t\tconst result: IRange[] = [];\n\t\tconst first = { start: one.start, end: Math.min(other.start, one.end) };\n\t\tconst second = { start: Math.max(other.end, one.start), end: one.end };\n\n\t\tif (!isEmpty(first)) {\n\t\t\tresult.push(first);\n\t\t}\n\n\t\tif (!isEmpty(second)) {\n\t\t\tresult.push(second);\n\t\t}\n\n\t\treturn result;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IRange, Range } from 'vs/base/common/range';\n\nexport interface IItem {\n\tsize: number;\n}\n\nexport interface IRangedGroup {\n\trange: IRange;\n\tsize: number;\n}\n\n/**\n * Returns the intersection between a ranged group and a range.\n * Returns `[]` if the intersection is empty.\n */\nexport function groupIntersect(range: IRange, groups: IRangedGroup[]): IRangedGroup[] {\n\tconst result: IRangedGroup[] = [];\n\n\tfor (let r of groups) {\n\t\tif (range.start >= r.range.end) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (range.end < r.range.start) {\n\t\t\tbreak;\n\t\t}\n\n\t\tconst intersection = Range.intersect(range, r.range);\n\n\t\tif (Range.isEmpty(intersection)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tresult.push({\n\t\t\trange: intersection,\n\t\t\tsize: r.size\n\t\t});\n\t}\n\n\treturn result;\n}\n\n/**\n * Shifts a range by that `much`.\n */\nexport function shift({ start, end }: IRange, much: number): IRange {\n\treturn { start: start + much, end: end + much };\n}\n\n/**\n * Consolidates a collection of ranged groups.\n *\n * Consolidation is the process of merging consecutive ranged groups\n * that share the same `size`.\n */\nexport function consolidate(groups: IRangedGroup[]): IRangedGroup[] {\n\tconst result: IRangedGroup[] = [];\n\tlet previousGroup: IRangedGroup | null = null;\n\n\tfor (let group of groups) {\n\t\tconst start = group.range.start;\n\t\tconst end = group.range.end;\n\t\tconst size = group.size;\n\n\t\tif (previousGroup && size === previousGroup.size) {\n\t\t\tpreviousGroup.range.end = end;\n\t\t\tcontinue;\n\t\t}\n\n\t\tpreviousGroup = { range: { start, end }, size };\n\t\tresult.push(previousGroup);\n\t}\n\n\treturn result;\n}\n\n/**\n * Concatenates several collections of ranged groups into a single\n * collection.\n */\nfunction concat(...groups: IRangedGroup[][]): IRangedGroup[] {\n\treturn consolidate(groups.reduce((r, g) => r.concat(g), []));\n}\n\nexport class RangeMap {\n\n\tprivate groups: IRangedGroup[] = [];\n\tprivate _size = 0;\n\n\tsplice(index: number, deleteCount: number, items: IItem[] = []): void {\n\t\tconst diff = items.length - deleteCount;\n\t\tconst before = groupIntersect({ start: 0, end: index }, this.groups);\n\t\tconst after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\n\t\t\t.map<IRangedGroup>(g => ({ range: shift(g.range, diff), size: g.size }));\n\n\t\tconst middle = items.map<IRangedGroup>((item, i) => ({\n\t\t\trange: { start: index + i, end: index + i + 1 },\n\t\t\tsize: item.size\n\t\t}));\n\n\t\tthis.groups = concat(before, middle, after);\n\t\tthis._size = this.groups.reduce((t, g) => t + (g.size * (g.range.end - g.range.start)), 0);\n\t}\n\n\t/**\n\t * Returns the number of items in the range map.\n\t */\n\tget count(): number {\n\t\tconst len = this.groups.length;\n\n\t\tif (!len) {\n\t\t\treturn 0;\n\t\t}\n\n\t\treturn this.groups[len - 1].range.end;\n\t}\n\n\t/**\n\t * Returns the sum of the sizes of all items in the range map.\n\t */\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\t/**\n\t * Returns the index of the item at the given position.\n\t */\n\tindexAt(position: number): number {\n\t\tif (position < 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tlet index = 0;\n\t\tlet size = 0;\n\n\t\tfor (let group of this.groups) {\n\t\t\tconst count = group.range.end - group.range.start;\n\t\t\tconst newSize = size + (count * group.size);\n\n\t\t\tif (position < newSize) {\n\t\t\t\treturn index + Math.floor((position - size) / group.size);\n\t\t\t}\n\n\t\t\tindex += count;\n\t\t\tsize = newSize;\n\t\t}\n\n\t\treturn index;\n\t}\n\n\t/**\n\t * Returns the index of the item right after the item at the\n\t * index of the given position.\n\t */\n\tindexAfter(position: number): number {\n\t\treturn Math.min(this.indexAt(position) + 1, this.count);\n\t}\n\n\t/**\n\t * Returns the start position of the item at the given index.\n\t */\n\tpositionAt(index: number): number {\n\t\tif (index < 0) {\n\t\t\treturn -1;\n\t\t}\n\n\t\tlet position = 0;\n\t\tlet count = 0;\n\n\t\tfor (let group of this.groups) {\n\t\t\tconst groupCount = group.range.end - group.range.start;\n\t\t\tconst newCount = count + groupCount;\n\n\t\t\tif (index < newCount) {\n\t\t\t\treturn position + ((index - count) * group.size);\n\t\t\t}\n\n\t\t\tposition += groupCount * group.size;\n\t\t\tcount = newCount;\n\t\t}\n\n\t\treturn -1;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { globals } from 'vs/base/common/platform';\n\nconst hasPerformanceNow = (globals.performance && typeof globals.performance.now === 'function');\n\nexport class StopWatch {\n\n\tprivate _highResolution: boolean;\n\tprivate _startTime: number;\n\tprivate _stopTime: number;\n\n\tpublic static create(highResolution: boolean = true): StopWatch {\n\t\treturn new StopWatch(highResolution);\n\t}\n\n\tconstructor(highResolution: boolean) {\n\t\tthis._highResolution = hasPerformanceNow && highResolution;\n\t\tthis._startTime = this._now();\n\t\tthis._stopTime = -1;\n\t}\n\n\tpublic stop(): void {\n\t\tthis._stopTime = this._now();\n\t}\n\n\tpublic elapsed(): number {\n\t\tif (this._stopTime !== -1) {\n\t\t\treturn this._stopTime - this._startTime;\n\t\t}\n\t\treturn this._now() - this._startTime;\n\t}\n\n\tprivate _now(): number {\n\t\treturn this._highResolution ? globals.performance.now() : Date.now();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { once as onceFn } from 'vs/base/common/functional';\nimport { Disposable, IDisposable, toDisposable, combinedDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { LinkedList } from 'vs/base/common/linkedList';\nimport { StopWatch } from 'vs/base/common/stopwatch';\n\n/**\n * To an event a function with one or zero parameters\n * can be subscribed. The event is the subscriber function itself.\n */\nexport interface Event<T> {\n\t(listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore): IDisposable;\n}\n\nexport namespace Event {\n\texport const None: Event<any> = () => Disposable.None;\n\n\t/**\n\t * Given an event, returns another event which only fires once.\n\t */\n\texport function once<T>(event: Event<T>): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => {\n\t\t\t// we need this, in case the event fires during the listener call\n\t\t\tlet didFire = false;\n\t\t\tlet result: IDisposable;\n\t\t\tresult = event(e => {\n\t\t\t\tif (didFire) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (result) {\n\t\t\t\t\tresult.dispose();\n\t\t\t\t} else {\n\t\t\t\t\tdidFire = true;\n\t\t\t\t}\n\n\t\t\t\treturn listener.call(thisArgs, e);\n\t\t\t}, null, disposables);\n\n\t\t\tif (didFire) {\n\t\t\t\tresult.dispose();\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\t/**\n\t * Given an event and a `map` function, returns another event which maps each element\n\t * through the mapping function.\n\t */\n\texport function map<I, O>(event: Event<I>, map: (i: I) => O): Event<O> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => listener.call(thisArgs, map(i)), null, disposables));\n\t}\n\n\t/**\n\t * Given an event and an `each` function, returns another identical event and calls\n\t * the `each` function per each element.\n\t */\n\texport function forEach<I>(event: Event<I>, each: (i: I) => void): Event<I> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => { each(i); listener.call(thisArgs, i); }, null, disposables));\n\t}\n\n\t/**\n\t * Given an event and a `filter` function, returns another event which emits those\n\t * elements for which the `filter` function returns `true`.\n\t */\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean): Event<T>;\n\texport function filter<T, R>(event: Event<T | R>, filter: (e: T | R) => e is R): Event<R>;\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean): Event<T> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables));\n\t}\n\n\t/**\n\t * Given an event, returns the same event but typed as `Event<void>`.\n\t */\n\texport function signal<T>(event: Event<T>): Event<void> {\n\t\treturn event as Event<any> as Event<void>;\n\t}\n\n\t/**\n\t * Given a collection of events, returns a single event which emits\n\t * whenever any of the provided events emit.\n\t */\n\texport function any<T>(...events: Event<T>[]): Event<T>;\n\texport function any(...events: Event<any>[]): Event<void>;\n\texport function any<T>(...events: Event<T>[]): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => combinedDisposable(...events.map(event => event(e => listener.call(thisArgs, e), null, disposables)));\n\t}\n\n\t/**\n\t * Given an event and a `merge` function, returns another event which maps each element\n\t * and the cumulative result through the `merge` function. Similar to `map`, but with memory.\n\t */\n\texport function reduce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, initial?: O): Event<O> {\n\t\tlet output: O | undefined = initial;\n\n\t\treturn map<I, O>(event, e => {\n\t\t\toutput = merge(output, e);\n\t\t\treturn output;\n\t\t});\n\t}\n\n\t/**\n\t * Given a chain of event processing functions (filter, map, etc), each\n\t * function will be invoked per event & per listener. Snapshotting an event\n\t * chain allows each function to be invoked just once per event.\n\t */\n\texport function snapshot<T>(event: Event<T>): Event<T> {\n\t\tlet listener: IDisposable;\n\t\tconst emitter = new Emitter<T>({\n\t\t\tonFirstListenerAdd() {\n\t\t\t\tlistener = event(emitter.fire, emitter);\n\t\t\t},\n\t\t\tonLastListenerRemove() {\n\t\t\t\tlistener.dispose();\n\t\t\t}\n\t\t});\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * Debounces the provided event, given a `merge` function.\n\t *\n\t * @param event The input event.\n\t * @param merge The reducing function.\n\t * @param delay The debouncing delay in millis.\n\t * @param leading Whether the event should fire in the leading phase of the timeout.\n\t * @param leakWarningThreshold The leak warning threshold override.\n\t */\n\texport function debounce<T>(event: Event<T>, merge: (last: T | undefined, event: T) => T, delay?: number, leading?: boolean, leakWarningThreshold?: number): Event<T>;\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay?: number, leading?: boolean, leakWarningThreshold?: number): Event<O>;\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay: number = 100, leading = false, leakWarningThreshold?: number): Event<O> {\n\n\t\tlet subscription: IDisposable;\n\t\tlet output: O | undefined = undefined;\n\t\tlet handle: any = undefined;\n\t\tlet numDebouncedCalls = 0;\n\n\t\tconst emitter = new Emitter<O>({\n\t\t\tleakWarningThreshold,\n\t\t\tonFirstListenerAdd() {\n\t\t\t\tsubscription = event(cur => {\n\t\t\t\t\tnumDebouncedCalls++;\n\t\t\t\t\toutput = merge(output, cur);\n\n\t\t\t\t\tif (leading && !handle) {\n\t\t\t\t\t\temitter.fire(output);\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tclearTimeout(handle);\n\t\t\t\t\thandle = setTimeout(() => {\n\t\t\t\t\t\tconst _output = output;\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t\thandle = undefined;\n\t\t\t\t\t\tif (!leading || numDebouncedCalls > 1) {\n\t\t\t\t\t\t\temitter.fire(_output!);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnumDebouncedCalls = 0;\n\t\t\t\t\t}, delay);\n\t\t\t\t});\n\t\t\t},\n\t\t\tonLastListenerRemove() {\n\t\t\t\tsubscription.dispose();\n\t\t\t}\n\t\t});\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * Given an event, it returns another event which fires only once and as soon as\n\t * the input event emits. The event data is the number of millis it took for the\n\t * event to fire.\n\t */\n\texport function stopwatch<T>(event: Event<T>): Event<number> {\n\t\tconst start = new Date().getTime();\n\t\treturn map(once(event), _ => new Date().getTime() - start);\n\t}\n\n\t/**\n\t * Given an event, it returns another event which fires only when the event\n\t * element changes.\n\t */\n\texport function latch<T>(event: Event<T>): Event<T> {\n\t\tlet firstCall = true;\n\t\tlet cache: T;\n\n\t\treturn filter(event, value => {\n\t\t\tconst shouldEmit = firstCall || value !== cache;\n\t\t\tfirstCall = false;\n\t\t\tcache = value;\n\t\t\treturn shouldEmit;\n\t\t});\n\t}\n\n\t/**\n\t * Buffers the provided event until a first listener comes\n\t * along, at which point fire all the events at once and\n\t * pipe the event from then on.\n\t *\n\t * ```typescript\n\t * const emitter = new Emitter<number>();\n\t * const event = emitter.event;\n\t * const bufferedEvent = buffer(event);\n\t *\n\t * emitter.fire(1);\n\t * emitter.fire(2);\n\t * emitter.fire(3);\n\t * // nothing...\n\t *\n\t * const listener = bufferedEvent(num => console.log(num));\n\t * // 1, 2, 3\n\t *\n\t * emitter.fire(4);\n\t * // 4\n\t * ```\n\t */\n\texport function buffer<T>(event: Event<T>, nextTick = false, _buffer: T[] = []): Event<T> {\n\t\tlet buffer: T[] | null = _buffer.slice();\n\n\t\tlet listener: IDisposable | null = event(e => {\n\t\t\tif (buffer) {\n\t\t\t\tbuffer.push(e);\n\t\t\t} else {\n\t\t\t\temitter.fire(e);\n\t\t\t}\n\t\t});\n\n\t\tconst flush = () => {\n\t\t\tif (buffer) {\n\t\t\t\tbuffer.forEach(e => emitter.fire(e));\n\t\t\t}\n\t\t\tbuffer = null;\n\t\t};\n\n\t\tconst emitter = new Emitter<T>({\n\t\t\tonFirstListenerAdd() {\n\t\t\t\tif (!listener) {\n\t\t\t\t\tlistener = event(e => emitter.fire(e));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonFirstListenerDidAdd() {\n\t\t\t\tif (buffer) {\n\t\t\t\t\tif (nextTick) {\n\t\t\t\t\t\tsetTimeout(flush);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflush();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonLastListenerRemove() {\n\t\t\t\tif (listener) {\n\t\t\t\t\tlistener.dispose();\n\t\t\t\t}\n\t\t\t\tlistener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn emitter.event;\n\t}\n\n\texport interface IChainableEvent<T> {\n\t\tevent: Event<T>;\n\t\tmap<O>(fn: (i: T) => O): IChainableEvent<O>;\n\t\tforEach(fn: (i: T) => void): IChainableEvent<T>;\n\t\tfilter(fn: (e: T) => boolean): IChainableEvent<T>;\n\t\tfilter<R>(fn: (e: T | R) => e is R): IChainableEvent<R>;\n\t\treduce<R>(merge: (last: R | undefined, event: T) => R, initial?: R): IChainableEvent<R>;\n\t\tlatch(): IChainableEvent<T>;\n\t\tdebounce(merge: (last: T | undefined, event: T) => T, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<T>;\n\t\tdebounce<R>(merge: (last: R | undefined, event: T) => R, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<R>;\n\t\ton(listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore): IDisposable;\n\t\tonce(listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[]): IDisposable;\n\t}\n\n\tclass ChainableEvent<T> implements IChainableEvent<T> {\n\n\t\tconstructor(readonly event: Event<T>) { }\n\n\t\tmap<O>(fn: (i: T) => O): IChainableEvent<O> {\n\t\t\treturn new ChainableEvent(map(this.event, fn));\n\t\t}\n\n\t\tforEach(fn: (i: T) => void): IChainableEvent<T> {\n\t\t\treturn new ChainableEvent(forEach(this.event, fn));\n\t\t}\n\n\t\tfilter(fn: (e: T) => boolean): IChainableEvent<T>;\n\t\tfilter<R>(fn: (e: T | R) => e is R): IChainableEvent<R>;\n\t\tfilter(fn: (e: T) => boolean): IChainableEvent<T> {\n\t\t\treturn new ChainableEvent(filter(this.event, fn));\n\t\t}\n\n\t\treduce<R>(merge: (last: R | undefined, event: T) => R, initial?: R): IChainableEvent<R> {\n\t\t\treturn new ChainableEvent(reduce(this.event, merge, initial));\n\t\t}\n\n\t\tlatch(): IChainableEvent<T> {\n\t\t\treturn new ChainableEvent(latch(this.event));\n\t\t}\n\n\t\tdebounce(merge: (last: T | undefined, event: T) => T, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<T>;\n\t\tdebounce<R>(merge: (last: R | undefined, event: T) => R, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<R>;\n\t\tdebounce<R>(merge: (last: R | undefined, event: T) => R, delay: number = 100, leading = false, leakWarningThreshold?: number): IChainableEvent<R> {\n\t\t\treturn new ChainableEvent(debounce(this.event, merge, delay, leading, leakWarningThreshold));\n\t\t}\n\n\t\ton(listener: (e: T) => any, thisArgs: any, disposables: IDisposable[] | DisposableStore) {\n\t\t\treturn this.event(listener, thisArgs, disposables);\n\t\t}\n\n\t\tonce(listener: (e: T) => any, thisArgs: any, disposables: IDisposable[]) {\n\t\t\treturn once(this.event)(listener, thisArgs, disposables);\n\t\t}\n\t}\n\n\texport function chain<T>(event: Event<T>): IChainableEvent<T> {\n\t\treturn new ChainableEvent(event);\n\t}\n\n\texport interface NodeEventEmitter {\n\t\ton(event: string | symbol, listener: Function): unknown;\n\t\tremoveListener(event: string | symbol, listener: Function): unknown;\n\t}\n\n\texport function fromNodeEventEmitter<T>(emitter: NodeEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.on(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onFirstListenerAdd, onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\texport interface DOMEventEmitter {\n\t\taddEventListener(event: string | symbol, listener: Function): void;\n\t\tremoveEventListener(event: string | symbol, listener: Function): void;\n\t}\n\n\texport function fromDOMEventEmitter<T>(emitter: DOMEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.addEventListener(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeEventListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onFirstListenerAdd, onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\texport function fromPromise<T = any>(promise: Promise<T>): Event<undefined> {\n\t\tconst emitter = new Emitter<undefined>();\n\t\tlet shouldEmit = false;\n\n\t\tpromise\n\t\t\t.then(undefined, () => null)\n\t\t\t.then(() => {\n\t\t\t\tif (!shouldEmit) {\n\t\t\t\t\tsetTimeout(() => emitter.fire(undefined), 0);\n\t\t\t\t} else {\n\t\t\t\t\temitter.fire(undefined);\n\t\t\t\t}\n\t\t\t});\n\n\t\tshouldEmit = true;\n\t\treturn emitter.event;\n\t}\n\n\texport function toPromise<T>(event: Event<T>): Promise<T> {\n\t\treturn new Promise(resolve => once(event)(resolve));\n\t}\n}\n\nexport type Listener<T> = [(e: T) => void, any] | ((e: T) => void);\n\nexport interface EmitterOptions {\n\tonFirstListenerAdd?: Function;\n\tonFirstListenerDidAdd?: Function;\n\tonListenerDidAdd?: Function;\n\tonLastListenerRemove?: Function;\n\tleakWarningThreshold?: number;\n\n\t/** ONLY enable this during development */\n\t_profName?: string\n}\n\n\nclass EventProfiling {\n\n\tprivate static _idPool = 0;\n\n\tprivate _name: string;\n\tprivate _stopWatch?: StopWatch;\n\tprivate _listenerCount: number = 0;\n\tprivate _invocationCount = 0;\n\tprivate _elapsedOverall = 0;\n\n\tconstructor(name: string) {\n\t\tthis._name = `${name}_${EventProfiling._idPool++}`;\n\t}\n\n\tstart(listenerCount: number): void {\n\t\tthis._stopWatch = new StopWatch(true);\n\t\tthis._listenerCount = listenerCount;\n\t}\n\n\tstop(): void {\n\t\tif (this._stopWatch) {\n\t\t\tconst elapsed = this._stopWatch.elapsed();\n\t\t\tthis._elapsedOverall += elapsed;\n\t\t\tthis._invocationCount += 1;\n\n\t\t\tconsole.info(`did FIRE ${this._name}: elapsed_ms: ${elapsed.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`);\n\t\t\tthis._stopWatch = undefined;\n\t\t}\n\t}\n}\n\nlet _globalLeakWarningThreshold = -1;\nexport function setGlobalLeakWarningThreshold(n: number): IDisposable {\n\tconst oldValue = _globalLeakWarningThreshold;\n\t_globalLeakWarningThreshold = n;\n\treturn {\n\t\tdispose() {\n\t\t\t_globalLeakWarningThreshold = oldValue;\n\t\t}\n\t};\n}\n\nclass LeakageMonitor {\n\n\tprivate _stacks: Map<string, number> | undefined;\n\tprivate _warnCountdown: number = 0;\n\n\tconstructor(\n\t\treadonly customThreshold?: number,\n\t\treadonly name: string = Math.random().toString(18).slice(2, 5),\n\t) { }\n\n\tdispose(): void {\n\t\tif (this._stacks) {\n\t\t\tthis._stacks.clear();\n\t\t}\n\t}\n\n\tcheck(listenerCount: number): undefined | (() => void) {\n\n\t\tlet threshold = _globalLeakWarningThreshold;\n\t\tif (typeof this.customThreshold === 'number') {\n\t\t\tthreshold = this.customThreshold;\n\t\t}\n\n\t\tif (threshold <= 0 || listenerCount < threshold) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!this._stacks) {\n\t\t\tthis._stacks = new Map();\n\t\t}\n\t\tconst stack = new Error().stack!.split('\\n').slice(3).join('\\n');\n\t\tconst count = (this._stacks.get(stack) || 0);\n\t\tthis._stacks.set(stack, count + 1);\n\t\tthis._warnCountdown -= 1;\n\n\t\tif (this._warnCountdown <= 0) {\n\t\t\t// only warn on first exceed and then every time the limit\n\t\t\t// is exceeded by 50% again\n\t\t\tthis._warnCountdown = threshold * 0.5;\n\n\t\t\t// find most frequent listener and print warning\n\t\t\tlet topStack: string | undefined;\n\t\t\tlet topCount: number = 0;\n\t\t\tfor (const [stack, count] of this._stacks) {\n\t\t\t\tif (!topStack || topCount < count) {\n\t\t\t\t\ttopStack = stack;\n\t\t\t\t\ttopCount = count;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconsole.warn(`[${this.name}] potential listener LEAK detected, having ${listenerCount} listeners already. MOST frequent listener (${topCount}):`);\n\t\t\tconsole.warn(topStack!);\n\t\t}\n\n\t\treturn () => {\n\t\t\tconst count = (this._stacks!.get(stack) || 0);\n\t\t\tthis._stacks!.set(stack, count - 1);\n\t\t};\n\t}\n}\n\n/**\n * The Emitter can be used to expose an Event to the public\n * to fire it from the insides.\n * Sample:\n\tclass Document {\n\n\t\tprivate readonly _onDidChange = new Emitter<(value:string)=>any>();\n\n\t\tpublic onDidChange = this._onDidChange.event;\n\n\t\t// getter-style\n\t\t// get onDidChange(): Event<(value:string)=>any> {\n\t\t// \treturn this._onDidChange.event;\n\t\t// }\n\n\t\tprivate _doIt() {\n\t\t\t//...\n\t\t\tthis._onDidChange.fire(value);\n\t\t}\n\t}\n */\nexport class Emitter<T> {\n\n\tprivate static readonly _noop = function () { };\n\n\tprivate readonly _options?: EmitterOptions;\n\tprivate readonly _leakageMon?: LeakageMonitor;\n\tprivate readonly _perfMon?: EventProfiling;\n\tprivate _disposed: boolean = false;\n\tprivate _event?: Event<T>;\n\tprivate _deliveryQueue?: LinkedList<[Listener<T>, T]>;\n\tprotected _listeners?: LinkedList<Listener<T>>;\n\n\tconstructor(options?: EmitterOptions) {\n\t\tthis._options = options;\n\t\tthis._leakageMon = _globalLeakWarningThreshold > 0 ? new LeakageMonitor(this._options && this._options.leakWarningThreshold) : undefined;\n\t\tthis._perfMon = this._options?._profName ? new EventProfiling(this._options._profName) : undefined;\n\t}\n\n\t/**\n\t * For the public to allow to subscribe\n\t * to events from this Emitter\n\t */\n\tget event(): Event<T> {\n\t\tif (!this._event) {\n\t\t\tthis._event = (listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore) => {\n\t\t\t\tif (!this._listeners) {\n\t\t\t\t\tthis._listeners = new LinkedList();\n\t\t\t\t}\n\n\t\t\t\tconst firstListener = this._listeners.isEmpty();\n\n\t\t\t\tif (firstListener && this._options && this._options.onFirstListenerAdd) {\n\t\t\t\t\tthis._options.onFirstListenerAdd(this);\n\t\t\t\t}\n\n\t\t\t\tconst remove = this._listeners.push(!thisArgs ? listener : [listener, thisArgs]);\n\n\t\t\t\tif (firstListener && this._options && this._options.onFirstListenerDidAdd) {\n\t\t\t\t\tthis._options.onFirstListenerDidAdd(this);\n\t\t\t\t}\n\n\t\t\t\tif (this._options && this._options.onListenerDidAdd) {\n\t\t\t\t\tthis._options.onListenerDidAdd(this, listener, thisArgs);\n\t\t\t\t}\n\n\t\t\t\t// check and record this emitter for potential leakage\n\t\t\t\tconst removeMonitor = this._leakageMon?.check(this._listeners.size);\n\n\t\t\t\tlet result: IDisposable;\n\t\t\t\tresult = {\n\t\t\t\t\tdispose: () => {\n\t\t\t\t\t\tif (removeMonitor) {\n\t\t\t\t\t\t\tremoveMonitor();\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult.dispose = Emitter._noop;\n\t\t\t\t\t\tif (!this._disposed) {\n\t\t\t\t\t\t\tremove();\n\t\t\t\t\t\t\tif (this._options && this._options.onLastListenerRemove) {\n\t\t\t\t\t\t\t\tconst hasListeners = (this._listeners && !this._listeners.isEmpty());\n\t\t\t\t\t\t\t\tif (!hasListeners) {\n\t\t\t\t\t\t\t\t\tthis._options.onLastListenerRemove(this);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (disposables instanceof DisposableStore) {\n\t\t\t\t\tdisposables.add(result);\n\t\t\t\t} else if (Array.isArray(disposables)) {\n\t\t\t\t\tdisposables.push(result);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t\treturn this._event;\n\t}\n\n\t/**\n\t * To be kept private to fire an event to\n\t * subscribers\n\t */\n\tfire(event: T): void {\n\t\tif (this._listeners) {\n\t\t\t// put all [listener,event]-pairs into delivery queue\n\t\t\t// then emit all event. an inner/nested event might be\n\t\t\t// the driver of this\n\n\t\t\tif (!this._deliveryQueue) {\n\t\t\t\tthis._deliveryQueue = new LinkedList();\n\t\t\t}\n\n\t\t\tfor (let listener of this._listeners) {\n\t\t\t\tthis._deliveryQueue.push([listener, event]);\n\t\t\t}\n\n\t\t\t// start/stop performance insight collection\n\t\t\tthis._perfMon?.start(this._deliveryQueue.size);\n\n\t\t\twhile (this._deliveryQueue.size > 0) {\n\t\t\t\tconst [listener, event] = this._deliveryQueue.shift()!;\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof listener === 'function') {\n\t\t\t\t\t\tlistener.call(undefined, event);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlistener[0].call(listener[1], event);\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tonUnexpectedError(e);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._perfMon?.stop();\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis._listeners?.clear();\n\t\tthis._deliveryQueue?.clear();\n\t\tthis._leakageMon?.dispose();\n\t\tthis._disposed = true;\n\t}\n}\n\nexport class PauseableEmitter<T> extends Emitter<T> {\n\n\tprivate _isPaused = 0;\n\tprivate _eventQueue = new LinkedList<T>();\n\tprivate _mergeFn?: (input: T[]) => T;\n\n\tconstructor(options?: EmitterOptions & { merge?: (input: T[]) => T }) {\n\t\tsuper(options);\n\t\tthis._mergeFn = options?.merge;\n\t}\n\n\tpause(): void {\n\t\tthis._isPaused++;\n\t}\n\n\tresume(): void {\n\t\tif (this._isPaused !== 0 && --this._isPaused === 0) {\n\t\t\tif (this._mergeFn) {\n\t\t\t\t// use the merge function to create a single composite\n\t\t\t\t// event. make a copy in case firing pauses this emitter\n\t\t\t\tconst events = Array.from(this._eventQueue);\n\t\t\t\tthis._eventQueue.clear();\n\t\t\t\tsuper.fire(this._mergeFn(events));\n\n\t\t\t} else {\n\t\t\t\t// no merging, fire each event individually and test\n\t\t\t\t// that this emitter isn't paused halfway through\n\t\t\t\twhile (!this._isPaused && this._eventQueue.size !== 0) {\n\t\t\t\t\tsuper.fire(this._eventQueue.shift()!);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toverride fire(event: T): void {\n\t\tif (this._listeners) {\n\t\t\tif (this._isPaused !== 0) {\n\t\t\t\tthis._eventQueue.push(event);\n\t\t\t} else {\n\t\t\t\tsuper.fire(event);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class EventMultiplexer<T> implements IDisposable {\n\n\tprivate readonly emitter: Emitter<T>;\n\tprivate hasListeners = false;\n\tprivate events: { event: Event<T>; listener: IDisposable | null; }[] = [];\n\n\tconstructor() {\n\t\tthis.emitter = new Emitter<T>({\n\t\t\tonFirstListenerAdd: () => this.onFirstListenerAdd(),\n\t\t\tonLastListenerRemove: () => this.onLastListenerRemove()\n\t\t});\n\t}\n\n\tget event(): Event<T> {\n\t\treturn this.emitter.event;\n\t}\n\n\tadd(event: Event<T>): IDisposable {\n\t\tconst e = { event: event, listener: null };\n\t\tthis.events.push(e);\n\n\t\tif (this.hasListeners) {\n\t\t\tthis.hook(e);\n\t\t}\n\n\t\tconst dispose = () => {\n\t\t\tif (this.hasListeners) {\n\t\t\t\tthis.unhook(e);\n\t\t\t}\n\n\t\t\tconst idx = this.events.indexOf(e);\n\t\t\tthis.events.splice(idx, 1);\n\t\t};\n\n\t\treturn toDisposable(onceFn(dispose));\n\t}\n\n\tprivate onFirstListenerAdd(): void {\n\t\tthis.hasListeners = true;\n\t\tthis.events.forEach(e => this.hook(e));\n\t}\n\n\tprivate onLastListenerRemove(): void {\n\t\tthis.hasListeners = false;\n\t\tthis.events.forEach(e => this.unhook(e));\n\t}\n\n\tprivate hook(e: { event: Event<T>; listener: IDisposable | null; }): void {\n\t\te.listener = e.event(r => this.emitter.fire(r));\n\t}\n\n\tprivate unhook(e: { event: Event<T>; listener: IDisposable | null; }): void {\n\t\tif (e.listener) {\n\t\t\te.listener.dispose();\n\t\t}\n\t\te.listener = null;\n\t}\n\n\tdispose(): void {\n\t\tthis.emitter.dispose();\n\t}\n}\n\n/**\n * The EventBufferer is useful in situations in which you want\n * to delay firing your events during some code.\n * You can wrap that code and be sure that the event will not\n * be fired during that wrap.\n *\n * ```\n * const emitter: Emitter;\n * const delayer = new EventDelayer();\n * const delayedEvent = delayer.wrapEvent(emitter.event);\n *\n * delayedEvent(console.log);\n *\n * delayer.bufferEvents(() => {\n *   emitter.fire(); // event will not be fired yet\n * });\n *\n * // event will only be fired at this point\n * ```\n */\nexport class EventBufferer {\n\n\tprivate buffers: Function[][] = [];\n\n\twrapEvent<T>(event: Event<T>): Event<T> {\n\t\treturn (listener, thisArgs?, disposables?) => {\n\t\t\treturn event(i => {\n\t\t\t\tconst buffer = this.buffers[this.buffers.length - 1];\n\n\t\t\t\tif (buffer) {\n\t\t\t\t\tbuffer.push(() => listener.call(thisArgs, i));\n\t\t\t\t} else {\n\t\t\t\t\tlistener.call(thisArgs, i);\n\t\t\t\t}\n\t\t\t}, undefined, disposables);\n\t\t};\n\t}\n\n\tbufferEvents<R = void>(fn: () => R): R {\n\t\tconst buffer: Array<() => R> = [];\n\t\tthis.buffers.push(buffer);\n\t\tconst r = fn();\n\t\tthis.buffers.pop();\n\t\tbuffer.forEach(flush => flush());\n\t\treturn r;\n\t}\n}\n\n/**\n * A Relay is an event forwarder which functions as a replugabble event pipe.\n * Once created, you can connect an input event to it and it will simply forward\n * events from that input event through its own `event` property. The `input`\n * can be changed at any point in time.\n */\nexport class Relay<T> implements IDisposable {\n\n\tprivate listening = false;\n\tprivate inputEvent: Event<T> = Event.None;\n\tprivate inputEventListener: IDisposable = Disposable.None;\n\n\tprivate readonly emitter = new Emitter<T>({\n\t\tonFirstListenerDidAdd: () => {\n\t\t\tthis.listening = true;\n\t\t\tthis.inputEventListener = this.inputEvent(this.emitter.fire, this.emitter);\n\t\t},\n\t\tonLastListenerRemove: () => {\n\t\t\tthis.listening = false;\n\t\t\tthis.inputEventListener.dispose();\n\t\t}\n\t});\n\n\treadonly event: Event<T> = this.emitter.event;\n\n\tset input(event: Event<T>) {\n\t\tthis.inputEvent = event;\n\n\t\tif (this.listening) {\n\t\t\tthis.inputEventListener.dispose();\n\t\t\tthis.inputEventListener = event(this.emitter.fire, this.emitter);\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.inputEventListener.dispose();\n\t\tthis.emitter.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IDisposable } from 'vs/base/common/lifecycle';\n\nclass WindowManager {\n\n\tpublic static readonly INSTANCE = new WindowManager();\n\n\t// --- Zoom Level\n\tprivate _zoomLevel: number = 0;\n\tprivate _lastZoomLevelChangeTime: number = 0;\n\tprivate readonly _onDidChangeZoomLevel = new Emitter<number>();\n\n\tpublic readonly onDidChangeZoomLevel: Event<number> = this._onDidChangeZoomLevel.event;\n\tpublic getZoomLevel(): number {\n\t\treturn this._zoomLevel;\n\t}\n\tpublic getTimeSinceLastZoomLevelChanged(): number {\n\t\treturn Date.now() - this._lastZoomLevelChangeTime;\n\t}\n\tpublic setZoomLevel(zoomLevel: number, isTrusted: boolean): void {\n\t\tif (this._zoomLevel === zoomLevel) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._zoomLevel = zoomLevel;\n\t\t// See https://github.com/microsoft/vscode/issues/26151\n\t\tthis._lastZoomLevelChangeTime = isTrusted ? 0 : Date.now();\n\t\tthis._onDidChangeZoomLevel.fire(this._zoomLevel);\n\t}\n\n\t// --- Zoom Factor\n\tprivate _zoomFactor: number = 1;\n\n\tpublic getZoomFactor(): number {\n\t\treturn this._zoomFactor;\n\t}\n\tpublic setZoomFactor(zoomFactor: number): void {\n\t\tthis._zoomFactor = zoomFactor;\n\t}\n\n\t// --- Pixel Ratio\n\tpublic getPixelRatio(): number {\n\t\tlet ctx: any = document.createElement('canvas').getContext('2d');\n\t\tlet dpr = window.devicePixelRatio || 1;\n\t\tlet bsr = ctx.webkitBackingStorePixelRatio ||\n\t\t\tctx.mozBackingStorePixelRatio ||\n\t\t\tctx.msBackingStorePixelRatio ||\n\t\t\tctx.oBackingStorePixelRatio ||\n\t\t\tctx.backingStorePixelRatio || 1;\n\t\treturn dpr / bsr;\n\t}\n\n\t// --- Fullscreen\n\tprivate _fullscreen: boolean = false;\n\tprivate readonly _onDidChangeFullscreen = new Emitter<void>();\n\n\tpublic readonly onDidChangeFullscreen: Event<void> = this._onDidChangeFullscreen.event;\n\tpublic setFullscreen(fullscreen: boolean): void {\n\t\tif (this._fullscreen === fullscreen) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._fullscreen = fullscreen;\n\t\tthis._onDidChangeFullscreen.fire();\n\t}\n\tpublic isFullscreen(): boolean {\n\t\treturn this._fullscreen;\n\t}\n}\n\n/** A zoom index, e.g. 1, 2, 3 */\nexport function setZoomLevel(zoomLevel: number, isTrusted: boolean): void {\n\tWindowManager.INSTANCE.setZoomLevel(zoomLevel, isTrusted);\n}\nexport function getZoomLevel(): number {\n\treturn WindowManager.INSTANCE.getZoomLevel();\n}\n/** Returns the time (in ms) since the zoom level was changed */\nexport function getTimeSinceLastZoomLevelChanged(): number {\n\treturn WindowManager.INSTANCE.getTimeSinceLastZoomLevelChanged();\n}\nexport function onDidChangeZoomLevel(callback: (zoomLevel: number) => void): IDisposable {\n\treturn WindowManager.INSTANCE.onDidChangeZoomLevel(callback);\n}\n\n/** The zoom scale for an index, e.g. 1, 1.2, 1.4 */\nexport function getZoomFactor(): number {\n\treturn WindowManager.INSTANCE.getZoomFactor();\n}\nexport function setZoomFactor(zoomFactor: number): void {\n\tWindowManager.INSTANCE.setZoomFactor(zoomFactor);\n}\n\nexport function getPixelRatio(): number {\n\treturn WindowManager.INSTANCE.getPixelRatio();\n}\n\nexport function setFullscreen(fullscreen: boolean): void {\n\tWindowManager.INSTANCE.setFullscreen(fullscreen);\n}\nexport function isFullscreen(): boolean {\n\treturn WindowManager.INSTANCE.isFullscreen();\n}\nexport const onDidChangeFullscreen = WindowManager.INSTANCE.onDidChangeFullscreen;\n\nconst userAgent = navigator.userAgent;\n\nexport const isFirefox = (userAgent.indexOf('Firefox') >= 0);\nexport const isWebKit = (userAgent.indexOf('AppleWebKit') >= 0);\nexport const isChrome = (userAgent.indexOf('Chrome') >= 0);\nexport const isSafari = (!isChrome && (userAgent.indexOf('Safari') >= 0));\nexport const isWebkitWebView = (!isChrome && !isSafari && isWebKit);\nexport const isIPad = (userAgent.indexOf('iPad') >= 0 || (isSafari && navigator.maxTouchPoints > 0));\nexport const isEdgeLegacyWebView = (userAgent.indexOf('Edge/') >= 0) && (userAgent.indexOf('WebView/') >= 0);\nexport const isElectron = (userAgent.indexOf('Electron/') >= 0);\nexport const isAndroid = (userAgent.indexOf('Android') >= 0);\nexport const isStandalone = (window.matchMedia && window.matchMedia('(display-mode: standalone)').matches);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport * as platform from 'vs/base/common/platform';\n\nexport const enum KeyboardSupport {\n\tAlways,\n\tFullScreen,\n\tNone\n}\n\n/**\n * Browser feature we can support in current platform, browser and environment.\n */\nexport const BrowserFeatures = {\n\tclipboard: {\n\t\twriteText: (\n\t\t\tplatform.isNative\n\t\t\t|| (document.queryCommandSupported && document.queryCommandSupported('copy'))\n\t\t\t|| !!(navigator && navigator.clipboard && navigator.clipboard.writeText)\n\t\t),\n\t\treadText: (\n\t\t\tplatform.isNative\n\t\t\t|| !!(navigator && navigator.clipboard && navigator.clipboard.readText)\n\t\t)\n\t},\n\tkeyboard: (() => {\n\t\tif (platform.isNative || browser.isStandalone) {\n\t\t\treturn KeyboardSupport.Always;\n\t\t}\n\n\t\tif ((<any>navigator).keyboard || browser.isSafari) {\n\t\t\treturn KeyboardSupport.FullScreen;\n\t\t}\n\n\t\treturn KeyboardSupport.None;\n\t})(),\n\n\t// 'ontouchstart' in window always evaluates to true with typescript's modern typings. This causes `window` to be\n\t// `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n\ttouch: 'ontouchstart' in window || navigator.maxTouchPoints > 0 || (window as Window).navigator.msMaxTouchPoints > 0,\n\tpointerEvents: window.PointerEvent && ('ontouchstart' in window || (window as Window).navigator.maxTouchPoints > 0 || navigator.maxTouchPoints > 0 || (window as Window).navigator.msMaxTouchPoints > 0)\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event as BaseEvent, Emitter } from 'vs/base/common/event';\n\nexport type EventHandler = HTMLElement | HTMLDocument | Window;\n\nexport interface IDomEvent {\n\t<K extends keyof HTMLElementEventMap>(element: EventHandler, type: K, useCapture?: boolean): BaseEvent<HTMLElementEventMap[K]>;\n\t(element: EventHandler, type: string, useCapture?: boolean): BaseEvent<unknown>;\n}\n\nexport const domEvent: IDomEvent = (element: EventHandler, type: string, useCapture?: boolean) => {\n\tconst fn = (e: Event) => emitter.fire(e);\n\tconst emitter = new Emitter<Event>({\n\t\tonFirstListenerAdd: () => {\n\t\t\telement.addEventListener(type, fn, useCapture);\n\t\t},\n\t\tonLastListenerRemove: () => {\n\t\t\telement.removeEventListener(type, fn, useCapture);\n\t\t}\n\t});\n\n\treturn emitter.event;\n};\n\nexport interface CancellableEvent {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nexport function stopEvent<T extends CancellableEvent>(event: T): T {\n\tevent.preventDefault();\n\tevent.stopPropagation();\n\treturn event;\n}\n\nexport function stop<T extends CancellableEvent>(event: BaseEvent<T>): BaseEvent<T> {\n\treturn BaseEvent.map(event, stopEvent);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport { KeyCode, KeyCodeUtils, KeyMod, SimpleKeybinding } from 'vs/base/common/keyCodes';\nimport * as platform from 'vs/base/common/platform';\n\nlet KEY_CODE_MAP: { [keyCode: number]: KeyCode } = new Array(230);\nlet INVERSE_KEY_CODE_MAP: KeyCode[] = new Array(KeyCode.MAX_VALUE);\n\n(function () {\n\tfor (let i = 0; i < INVERSE_KEY_CODE_MAP.length; i++) {\n\t\tINVERSE_KEY_CODE_MAP[i] = -1;\n\t}\n\n\tfunction define(code: number, keyCode: KeyCode): void {\n\t\tKEY_CODE_MAP[code] = keyCode;\n\t\tINVERSE_KEY_CODE_MAP[keyCode] = code;\n\t}\n\n\tdefine(3, KeyCode.PauseBreak); // VK_CANCEL 0x03 Control-break processing\n\tdefine(8, KeyCode.Backspace);\n\tdefine(9, KeyCode.Tab);\n\tdefine(13, KeyCode.Enter);\n\tdefine(16, KeyCode.Shift);\n\tdefine(17, KeyCode.Ctrl);\n\tdefine(18, KeyCode.Alt);\n\tdefine(19, KeyCode.PauseBreak);\n\tdefine(20, KeyCode.CapsLock);\n\tdefine(27, KeyCode.Escape);\n\tdefine(32, KeyCode.Space);\n\tdefine(33, KeyCode.PageUp);\n\tdefine(34, KeyCode.PageDown);\n\tdefine(35, KeyCode.End);\n\tdefine(36, KeyCode.Home);\n\tdefine(37, KeyCode.LeftArrow);\n\tdefine(38, KeyCode.UpArrow);\n\tdefine(39, KeyCode.RightArrow);\n\tdefine(40, KeyCode.DownArrow);\n\tdefine(45, KeyCode.Insert);\n\tdefine(46, KeyCode.Delete);\n\n\tdefine(48, KeyCode.KEY_0);\n\tdefine(49, KeyCode.KEY_1);\n\tdefine(50, KeyCode.KEY_2);\n\tdefine(51, KeyCode.KEY_3);\n\tdefine(52, KeyCode.KEY_4);\n\tdefine(53, KeyCode.KEY_5);\n\tdefine(54, KeyCode.KEY_6);\n\tdefine(55, KeyCode.KEY_7);\n\tdefine(56, KeyCode.KEY_8);\n\tdefine(57, KeyCode.KEY_9);\n\n\tdefine(65, KeyCode.KEY_A);\n\tdefine(66, KeyCode.KEY_B);\n\tdefine(67, KeyCode.KEY_C);\n\tdefine(68, KeyCode.KEY_D);\n\tdefine(69, KeyCode.KEY_E);\n\tdefine(70, KeyCode.KEY_F);\n\tdefine(71, KeyCode.KEY_G);\n\tdefine(72, KeyCode.KEY_H);\n\tdefine(73, KeyCode.KEY_I);\n\tdefine(74, KeyCode.KEY_J);\n\tdefine(75, KeyCode.KEY_K);\n\tdefine(76, KeyCode.KEY_L);\n\tdefine(77, KeyCode.KEY_M);\n\tdefine(78, KeyCode.KEY_N);\n\tdefine(79, KeyCode.KEY_O);\n\tdefine(80, KeyCode.KEY_P);\n\tdefine(81, KeyCode.KEY_Q);\n\tdefine(82, KeyCode.KEY_R);\n\tdefine(83, KeyCode.KEY_S);\n\tdefine(84, KeyCode.KEY_T);\n\tdefine(85, KeyCode.KEY_U);\n\tdefine(86, KeyCode.KEY_V);\n\tdefine(87, KeyCode.KEY_W);\n\tdefine(88, KeyCode.KEY_X);\n\tdefine(89, KeyCode.KEY_Y);\n\tdefine(90, KeyCode.KEY_Z);\n\n\tdefine(93, KeyCode.ContextMenu);\n\n\tdefine(96, KeyCode.NUMPAD_0);\n\tdefine(97, KeyCode.NUMPAD_1);\n\tdefine(98, KeyCode.NUMPAD_2);\n\tdefine(99, KeyCode.NUMPAD_3);\n\tdefine(100, KeyCode.NUMPAD_4);\n\tdefine(101, KeyCode.NUMPAD_5);\n\tdefine(102, KeyCode.NUMPAD_6);\n\tdefine(103, KeyCode.NUMPAD_7);\n\tdefine(104, KeyCode.NUMPAD_8);\n\tdefine(105, KeyCode.NUMPAD_9);\n\tdefine(106, KeyCode.NUMPAD_MULTIPLY);\n\tdefine(107, KeyCode.NUMPAD_ADD);\n\tdefine(108, KeyCode.NUMPAD_SEPARATOR);\n\tdefine(109, KeyCode.NUMPAD_SUBTRACT);\n\tdefine(110, KeyCode.NUMPAD_DECIMAL);\n\tdefine(111, KeyCode.NUMPAD_DIVIDE);\n\n\tdefine(112, KeyCode.F1);\n\tdefine(113, KeyCode.F2);\n\tdefine(114, KeyCode.F3);\n\tdefine(115, KeyCode.F4);\n\tdefine(116, KeyCode.F5);\n\tdefine(117, KeyCode.F6);\n\tdefine(118, KeyCode.F7);\n\tdefine(119, KeyCode.F8);\n\tdefine(120, KeyCode.F9);\n\tdefine(121, KeyCode.F10);\n\tdefine(122, KeyCode.F11);\n\tdefine(123, KeyCode.F12);\n\tdefine(124, KeyCode.F13);\n\tdefine(125, KeyCode.F14);\n\tdefine(126, KeyCode.F15);\n\tdefine(127, KeyCode.F16);\n\tdefine(128, KeyCode.F17);\n\tdefine(129, KeyCode.F18);\n\tdefine(130, KeyCode.F19);\n\n\tdefine(144, KeyCode.NumLock);\n\tdefine(145, KeyCode.ScrollLock);\n\n\tdefine(186, KeyCode.US_SEMICOLON);\n\tdefine(187, KeyCode.US_EQUAL);\n\tdefine(188, KeyCode.US_COMMA);\n\tdefine(189, KeyCode.US_MINUS);\n\tdefine(190, KeyCode.US_DOT);\n\tdefine(191, KeyCode.US_SLASH);\n\tdefine(192, KeyCode.US_BACKTICK);\n\tdefine(193, KeyCode.ABNT_C1);\n\tdefine(194, KeyCode.ABNT_C2);\n\tdefine(219, KeyCode.US_OPEN_SQUARE_BRACKET);\n\tdefine(220, KeyCode.US_BACKSLASH);\n\tdefine(221, KeyCode.US_CLOSE_SQUARE_BRACKET);\n\tdefine(222, KeyCode.US_QUOTE);\n\tdefine(223, KeyCode.OEM_8);\n\n\tdefine(226, KeyCode.OEM_102);\n\n\t/**\n\t * https://lists.w3.org/Archives/Public/www-dom/2010JulSep/att-0182/keyCode-spec.html\n\t * If an Input Method Editor is processing key input and the event is keydown, return 229.\n\t */\n\tdefine(229, KeyCode.KEY_IN_COMPOSITION);\n\n\tif (browser.isFirefox) {\n\t\tdefine(59, KeyCode.US_SEMICOLON);\n\t\tdefine(107, KeyCode.US_EQUAL);\n\t\tdefine(109, KeyCode.US_MINUS);\n\t\tif (platform.isMacintosh) {\n\t\t\tdefine(224, KeyCode.Meta);\n\t\t}\n\t} else if (browser.isWebKit) {\n\t\tdefine(91, KeyCode.Meta);\n\t\tif (platform.isMacintosh) {\n\t\t\t// the two meta keys in the Mac have different key codes (91 and 93)\n\t\t\tdefine(93, KeyCode.Meta);\n\t\t} else {\n\t\t\tdefine(92, KeyCode.Meta);\n\t\t}\n\t}\n})();\n\nfunction extractKeyCode(e: KeyboardEvent): KeyCode {\n\tif (e.charCode) {\n\t\t// \"keypress\" events mostly\n\t\tlet char = String.fromCharCode(e.charCode).toUpperCase();\n\t\treturn KeyCodeUtils.fromString(char);\n\t}\n\treturn KEY_CODE_MAP[e.keyCode] || KeyCode.Unknown;\n}\n\nexport function getCodeForKeyCode(keyCode: KeyCode): number {\n\treturn INVERSE_KEY_CODE_MAP[keyCode];\n}\n\nexport interface IKeyboardEvent {\n\n\treadonly _standardKeyboardEventBrand: true;\n\n\treadonly browserEvent: KeyboardEvent;\n\treadonly target: HTMLElement;\n\n\treadonly ctrlKey: boolean;\n\treadonly shiftKey: boolean;\n\treadonly altKey: boolean;\n\treadonly metaKey: boolean;\n\treadonly keyCode: KeyCode;\n\treadonly code: string;\n\n\t/**\n\t * @internal\n\t */\n\ttoKeybinding(): SimpleKeybinding;\n\tequals(keybinding: number): boolean;\n\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nconst ctrlKeyMod = (platform.isMacintosh ? KeyMod.WinCtrl : KeyMod.CtrlCmd);\nconst altKeyMod = KeyMod.Alt;\nconst shiftKeyMod = KeyMod.Shift;\nconst metaKeyMod = (platform.isMacintosh ? KeyMod.CtrlCmd : KeyMod.WinCtrl);\n\nexport function printKeyboardEvent(e: KeyboardEvent): string {\n\tlet modifiers: string[] = [];\n\tif (e.ctrlKey) {\n\t\tmodifiers.push(`ctrl`);\n\t}\n\tif (e.shiftKey) {\n\t\tmodifiers.push(`shift`);\n\t}\n\tif (e.altKey) {\n\t\tmodifiers.push(`alt`);\n\t}\n\tif (e.metaKey) {\n\t\tmodifiers.push(`meta`);\n\t}\n\treturn `modifiers: [${modifiers.join(',')}], code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`;\n}\n\nexport function printStandardKeyboardEvent(e: StandardKeyboardEvent): string {\n\tlet modifiers: string[] = [];\n\tif (e.ctrlKey) {\n\t\tmodifiers.push(`ctrl`);\n\t}\n\tif (e.shiftKey) {\n\t\tmodifiers.push(`shift`);\n\t}\n\tif (e.altKey) {\n\t\tmodifiers.push(`alt`);\n\t}\n\tif (e.metaKey) {\n\t\tmodifiers.push(`meta`);\n\t}\n\treturn `modifiers: [${modifiers.join(',')}], code: ${e.code}, keyCode: ${e.keyCode} ('${KeyCodeUtils.toString(e.keyCode)}')`;\n}\n\nexport class StandardKeyboardEvent implements IKeyboardEvent {\n\n\treadonly _standardKeyboardEventBrand = true;\n\n\tpublic readonly browserEvent: KeyboardEvent;\n\tpublic readonly target: HTMLElement;\n\n\tpublic readonly ctrlKey: boolean;\n\tpublic readonly shiftKey: boolean;\n\tpublic readonly altKey: boolean;\n\tpublic readonly metaKey: boolean;\n\tpublic readonly keyCode: KeyCode;\n\tpublic readonly code: string;\n\n\tprivate _asKeybinding: number;\n\tprivate _asRuntimeKeybinding: SimpleKeybinding;\n\n\tconstructor(source: KeyboardEvent) {\n\t\tlet e = source;\n\n\t\tthis.browserEvent = e;\n\t\tthis.target = <HTMLElement>e.target;\n\n\t\tthis.ctrlKey = e.ctrlKey;\n\t\tthis.shiftKey = e.shiftKey;\n\t\tthis.altKey = e.altKey;\n\t\tthis.metaKey = e.metaKey;\n\t\tthis.keyCode = extractKeyCode(e);\n\t\tthis.code = e.code;\n\n\t\t// console.info(e.type + \": keyCode: \" + e.keyCode + \", which: \" + e.which + \", charCode: \" + e.charCode + \", detail: \" + e.detail + \" ====> \" + this.keyCode + ' -- ' + KeyCode[this.keyCode]);\n\n\t\tthis.ctrlKey = this.ctrlKey || this.keyCode === KeyCode.Ctrl;\n\t\tthis.altKey = this.altKey || this.keyCode === KeyCode.Alt;\n\t\tthis.shiftKey = this.shiftKey || this.keyCode === KeyCode.Shift;\n\t\tthis.metaKey = this.metaKey || this.keyCode === KeyCode.Meta;\n\n\t\tthis._asKeybinding = this._computeKeybinding();\n\t\tthis._asRuntimeKeybinding = this._computeRuntimeKeybinding();\n\n\t\t// console.log(`code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`);\n\t}\n\n\tpublic preventDefault(): void {\n\t\tif (this.browserEvent && this.browserEvent.preventDefault) {\n\t\t\tthis.browserEvent.preventDefault();\n\t\t}\n\t}\n\n\tpublic stopPropagation(): void {\n\t\tif (this.browserEvent && this.browserEvent.stopPropagation) {\n\t\t\tthis.browserEvent.stopPropagation();\n\t\t}\n\t}\n\n\tpublic toKeybinding(): SimpleKeybinding {\n\t\treturn this._asRuntimeKeybinding;\n\t}\n\n\tpublic equals(other: number): boolean {\n\t\treturn this._asKeybinding === other;\n\t}\n\n\tprivate _computeKeybinding(): number {\n\t\tlet key = KeyCode.Unknown;\n\t\tif (this.keyCode !== KeyCode.Ctrl && this.keyCode !== KeyCode.Shift && this.keyCode !== KeyCode.Alt && this.keyCode !== KeyCode.Meta) {\n\t\t\tkey = this.keyCode;\n\t\t}\n\n\t\tlet result = 0;\n\t\tif (this.ctrlKey) {\n\t\t\tresult |= ctrlKeyMod;\n\t\t}\n\t\tif (this.altKey) {\n\t\t\tresult |= altKeyMod;\n\t\t}\n\t\tif (this.shiftKey) {\n\t\t\tresult |= shiftKeyMod;\n\t\t}\n\t\tif (this.metaKey) {\n\t\t\tresult |= metaKeyMod;\n\t\t}\n\t\tresult |= key;\n\n\t\treturn result;\n\t}\n\n\tprivate _computeRuntimeKeybinding(): SimpleKeybinding {\n\t\tlet key = KeyCode.Unknown;\n\t\tif (this.keyCode !== KeyCode.Ctrl && this.keyCode !== KeyCode.Shift && this.keyCode !== KeyCode.Alt && this.keyCode !== KeyCode.Meta) {\n\t\t\tkey = this.keyCode;\n\t\t}\n\t\treturn new SimpleKeybinding(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport { IframeUtils } from 'vs/base/browser/iframe';\nimport * as platform from 'vs/base/common/platform';\n\nexport interface IMouseEvent {\n\treadonly browserEvent: MouseEvent;\n\treadonly leftButton: boolean;\n\treadonly middleButton: boolean;\n\treadonly rightButton: boolean;\n\treadonly buttons: number;\n\treadonly target: HTMLElement;\n\treadonly detail: number;\n\treadonly posx: number;\n\treadonly posy: number;\n\treadonly ctrlKey: boolean;\n\treadonly shiftKey: boolean;\n\treadonly altKey: boolean;\n\treadonly metaKey: boolean;\n\treadonly timestamp: number;\n\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nexport class StandardMouseEvent implements IMouseEvent {\n\n\tpublic readonly browserEvent: MouseEvent;\n\n\tpublic readonly leftButton: boolean;\n\tpublic readonly middleButton: boolean;\n\tpublic readonly rightButton: boolean;\n\tpublic readonly buttons: number;\n\tpublic readonly target: HTMLElement;\n\tpublic detail: number;\n\tpublic readonly posx: number;\n\tpublic readonly posy: number;\n\tpublic readonly ctrlKey: boolean;\n\tpublic readonly shiftKey: boolean;\n\tpublic readonly altKey: boolean;\n\tpublic readonly metaKey: boolean;\n\tpublic readonly timestamp: number;\n\n\tconstructor(e: MouseEvent) {\n\t\tthis.timestamp = Date.now();\n\t\tthis.browserEvent = e;\n\t\tthis.leftButton = e.button === 0;\n\t\tthis.middleButton = e.button === 1;\n\t\tthis.rightButton = e.button === 2;\n\t\tthis.buttons = e.buttons;\n\n\t\tthis.target = <HTMLElement>e.target;\n\n\t\tthis.detail = e.detail || 1;\n\t\tif (e.type === 'dblclick') {\n\t\t\tthis.detail = 2;\n\t\t}\n\t\tthis.ctrlKey = e.ctrlKey;\n\t\tthis.shiftKey = e.shiftKey;\n\t\tthis.altKey = e.altKey;\n\t\tthis.metaKey = e.metaKey;\n\n\t\tif (typeof e.pageX === 'number') {\n\t\t\tthis.posx = e.pageX;\n\t\t\tthis.posy = e.pageY;\n\t\t} else {\n\t\t\t// Probably hit by MSGestureEvent\n\t\t\tthis.posx = e.clientX + document.body.scrollLeft + document.documentElement!.scrollLeft;\n\t\t\tthis.posy = e.clientY + document.body.scrollTop + document.documentElement!.scrollTop;\n\t\t}\n\n\t\t// Find the position of the iframe this code is executing in relative to the iframe where the event was captured.\n\t\tlet iframeOffsets = IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self, e.view);\n\t\tthis.posx -= iframeOffsets.left;\n\t\tthis.posy -= iframeOffsets.top;\n\t}\n\n\tpublic preventDefault(): void {\n\t\tthis.browserEvent.preventDefault();\n\t}\n\n\tpublic stopPropagation(): void {\n\t\tthis.browserEvent.stopPropagation();\n\t}\n}\n\nexport interface IDataTransfer {\n\tdropEffect: string;\n\teffectAllowed: string;\n\ttypes: any[];\n\tfiles: any[];\n\n\tsetData(type: string, data: string): void;\n\tsetDragImage(image: any, x: number, y: number): void;\n\n\tgetData(type: string): string;\n\tclearData(types?: string[]): void;\n}\n\nexport class DragMouseEvent extends StandardMouseEvent {\n\n\tpublic readonly dataTransfer: IDataTransfer;\n\n\tconstructor(e: MouseEvent) {\n\t\tsuper(e);\n\t\tthis.dataTransfer = (<any>e).dataTransfer;\n\t}\n\n}\n\nexport interface IMouseWheelEvent extends MouseEvent {\n\treadonly wheelDelta: number;\n\treadonly wheelDeltaX: number;\n\treadonly wheelDeltaY: number;\n\n\treadonly deltaX: number;\n\treadonly deltaY: number;\n\treadonly deltaZ: number;\n\treadonly deltaMode: number;\n}\n\ninterface IWebKitMouseWheelEvent {\n\twheelDeltaY: number;\n\twheelDeltaX: number;\n}\n\ninterface IGeckoMouseWheelEvent {\n\tHORIZONTAL_AXIS: number;\n\tVERTICAL_AXIS: number;\n\taxis: number;\n\tdetail: number;\n}\n\nexport class StandardWheelEvent {\n\n\tpublic readonly browserEvent: IMouseWheelEvent | null;\n\tpublic readonly deltaY: number;\n\tpublic readonly deltaX: number;\n\tpublic readonly target: Node;\n\n\tconstructor(e: IMouseWheelEvent | null, deltaX: number = 0, deltaY: number = 0) {\n\n\t\tthis.browserEvent = e || null;\n\t\tthis.target = e ? (e.target || (<any>e).targetNode || e.srcElement) : null;\n\n\t\tthis.deltaY = deltaY;\n\t\tthis.deltaX = deltaX;\n\n\t\tif (e) {\n\t\t\t// Old (deprecated) wheel events\n\t\t\tlet e1 = <IWebKitMouseWheelEvent><any>e;\n\t\t\tlet e2 = <IGeckoMouseWheelEvent><any>e;\n\n\t\t\t// vertical delta scroll\n\t\t\tif (typeof e1.wheelDeltaY !== 'undefined') {\n\t\t\t\tthis.deltaY = e1.wheelDeltaY / 120;\n\t\t\t} else if (typeof e2.VERTICAL_AXIS !== 'undefined' && e2.axis === e2.VERTICAL_AXIS) {\n\t\t\t\tthis.deltaY = -e2.detail / 3;\n\t\t\t} else if (e.type === 'wheel') {\n\t\t\t\t// Modern wheel event\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n\t\t\t\tconst ev = <WheelEvent><unknown>e;\n\n\t\t\t\tif (ev.deltaMode === ev.DOM_DELTA_LINE) {\n\t\t\t\t\t// the deltas are expressed in lines\n\t\t\t\t\tif (browser.isFirefox && !platform.isMacintosh) {\n\t\t\t\t\t\tthis.deltaY = -e.deltaY / 3;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.deltaY = -e.deltaY;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.deltaY = -e.deltaY / 40;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// horizontal delta scroll\n\t\t\tif (typeof e1.wheelDeltaX !== 'undefined') {\n\t\t\t\tif (browser.isSafari && platform.isWindows) {\n\t\t\t\t\tthis.deltaX = - (e1.wheelDeltaX / 120);\n\t\t\t\t} else {\n\t\t\t\t\tthis.deltaX = e1.wheelDeltaX / 120;\n\t\t\t\t}\n\t\t\t} else if (typeof e2.HORIZONTAL_AXIS !== 'undefined' && e2.axis === e2.HORIZONTAL_AXIS) {\n\t\t\t\tthis.deltaX = -e.detail / 3;\n\t\t\t} else if (e.type === 'wheel') {\n\t\t\t\t// Modern wheel event\n\t\t\t\t// https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n\t\t\t\tconst ev = <WheelEvent><unknown>e;\n\n\t\t\t\tif (ev.deltaMode === ev.DOM_DELTA_LINE) {\n\t\t\t\t\t// the deltas are expressed in lines\n\t\t\t\t\tif (browser.isFirefox && !platform.isMacintosh) {\n\t\t\t\t\t\tthis.deltaX = -e.deltaX / 3;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.deltaX = -e.deltaX;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.deltaX = -e.deltaX / 40;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Assume a vertical scroll if nothing else worked\n\t\t\tif (this.deltaY === 0 && this.deltaX === 0 && e.wheelDelta) {\n\t\t\t\tthis.deltaY = e.wheelDelta / 120;\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic preventDefault(): void {\n\t\tif (this.browserEvent) {\n\t\t\tthis.browserEvent.preventDefault();\n\t\t}\n\t}\n\n\tpublic stopPropagation(): void {\n\t\tif (this.browserEvent) {\n\t\t\tthis.browserEvent.stopPropagation();\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IDisposable } from 'vs/base/common/lifecycle';\n\nexport interface CancellationToken {\n\n\t/**\n\t * A flag signalling is cancellation has been requested.\n\t */\n\treadonly isCancellationRequested: boolean;\n\n\t/**\n\t * An event which fires when cancellation is requested. This event\n\t * only ever fires `once` as cancellation can only happen once. Listeners\n\t * that are registered after cancellation will be called (next event loop run),\n\t * but also only once.\n\t *\n\t * @event\n\t */\n\treadonly onCancellationRequested: (listener: (e: any) => any, thisArgs?: any, disposables?: IDisposable[]) => IDisposable;\n}\n\nconst shortcutEvent: Event<any> = Object.freeze(function (callback, context?): IDisposable {\n\tconst handle = setTimeout(callback.bind(context), 0);\n\treturn { dispose() { clearTimeout(handle); } };\n});\n\nexport namespace CancellationToken {\n\n\texport function isCancellationToken(thing: unknown): thing is CancellationToken {\n\t\tif (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\n\t\t\treturn true;\n\t\t}\n\t\tif (thing instanceof MutableToken) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!thing || typeof thing !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\treturn typeof (thing as CancellationToken).isCancellationRequested === 'boolean'\n\t\t\t&& typeof (thing as CancellationToken).onCancellationRequested === 'function';\n\t}\n\n\n\texport const None: CancellationToken = Object.freeze({\n\t\tisCancellationRequested: false,\n\t\tonCancellationRequested: Event.None\n\t});\n\n\texport const Cancelled: CancellationToken = Object.freeze({\n\t\tisCancellationRequested: true,\n\t\tonCancellationRequested: shortcutEvent\n\t});\n}\n\nclass MutableToken implements CancellationToken {\n\n\tprivate _isCancelled: boolean = false;\n\tprivate _emitter: Emitter<any> | null = null;\n\n\tpublic cancel() {\n\t\tif (!this._isCancelled) {\n\t\t\tthis._isCancelled = true;\n\t\t\tif (this._emitter) {\n\t\t\t\tthis._emitter.fire(undefined);\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t}\n\t}\n\n\tget isCancellationRequested(): boolean {\n\t\treturn this._isCancelled;\n\t}\n\n\tget onCancellationRequested(): Event<any> {\n\t\tif (this._isCancelled) {\n\t\t\treturn shortcutEvent;\n\t\t}\n\t\tif (!this._emitter) {\n\t\t\tthis._emitter = new Emitter<any>();\n\t\t}\n\t\treturn this._emitter.event;\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._emitter) {\n\t\t\tthis._emitter.dispose();\n\t\t\tthis._emitter = null;\n\t\t}\n\t}\n}\n\nexport class CancellationTokenSource {\n\n\tprivate _token?: CancellationToken = undefined;\n\tprivate _parentListener?: IDisposable = undefined;\n\n\tconstructor(parent?: CancellationToken) {\n\t\tthis._parentListener = parent && parent.onCancellationRequested(this.cancel, this);\n\t}\n\n\tget token(): CancellationToken {\n\t\tif (!this._token) {\n\t\t\t// be lazy and create the token only when\n\t\t\t// actually needed\n\t\t\tthis._token = new MutableToken();\n\t\t}\n\t\treturn this._token;\n\t}\n\n\tcancel(): void {\n\t\tif (!this._token) {\n\t\t\t// save an object by returning the default\n\t\t\t// cancelled token when cancellation happens\n\t\t\t// before someone asks for the token\n\t\t\tthis._token = CancellationToken.Cancelled;\n\n\t\t} else if (this._token instanceof MutableToken) {\n\t\t\t// actually cancel\n\t\t\tthis._token.cancel();\n\t\t}\n\t}\n\n\tdispose(cancel: boolean = false): void {\n\t\tif (cancel) {\n\t\t\tthis.cancel();\n\t\t}\n\t\tif (this._parentListener) {\n\t\t\tthis._parentListener.dispose();\n\t\t}\n\t\tif (!this._token) {\n\t\t\t// ensure to initialize with an empty token if we had none\n\t\t\tthis._token = CancellationToken.None;\n\n\t\t} else if (this._token instanceof MutableToken) {\n\t\t\t// actually dispose\n\t\t\tthis._token.dispose();\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\n\nexport interface IIconRegistry {\n\treadonly all: IterableIterator<Codicon>;\n\treadonly onDidRegister: Event<Codicon>;\n\tget(id: string): Codicon | undefined;\n}\n\nclass Registry implements IIconRegistry {\n\n\tprivate readonly _icons = new Map<string, Codicon>();\n\tprivate readonly _onDidRegister = new Emitter<Codicon>();\n\n\tpublic add(icon: Codicon) {\n\t\tconst existing = this._icons.get(icon.id);\n\t\tif (!existing) {\n\t\t\tthis._icons.set(icon.id, icon);\n\t\t\tthis._onDidRegister.fire(icon);\n\t\t} else if (icon.description) {\n\t\t\texisting.description = icon.description;\n\t\t} else {\n\t\t\tconsole.error(`Duplicate registration of codicon ${icon.id}`);\n\t\t}\n\t}\n\n\tpublic get(id: string): Codicon | undefined {\n\t\treturn this._icons.get(id);\n\t}\n\n\tpublic get all(): IterableIterator<Codicon> {\n\t\treturn this._icons.values();\n\t}\n\n\tpublic get onDidRegister(): Event<Codicon> {\n\t\treturn this._onDidRegister.event;\n\t}\n}\n\nconst _registry = new Registry();\n\nexport const iconRegistry: IIconRegistry = _registry;\n\nexport function registerCodicon(id: string, def: Codicon): Codicon {\n\treturn new Codicon(id, def);\n}\n\n// Selects all codicon names encapsulated in the `$()` syntax and wraps the\n// results with spaces so that screen readers can read the text better.\nexport function getCodiconAriaLabel(text: string | undefined) {\n\tif (!text) {\n\t\treturn '';\n\t}\n\n\treturn text.replace(/\\$\\((.*?)\\)/g, (_match, codiconName) => ` ${codiconName} `).trim();\n}\n\nexport class Codicon implements CSSIcon {\n\tconstructor(public readonly id: string, public readonly definition: Codicon | IconDefinition, public description?: string) {\n\t\t_registry.add(this);\n\t}\n\tpublic get classNames() { return 'codicon codicon-' + this.id; }\n\t// classNamesArray is useful for migrating to ES6 classlist\n\tpublic get classNamesArray() { return ['codicon', 'codicon-' + this.id]; }\n\tpublic get cssSelector() { return '.codicon.codicon-' + this.id; }\n}\n\nexport function getClassNamesArray(id: string, modifier?: string) {\n\tconst classNames = ['codicon', 'codicon-' + id];\n\tif (modifier) {\n\t\tclassNames.push('codicon-modifier-' + modifier);\n\t}\n\treturn classNames;\n}\n\nexport interface CSSIcon {\n\treadonly id: string;\n}\n\n\nexport namespace CSSIcon {\n\texport const iconNameSegment = '[A-Za-z0-9]+';\n\texport const iconNameExpression = '[A-Za-z0-9\\\\-]+';\n\texport const iconModifierExpression = '~[A-Za-z]+';\n\n\tconst cssIconIdRegex = new RegExp(`^(${iconNameExpression})(${iconModifierExpression})?$`);\n\n\texport function asClassNameArray(icon: CSSIcon): string[] {\n\t\tif (icon instanceof Codicon) {\n\t\t\treturn ['codicon', 'codicon-' + icon.id];\n\t\t}\n\t\tconst match = cssIconIdRegex.exec(icon.id);\n\t\tif (!match) {\n\t\t\treturn asClassNameArray(Codicon.error);\n\t\t}\n\t\tlet [, id, modifier] = match;\n\t\tconst classNames = ['codicon', 'codicon-' + id];\n\t\tif (modifier) {\n\t\t\tclassNames.push('codicon-modifier-' + modifier.substr(1));\n\t\t}\n\t\treturn classNames;\n\t}\n\n\texport function asClassName(icon: CSSIcon): string {\n\t\treturn asClassNameArray(icon).join(' ');\n\t}\n\n\texport function asCSSSelector(icon: CSSIcon): string {\n\t\treturn '.' + asClassNameArray(icon).join('.');\n\t}\n}\n\n\n\ninterface IconDefinition {\n\tfontCharacter: string;\n}\n\nexport namespace Codicon {\n\n\t// built-in icons, with image name\n\texport const add = new Codicon('add', { fontCharacter: '\\\\ea60' });\n\texport const plus = new Codicon('plus', { fontCharacter: '\\\\ea60' });\n\texport const gistNew = new Codicon('gist-new', { fontCharacter: '\\\\ea60' });\n\texport const repoCreate = new Codicon('repo-create', { fontCharacter: '\\\\ea60' });\n\texport const lightbulb = new Codicon('lightbulb', { fontCharacter: '\\\\ea61' });\n\texport const lightBulb = new Codicon('light-bulb', { fontCharacter: '\\\\ea61' });\n\texport const repo = new Codicon('repo', { fontCharacter: '\\\\ea62' });\n\texport const repoDelete = new Codicon('repo-delete', { fontCharacter: '\\\\ea62' });\n\texport const gistFork = new Codicon('gist-fork', { fontCharacter: '\\\\ea63' });\n\texport const repoForked = new Codicon('repo-forked', { fontCharacter: '\\\\ea63' });\n\texport const gitPullRequest = new Codicon('git-pull-request', { fontCharacter: '\\\\ea64' });\n\texport const gitPullRequestAbandoned = new Codicon('git-pull-request-abandoned', { fontCharacter: '\\\\ea64' });\n\texport const recordKeys = new Codicon('record-keys', { fontCharacter: '\\\\ea65' });\n\texport const keyboard = new Codicon('keyboard', { fontCharacter: '\\\\ea65' });\n\texport const tag = new Codicon('tag', { fontCharacter: '\\\\ea66' });\n\texport const tagAdd = new Codicon('tag-add', { fontCharacter: '\\\\ea66' });\n\texport const tagRemove = new Codicon('tag-remove', { fontCharacter: '\\\\ea66' });\n\texport const person = new Codicon('person', { fontCharacter: '\\\\ea67' });\n\texport const personFollow = new Codicon('person-follow', { fontCharacter: '\\\\ea67' });\n\texport const personOutline = new Codicon('person-outline', { fontCharacter: '\\\\ea67' });\n\texport const personFilled = new Codicon('person-filled', { fontCharacter: '\\\\ea67' });\n\texport const gitBranch = new Codicon('git-branch', { fontCharacter: '\\\\ea68' });\n\texport const gitBranchCreate = new Codicon('git-branch-create', { fontCharacter: '\\\\ea68' });\n\texport const gitBranchDelete = new Codicon('git-branch-delete', { fontCharacter: '\\\\ea68' });\n\texport const sourceControl = new Codicon('source-control', { fontCharacter: '\\\\ea68' });\n\texport const mirror = new Codicon('mirror', { fontCharacter: '\\\\ea69' });\n\texport const mirrorPublic = new Codicon('mirror-public', { fontCharacter: '\\\\ea69' });\n\texport const star = new Codicon('star', { fontCharacter: '\\\\ea6a' });\n\texport const starAdd = new Codicon('star-add', { fontCharacter: '\\\\ea6a' });\n\texport const starDelete = new Codicon('star-delete', { fontCharacter: '\\\\ea6a' });\n\texport const starEmpty = new Codicon('star-empty', { fontCharacter: '\\\\ea6a' });\n\texport const comment = new Codicon('comment', { fontCharacter: '\\\\ea6b' });\n\texport const commentAdd = new Codicon('comment-add', { fontCharacter: '\\\\ea6b' });\n\texport const alert = new Codicon('alert', { fontCharacter: '\\\\ea6c' });\n\texport const warning = new Codicon('warning', { fontCharacter: '\\\\ea6c' });\n\texport const search = new Codicon('search', { fontCharacter: '\\\\ea6d' });\n\texport const searchSave = new Codicon('search-save', { fontCharacter: '\\\\ea6d' });\n\texport const logOut = new Codicon('log-out', { fontCharacter: '\\\\ea6e' });\n\texport const signOut = new Codicon('sign-out', { fontCharacter: '\\\\ea6e' });\n\texport const logIn = new Codicon('log-in', { fontCharacter: '\\\\ea6f' });\n\texport const signIn = new Codicon('sign-in', { fontCharacter: '\\\\ea6f' });\n\texport const eye = new Codicon('eye', { fontCharacter: '\\\\ea70' });\n\texport const eyeUnwatch = new Codicon('eye-unwatch', { fontCharacter: '\\\\ea70' });\n\texport const eyeWatch = new Codicon('eye-watch', { fontCharacter: '\\\\ea70' });\n\texport const circleFilled = new Codicon('circle-filled', { fontCharacter: '\\\\ea71' });\n\texport const primitiveDot = new Codicon('primitive-dot', { fontCharacter: '\\\\ea71' });\n\texport const closeDirty = new Codicon('close-dirty', { fontCharacter: '\\\\ea71' });\n\texport const debugBreakpoint = new Codicon('debug-breakpoint', { fontCharacter: '\\\\ea71' });\n\texport const debugBreakpointDisabled = new Codicon('debug-breakpoint-disabled', { fontCharacter: '\\\\ea71' });\n\texport const debugHint = new Codicon('debug-hint', { fontCharacter: '\\\\ea71' });\n\texport const primitiveSquare = new Codicon('primitive-square', { fontCharacter: '\\\\ea72' });\n\texport const edit = new Codicon('edit', { fontCharacter: '\\\\ea73' });\n\texport const pencil = new Codicon('pencil', { fontCharacter: '\\\\ea73' });\n\texport const info = new Codicon('info', { fontCharacter: '\\\\ea74' });\n\texport const issueOpened = new Codicon('issue-opened', { fontCharacter: '\\\\ea74' });\n\texport const gistPrivate = new Codicon('gist-private', { fontCharacter: '\\\\ea75' });\n\texport const gitForkPrivate = new Codicon('git-fork-private', { fontCharacter: '\\\\ea75' });\n\texport const lock = new Codicon('lock', { fontCharacter: '\\\\ea75' });\n\texport const mirrorPrivate = new Codicon('mirror-private', { fontCharacter: '\\\\ea75' });\n\texport const close = new Codicon('close', { fontCharacter: '\\\\ea76' });\n\texport const removeClose = new Codicon('remove-close', { fontCharacter: '\\\\ea76' });\n\texport const x = new Codicon('x', { fontCharacter: '\\\\ea76' });\n\texport const repoSync = new Codicon('repo-sync', { fontCharacter: '\\\\ea77' });\n\texport const sync = new Codicon('sync', { fontCharacter: '\\\\ea77' });\n\texport const clone = new Codicon('clone', { fontCharacter: '\\\\ea78' });\n\texport const desktopDownload = new Codicon('desktop-download', { fontCharacter: '\\\\ea78' });\n\texport const beaker = new Codicon('beaker', { fontCharacter: '\\\\ea79' });\n\texport const microscope = new Codicon('microscope', { fontCharacter: '\\\\ea79' });\n\texport const vm = new Codicon('vm', { fontCharacter: '\\\\ea7a' });\n\texport const deviceDesktop = new Codicon('device-desktop', { fontCharacter: '\\\\ea7a' });\n\texport const file = new Codicon('file', { fontCharacter: '\\\\ea7b' });\n\texport const fileText = new Codicon('file-text', { fontCharacter: '\\\\ea7b' });\n\texport const more = new Codicon('more', { fontCharacter: '\\\\ea7c' });\n\texport const ellipsis = new Codicon('ellipsis', { fontCharacter: '\\\\ea7c' });\n\texport const kebabHorizontal = new Codicon('kebab-horizontal', { fontCharacter: '\\\\ea7c' });\n\texport const mailReply = new Codicon('mail-reply', { fontCharacter: '\\\\ea7d' });\n\texport const reply = new Codicon('reply', { fontCharacter: '\\\\ea7d' });\n\texport const organization = new Codicon('organization', { fontCharacter: '\\\\ea7e' });\n\texport const organizationFilled = new Codicon('organization-filled', { fontCharacter: '\\\\ea7e' });\n\texport const organizationOutline = new Codicon('organization-outline', { fontCharacter: '\\\\ea7e' });\n\texport const newFile = new Codicon('new-file', { fontCharacter: '\\\\ea7f' });\n\texport const fileAdd = new Codicon('file-add', { fontCharacter: '\\\\ea7f' });\n\texport const newFolder = new Codicon('new-folder', { fontCharacter: '\\\\ea80' });\n\texport const fileDirectoryCreate = new Codicon('file-directory-create', { fontCharacter: '\\\\ea80' });\n\texport const trash = new Codicon('trash', { fontCharacter: '\\\\ea81' });\n\texport const trashcan = new Codicon('trashcan', { fontCharacter: '\\\\ea81' });\n\texport const history = new Codicon('history', { fontCharacter: '\\\\ea82' });\n\texport const clock = new Codicon('clock', { fontCharacter: '\\\\ea82' });\n\texport const folder = new Codicon('folder', { fontCharacter: '\\\\ea83' });\n\texport const fileDirectory = new Codicon('file-directory', { fontCharacter: '\\\\ea83' });\n\texport const symbolFolder = new Codicon('symbol-folder', { fontCharacter: '\\\\ea83' });\n\texport const logoGithub = new Codicon('logo-github', { fontCharacter: '\\\\ea84' });\n\texport const markGithub = new Codicon('mark-github', { fontCharacter: '\\\\ea84' });\n\texport const github = new Codicon('github', { fontCharacter: '\\\\ea84' });\n\texport const terminal = new Codicon('terminal', { fontCharacter: '\\\\ea85' });\n\texport const console = new Codicon('console', { fontCharacter: '\\\\ea85' });\n\texport const repl = new Codicon('repl', { fontCharacter: '\\\\ea85' });\n\texport const zap = new Codicon('zap', { fontCharacter: '\\\\ea86' });\n\texport const symbolEvent = new Codicon('symbol-event', { fontCharacter: '\\\\ea86' });\n\texport const error = new Codicon('error', { fontCharacter: '\\\\ea87' });\n\texport const stop = new Codicon('stop', { fontCharacter: '\\\\ea87' });\n\texport const variable = new Codicon('variable', { fontCharacter: '\\\\ea88' });\n\texport const symbolVariable = new Codicon('symbol-variable', { fontCharacter: '\\\\ea88' });\n\texport const array = new Codicon('array', { fontCharacter: '\\\\ea8a' });\n\texport const symbolArray = new Codicon('symbol-array', { fontCharacter: '\\\\ea8a' });\n\texport const symbolModule = new Codicon('symbol-module', { fontCharacter: '\\\\ea8b' });\n\texport const symbolPackage = new Codicon('symbol-package', { fontCharacter: '\\\\ea8b' });\n\texport const symbolNamespace = new Codicon('symbol-namespace', { fontCharacter: '\\\\ea8b' });\n\texport const symbolObject = new Codicon('symbol-object', { fontCharacter: '\\\\ea8b' });\n\texport const symbolMethod = new Codicon('symbol-method', { fontCharacter: '\\\\ea8c' });\n\texport const symbolFunction = new Codicon('symbol-function', { fontCharacter: '\\\\ea8c' });\n\texport const symbolConstructor = new Codicon('symbol-constructor', { fontCharacter: '\\\\ea8c' });\n\texport const symbolBoolean = new Codicon('symbol-boolean', { fontCharacter: '\\\\ea8f' });\n\texport const symbolNull = new Codicon('symbol-null', { fontCharacter: '\\\\ea8f' });\n\texport const symbolNumeric = new Codicon('symbol-numeric', { fontCharacter: '\\\\ea90' });\n\texport const symbolNumber = new Codicon('symbol-number', { fontCharacter: '\\\\ea90' });\n\texport const symbolStructure = new Codicon('symbol-structure', { fontCharacter: '\\\\ea91' });\n\texport const symbolStruct = new Codicon('symbol-struct', { fontCharacter: '\\\\ea91' });\n\texport const symbolParameter = new Codicon('symbol-parameter', { fontCharacter: '\\\\ea92' });\n\texport const symbolTypeParameter = new Codicon('symbol-type-parameter', { fontCharacter: '\\\\ea92' });\n\texport const symbolKey = new Codicon('symbol-key', { fontCharacter: '\\\\ea93' });\n\texport const symbolText = new Codicon('symbol-text', { fontCharacter: '\\\\ea93' });\n\texport const symbolReference = new Codicon('symbol-reference', { fontCharacter: '\\\\ea94' });\n\texport const goToFile = new Codicon('go-to-file', { fontCharacter: '\\\\ea94' });\n\texport const symbolEnum = new Codicon('symbol-enum', { fontCharacter: '\\\\ea95' });\n\texport const symbolValue = new Codicon('symbol-value', { fontCharacter: '\\\\ea95' });\n\texport const symbolRuler = new Codicon('symbol-ruler', { fontCharacter: '\\\\ea96' });\n\texport const symbolUnit = new Codicon('symbol-unit', { fontCharacter: '\\\\ea96' });\n\texport const activateBreakpoints = new Codicon('activate-breakpoints', { fontCharacter: '\\\\ea97' });\n\texport const archive = new Codicon('archive', { fontCharacter: '\\\\ea98' });\n\texport const arrowBoth = new Codicon('arrow-both', { fontCharacter: '\\\\ea99' });\n\texport const arrowDown = new Codicon('arrow-down', { fontCharacter: '\\\\ea9a' });\n\texport const arrowLeft = new Codicon('arrow-left', { fontCharacter: '\\\\ea9b' });\n\texport const arrowRight = new Codicon('arrow-right', { fontCharacter: '\\\\ea9c' });\n\texport const arrowSmallDown = new Codicon('arrow-small-down', { fontCharacter: '\\\\ea9d' });\n\texport const arrowSmallLeft = new Codicon('arrow-small-left', { fontCharacter: '\\\\ea9e' });\n\texport const arrowSmallRight = new Codicon('arrow-small-right', { fontCharacter: '\\\\ea9f' });\n\texport const arrowSmallUp = new Codicon('arrow-small-up', { fontCharacter: '\\\\eaa0' });\n\texport const arrowUp = new Codicon('arrow-up', { fontCharacter: '\\\\eaa1' });\n\texport const bell = new Codicon('bell', { fontCharacter: '\\\\eaa2' });\n\texport const bold = new Codicon('bold', { fontCharacter: '\\\\eaa3' });\n\texport const book = new Codicon('book', { fontCharacter: '\\\\eaa4' });\n\texport const bookmark = new Codicon('bookmark', { fontCharacter: '\\\\eaa5' });\n\texport const debugBreakpointConditionalUnverified = new Codicon('debug-breakpoint-conditional-unverified', { fontCharacter: '\\\\eaa6' });\n\texport const debugBreakpointConditional = new Codicon('debug-breakpoint-conditional', { fontCharacter: '\\\\eaa7' });\n\texport const debugBreakpointConditionalDisabled = new Codicon('debug-breakpoint-conditional-disabled', { fontCharacter: '\\\\eaa7' });\n\texport const debugBreakpointDataUnverified = new Codicon('debug-breakpoint-data-unverified', { fontCharacter: '\\\\eaa8' });\n\texport const debugBreakpointData = new Codicon('debug-breakpoint-data', { fontCharacter: '\\\\eaa9' });\n\texport const debugBreakpointDataDisabled = new Codicon('debug-breakpoint-data-disabled', { fontCharacter: '\\\\eaa9' });\n\texport const debugBreakpointLogUnverified = new Codicon('debug-breakpoint-log-unverified', { fontCharacter: '\\\\eaaa' });\n\texport const debugBreakpointLog = new Codicon('debug-breakpoint-log', { fontCharacter: '\\\\eaab' });\n\texport const debugBreakpointLogDisabled = new Codicon('debug-breakpoint-log-disabled', { fontCharacter: '\\\\eaab' });\n\texport const briefcase = new Codicon('briefcase', { fontCharacter: '\\\\eaac' });\n\texport const broadcast = new Codicon('broadcast', { fontCharacter: '\\\\eaad' });\n\texport const browser = new Codicon('browser', { fontCharacter: '\\\\eaae' });\n\texport const bug = new Codicon('bug', { fontCharacter: '\\\\eaaf' });\n\texport const calendar = new Codicon('calendar', { fontCharacter: '\\\\eab0' });\n\texport const caseSensitive = new Codicon('case-sensitive', { fontCharacter: '\\\\eab1' });\n\texport const check = new Codicon('check', { fontCharacter: '\\\\eab2' });\n\texport const checklist = new Codicon('checklist', { fontCharacter: '\\\\eab3' });\n\texport const chevronDown = new Codicon('chevron-down', { fontCharacter: '\\\\eab4' });\n\texport const chevronLeft = new Codicon('chevron-left', { fontCharacter: '\\\\eab5' });\n\texport const chevronRight = new Codicon('chevron-right', { fontCharacter: '\\\\eab6' });\n\texport const chevronUp = new Codicon('chevron-up', { fontCharacter: '\\\\eab7' });\n\texport const chromeClose = new Codicon('chrome-close', { fontCharacter: '\\\\eab8' });\n\texport const chromeMaximize = new Codicon('chrome-maximize', { fontCharacter: '\\\\eab9' });\n\texport const chromeMinimize = new Codicon('chrome-minimize', { fontCharacter: '\\\\eaba' });\n\texport const chromeRestore = new Codicon('chrome-restore', { fontCharacter: '\\\\eabb' });\n\texport const circleOutline = new Codicon('circle-outline', { fontCharacter: '\\\\eabc' });\n\texport const debugBreakpointUnverified = new Codicon('debug-breakpoint-unverified', { fontCharacter: '\\\\eabc' });\n\texport const circleSlash = new Codicon('circle-slash', { fontCharacter: '\\\\eabd' });\n\texport const circuitBoard = new Codicon('circuit-board', { fontCharacter: '\\\\eabe' });\n\texport const clearAll = new Codicon('clear-all', { fontCharacter: '\\\\eabf' });\n\texport const clippy = new Codicon('clippy', { fontCharacter: '\\\\eac0' });\n\texport const closeAll = new Codicon('close-all', { fontCharacter: '\\\\eac1' });\n\texport const cloudDownload = new Codicon('cloud-download', { fontCharacter: '\\\\eac2' });\n\texport const cloudUpload = new Codicon('cloud-upload', { fontCharacter: '\\\\eac3' });\n\texport const code = new Codicon('code', { fontCharacter: '\\\\eac4' });\n\texport const collapseAll = new Codicon('collapse-all', { fontCharacter: '\\\\eac5' });\n\texport const colorMode = new Codicon('color-mode', { fontCharacter: '\\\\eac6' });\n\texport const commentDiscussion = new Codicon('comment-discussion', { fontCharacter: '\\\\eac7' });\n\texport const compareChanges = new Codicon('compare-changes', { fontCharacter: '\\\\eafd' });\n\texport const creditCard = new Codicon('credit-card', { fontCharacter: '\\\\eac9' });\n\texport const dash = new Codicon('dash', { fontCharacter: '\\\\eacc' });\n\texport const dashboard = new Codicon('dashboard', { fontCharacter: '\\\\eacd' });\n\texport const database = new Codicon('database', { fontCharacter: '\\\\eace' });\n\texport const debugContinue = new Codicon('debug-continue', { fontCharacter: '\\\\eacf' });\n\texport const debugDisconnect = new Codicon('debug-disconnect', { fontCharacter: '\\\\ead0' });\n\texport const debugPause = new Codicon('debug-pause', { fontCharacter: '\\\\ead1' });\n\texport const debugRestart = new Codicon('debug-restart', { fontCharacter: '\\\\ead2' });\n\texport const debugStart = new Codicon('debug-start', { fontCharacter: '\\\\ead3' });\n\texport const debugStepInto = new Codicon('debug-step-into', { fontCharacter: '\\\\ead4' });\n\texport const debugStepOut = new Codicon('debug-step-out', { fontCharacter: '\\\\ead5' });\n\texport const debugStepOver = new Codicon('debug-step-over', { fontCharacter: '\\\\ead6' });\n\texport const debugStop = new Codicon('debug-stop', { fontCharacter: '\\\\ead7' });\n\texport const debug = new Codicon('debug', { fontCharacter: '\\\\ead8' });\n\texport const deviceCameraVideo = new Codicon('device-camera-video', { fontCharacter: '\\\\ead9' });\n\texport const deviceCamera = new Codicon('device-camera', { fontCharacter: '\\\\eada' });\n\texport const deviceMobile = new Codicon('device-mobile', { fontCharacter: '\\\\eadb' });\n\texport const diffAdded = new Codicon('diff-added', { fontCharacter: '\\\\eadc' });\n\texport const diffIgnored = new Codicon('diff-ignored', { fontCharacter: '\\\\eadd' });\n\texport const diffModified = new Codicon('diff-modified', { fontCharacter: '\\\\eade' });\n\texport const diffRemoved = new Codicon('diff-removed', { fontCharacter: '\\\\eadf' });\n\texport const diffRenamed = new Codicon('diff-renamed', { fontCharacter: '\\\\eae0' });\n\texport const diff = new Codicon('diff', { fontCharacter: '\\\\eae1' });\n\texport const discard = new Codicon('discard', { fontCharacter: '\\\\eae2' });\n\texport const editorLayout = new Codicon('editor-layout', { fontCharacter: '\\\\eae3' });\n\texport const emptyWindow = new Codicon('empty-window', { fontCharacter: '\\\\eae4' });\n\texport const exclude = new Codicon('exclude', { fontCharacter: '\\\\eae5' });\n\texport const extensions = new Codicon('extensions', { fontCharacter: '\\\\eae6' });\n\texport const eyeClosed = new Codicon('eye-closed', { fontCharacter: '\\\\eae7' });\n\texport const fileBinary = new Codicon('file-binary', { fontCharacter: '\\\\eae8' });\n\texport const fileCode = new Codicon('file-code', { fontCharacter: '\\\\eae9' });\n\texport const fileMedia = new Codicon('file-media', { fontCharacter: '\\\\eaea' });\n\texport const filePdf = new Codicon('file-pdf', { fontCharacter: '\\\\eaeb' });\n\texport const fileSubmodule = new Codicon('file-submodule', { fontCharacter: '\\\\eaec' });\n\texport const fileSymlinkDirectory = new Codicon('file-symlink-directory', { fontCharacter: '\\\\eaed' });\n\texport const fileSymlinkFile = new Codicon('file-symlink-file', { fontCharacter: '\\\\eaee' });\n\texport const fileZip = new Codicon('file-zip', { fontCharacter: '\\\\eaef' });\n\texport const files = new Codicon('files', { fontCharacter: '\\\\eaf0' });\n\texport const filter = new Codicon('filter', { fontCharacter: '\\\\eaf1' });\n\texport const flame = new Codicon('flame', { fontCharacter: '\\\\eaf2' });\n\texport const foldDown = new Codicon('fold-down', { fontCharacter: '\\\\eaf3' });\n\texport const foldUp = new Codicon('fold-up', { fontCharacter: '\\\\eaf4' });\n\texport const fold = new Codicon('fold', { fontCharacter: '\\\\eaf5' });\n\texport const folderActive = new Codicon('folder-active', { fontCharacter: '\\\\eaf6' });\n\texport const folderOpened = new Codicon('folder-opened', { fontCharacter: '\\\\eaf7' });\n\texport const gear = new Codicon('gear', { fontCharacter: '\\\\eaf8' });\n\texport const gift = new Codicon('gift', { fontCharacter: '\\\\eaf9' });\n\texport const gistSecret = new Codicon('gist-secret', { fontCharacter: '\\\\eafa' });\n\texport const gist = new Codicon('gist', { fontCharacter: '\\\\eafb' });\n\texport const gitCommit = new Codicon('git-commit', { fontCharacter: '\\\\eafc' });\n\texport const gitCompare = new Codicon('git-compare', { fontCharacter: '\\\\eafd' });\n\texport const gitMerge = new Codicon('git-merge', { fontCharacter: '\\\\eafe' });\n\texport const githubAction = new Codicon('github-action', { fontCharacter: '\\\\eaff' });\n\texport const githubAlt = new Codicon('github-alt', { fontCharacter: '\\\\eb00' });\n\texport const globe = new Codicon('globe', { fontCharacter: '\\\\eb01' });\n\texport const grabber = new Codicon('grabber', { fontCharacter: '\\\\eb02' });\n\texport const graph = new Codicon('graph', { fontCharacter: '\\\\eb03' });\n\texport const gripper = new Codicon('gripper', { fontCharacter: '\\\\eb04' });\n\texport const heart = new Codicon('heart', { fontCharacter: '\\\\eb05' });\n\texport const home = new Codicon('home', { fontCharacter: '\\\\eb06' });\n\texport const horizontalRule = new Codicon('horizontal-rule', { fontCharacter: '\\\\eb07' });\n\texport const hubot = new Codicon('hubot', { fontCharacter: '\\\\eb08' });\n\texport const inbox = new Codicon('inbox', { fontCharacter: '\\\\eb09' });\n\texport const issueClosed = new Codicon('issue-closed', { fontCharacter: '\\\\eb0a' });\n\texport const issueReopened = new Codicon('issue-reopened', { fontCharacter: '\\\\eb0b' });\n\texport const issues = new Codicon('issues', { fontCharacter: '\\\\eb0c' });\n\texport const italic = new Codicon('italic', { fontCharacter: '\\\\eb0d' });\n\texport const jersey = new Codicon('jersey', { fontCharacter: '\\\\eb0e' });\n\texport const json = new Codicon('json', { fontCharacter: '\\\\eb0f' });\n\texport const kebabVertical = new Codicon('kebab-vertical', { fontCharacter: '\\\\eb10' });\n\texport const key = new Codicon('key', { fontCharacter: '\\\\eb11' });\n\texport const law = new Codicon('law', { fontCharacter: '\\\\eb12' });\n\texport const lightbulbAutofix = new Codicon('lightbulb-autofix', { fontCharacter: '\\\\eb13' });\n\texport const linkExternal = new Codicon('link-external', { fontCharacter: '\\\\eb14' });\n\texport const link = new Codicon('link', { fontCharacter: '\\\\eb15' });\n\texport const listOrdered = new Codicon('list-ordered', { fontCharacter: '\\\\eb16' });\n\texport const listUnordered = new Codicon('list-unordered', { fontCharacter: '\\\\eb17' });\n\texport const liveShare = new Codicon('live-share', { fontCharacter: '\\\\eb18' });\n\texport const loading = new Codicon('loading', { fontCharacter: '\\\\eb19' });\n\texport const location = new Codicon('location', { fontCharacter: '\\\\eb1a' });\n\texport const mailRead = new Codicon('mail-read', { fontCharacter: '\\\\eb1b' });\n\texport const mail = new Codicon('mail', { fontCharacter: '\\\\eb1c' });\n\texport const markdown = new Codicon('markdown', { fontCharacter: '\\\\eb1d' });\n\texport const megaphone = new Codicon('megaphone', { fontCharacter: '\\\\eb1e' });\n\texport const mention = new Codicon('mention', { fontCharacter: '\\\\eb1f' });\n\texport const milestone = new Codicon('milestone', { fontCharacter: '\\\\eb20' });\n\texport const mortarBoard = new Codicon('mortar-board', { fontCharacter: '\\\\eb21' });\n\texport const move = new Codicon('move', { fontCharacter: '\\\\eb22' });\n\texport const multipleWindows = new Codicon('multiple-windows', { fontCharacter: '\\\\eb23' });\n\texport const mute = new Codicon('mute', { fontCharacter: '\\\\eb24' });\n\texport const noNewline = new Codicon('no-newline', { fontCharacter: '\\\\eb25' });\n\texport const note = new Codicon('note', { fontCharacter: '\\\\eb26' });\n\texport const octoface = new Codicon('octoface', { fontCharacter: '\\\\eb27' });\n\texport const openPreview = new Codicon('open-preview', { fontCharacter: '\\\\eb28' });\n\texport const package_ = new Codicon('package', { fontCharacter: '\\\\eb29' });\n\texport const paintcan = new Codicon('paintcan', { fontCharacter: '\\\\eb2a' });\n\texport const pin = new Codicon('pin', { fontCharacter: '\\\\eb2b' });\n\texport const play = new Codicon('play', { fontCharacter: '\\\\eb2c' });\n\texport const run = new Codicon('run', { fontCharacter: '\\\\eb2c' });\n\texport const plug = new Codicon('plug', { fontCharacter: '\\\\eb2d' });\n\texport const preserveCase = new Codicon('preserve-case', { fontCharacter: '\\\\eb2e' });\n\texport const preview = new Codicon('preview', { fontCharacter: '\\\\eb2f' });\n\texport const project = new Codicon('project', { fontCharacter: '\\\\eb30' });\n\texport const pulse = new Codicon('pulse', { fontCharacter: '\\\\eb31' });\n\texport const question = new Codicon('question', { fontCharacter: '\\\\eb32' });\n\texport const quote = new Codicon('quote', { fontCharacter: '\\\\eb33' });\n\texport const radioTower = new Codicon('radio-tower', { fontCharacter: '\\\\eb34' });\n\texport const reactions = new Codicon('reactions', { fontCharacter: '\\\\eb35' });\n\texport const references = new Codicon('references', { fontCharacter: '\\\\eb36' });\n\texport const refresh = new Codicon('refresh', { fontCharacter: '\\\\eb37' });\n\texport const regex = new Codicon('regex', { fontCharacter: '\\\\eb38' });\n\texport const remoteExplorer = new Codicon('remote-explorer', { fontCharacter: '\\\\eb39' });\n\texport const remote = new Codicon('remote', { fontCharacter: '\\\\eb3a' });\n\texport const remove = new Codicon('remove', { fontCharacter: '\\\\eb3b' });\n\texport const replaceAll = new Codicon('replace-all', { fontCharacter: '\\\\eb3c' });\n\texport const replace = new Codicon('replace', { fontCharacter: '\\\\eb3d' });\n\texport const repoClone = new Codicon('repo-clone', { fontCharacter: '\\\\eb3e' });\n\texport const repoForcePush = new Codicon('repo-force-push', { fontCharacter: '\\\\eb3f' });\n\texport const repoPull = new Codicon('repo-pull', { fontCharacter: '\\\\eb40' });\n\texport const repoPush = new Codicon('repo-push', { fontCharacter: '\\\\eb41' });\n\texport const report = new Codicon('report', { fontCharacter: '\\\\eb42' });\n\texport const requestChanges = new Codicon('request-changes', { fontCharacter: '\\\\eb43' });\n\texport const rocket = new Codicon('rocket', { fontCharacter: '\\\\eb44' });\n\texport const rootFolderOpened = new Codicon('root-folder-opened', { fontCharacter: '\\\\eb45' });\n\texport const rootFolder = new Codicon('root-folder', { fontCharacter: '\\\\eb46' });\n\texport const rss = new Codicon('rss', { fontCharacter: '\\\\eb47' });\n\texport const ruby = new Codicon('ruby', { fontCharacter: '\\\\eb48' });\n\texport const saveAll = new Codicon('save-all', { fontCharacter: '\\\\eb49' });\n\texport const saveAs = new Codicon('save-as', { fontCharacter: '\\\\eb4a' });\n\texport const save = new Codicon('save', { fontCharacter: '\\\\eb4b' });\n\texport const screenFull = new Codicon('screen-full', { fontCharacter: '\\\\eb4c' });\n\texport const screenNormal = new Codicon('screen-normal', { fontCharacter: '\\\\eb4d' });\n\texport const searchStop = new Codicon('search-stop', { fontCharacter: '\\\\eb4e' });\n\texport const server = new Codicon('server', { fontCharacter: '\\\\eb50' });\n\texport const settingsGear = new Codicon('settings-gear', { fontCharacter: '\\\\eb51' });\n\texport const settings = new Codicon('settings', { fontCharacter: '\\\\eb52' });\n\texport const shield = new Codicon('shield', { fontCharacter: '\\\\eb53' });\n\texport const smiley = new Codicon('smiley', { fontCharacter: '\\\\eb54' });\n\texport const sortPrecedence = new Codicon('sort-precedence', { fontCharacter: '\\\\eb55' });\n\texport const splitHorizontal = new Codicon('split-horizontal', { fontCharacter: '\\\\eb56' });\n\texport const splitVertical = new Codicon('split-vertical', { fontCharacter: '\\\\eb57' });\n\texport const squirrel = new Codicon('squirrel', { fontCharacter: '\\\\eb58' });\n\texport const starFull = new Codicon('star-full', { fontCharacter: '\\\\eb59' });\n\texport const starHalf = new Codicon('star-half', { fontCharacter: '\\\\eb5a' });\n\texport const symbolClass = new Codicon('symbol-class', { fontCharacter: '\\\\eb5b' });\n\texport const symbolColor = new Codicon('symbol-color', { fontCharacter: '\\\\eb5c' });\n\texport const symbolConstant = new Codicon('symbol-constant', { fontCharacter: '\\\\eb5d' });\n\texport const symbolEnumMember = new Codicon('symbol-enum-member', { fontCharacter: '\\\\eb5e' });\n\texport const symbolField = new Codicon('symbol-field', { fontCharacter: '\\\\eb5f' });\n\texport const symbolFile = new Codicon('symbol-file', { fontCharacter: '\\\\eb60' });\n\texport const symbolInterface = new Codicon('symbol-interface', { fontCharacter: '\\\\eb61' });\n\texport const symbolKeyword = new Codicon('symbol-keyword', { fontCharacter: '\\\\eb62' });\n\texport const symbolMisc = new Codicon('symbol-misc', { fontCharacter: '\\\\eb63' });\n\texport const symbolOperator = new Codicon('symbol-operator', { fontCharacter: '\\\\eb64' });\n\texport const symbolProperty = new Codicon('symbol-property', { fontCharacter: '\\\\eb65' });\n\texport const wrench = new Codicon('wrench', { fontCharacter: '\\\\eb65' });\n\texport const wrenchSubaction = new Codicon('wrench-subaction', { fontCharacter: '\\\\eb65' });\n\texport const symbolSnippet = new Codicon('symbol-snippet', { fontCharacter: '\\\\eb66' });\n\texport const tasklist = new Codicon('tasklist', { fontCharacter: '\\\\eb67' });\n\texport const telescope = new Codicon('telescope', { fontCharacter: '\\\\eb68' });\n\texport const textSize = new Codicon('text-size', { fontCharacter: '\\\\eb69' });\n\texport const threeBars = new Codicon('three-bars', { fontCharacter: '\\\\eb6a' });\n\texport const thumbsdown = new Codicon('thumbsdown', { fontCharacter: '\\\\eb6b' });\n\texport const thumbsup = new Codicon('thumbsup', { fontCharacter: '\\\\eb6c' });\n\texport const tools = new Codicon('tools', { fontCharacter: '\\\\eb6d' });\n\texport const triangleDown = new Codicon('triangle-down', { fontCharacter: '\\\\eb6e' });\n\texport const triangleLeft = new Codicon('triangle-left', { fontCharacter: '\\\\eb6f' });\n\texport const triangleRight = new Codicon('triangle-right', { fontCharacter: '\\\\eb70' });\n\texport const triangleUp = new Codicon('triangle-up', { fontCharacter: '\\\\eb71' });\n\texport const twitter = new Codicon('twitter', { fontCharacter: '\\\\eb72' });\n\texport const unfold = new Codicon('unfold', { fontCharacter: '\\\\eb73' });\n\texport const unlock = new Codicon('unlock', { fontCharacter: '\\\\eb74' });\n\texport const unmute = new Codicon('unmute', { fontCharacter: '\\\\eb75' });\n\texport const unverified = new Codicon('unverified', { fontCharacter: '\\\\eb76' });\n\texport const verified = new Codicon('verified', { fontCharacter: '\\\\eb77' });\n\texport const versions = new Codicon('versions', { fontCharacter: '\\\\eb78' });\n\texport const vmActive = new Codicon('vm-active', { fontCharacter: '\\\\eb79' });\n\texport const vmOutline = new Codicon('vm-outline', { fontCharacter: '\\\\eb7a' });\n\texport const vmRunning = new Codicon('vm-running', { fontCharacter: '\\\\eb7b' });\n\texport const watch = new Codicon('watch', { fontCharacter: '\\\\eb7c' });\n\texport const whitespace = new Codicon('whitespace', { fontCharacter: '\\\\eb7d' });\n\texport const wholeWord = new Codicon('whole-word', { fontCharacter: '\\\\eb7e' });\n\texport const window = new Codicon('window', { fontCharacter: '\\\\eb7f' });\n\texport const wordWrap = new Codicon('word-wrap', { fontCharacter: '\\\\eb80' });\n\texport const zoomIn = new Codicon('zoom-in', { fontCharacter: '\\\\eb81' });\n\texport const zoomOut = new Codicon('zoom-out', { fontCharacter: '\\\\eb82' });\n\texport const listFilter = new Codicon('list-filter', { fontCharacter: '\\\\eb83' });\n\texport const listFlat = new Codicon('list-flat', { fontCharacter: '\\\\eb84' });\n\texport const listSelection = new Codicon('list-selection', { fontCharacter: '\\\\eb85' });\n\texport const selection = new Codicon('selection', { fontCharacter: '\\\\eb85' });\n\texport const listTree = new Codicon('list-tree', { fontCharacter: '\\\\eb86' });\n\texport const debugBreakpointFunctionUnverified = new Codicon('debug-breakpoint-function-unverified', { fontCharacter: '\\\\eb87' });\n\texport const debugBreakpointFunction = new Codicon('debug-breakpoint-function', { fontCharacter: '\\\\eb88' });\n\texport const debugBreakpointFunctionDisabled = new Codicon('debug-breakpoint-function-disabled', { fontCharacter: '\\\\eb88' });\n\texport const debugStackframeActive = new Codicon('debug-stackframe-active', { fontCharacter: '\\\\eb89' });\n\texport const debugStackframeDot = new Codicon('debug-stackframe-dot', { fontCharacter: '\\\\eb8a' });\n\texport const debugStackframe = new Codicon('debug-stackframe', { fontCharacter: '\\\\eb8b' });\n\texport const debugStackframeFocused = new Codicon('debug-stackframe-focused', { fontCharacter: '\\\\eb8b' });\n\texport const debugBreakpointUnsupported = new Codicon('debug-breakpoint-unsupported', { fontCharacter: '\\\\eb8c' });\n\texport const symbolString = new Codicon('symbol-string', { fontCharacter: '\\\\eb8d' });\n\texport const debugReverseContinue = new Codicon('debug-reverse-continue', { fontCharacter: '\\\\eb8e' });\n\texport const debugStepBack = new Codicon('debug-step-back', { fontCharacter: '\\\\eb8f' });\n\texport const debugRestartFrame = new Codicon('debug-restart-frame', { fontCharacter: '\\\\eb90' });\n\texport const callIncoming = new Codicon('call-incoming', { fontCharacter: '\\\\eb92' });\n\texport const callOutgoing = new Codicon('call-outgoing', { fontCharacter: '\\\\eb93' });\n\texport const menu = new Codicon('menu', { fontCharacter: '\\\\eb94' });\n\texport const expandAll = new Codicon('expand-all', { fontCharacter: '\\\\eb95' });\n\texport const feedback = new Codicon('feedback', { fontCharacter: '\\\\eb96' });\n\texport const groupByRefType = new Codicon('group-by-ref-type', { fontCharacter: '\\\\eb97' });\n\texport const ungroupByRefType = new Codicon('ungroup-by-ref-type', { fontCharacter: '\\\\eb98' });\n\texport const account = new Codicon('account', { fontCharacter: '\\\\eb99' });\n\texport const bellDot = new Codicon('bell-dot', { fontCharacter: '\\\\eb9a' });\n\texport const debugConsole = new Codicon('debug-console', { fontCharacter: '\\\\eb9b' });\n\texport const library = new Codicon('library', { fontCharacter: '\\\\eb9c' });\n\texport const output = new Codicon('output', { fontCharacter: '\\\\eb9d' });\n\texport const runAll = new Codicon('run-all', { fontCharacter: '\\\\eb9e' });\n\texport const syncIgnored = new Codicon('sync-ignored', { fontCharacter: '\\\\eb9f' });\n\texport const pinned = new Codicon('pinned', { fontCharacter: '\\\\eba0' });\n\texport const githubInverted = new Codicon('github-inverted', { fontCharacter: '\\\\eba1' });\n\texport const debugAlt = new Codicon('debug-alt', { fontCharacter: '\\\\eb91' });\n\texport const serverProcess = new Codicon('server-process', { fontCharacter: '\\\\eba2' });\n\texport const serverEnvironment = new Codicon('server-environment', { fontCharacter: '\\\\eba3' });\n\texport const pass = new Codicon('pass', { fontCharacter: '\\\\eba4' });\n\texport const stopCircle = new Codicon('stop-circle', { fontCharacter: '\\\\eba5' });\n\texport const playCircle = new Codicon('play-circle', { fontCharacter: '\\\\eba6' });\n\texport const record = new Codicon('record', { fontCharacter: '\\\\eba7' });\n\texport const debugAltSmall = new Codicon('debug-alt-small', { fontCharacter: '\\\\eba8' });\n\texport const vmConnect = new Codicon('vm-connect', { fontCharacter: '\\\\eba9' });\n\texport const cloud = new Codicon('cloud', { fontCharacter: '\\\\ebaa' });\n\texport const merge = new Codicon('merge', { fontCharacter: '\\\\ebab' });\n\texport const exportIcon = new Codicon('export', { fontCharacter: '\\\\ebac' });\n\texport const graphLeft = new Codicon('graph-left', { fontCharacter: '\\\\ebad' });\n\texport const magnet = new Codicon('magnet', { fontCharacter: '\\\\ebae' });\n\texport const notebook = new Codicon('notebook', { fontCharacter: '\\\\ebaf' });\n\texport const redo = new Codicon('redo', { fontCharacter: '\\\\ebb0' });\n\texport const checkAll = new Codicon('check-all', { fontCharacter: '\\\\ebb1' });\n\texport const pinnedDirty = new Codicon('pinned-dirty', { fontCharacter: '\\\\ebb2' });\n\texport const passFilled = new Codicon('pass-filled', { fontCharacter: '\\\\ebb3' });\n\texport const circleLargeFilled = new Codicon('circle-large-filled', { fontCharacter: '\\\\ebb4' });\n\texport const circleLargeOutline = new Codicon('circle-large-outline', { fontCharacter: '\\\\ebb5' });\n\texport const combine = new Codicon('combine', { fontCharacter: '\\\\ebb6' });\n\texport const gather = new Codicon('gather', { fontCharacter: '\\\\ebb6' });\n\texport const table = new Codicon('table', { fontCharacter: '\\\\ebb7' });\n\texport const variableGroup = new Codicon('variable-group', { fontCharacter: '\\\\ebb8' });\n\texport const typeHierarchy = new Codicon('type-hierarchy', { fontCharacter: '\\\\ebb9' });\n\texport const typeHierarchySub = new Codicon('type-hierarchy-sub', { fontCharacter: '\\\\ebba' });\n\texport const typeHierarchySuper = new Codicon('type-hierarchy-super', { fontCharacter: '\\\\ebbb' });\n\texport const gitPullRequestCreate = new Codicon('git-pull-request-create', { fontCharacter: '\\\\ebbc' });\n\texport const runAbove = new Codicon('run-above', { fontCharacter: '\\\\ebbd' });\n\texport const runBelow = new Codicon('run-below', { fontCharacter: '\\\\ebbe' });\n\texport const notebookTemplate = new Codicon('notebook-template', { fontCharacter: '\\\\ebbf' });\n\texport const debugRerun = new Codicon('debug-rerun', { fontCharacter: '\\\\ebc0' });\n\texport const workspaceTrusted = new Codicon('workspace-trusted', { fontCharacter: '\\\\ebc1' });\n\texport const workspaceUntrusted = new Codicon('workspace-untrusted', { fontCharacter: '\\\\ebc2' });\n\texport const workspaceUnspecified = new Codicon('workspace-unspecified', { fontCharacter: '\\\\ebc3' });\n\texport const terminalCmd = new Codicon('terminal-cmd', { fontCharacter: '\\\\ebc4' });\n\texport const terminalDebian = new Codicon('terminal-debian', { fontCharacter: '\\\\ebc5' });\n\texport const terminalLinux = new Codicon('terminal-linux', { fontCharacter: '\\\\ebc6' });\n\texport const terminalPowershell = new Codicon('terminal-powershell', { fontCharacter: '\\\\ebc7' });\n\texport const terminalTmux = new Codicon('terminal-tmux', { fontCharacter: '\\\\ebc8' });\n\texport const terminalUbuntu = new Codicon('terminal-ubuntu', { fontCharacter: '\\\\ebc9' });\n\texport const terminalBash = new Codicon('terminal-bash', { fontCharacter: '\\\\ebca' });\n\texport const arrowSwap = new Codicon('arrow-swap', { fontCharacter: '\\\\ebcb' });\n\texport const copy = new Codicon('copy', { fontCharacter: '\\\\ebcc' });\n\texport const personAdd = new Codicon('person-add', { fontCharacter: '\\\\ebcd' });\n\texport const filterFilled = new Codicon('filter-filled', { fontCharacter: '\\\\ebce' });\n\texport const wand = new Codicon('wand', { fontCharacter: '\\\\ebcf' });\n\texport const debugLineByLine = new Codicon('debug-line-by-line', { fontCharacter: '\\\\ebd0' });\n\n\texport const dropDownButton = new Codicon('drop-down-button', Codicon.chevronDown.definition);\n}\n\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Codicon, registerCodicon } from 'vs/base/common/codicons';\n\nexport const treeItemExpandedIcon = registerCodicon('tree-item-expanded', Codicon.chevronDown); // collapsed is done with rotation\n\nexport const treeFilterOnTypeOnIcon = registerCodicon('tree-filter-on-type-on', Codicon.listFilter);\nexport const treeFilterOnTypeOffIcon = registerCodicon('tree-filter-on-type-off', Codicon.listSelection);\nexport const treeFilterClearIcon = registerCodicon('tree-filter-clear', Codicon.close);\n\nexport const treeItemLoadingIcon = registerCodicon('tree-item-loading', Codicon.loading);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, IDisposable } from 'vs/base/common/lifecycle';\n\nexport const enum ScrollbarVisibility {\n\tAuto = 1,\n\tHidden = 2,\n\tVisible = 3\n}\n\nexport interface ScrollEvent {\n\tinSmoothScrolling: boolean;\n\n\toldWidth: number;\n\toldScrollWidth: number;\n\toldScrollLeft: number;\n\n\twidth: number;\n\tscrollWidth: number;\n\tscrollLeft: number;\n\n\toldHeight: number;\n\toldScrollHeight: number;\n\toldScrollTop: number;\n\n\theight: number;\n\tscrollHeight: number;\n\tscrollTop: number;\n\n\twidthChanged: boolean;\n\tscrollWidthChanged: boolean;\n\tscrollLeftChanged: boolean;\n\n\theightChanged: boolean;\n\tscrollHeightChanged: boolean;\n\tscrollTopChanged: boolean;\n}\n\nexport class ScrollState implements IScrollDimensions, IScrollPosition {\n\t_scrollStateBrand: void;\n\n\tpublic readonly rawScrollLeft: number;\n\tpublic readonly rawScrollTop: number;\n\n\tpublic readonly width: number;\n\tpublic readonly scrollWidth: number;\n\tpublic readonly scrollLeft: number;\n\tpublic readonly height: number;\n\tpublic readonly scrollHeight: number;\n\tpublic readonly scrollTop: number;\n\n\tconstructor(\n\t\twidth: number,\n\t\tscrollWidth: number,\n\t\tscrollLeft: number,\n\t\theight: number,\n\t\tscrollHeight: number,\n\t\tscrollTop: number\n\t) {\n\t\twidth = width | 0;\n\t\tscrollWidth = scrollWidth | 0;\n\t\tscrollLeft = scrollLeft | 0;\n\t\theight = height | 0;\n\t\tscrollHeight = scrollHeight | 0;\n\t\tscrollTop = scrollTop | 0;\n\n\t\tthis.rawScrollLeft = scrollLeft; // before validation\n\t\tthis.rawScrollTop = scrollTop; // before validation\n\n\t\tif (width < 0) {\n\t\t\twidth = 0;\n\t\t}\n\t\tif (scrollLeft + width > scrollWidth) {\n\t\t\tscrollLeft = scrollWidth - width;\n\t\t}\n\t\tif (scrollLeft < 0) {\n\t\t\tscrollLeft = 0;\n\t\t}\n\n\t\tif (height < 0) {\n\t\t\theight = 0;\n\t\t}\n\t\tif (scrollTop + height > scrollHeight) {\n\t\t\tscrollTop = scrollHeight - height;\n\t\t}\n\t\tif (scrollTop < 0) {\n\t\t\tscrollTop = 0;\n\t\t}\n\n\t\tthis.width = width;\n\t\tthis.scrollWidth = scrollWidth;\n\t\tthis.scrollLeft = scrollLeft;\n\t\tthis.height = height;\n\t\tthis.scrollHeight = scrollHeight;\n\t\tthis.scrollTop = scrollTop;\n\t}\n\n\tpublic equals(other: ScrollState): boolean {\n\t\treturn (\n\t\t\tthis.rawScrollLeft === other.rawScrollLeft\n\t\t\t&& this.rawScrollTop === other.rawScrollTop\n\t\t\t&& this.width === other.width\n\t\t\t&& this.scrollWidth === other.scrollWidth\n\t\t\t&& this.scrollLeft === other.scrollLeft\n\t\t\t&& this.height === other.height\n\t\t\t&& this.scrollHeight === other.scrollHeight\n\t\t\t&& this.scrollTop === other.scrollTop\n\t\t);\n\t}\n\n\tpublic withScrollDimensions(update: INewScrollDimensions, useRawScrollPositions: boolean): ScrollState {\n\t\treturn new ScrollState(\n\t\t\t(typeof update.width !== 'undefined' ? update.width : this.width),\n\t\t\t(typeof update.scrollWidth !== 'undefined' ? update.scrollWidth : this.scrollWidth),\n\t\t\tuseRawScrollPositions ? this.rawScrollLeft : this.scrollLeft,\n\t\t\t(typeof update.height !== 'undefined' ? update.height : this.height),\n\t\t\t(typeof update.scrollHeight !== 'undefined' ? update.scrollHeight : this.scrollHeight),\n\t\t\tuseRawScrollPositions ? this.rawScrollTop : this.scrollTop\n\t\t);\n\t}\n\n\tpublic withScrollPosition(update: INewScrollPosition): ScrollState {\n\t\treturn new ScrollState(\n\t\t\tthis.width,\n\t\t\tthis.scrollWidth,\n\t\t\t(typeof update.scrollLeft !== 'undefined' ? update.scrollLeft : this.rawScrollLeft),\n\t\t\tthis.height,\n\t\t\tthis.scrollHeight,\n\t\t\t(typeof update.scrollTop !== 'undefined' ? update.scrollTop : this.rawScrollTop)\n\t\t);\n\t}\n\n\tpublic createScrollEvent(previous: ScrollState, inSmoothScrolling: boolean): ScrollEvent {\n\t\tconst widthChanged = (this.width !== previous.width);\n\t\tconst scrollWidthChanged = (this.scrollWidth !== previous.scrollWidth);\n\t\tconst scrollLeftChanged = (this.scrollLeft !== previous.scrollLeft);\n\n\t\tconst heightChanged = (this.height !== previous.height);\n\t\tconst scrollHeightChanged = (this.scrollHeight !== previous.scrollHeight);\n\t\tconst scrollTopChanged = (this.scrollTop !== previous.scrollTop);\n\n\t\treturn {\n\t\t\tinSmoothScrolling: inSmoothScrolling,\n\t\t\toldWidth: previous.width,\n\t\t\toldScrollWidth: previous.scrollWidth,\n\t\t\toldScrollLeft: previous.scrollLeft,\n\n\t\t\twidth: this.width,\n\t\t\tscrollWidth: this.scrollWidth,\n\t\t\tscrollLeft: this.scrollLeft,\n\n\t\t\toldHeight: previous.height,\n\t\t\toldScrollHeight: previous.scrollHeight,\n\t\t\toldScrollTop: previous.scrollTop,\n\n\t\t\theight: this.height,\n\t\t\tscrollHeight: this.scrollHeight,\n\t\t\tscrollTop: this.scrollTop,\n\n\t\t\twidthChanged: widthChanged,\n\t\t\tscrollWidthChanged: scrollWidthChanged,\n\t\t\tscrollLeftChanged: scrollLeftChanged,\n\n\t\t\theightChanged: heightChanged,\n\t\t\tscrollHeightChanged: scrollHeightChanged,\n\t\t\tscrollTopChanged: scrollTopChanged,\n\t\t};\n\t}\n\n}\n\nexport interface IScrollDimensions {\n\treadonly width: number;\n\treadonly scrollWidth: number;\n\treadonly height: number;\n\treadonly scrollHeight: number;\n}\nexport interface INewScrollDimensions {\n\twidth?: number;\n\tscrollWidth?: number;\n\theight?: number;\n\tscrollHeight?: number;\n}\n\nexport interface IScrollPosition {\n\treadonly scrollLeft: number;\n\treadonly scrollTop: number;\n}\nexport interface ISmoothScrollPosition {\n\treadonly scrollLeft: number;\n\treadonly scrollTop: number;\n\n\treadonly width: number;\n\treadonly height: number;\n}\nexport interface INewScrollPosition {\n\tscrollLeft?: number;\n\tscrollTop?: number;\n}\n\nexport class Scrollable extends Disposable {\n\n\t_scrollableBrand: void;\n\n\tprivate _smoothScrollDuration: number;\n\tprivate readonly _scheduleAtNextAnimationFrame: (callback: () => void) => IDisposable;\n\tprivate _state: ScrollState;\n\tprivate _smoothScrolling: SmoothScrollingOperation | null;\n\n\tprivate _onScroll = this._register(new Emitter<ScrollEvent>());\n\tpublic readonly onScroll: Event<ScrollEvent> = this._onScroll.event;\n\n\tconstructor(smoothScrollDuration: number, scheduleAtNextAnimationFrame: (callback: () => void) => IDisposable) {\n\t\tsuper();\n\n\t\tthis._smoothScrollDuration = smoothScrollDuration;\n\t\tthis._scheduleAtNextAnimationFrame = scheduleAtNextAnimationFrame;\n\t\tthis._state = new ScrollState(0, 0, 0, 0, 0, 0);\n\t\tthis._smoothScrolling = null;\n\t}\n\n\tpublic override dispose(): void {\n\t\tif (this._smoothScrolling) {\n\t\t\tthis._smoothScrolling.dispose();\n\t\t\tthis._smoothScrolling = null;\n\t\t}\n\t\tsuper.dispose();\n\t}\n\n\tpublic setSmoothScrollDuration(smoothScrollDuration: number): void {\n\t\tthis._smoothScrollDuration = smoothScrollDuration;\n\t}\n\n\tpublic validateScrollPosition(scrollPosition: INewScrollPosition): IScrollPosition {\n\t\treturn this._state.withScrollPosition(scrollPosition);\n\t}\n\n\tpublic getScrollDimensions(): IScrollDimensions {\n\t\treturn this._state;\n\t}\n\n\tpublic setScrollDimensions(dimensions: INewScrollDimensions, useRawScrollPositions: boolean): void {\n\t\tconst newState = this._state.withScrollDimensions(dimensions, useRawScrollPositions);\n\t\tthis._setState(newState, Boolean(this._smoothScrolling));\n\n\t\t// Validate outstanding animated scroll position target\n\t\tif (this._smoothScrolling) {\n\t\t\tthis._smoothScrolling.acceptScrollDimensions(this._state);\n\t\t}\n\t}\n\n\t/**\n\t * Returns the final scroll position that the instance will have once the smooth scroll animation concludes.\n\t * If no scroll animation is occurring, it will return the current scroll position instead.\n\t */\n\tpublic getFutureScrollPosition(): IScrollPosition {\n\t\tif (this._smoothScrolling) {\n\t\t\treturn this._smoothScrolling.to;\n\t\t}\n\t\treturn this._state;\n\t}\n\n\t/**\n\t * Returns the current scroll position.\n\t * Note: This result might be an intermediate scroll position, as there might be an ongoing smooth scroll animation.\n\t */\n\tpublic getCurrentScrollPosition(): IScrollPosition {\n\t\treturn this._state;\n\t}\n\n\tpublic setScrollPositionNow(update: INewScrollPosition): void {\n\t\t// no smooth scrolling requested\n\t\tconst newState = this._state.withScrollPosition(update);\n\n\t\t// Terminate any outstanding smooth scrolling\n\t\tif (this._smoothScrolling) {\n\t\t\tthis._smoothScrolling.dispose();\n\t\t\tthis._smoothScrolling = null;\n\t\t}\n\n\t\tthis._setState(newState, false);\n\t}\n\n\tpublic setScrollPositionSmooth(update: INewScrollPosition, reuseAnimation?: boolean): void {\n\t\tif (this._smoothScrollDuration === 0) {\n\t\t\t// Smooth scrolling not supported.\n\t\t\treturn this.setScrollPositionNow(update);\n\t\t}\n\n\t\tif (this._smoothScrolling) {\n\t\t\t// Combine our pending scrollLeft/scrollTop with incoming scrollLeft/scrollTop\n\t\t\tupdate = {\n\t\t\t\tscrollLeft: (typeof update.scrollLeft === 'undefined' ? this._smoothScrolling.to.scrollLeft : update.scrollLeft),\n\t\t\t\tscrollTop: (typeof update.scrollTop === 'undefined' ? this._smoothScrolling.to.scrollTop : update.scrollTop)\n\t\t\t};\n\n\t\t\t// Validate `update`\n\t\t\tconst validTarget = this._state.withScrollPosition(update);\n\n\t\t\tif (this._smoothScrolling.to.scrollLeft === validTarget.scrollLeft && this._smoothScrolling.to.scrollTop === validTarget.scrollTop) {\n\t\t\t\t// No need to interrupt or extend the current animation since we're going to the same place\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet newSmoothScrolling: SmoothScrollingOperation;\n\t\t\tif (reuseAnimation) {\n\t\t\t\tnewSmoothScrolling = new SmoothScrollingOperation(this._smoothScrolling.from, validTarget, this._smoothScrolling.startTime, this._smoothScrolling.duration);\n\t\t\t} else {\n\t\t\t\tnewSmoothScrolling = this._smoothScrolling.combine(this._state, validTarget, this._smoothScrollDuration);\n\t\t\t}\n\t\t\tthis._smoothScrolling.dispose();\n\t\t\tthis._smoothScrolling = newSmoothScrolling;\n\t\t} else {\n\t\t\t// Validate `update`\n\t\t\tconst validTarget = this._state.withScrollPosition(update);\n\n\t\t\tthis._smoothScrolling = SmoothScrollingOperation.start(this._state, validTarget, this._smoothScrollDuration);\n\t\t}\n\n\t\t// Begin smooth scrolling animation\n\t\tthis._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(() => {\n\t\t\tif (!this._smoothScrolling) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._smoothScrolling.animationFrameDisposable = null;\n\t\t\tthis._performSmoothScrolling();\n\t\t});\n\t}\n\n\tprivate _performSmoothScrolling(): void {\n\t\tif (!this._smoothScrolling) {\n\t\t\treturn;\n\t\t}\n\t\tconst update = this._smoothScrolling.tick();\n\t\tconst newState = this._state.withScrollPosition(update);\n\n\t\tthis._setState(newState, true);\n\n\t\tif (!this._smoothScrolling) {\n\t\t\t// Looks like someone canceled the smooth scrolling\n\t\t\t// from the scroll event handler\n\t\t\treturn;\n\t\t}\n\n\t\tif (update.isDone) {\n\t\t\tthis._smoothScrolling.dispose();\n\t\t\tthis._smoothScrolling = null;\n\t\t\treturn;\n\t\t}\n\n\t\t// Continue smooth scrolling animation\n\t\tthis._smoothScrolling.animationFrameDisposable = this._scheduleAtNextAnimationFrame(() => {\n\t\t\tif (!this._smoothScrolling) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis._smoothScrolling.animationFrameDisposable = null;\n\t\t\tthis._performSmoothScrolling();\n\t\t});\n\t}\n\n\tprivate _setState(newState: ScrollState, inSmoothScrolling: boolean): void {\n\t\tconst oldState = this._state;\n\t\tif (oldState.equals(newState)) {\n\t\t\t// no change\n\t\t\treturn;\n\t\t}\n\t\tthis._state = newState;\n\t\tthis._onScroll.fire(this._state.createScrollEvent(oldState, inSmoothScrolling));\n\t}\n}\n\nexport class SmoothScrollingUpdate {\n\n\tpublic readonly scrollLeft: number;\n\tpublic readonly scrollTop: number;\n\tpublic readonly isDone: boolean;\n\n\tconstructor(scrollLeft: number, scrollTop: number, isDone: boolean) {\n\t\tthis.scrollLeft = scrollLeft;\n\t\tthis.scrollTop = scrollTop;\n\t\tthis.isDone = isDone;\n\t}\n\n}\n\nexport interface IAnimation {\n\t(completion: number): number;\n}\n\nfunction createEaseOutCubic(from: number, to: number): IAnimation {\n\tconst delta = to - from;\n\treturn function (completion: number): number {\n\t\treturn from + delta * easeOutCubic(completion);\n\t};\n}\n\nfunction createComposed(a: IAnimation, b: IAnimation, cut: number): IAnimation {\n\treturn function (completion: number): number {\n\t\tif (completion < cut) {\n\t\t\treturn a(completion / cut);\n\t\t}\n\t\treturn b((completion - cut) / (1 - cut));\n\t};\n}\n\nexport class SmoothScrollingOperation {\n\n\tpublic readonly from: ISmoothScrollPosition;\n\tpublic to: ISmoothScrollPosition;\n\tpublic readonly duration: number;\n\tpublic readonly startTime: number;\n\tpublic animationFrameDisposable: IDisposable | null;\n\n\tprivate scrollLeft!: IAnimation;\n\tprivate scrollTop!: IAnimation;\n\n\tconstructor(from: ISmoothScrollPosition, to: ISmoothScrollPosition, startTime: number, duration: number) {\n\t\tthis.from = from;\n\t\tthis.to = to;\n\t\tthis.duration = duration;\n\t\tthis.startTime = startTime;\n\n\t\tthis.animationFrameDisposable = null;\n\n\t\tthis._initAnimations();\n\t}\n\n\tprivate _initAnimations(): void {\n\t\tthis.scrollLeft = this._initAnimation(this.from.scrollLeft, this.to.scrollLeft, this.to.width);\n\t\tthis.scrollTop = this._initAnimation(this.from.scrollTop, this.to.scrollTop, this.to.height);\n\t}\n\n\tprivate _initAnimation(from: number, to: number, viewportSize: number): IAnimation {\n\t\tconst delta = Math.abs(from - to);\n\t\tif (delta > 2.5 * viewportSize) {\n\t\t\tlet stop1: number, stop2: number;\n\t\t\tif (from < to) {\n\t\t\t\t// scroll to 75% of the viewportSize\n\t\t\t\tstop1 = from + 0.75 * viewportSize;\n\t\t\t\tstop2 = to - 0.75 * viewportSize;\n\t\t\t} else {\n\t\t\t\tstop1 = from - 0.75 * viewportSize;\n\t\t\t\tstop2 = to + 0.75 * viewportSize;\n\t\t\t}\n\t\t\treturn createComposed(createEaseOutCubic(from, stop1), createEaseOutCubic(stop2, to), 0.33);\n\t\t}\n\t\treturn createEaseOutCubic(from, to);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.animationFrameDisposable !== null) {\n\t\t\tthis.animationFrameDisposable.dispose();\n\t\t\tthis.animationFrameDisposable = null;\n\t\t}\n\t}\n\n\tpublic acceptScrollDimensions(state: ScrollState): void {\n\t\tthis.to = state.withScrollPosition(this.to);\n\t\tthis._initAnimations();\n\t}\n\n\tpublic tick(): SmoothScrollingUpdate {\n\t\treturn this._tick(Date.now());\n\t}\n\n\tprotected _tick(now: number): SmoothScrollingUpdate {\n\t\tconst completion = (now - this.startTime) / this.duration;\n\n\t\tif (completion < 1) {\n\t\t\tconst newScrollLeft = this.scrollLeft(completion);\n\t\t\tconst newScrollTop = this.scrollTop(completion);\n\t\t\treturn new SmoothScrollingUpdate(newScrollLeft, newScrollTop, false);\n\t\t}\n\n\t\treturn new SmoothScrollingUpdate(this.to.scrollLeft, this.to.scrollTop, true);\n\t}\n\n\tpublic combine(from: ISmoothScrollPosition, to: ISmoothScrollPosition, duration: number): SmoothScrollingOperation {\n\t\treturn SmoothScrollingOperation.start(from, to, duration);\n\t}\n\n\tpublic static start(from: ISmoothScrollPosition, to: ISmoothScrollPosition, duration: number): SmoothScrollingOperation {\n\t\t// +10 / -10 : pretend the animation already started for a quicker response to a scroll request\n\t\tduration = duration + 10;\n\t\tconst startTime = Date.now() - 10;\n\n\t\treturn new SmoothScrollingOperation(from, to, startTime, duration);\n\t}\n}\n\nfunction easeInCubic(t: number) {\n\treturn Math.pow(t, 3);\n}\n\nfunction easeOutCubic(t: number) {\n\treturn 1 - easeInCubic(1 - t);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { DisposableStore, toDisposable } from 'vs/base/common/lifecycle';\n\n/**\n * The payload that flows in readable stream events.\n */\nexport type ReadableStreamEventPayload<T> = T | Error | 'end';\n\nexport interface ReadableStreamEvents<T> {\n\n\t/**\n\t * The 'data' event is emitted whenever the stream is\n\t * relinquishing ownership of a chunk of data to a consumer.\n\t *\n\t * NOTE: PLEASE UNDERSTAND THAT ADDING A DATA LISTENER CAN\n\t * TURN THE STREAM INTO FLOWING MODE. IT IS THEREFOR THE\n\t * LAST LISTENER THAT SHOULD BE ADDED AND NOT THE FIRST\n\t *\n\t * Use `listenStream` as a helper method to listen to\n\t * stream events in the right order.\n\t */\n\ton(event: 'data', callback: (data: T) => void): void;\n\n\t/**\n\t * Emitted when any error occurs.\n\t */\n\ton(event: 'error', callback: (err: Error) => void): void;\n\n\t/**\n\t * The 'end' event is emitted when there is no more data\n\t * to be consumed from the stream. The 'end' event will\n\t * not be emitted unless the data is completely consumed.\n\t */\n\ton(event: 'end', callback: () => void): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * stream for use in native and web environments.\n */\nexport interface ReadableStream<T> extends ReadableStreamEvents<T> {\n\n\t/**\n\t * Stops emitting any events until resume() is called.\n\t */\n\tpause(): void;\n\n\t/**\n\t * Starts emitting events again after pause() was called.\n\t */\n\tresume(): void;\n\n\t/**\n\t * Destroys the stream and stops emitting any event.\n\t */\n\tdestroy(): void;\n\n\t/**\n\t * Allows to remove a listener that was previously added.\n\t */\n\tremoveListener(event: string, callback: Function): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * for use in native and web environments.\n */\nexport interface Readable<T> {\n\n\t/**\n\t * Read data from the underlying source. Will return\n\t * null to indicate that no more data can be read.\n\t */\n\tread(): T | null;\n}\n\n/**\n * A interface that emulates the API shape of a node.js writeable\n * stream for use in native and web environments.\n */\nexport interface WriteableStream<T> extends ReadableStream<T> {\n\n\t/**\n\t * Writing data to the stream will trigger the on('data')\n\t * event listener if the stream is flowing and buffer the\n\t * data otherwise until the stream is flowing.\n\t *\n\t * If a `highWaterMark` is configured and writing to the\n\t * stream reaches this mark, a promise will be returned\n\t * that should be awaited on before writing more data.\n\t * Otherwise there is a risk of buffering a large number\n\t * of data chunks without consumer.\n\t */\n\twrite(data: T): void | Promise<void>;\n\n\t/**\n\t * Signals an error to the consumer of the stream via the\n\t * on('error') handler if the stream is flowing.\n\t *\n\t * NOTE: call `end` to signal that the stream has ended,\n\t * this DOES NOT happen automatically from `error`.\n\t */\n\terror(error: Error): void;\n\n\t/**\n\t * Signals the end of the stream to the consumer. If the\n\t * result is provided, will trigger the on('data') event\n\t * listener if the stream is flowing and buffer the data\n\t * otherwise until the stream is flowing.\n\t */\n\tend(result?: T): void;\n}\n\n/**\n * A stream that has a buffer already read. Returns the original stream\n * that was read as well as the chunks that got read.\n *\n * The `ended` flag indicates if the stream has been fully consumed.\n */\nexport interface ReadableBufferedStream<T> {\n\n\t/**\n\t * The original stream that is being read.\n\t */\n\tstream: ReadableStream<T>;\n\n\t/**\n\t * An array of chunks already read from this stream.\n\t */\n\tbuffer: T[];\n\n\t/**\n\t * Signals if the stream has ended or not. If not, consumers\n\t * should continue to read from the stream until consumed.\n\t */\n\tended: boolean;\n}\n\nexport function isReadableStream<T>(obj: unknown): obj is ReadableStream<T> {\n\tconst candidate = obj as ReadableStream<T> | undefined;\n\tif (!candidate) {\n\t\treturn false;\n\t}\n\n\treturn [candidate.on, candidate.pause, candidate.resume, candidate.destroy].every(fn => typeof fn === 'function');\n}\n\nexport function isReadableBufferedStream<T>(obj: unknown): obj is ReadableBufferedStream<T> {\n\tconst candidate = obj as ReadableBufferedStream<T> | undefined;\n\tif (!candidate) {\n\t\treturn false;\n\t}\n\n\treturn isReadableStream(candidate.stream) && Array.isArray(candidate.buffer) && typeof candidate.ended === 'boolean';\n}\n\nexport interface IReducer<T> {\n\t(data: T[]): T;\n}\n\nexport interface IDataTransformer<Original, Transformed> {\n\t(data: Original): Transformed;\n}\n\nexport interface IErrorTransformer {\n\t(error: Error): Error;\n}\n\nexport interface ITransformer<Original, Transformed> {\n\tdata: IDataTransformer<Original, Transformed>;\n\terror?: IErrorTransformer;\n}\n\nexport function newWriteableStream<T>(reducer: IReducer<T>, options?: WriteableStreamOptions): WriteableStream<T> {\n\treturn new WriteableStreamImpl<T>(reducer, options);\n}\n\nexport interface WriteableStreamOptions {\n\n\t/**\n\t * The number of objects to buffer before WriteableStream#write()\n\t * signals back that the buffer is full. Can be used to reduce\n\t * the memory pressure when the stream is not flowing.\n\t */\n\thighWaterMark?: number;\n}\n\nclass WriteableStreamImpl<T> implements WriteableStream<T> {\n\n\tprivate readonly state = {\n\t\tflowing: false,\n\t\tended: false,\n\t\tdestroyed: false\n\t};\n\n\tprivate readonly buffer = {\n\t\tdata: [] as T[],\n\t\terror: [] as Error[]\n\t};\n\n\tprivate readonly listeners = {\n\t\tdata: [] as { (data: T): void }[],\n\t\terror: [] as { (error: Error): void }[],\n\t\tend: [] as { (): void }[]\n\t};\n\n\tprivate readonly pendingWritePromises: Function[] = [];\n\n\tconstructor(private reducer: IReducer<T>, private options?: WriteableStreamOptions) { }\n\n\tpause(): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.flowing = false;\n\t}\n\n\tresume(): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.state.flowing) {\n\t\t\tthis.state.flowing = true;\n\n\t\t\t// emit buffered events\n\t\t\tthis.flowData();\n\t\t\tthis.flowErrors();\n\t\t\tthis.flowEnd();\n\t\t}\n\t}\n\n\twrite(data: T): void | Promise<void> {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// flowing: directly send the data to listeners\n\t\tif (this.state.flowing) {\n\t\t\tthis.emitData(data);\n\t\t}\n\n\t\t// not yet flowing: buffer data until flowing\n\t\telse {\n\t\t\tthis.buffer.data.push(data);\n\n\t\t\t// highWaterMark: if configured, signal back when buffer reached limits\n\t\t\tif (typeof this.options?.highWaterMark === 'number' && this.buffer.data.length > this.options.highWaterMark) {\n\t\t\t\treturn new Promise(resolve => this.pendingWritePromises.push(resolve));\n\t\t\t}\n\t\t}\n\t}\n\n\terror(error: Error): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// flowing: directly send the error to listeners\n\t\tif (this.state.flowing) {\n\t\t\tthis.emitError(error);\n\t\t}\n\n\t\t// not yet flowing: buffer errors until flowing\n\t\telse {\n\t\t\tthis.buffer.error.push(error);\n\t\t}\n\t}\n\n\tend(result?: T): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\t// end with data if provided\n\t\tif (typeof result !== 'undefined') {\n\t\t\tthis.write(result);\n\t\t}\n\n\t\t// flowing: send end event to listeners\n\t\tif (this.state.flowing) {\n\t\t\tthis.emitEnd();\n\n\t\t\tthis.destroy();\n\t\t}\n\n\t\t// not yet flowing: remember state\n\t\telse {\n\t\t\tthis.state.ended = true;\n\t\t}\n\t}\n\n\tprivate emitData(data: T): void {\n\t\tthis.listeners.data.slice(0).forEach(listener => listener(data)); // slice to avoid listener mutation from delivering event\n\t}\n\n\tprivate emitError(error: Error): void {\n\t\tif (this.listeners.error.length === 0) {\n\t\t\tonUnexpectedError(error); // nobody listened to this error so we log it as unexpected\n\t\t} else {\n\t\t\tthis.listeners.error.slice(0).forEach(listener => listener(error)); // slice to avoid listener mutation from delivering event\n\t\t}\n\t}\n\n\tprivate emitEnd(): void {\n\t\tthis.listeners.end.slice(0).forEach(listener => listener()); // slice to avoid listener mutation from delivering event\n\t}\n\n\ton(event: 'data', callback: (data: T) => void): void;\n\ton(event: 'error', callback: (err: Error) => void): void;\n\ton(event: 'end', callback: () => void): void;\n\ton(event: 'data' | 'error' | 'end', callback: (arg0?: any) => void): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tswitch (event) {\n\t\t\tcase 'data':\n\t\t\t\tthis.listeners.data.push(callback);\n\n\t\t\t\t// switch into flowing mode as soon as the first 'data'\n\t\t\t\t// listener is added and we are not yet in flowing mode\n\t\t\t\tthis.resume();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'end':\n\t\t\t\tthis.listeners.end.push(callback);\n\n\t\t\t\t// emit 'end' event directly if we are flowing\n\t\t\t\t// and the end has already been reached\n\t\t\t\t//\n\t\t\t\t// finish() when it went through\n\t\t\t\tif (this.state.flowing && this.flowEnd()) {\n\t\t\t\t\tthis.destroy();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'error':\n\t\t\t\tthis.listeners.error.push(callback);\n\n\t\t\t\t// emit buffered 'error' events unless done already\n\t\t\t\t// now that we know that we have at least one listener\n\t\t\t\tif (this.state.flowing) {\n\t\t\t\t\tthis.flowErrors();\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tremoveListener(event: string, callback: Function): void {\n\t\tif (this.state.destroyed) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet listeners: unknown[] | undefined = undefined;\n\n\t\tswitch (event) {\n\t\t\tcase 'data':\n\t\t\t\tlisteners = this.listeners.data;\n\t\t\t\tbreak;\n\n\t\t\tcase 'end':\n\t\t\t\tlisteners = this.listeners.end;\n\t\t\t\tbreak;\n\n\t\t\tcase 'error':\n\t\t\t\tlisteners = this.listeners.error;\n\t\t\t\tbreak;\n\t\t}\n\n\t\tif (listeners) {\n\t\t\tconst index = listeners.indexOf(callback);\n\t\t\tif (index >= 0) {\n\t\t\t\tlisteners.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate flowData(): void {\n\t\tif (this.buffer.data.length > 0) {\n\t\t\tconst fullDataBuffer = this.reducer(this.buffer.data);\n\n\t\t\tthis.emitData(fullDataBuffer);\n\n\t\t\tthis.buffer.data.length = 0;\n\n\t\t\t// When the buffer is empty, resolve all pending writers\n\t\t\tconst pendingWritePromises = [...this.pendingWritePromises];\n\t\t\tthis.pendingWritePromises.length = 0;\n\t\t\tpendingWritePromises.forEach(pendingWritePromise => pendingWritePromise());\n\t\t}\n\t}\n\n\tprivate flowErrors(): void {\n\t\tif (this.listeners.error.length > 0) {\n\t\t\tfor (const error of this.buffer.error) {\n\t\t\t\tthis.emitError(error);\n\t\t\t}\n\n\t\t\tthis.buffer.error.length = 0;\n\t\t}\n\t}\n\n\tprivate flowEnd(): boolean {\n\t\tif (this.state.ended) {\n\t\t\tthis.emitEnd();\n\n\t\t\treturn this.listeners.end.length > 0;\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tdestroy(): void {\n\t\tif (!this.state.destroyed) {\n\t\t\tthis.state.destroyed = true;\n\t\t\tthis.state.ended = true;\n\n\t\t\tthis.buffer.data.length = 0;\n\t\t\tthis.buffer.error.length = 0;\n\n\t\t\tthis.listeners.data.length = 0;\n\t\t\tthis.listeners.error.length = 0;\n\t\t\tthis.listeners.end.length = 0;\n\n\t\t\tthis.pendingWritePromises.length = 0;\n\t\t}\n\t}\n}\n\n/**\n * Helper to fully read a T readable into a T.\n */\nexport function consumeReadable<T>(readable: Readable<T>, reducer: IReducer<T>): T {\n\tconst chunks: T[] = [];\n\n\tlet chunk: T | null;\n\twhile ((chunk = readable.read()) !== null) {\n\t\tchunks.push(chunk);\n\t}\n\n\treturn reducer(chunks);\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function peekReadable<T>(readable: Readable<T>, reducer: IReducer<T>, maxChunks: number): T | Readable<T> {\n\tconst chunks: T[] = [];\n\n\tlet chunk: T | null | undefined = undefined;\n\twhile ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n\t\tchunks.push(chunk);\n\t}\n\n\t// If the last chunk is null, it means we reached the end of\n\t// the readable and return all the data at once\n\tif (chunk === null && chunks.length > 0) {\n\t\treturn reducer(chunks);\n\t}\n\n\t// Otherwise, we still have a chunk, it means we reached the maxChunks\n\t// value and as such we return a new Readable that first returns\n\t// the existing read chunks and then continues with reading from\n\t// the underlying readable.\n\treturn {\n\t\tread: () => {\n\n\t\t\t// First consume chunks from our array\n\t\t\tif (chunks.length > 0) {\n\t\t\t\treturn chunks.shift()!;\n\t\t\t}\n\n\t\t\t// Then ensure to return our last read chunk\n\t\t\tif (typeof chunk !== 'undefined') {\n\t\t\t\tconst lastReadChunk = chunk;\n\n\t\t\t\t// explicitly use undefined here to indicate that we consumed\n\t\t\t\t// the chunk, which could have either been null or valued.\n\t\t\t\tchunk = undefined;\n\n\t\t\t\treturn lastReadChunk;\n\t\t\t}\n\n\t\t\t// Finally delegate back to the Readable\n\t\t\treturn readable.read();\n\t\t}\n\t};\n}\n\n/**\n * Helper to fully read a T stream into a T or consuming\n * a stream fully, awaiting all the events without caring\n * about the data.\n */\nexport function consumeStream<T>(stream: ReadableStreamEvents<T>, reducer: IReducer<T>): Promise<T>;\nexport function consumeStream(stream: ReadableStreamEvents<unknown>): Promise<undefined>;\nexport function consumeStream<T>(stream: ReadableStreamEvents<T>, reducer?: IReducer<T>): Promise<T | undefined> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst chunks: T[] = [];\n\n\t\tlistenStream(stream, {\n\t\t\tonData: chunk => {\n\t\t\t\tif (reducer) {\n\t\t\t\t\tchunks.push(chunk);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonError: error => {\n\t\t\t\tif (reducer) {\n\t\t\t\t\treject(error);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}\n\t\t\t},\n\t\t\tonEnd: () => {\n\t\t\t\tif (reducer) {\n\t\t\t\t\tresolve(reducer(chunks));\n\t\t\t\t} else {\n\t\t\t\t\tresolve(undefined);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}\n\nexport interface IStreamListener<T> {\n\n\t/**\n\t * The 'data' event is emitted whenever the stream is\n\t * relinquishing ownership of a chunk of data to a consumer.\n\t */\n\tonData(data: T): void;\n\n\t/**\n\t * Emitted when any error occurs.\n\t */\n\tonError(err: Error): void;\n\n\t/**\n\t * The 'end' event is emitted when there is no more data\n\t * to be consumed from the stream. The 'end' event will\n\t * not be emitted unless the data is completely consumed.\n\t */\n\tonEnd(): void;\n}\n\n/**\n * Helper to listen to all events of a T stream in proper order.\n */\nexport function listenStream<T>(stream: ReadableStreamEvents<T>, listener: IStreamListener<T>): void {\n\tstream.on('error', error => listener.onError(error));\n\tstream.on('end', () => listener.onEnd());\n\n\t// Adding the `data` listener will turn the stream\n\t// into flowing mode. As such it is important to\n\t// add this listener last (DO NOT CHANGE!)\n\tstream.on('data', data => listener.onData(data));\n}\n\n/**\n * Helper to peek up to `maxChunks` into a stream. The return type signals if\n * the stream has ended or not. If not, caller needs to add a `data` listener\n * to continue reading.\n */\nexport function peekStream<T>(stream: ReadableStream<T>, maxChunks: number): Promise<ReadableBufferedStream<T>> {\n\treturn new Promise((resolve, reject) => {\n\t\tconst streamListeners = new DisposableStore();\n\t\tconst buffer: T[] = [];\n\n\t\t// Data Listener\n\t\tconst dataListener = (chunk: T) => {\n\n\t\t\t// Add to buffer\n\t\t\tbuffer.push(chunk);\n\n\t\t\t// We reached maxChunks and thus need to return\n\t\t\tif (buffer.length > maxChunks) {\n\n\t\t\t\t// Dispose any listeners and ensure to pause the\n\t\t\t\t// stream so that it can be consumed again by caller\n\t\t\t\tstreamListeners.dispose();\n\t\t\t\tstream.pause();\n\n\t\t\t\treturn resolve({ stream, buffer, ended: false });\n\t\t\t}\n\t\t};\n\n\t\t// Error Listener\n\t\tconst errorListener = (error: Error) => {\n\t\t\treturn reject(error);\n\t\t};\n\n\t\t// End Listener\n\t\tconst endListener = () => {\n\t\t\treturn resolve({ stream, buffer, ended: true });\n\t\t};\n\n\t\tstreamListeners.add(toDisposable(() => stream.removeListener('error', errorListener)));\n\t\tstream.on('error', errorListener);\n\n\t\tstreamListeners.add(toDisposable(() => stream.removeListener('end', endListener)));\n\t\tstream.on('end', endListener);\n\n\t\t// Important: leave the `data` listener last because\n\t\t// this can turn the stream into flowing mode and we\n\t\t// want `error` events to be received as well.\n\t\tstreamListeners.add(toDisposable(() => stream.removeListener('data', dataListener)));\n\t\tstream.on('data', dataListener);\n\t});\n}\n\n/**\n * Helper to create a readable stream from an existing T.\n */\nexport function toStream<T>(t: T, reducer: IReducer<T>): ReadableStream<T> {\n\tconst stream = newWriteableStream<T>(reducer);\n\n\tstream.end(t);\n\n\treturn stream;\n}\n\n/**\n * Helper to create an empty stream\n */\nexport function emptyStream(): ReadableStream<never> {\n\tconst stream = newWriteableStream<never>(() => { throw new Error('not supported'); });\n\tstream.end();\n\n\treturn stream;\n}\n\n/**\n * Helper to convert a T into a Readable<T>.\n */\nexport function toReadable<T>(t: T): Readable<T> {\n\tlet consumed = false;\n\n\treturn {\n\t\tread: () => {\n\t\t\tif (consumed) {\n\t\t\t\treturn null;\n\t\t\t}\n\n\t\t\tconsumed = true;\n\n\t\t\treturn t;\n\t\t}\n\t};\n}\n\n/**\n * Helper to transform a readable stream into another stream.\n */\nexport function transform<Original, Transformed>(stream: ReadableStreamEvents<Original>, transformer: ITransformer<Original, Transformed>, reducer: IReducer<Transformed>): ReadableStream<Transformed> {\n\tconst target = newWriteableStream<Transformed>(reducer);\n\n\tlistenStream(stream, {\n\t\tonData: data => target.write(transformer.data(data)),\n\t\tonError: error => target.error(transformer.error ? transformer.error(error) : error),\n\t\tonEnd: () => target.end()\n\t});\n\n\treturn target;\n}\n\n/**\n * Helper to take an existing readable that will\n * have a prefix injected to the beginning.\n */\nexport function prefixedReadable<T>(prefix: T, readable: Readable<T>, reducer: IReducer<T>): Readable<T> {\n\tlet prefixHandled = false;\n\n\treturn {\n\t\tread: () => {\n\t\t\tconst chunk = readable.read();\n\n\t\t\t// Handle prefix only once\n\t\t\tif (!prefixHandled) {\n\t\t\t\tprefixHandled = true;\n\n\t\t\t\t// If we have also a read-result, make\n\t\t\t\t// sure to reduce it to a single result\n\t\t\t\tif (chunk !== null) {\n\t\t\t\t\treturn reducer([prefix, chunk]);\n\t\t\t\t}\n\n\t\t\t\t// Otherwise, just return prefix directly\n\t\t\t\treturn prefix;\n\t\t\t}\n\n\t\t\treturn chunk;\n\t\t}\n\t};\n}\n\n/**\n * Helper to take an existing stream that will\n * have a prefix injected to the beginning.\n */\nexport function prefixedStream<T>(prefix: T, stream: ReadableStream<T>, reducer: IReducer<T>): ReadableStream<T> {\n\tlet prefixHandled = false;\n\n\tconst target = newWriteableStream<T>(reducer);\n\n\tlistenStream(stream, {\n\t\tonData: data => {\n\n\t\t\t// Handle prefix only once\n\t\t\tif (!prefixHandled) {\n\t\t\t\tprefixHandled = true;\n\n\t\t\t\treturn target.write(reducer([prefix, data]));\n\t\t\t}\n\n\t\t\treturn target.write(data);\n\t\t},\n\t\tonError: error => target.error(error),\n\t\tonEnd: () => {\n\n\t\t\t// Handle prefix only once\n\t\t\tif (!prefixHandled) {\n\t\t\t\tprefixHandled = true;\n\n\t\t\t\ttarget.write(prefix);\n\t\t\t}\n\n\t\t\ttarget.end();\n\t\t}\n\t});\n\n\treturn target;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from 'vs/base/common/charCode';\nimport { Constants } from 'vs/base/common/uint';\n\nexport function isFalsyOrWhitespace(str: string | undefined): boolean {\n\tif (!str || typeof str !== 'string') {\n\t\treturn true;\n\t}\n\treturn str.trim().length === 0;\n}\n\nconst _formatRegexp = /{(\\d+)}/g;\n\n/**\n * Helper to produce a string with a variable number of arguments. Insert variable segments\n * into the string using the {n} notation where N is the index of the argument following the string.\n * @param value string to which formatting is applied\n * @param args replacements for {n}-entries\n */\nexport function format(value: string, ...args: any[]): string {\n\tif (args.length === 0) {\n\t\treturn value;\n\t}\n\treturn value.replace(_formatRegexp, function (match, group) {\n\t\tconst idx = parseInt(group, 10);\n\t\treturn isNaN(idx) || idx < 0 || idx >= args.length ?\n\t\t\tmatch :\n\t\t\targs[idx];\n\t});\n}\n\n/**\n * Converts HTML characters inside the string to use entities instead. Makes the string safe from\n * being used e.g. in HTMLElement.innerHTML.\n */\nexport function escape(html: string): string {\n\treturn html.replace(/[<>&]/g, function (match) {\n\t\tswitch (match) {\n\t\t\tcase '<': return '&lt;';\n\t\t\tcase '>': return '&gt;';\n\t\t\tcase '&': return '&amp;';\n\t\t\tdefault: return match;\n\t\t}\n\t});\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n\treturn value.replace(/[\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)]/g, '\\\\$&');\n}\n\n/**\n * Counts how often `character` occurs inside `value`.\n */\nexport function count(value: string, character: string): number {\n\tlet result = 0;\n\tconst ch = character.charCodeAt(0);\n\tfor (let i = value.length - 1; i >= 0; i--) {\n\t\tif (value.charCodeAt(i) === ch) {\n\t\t\tresult++;\n\t\t}\n\t}\n\treturn result;\n}\n\nexport function truncate(value: string, maxLength: number, suffix = ''): string {\n\tif (value.length <= maxLength) {\n\t\treturn value;\n\t}\n\n\treturn `${value.substr(0, maxLength)}${suffix}`;\n}\n\n/**\n * Removes all occurrences of needle from the beginning and end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim (default is a blank)\n */\nexport function trim(haystack: string, needle: string = ' '): string {\n\tconst trimmed = ltrim(haystack, needle);\n\treturn rtrim(trimmed, needle);\n}\n\n/**\n * Removes all occurrences of needle from the beginning of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nexport function ltrim(haystack: string, needle: string): string {\n\tif (!haystack || !needle) {\n\t\treturn haystack;\n\t}\n\n\tconst needleLen = needle.length;\n\tif (needleLen === 0 || haystack.length === 0) {\n\t\treturn haystack;\n\t}\n\n\tlet offset = 0;\n\n\twhile (haystack.indexOf(needle, offset) === offset) {\n\t\toffset = offset + needleLen;\n\t}\n\treturn haystack.substring(offset);\n}\n\n/**\n * Removes all occurrences of needle from the end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nexport function rtrim(haystack: string, needle: string): string {\n\tif (!haystack || !needle) {\n\t\treturn haystack;\n\t}\n\n\tconst needleLen = needle.length,\n\t\thaystackLen = haystack.length;\n\n\tif (needleLen === 0 || haystackLen === 0) {\n\t\treturn haystack;\n\t}\n\n\tlet offset = haystackLen,\n\t\tidx = -1;\n\n\twhile (true) {\n\t\tidx = haystack.lastIndexOf(needle, offset - 1);\n\t\tif (idx === -1 || idx + needleLen !== offset) {\n\t\t\tbreak;\n\t\t}\n\t\tif (idx === 0) {\n\t\t\treturn '';\n\t\t}\n\t\toffset = idx;\n\t}\n\n\treturn haystack.substring(0, offset);\n}\n\nexport function convertSimple2RegExpPattern(pattern: string): string {\n\treturn pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\n\nexport function stripWildcards(pattern: string): string {\n\treturn pattern.replace(/\\*/g, '');\n}\n\nexport interface RegExpOptions {\n\tmatchCase?: boolean;\n\twholeWord?: boolean;\n\tmultiline?: boolean;\n\tglobal?: boolean;\n\tunicode?: boolean;\n}\n\nexport function createRegExp(searchString: string, isRegex: boolean, options: RegExpOptions = {}): RegExp {\n\tif (!searchString) {\n\t\tthrow new Error('Cannot create regex from empty string');\n\t}\n\tif (!isRegex) {\n\t\tsearchString = escapeRegExpCharacters(searchString);\n\t}\n\tif (options.wholeWord) {\n\t\tif (!/\\B/.test(searchString.charAt(0))) {\n\t\t\tsearchString = '\\\\b' + searchString;\n\t\t}\n\t\tif (!/\\B/.test(searchString.charAt(searchString.length - 1))) {\n\t\t\tsearchString = searchString + '\\\\b';\n\t\t}\n\t}\n\tlet modifiers = '';\n\tif (options.global) {\n\t\tmodifiers += 'g';\n\t}\n\tif (!options.matchCase) {\n\t\tmodifiers += 'i';\n\t}\n\tif (options.multiline) {\n\t\tmodifiers += 'm';\n\t}\n\tif (options.unicode) {\n\t\tmodifiers += 'u';\n\t}\n\n\treturn new RegExp(searchString, modifiers);\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n\t// Exit early if it's one of these special cases which are meant to match\n\t// against an empty string\n\tif (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n\t\treturn false;\n\t}\n\n\t// We check against an empty string. If the regular expression doesn't advance\n\t// (e.g. ends in an endless loop) it will match an empty string.\n\tconst match = regexp.exec('');\n\treturn !!(match && regexp.lastIndex === 0);\n}\n\nexport function regExpContainsBackreference(regexpValue: string): boolean {\n\treturn !!regexpValue.match(/([^\\\\]|^)(\\\\\\\\)*\\\\\\d+/);\n}\n\nexport function regExpFlags(regexp: RegExp): string {\n\treturn (regexp.global ? 'g' : '')\n\t\t+ (regexp.ignoreCase ? 'i' : '')\n\t\t+ (regexp.multiline ? 'm' : '')\n\t\t+ ((regexp as any /* standalone editor compilation */).unicode ? 'u' : '');\n}\n\nexport function splitLines(str: string): string[] {\n\treturn str.split(/\\r\\n|\\r|\\n/);\n}\n\n/**\n * Returns first index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nexport function firstNonWhitespaceIndex(str: string): number {\n\tfor (let i = 0, len = str.length; i < len; i++) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * Returns the leading whitespace of the string.\n * If the string contains only whitespaces, returns entire string\n */\nexport function getLeadingWhitespace(str: string, start: number = 0, end: number = str.length): string {\n\tfor (let i = start; i < end; i++) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn str.substring(start, i);\n\t\t}\n\t}\n\treturn str.substring(start, end);\n}\n\n/**\n * Returns last index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nexport function lastNonWhitespaceIndex(str: string, startIndex: number = str.length - 1): number {\n\tfor (let i = startIndex; i >= 0; i--) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\nexport function compare(a: string, b: string): number {\n\tif (a < b) {\n\t\treturn -1;\n\t} else if (a > b) {\n\t\treturn 1;\n\t} else {\n\t\treturn 0;\n\t}\n}\n\nexport function compareSubstring(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\tfor (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\t\tlet codeA = a.charCodeAt(aStart);\n\t\tlet codeB = b.charCodeAt(bStart);\n\t\tif (codeA < codeB) {\n\t\t\treturn -1;\n\t\t} else if (codeA > codeB) {\n\t\t\treturn 1;\n\t\t}\n\t}\n\tconst aLen = aEnd - aStart;\n\tconst bLen = bEnd - bStart;\n\tif (aLen < bLen) {\n\t\treturn -1;\n\t} else if (aLen > bLen) {\n\t\treturn 1;\n\t}\n\treturn 0;\n}\n\nexport function compareIgnoreCase(a: string, b: string): number {\n\treturn compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\n\nexport function compareSubstringIgnoreCase(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\n\tfor (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\n\t\tlet codeA = a.charCodeAt(aStart);\n\t\tlet codeB = b.charCodeAt(bStart);\n\n\t\tif (codeA === codeB) {\n\t\t\t// equal\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst diff = codeA - codeB;\n\t\tif (diff === 32 && isUpperAsciiLetter(codeB)) { //codeB =[65-90] && codeA =[97-122]\n\t\t\tcontinue;\n\n\t\t} else if (diff === -32 && isUpperAsciiLetter(codeA)) {  //codeB =[97-122] && codeA =[65-90]\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (isLowerAsciiLetter(codeA) && isLowerAsciiLetter(codeB)) {\n\t\t\t//\n\t\t\treturn diff;\n\n\t\t} else {\n\t\t\treturn compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n\t\t}\n\t}\n\n\tconst aLen = aEnd - aStart;\n\tconst bLen = bEnd - bStart;\n\n\tif (aLen < bLen) {\n\t\treturn -1;\n\t} else if (aLen > bLen) {\n\t\treturn 1;\n\t}\n\n\treturn 0;\n}\n\nexport function isLowerAsciiLetter(code: number): boolean {\n\treturn code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n\treturn code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n\treturn isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n\treturn a.length === b.length && doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n\tfor (let i = 0; i < stopAt; i++) {\n\t\tconst codeA = a.charCodeAt(i);\n\t\tconst codeB = b.charCodeAt(i);\n\n\t\tif (codeA === codeB) {\n\t\t\tcontinue;\n\t\t}\n\n\t\t// a-z A-Z\n\t\tif (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n\t\t\tconst diff = Math.abs(codeA - codeB);\n\t\t\tif (diff !== 0 && diff !== 32) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\t// Any other charcode\n\t\telse {\n\t\t\tif (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n\tconst candidateLength = candidate.length;\n\tif (candidate.length > str.length) {\n\t\treturn false;\n\t}\n\n\treturn doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n\n/**\n * @returns the length of the common prefix of the two strings.\n */\nexport function commonPrefixLength(a: string, b: string): number {\n\n\tlet i: number,\n\t\tlen = Math.min(a.length, b.length);\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (a.charCodeAt(i) !== b.charCodeAt(i)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn len;\n}\n\n/**\n * @returns the length of the common suffix of the two strings.\n */\nexport function commonSuffixLength(a: string, b: string): number {\n\n\tlet i: number,\n\t\tlen = Math.min(a.length, b.length);\n\n\tconst aLastIndex = a.length - 1;\n\tconst bLastIndex = b.length - 1;\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (a.charCodeAt(aLastIndex - i) !== b.charCodeAt(bLastIndex - i)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn len;\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function isHighSurrogate(charCode: number): boolean {\n\treturn (0xD800 <= charCode && charCode <= 0xDBFF);\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function isLowSurrogate(charCode: number): boolean {\n\treturn (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function computeCodePoint(highSurrogate: number, lowSurrogate: number): number {\n\treturn ((highSurrogate - 0xD800) << 10) + (lowSurrogate - 0xDC00) + 0x10000;\n}\n\n/**\n * get the code point that begins at offset `offset`\n */\nexport function getNextCodePoint(str: string, len: number, offset: number): number {\n\tconst charCode = str.charCodeAt(offset);\n\tif (isHighSurrogate(charCode) && offset + 1 < len) {\n\t\tconst nextCharCode = str.charCodeAt(offset + 1);\n\t\tif (isLowSurrogate(nextCharCode)) {\n\t\t\treturn computeCodePoint(charCode, nextCharCode);\n\t\t}\n\t}\n\treturn charCode;\n}\n\n/**\n * get the code point that ends right before offset `offset`\n */\nfunction getPrevCodePoint(str: string, offset: number): number {\n\tconst charCode = str.charCodeAt(offset - 1);\n\tif (isLowSurrogate(charCode) && offset > 1) {\n\t\tconst prevCharCode = str.charCodeAt(offset - 2);\n\t\tif (isHighSurrogate(prevCharCode)) {\n\t\t\treturn computeCodePoint(prevCharCode, charCode);\n\t\t}\n\t}\n\treturn charCode;\n}\n\nexport function nextCharLength(str: string, offset: number): number {\n\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\tconst initialOffset = offset;\n\tconst len = str.length;\n\n\tconst initialCodePoint = getNextCodePoint(str, len, offset);\n\toffset += (initialCodePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\n\tlet graphemeBreakType = graphemeBreakTree.getGraphemeBreakType(initialCodePoint);\n\twhile (offset < len) {\n\t\tconst nextCodePoint = getNextCodePoint(str, len, offset);\n\t\tconst nextGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(nextCodePoint);\n\t\tif (breakBetweenGraphemeBreakType(graphemeBreakType, nextGraphemeBreakType)) {\n\t\t\tbreak;\n\t\t}\n\t\toffset += (nextCodePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\tgraphemeBreakType = nextGraphemeBreakType;\n\t}\n\n\treturn (offset - initialOffset);\n}\n\nexport function prevCharLength(str: string, offset: number): number {\n\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\tconst initialOffset = offset;\n\n\tconst initialCodePoint = getPrevCodePoint(str, offset);\n\toffset -= (initialCodePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\n\tlet graphemeBreakType = graphemeBreakTree.getGraphemeBreakType(initialCodePoint);\n\twhile (offset > 0) {\n\t\tconst prevCodePoint = getPrevCodePoint(str, offset);\n\t\tconst prevGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(prevCodePoint);\n\t\tif (breakBetweenGraphemeBreakType(prevGraphemeBreakType, graphemeBreakType)) {\n\t\t\tbreak;\n\t\t}\n\t\toffset -= (prevCodePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\tgraphemeBreakType = prevGraphemeBreakType;\n\t}\n\n\treturn (initialOffset - offset);\n}\n\nfunction _getCharContainingOffset(str: string, offset: number): [number, number] {\n\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\tconst len = str.length;\n\tconst initialOffset = offset;\n\tconst initialCodePoint = getNextCodePoint(str, len, offset);\n\tconst initialGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(initialCodePoint);\n\toffset += (initialCodePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\n\t// extend to the right\n\tlet graphemeBreakType = initialGraphemeBreakType;\n\twhile (offset < len) {\n\t\tconst nextCodePoint = getNextCodePoint(str, len, offset);\n\t\tconst nextGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(nextCodePoint);\n\t\tif (breakBetweenGraphemeBreakType(graphemeBreakType, nextGraphemeBreakType)) {\n\t\t\tbreak;\n\t\t}\n\t\toffset += (nextCodePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\tgraphemeBreakType = nextGraphemeBreakType;\n\t}\n\tconst endOffset = offset;\n\n\t// extend to the left\n\toffset = initialOffset;\n\tgraphemeBreakType = initialGraphemeBreakType;\n\twhile (offset > 0) {\n\t\tconst prevCodePoint = getPrevCodePoint(str, offset);\n\t\tconst prevGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(prevCodePoint);\n\t\tif (breakBetweenGraphemeBreakType(prevGraphemeBreakType, graphemeBreakType)) {\n\t\t\tbreak;\n\t\t}\n\t\toffset -= (prevCodePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\tgraphemeBreakType = prevGraphemeBreakType;\n\t}\n\n\treturn [offset, endOffset];\n}\n\nexport function getCharContainingOffset(str: string, offset: number): [number, number] {\n\tif (offset > 0 && isLowSurrogate(str.charCodeAt(offset))) {\n\t\treturn _getCharContainingOffset(str, offset - 1);\n\t}\n\treturn _getCharContainingOffset(str, offset);\n}\n\n/**\n * A manual encoding of `str` to UTF8.\n * Use only in environments which do not offer native conversion methods!\n */\nexport function encodeUTF8(str: string): Uint8Array {\n\tconst strLen = str.length;\n\n\t// See https://en.wikipedia.org/wiki/UTF-8\n\n\t// first loop to establish needed buffer size\n\tlet neededSize = 0;\n\tlet strOffset = 0;\n\twhile (strOffset < strLen) {\n\t\tconst codePoint = getNextCodePoint(str, strLen, strOffset);\n\t\tstrOffset += (codePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\n\t\tif (codePoint < 0x0080) {\n\t\t\tneededSize += 1;\n\t\t} else if (codePoint < 0x0800) {\n\t\t\tneededSize += 2;\n\t\t} else if (codePoint < 0x10000) {\n\t\t\tneededSize += 3;\n\t\t} else {\n\t\t\tneededSize += 4;\n\t\t}\n\t}\n\n\t// second loop to actually encode\n\tconst arr = new Uint8Array(neededSize);\n\tstrOffset = 0;\n\tlet arrOffset = 0;\n\twhile (strOffset < strLen) {\n\t\tconst codePoint = getNextCodePoint(str, strLen, strOffset);\n\t\tstrOffset += (codePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\n\t\tif (codePoint < 0x0080) {\n\t\t\tarr[arrOffset++] = codePoint;\n\t\t} else if (codePoint < 0x0800) {\n\t\t\tarr[arrOffset++] = 0b11000000 | ((codePoint & 0b00000000000000000000011111000000) >>> 6);\n\t\t\tarr[arrOffset++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n\t\t} else if (codePoint < 0x10000) {\n\t\t\tarr[arrOffset++] = 0b11100000 | ((codePoint & 0b00000000000000001111000000000000) >>> 12);\n\t\t\tarr[arrOffset++] = 0b10000000 | ((codePoint & 0b00000000000000000000111111000000) >>> 6);\n\t\t\tarr[arrOffset++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n\t\t} else {\n\t\t\tarr[arrOffset++] = 0b11110000 | ((codePoint & 0b00000000000111000000000000000000) >>> 18);\n\t\t\tarr[arrOffset++] = 0b10000000 | ((codePoint & 0b00000000000000111111000000000000) >>> 12);\n\t\t\tarr[arrOffset++] = 0b10000000 | ((codePoint & 0b00000000000000000000111111000000) >>> 6);\n\t\t\tarr[arrOffset++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n\t\t}\n\t}\n\n\treturn arr;\n}\n\n/**\n * A manual decoding of a UTF8 string.\n * Use only in environments which do not offer native conversion methods!\n */\nexport function decodeUTF8(buffer: Uint8Array): string {\n\t// https://en.wikipedia.org/wiki/UTF-8\n\n\tconst len = buffer.byteLength;\n\tconst result: string[] = [];\n\tlet offset = 0;\n\twhile (offset < len) {\n\t\tconst v0 = buffer[offset];\n\t\tlet codePoint: number;\n\t\tif (v0 >= 0b11110000 && offset + 3 < len) {\n\t\t\t// 4 bytes\n\t\t\tcodePoint = (\n\t\t\t\t(((buffer[offset++] & 0b00000111) << 18) >>> 0)\n\t\t\t\t| (((buffer[offset++] & 0b00111111) << 12) >>> 0)\n\t\t\t\t| (((buffer[offset++] & 0b00111111) << 6) >>> 0)\n\t\t\t\t| (((buffer[offset++] & 0b00111111) << 0) >>> 0)\n\t\t\t);\n\t\t} else if (v0 >= 0b11100000 && offset + 2 < len) {\n\t\t\t// 3 bytes\n\t\t\tcodePoint = (\n\t\t\t\t(((buffer[offset++] & 0b00001111) << 12) >>> 0)\n\t\t\t\t| (((buffer[offset++] & 0b00111111) << 6) >>> 0)\n\t\t\t\t| (((buffer[offset++] & 0b00111111) << 0) >>> 0)\n\t\t\t);\n\t\t} else if (v0 >= 0b11000000 && offset + 1 < len) {\n\t\t\t// 2 bytes\n\t\t\tcodePoint = (\n\t\t\t\t(((buffer[offset++] & 0b00011111) << 6) >>> 0)\n\t\t\t\t| (((buffer[offset++] & 0b00111111) << 0) >>> 0)\n\t\t\t);\n\t\t} else {\n\t\t\t// 1 byte\n\t\t\tcodePoint = buffer[offset++];\n\t\t}\n\n\t\tif ((codePoint >= 0 && codePoint <= 0xD7FF) || (codePoint >= 0xE000 && codePoint <= 0xFFFF)) {\n\t\t\t// Basic Multilingual Plane\n\t\t\tresult.push(String.fromCharCode(codePoint));\n\t\t} else if (codePoint >= 0x010000 && codePoint <= 0x10FFFF) {\n\t\t\t// Supplementary Planes\n\t\t\tconst uPrime = codePoint - 0x10000;\n\t\t\tconst w1 = 0xD800 + ((uPrime & 0b11111111110000000000) >>> 10);\n\t\t\tconst w2 = 0xDC00 + ((uPrime & 0b00000000001111111111) >>> 0);\n\t\t\tresult.push(String.fromCharCode(w1));\n\t\t\tresult.push(String.fromCharCode(w2));\n\t\t} else {\n\t\t\t// illegal code point\n\t\t\tresult.push(String.fromCharCode(0xFFFD));\n\t\t}\n\t}\n\n\treturn result.join('');\n}\n\n/**\n * Generated using https://github.com/alexdima/unicode-utils/blob/master/generate-rtl-test.js\n */\nconst CONTAINS_RTL = /(?:[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05F4\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1-\\u07EA\\u07F4\\u07F5\\u07FA-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u0858\\u085E-\\u08BD\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFD3D\\uFD50-\\uFDFC\\uFE70-\\uFEFC]|\\uD802[\\uDC00-\\uDD1B\\uDD20-\\uDE00\\uDE10-\\uDE33\\uDE40-\\uDEE4\\uDEEB-\\uDF35\\uDF40-\\uDFFF]|\\uD803[\\uDC00-\\uDCFF]|\\uD83A[\\uDC00-\\uDCCF\\uDD00-\\uDD43\\uDD50-\\uDFFF]|\\uD83B[\\uDC00-\\uDEBB])/;\n\n/**\n * Returns true if `str` contains any Unicode character that is classified as \"R\" or \"AL\".\n */\nexport function containsRTL(str: string): boolean {\n\treturn CONTAINS_RTL.test(str);\n}\n\n/**\n * Generated using https://github.com/alexdima/unicode-utils/blob/master/generate-emoji-test.js\n */\nconst CONTAINS_EMOJI = /(?:[\\u231A\\u231B\\u23F0\\u23F3\\u2600-\\u27BF\\u2B50\\u2B55]|\\uD83C[\\uDDE6-\\uDDFF\\uDF00-\\uDFFF]|\\uD83D[\\uDC00-\\uDE4F\\uDE80-\\uDEFC\\uDFE0-\\uDFEB]|\\uD83E[\\uDD00-\\uDDFF\\uDE70-\\uDED6])/;\n\nexport function containsEmoji(str: string): boolean {\n\treturn CONTAINS_EMOJI.test(str);\n}\n\nconst IS_BASIC_ASCII = /^[\\t\\n\\r\\x20-\\x7E]*$/;\n/**\n * Returns true if `str` contains only basic ASCII characters in the range 32 - 126 (including 32 and 126) or \\n, \\r, \\t\n */\nexport function isBasicASCII(str: string): boolean {\n\treturn IS_BASIC_ASCII.test(str);\n}\n\nexport const UNUSUAL_LINE_TERMINATORS = /[\\u2028\\u2029]/; // LINE SEPARATOR (LS) or PARAGRAPH SEPARATOR (PS)\n/**\n * Returns true if `str` contains unusual line terminators, like LS or PS\n */\nexport function containsUnusualLineTerminators(str: string): boolean {\n\treturn UNUSUAL_LINE_TERMINATORS.test(str);\n}\n\nexport function containsFullWidthCharacter(str: string): boolean {\n\tfor (let i = 0, len = str.length; i < len; i++) {\n\t\tif (isFullWidthCharacter(str.charCodeAt(i))) {\n\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n\nexport function isFullWidthCharacter(charCode: number): boolean {\n\t// Do a cheap trick to better support wrapping of wide characters, treat them as 2 columns\n\t// http://jrgraphix.net/research/unicode_blocks.php\n\t//          2E80  2EFF   CJK Radicals Supplement\n\t//          2F00  2FDF   Kangxi Radicals\n\t//          2FF0  2FFF   Ideographic Description Characters\n\t//          3000  303F   CJK Symbols and Punctuation\n\t//          3040  309F   Hiragana\n\t//          30A0  30FF   Katakana\n\t//          3100  312F   Bopomofo\n\t//          3130  318F   Hangul Compatibility Jamo\n\t//          3190  319F   Kanbun\n\t//          31A0  31BF   Bopomofo Extended\n\t//          31F0  31FF   Katakana Phonetic Extensions\n\t//          3200  32FF   Enclosed CJK Letters and Months\n\t//          3300  33FF   CJK Compatibility\n\t//          3400  4DBF   CJK Unified Ideographs Extension A\n\t//          4DC0  4DFF   Yijing Hexagram Symbols\n\t//          4E00  9FFF   CJK Unified Ideographs\n\t//          A000  A48F   Yi Syllables\n\t//          A490  A4CF   Yi Radicals\n\t//          AC00  D7AF   Hangul Syllables\n\t// [IGNORE] D800  DB7F   High Surrogates\n\t// [IGNORE] DB80  DBFF   High Private Use Surrogates\n\t// [IGNORE] DC00  DFFF   Low Surrogates\n\t// [IGNORE] E000  F8FF   Private Use Area\n\t//          F900  FAFF   CJK Compatibility Ideographs\n\t// [IGNORE] FB00  FB4F   Alphabetic Presentation Forms\n\t// [IGNORE] FB50  FDFF   Arabic Presentation Forms-A\n\t// [IGNORE] FE00  FE0F   Variation Selectors\n\t// [IGNORE] FE20  FE2F   Combining Half Marks\n\t// [IGNORE] FE30  FE4F   CJK Compatibility Forms\n\t// [IGNORE] FE50  FE6F   Small Form Variants\n\t// [IGNORE] FE70  FEFF   Arabic Presentation Forms-B\n\t//          FF00  FFEF   Halfwidth and Fullwidth Forms\n\t//               [https://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms]\n\t//               of which FF01 - FF5E fullwidth ASCII of 21 to 7E\n\t// [IGNORE]    and FF65 - FFDC halfwidth of Katakana and Hangul\n\t// [IGNORE] FFF0  FFFF   Specials\n\tcharCode = +charCode; // @perf\n\treturn (\n\t\t(charCode >= 0x2E80 && charCode <= 0xD7AF)\n\t\t|| (charCode >= 0xF900 && charCode <= 0xFAFF)\n\t\t|| (charCode >= 0xFF01 && charCode <= 0xFF5E)\n\t);\n}\n\n/**\n * A fast function (therefore imprecise) to check if code points are emojis.\n * Generated using https://github.com/alexdima/unicode-utils/blob/master/generate-emoji-test.js\n */\nexport function isEmojiImprecise(x: number): boolean {\n\treturn (\n\t\t(x >= 0x1F1E6 && x <= 0x1F1FF) || (x === 8986) || (x === 8987) || (x === 9200)\n\t\t|| (x === 9203) || (x >= 9728 && x <= 10175) || (x === 11088) || (x === 11093)\n\t\t|| (x >= 127744 && x <= 128591) || (x >= 128640 && x <= 128764)\n\t\t|| (x >= 128992 && x <= 129003) || (x >= 129280 && x <= 129535)\n\t\t|| (x >= 129648 && x <= 129750)\n\t);\n}\n\n/**\n * Given a string and a max length returns a shorted version. Shorting\n * happens at favorable positions - such as whitespace or punctuation characters.\n */\nexport function lcut(text: string, n: number) {\n\tif (text.length < n) {\n\t\treturn text;\n\t}\n\n\tconst re = /\\b/g;\n\tlet i = 0;\n\twhile (re.test(text)) {\n\t\tif (text.length - re.lastIndex < n) {\n\t\t\tbreak;\n\t\t}\n\n\t\ti = re.lastIndex;\n\t\tre.lastIndex += 1;\n\t}\n\n\treturn text.substring(i).replace(/^\\s/, '');\n}\n\n// Escape codes\n// http://en.wikipedia.org/wiki/ANSI_escape_code\nconst EL = /\\x1B\\x5B[12]?K/g; // Erase in line\nconst COLOR_START = /\\x1b\\[\\d+m/g; // Color\nconst COLOR_END = /\\x1b\\[0?m/g; // Color\n\nexport function removeAnsiEscapeCodes(str: string): string {\n\tif (str) {\n\t\tstr = str.replace(EL, '');\n\t\tstr = str.replace(COLOR_START, '');\n\t\tstr = str.replace(COLOR_END, '');\n\t}\n\n\treturn str;\n}\n\n// -- UTF-8 BOM\n\nexport const UTF8_BOM_CHARACTER = String.fromCharCode(CharCode.UTF8_BOM);\n\nexport function startsWithUTF8BOM(str: string): boolean {\n\treturn !!(str && str.length > 0 && str.charCodeAt(0) === CharCode.UTF8_BOM);\n}\n\nexport function stripUTF8BOM(str: string): string {\n\treturn startsWithUTF8BOM(str) ? str.substr(1) : str;\n}\n\n/**\n * Checks if the characters of the provided query string are included in the\n * target string. The characters do not have to be contiguous within the string.\n */\nexport function fuzzyContains(target: string, query: string): boolean {\n\tif (!target || !query) {\n\t\treturn false; // return early if target or query are undefined\n\t}\n\n\tif (target.length < query.length) {\n\t\treturn false; // impossible for query to be contained in target\n\t}\n\n\tconst queryLen = query.length;\n\tconst targetLower = target.toLowerCase();\n\n\tlet index = 0;\n\tlet lastIndexOf = -1;\n\twhile (index < queryLen) {\n\t\tconst indexOf = targetLower.indexOf(query[index], lastIndexOf + 1);\n\t\tif (indexOf < 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlastIndexOf = indexOf;\n\n\t\tindex++;\n\t}\n\n\treturn true;\n}\n\nexport function containsUppercaseCharacter(target: string, ignoreEscapedChars = false): boolean {\n\tif (!target) {\n\t\treturn false;\n\t}\n\n\tif (ignoreEscapedChars) {\n\t\ttarget = target.replace(/\\\\./g, '');\n\t}\n\n\treturn target.toLowerCase() !== target;\n}\n\nexport function uppercaseFirstLetter(str: string): string {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function getNLines(str: string, n = 1): string {\n\tif (n === 0) {\n\t\treturn '';\n\t}\n\n\tlet idx = -1;\n\tdo {\n\t\tidx = str.indexOf('\\n', idx + 1);\n\t\tn--;\n\t} while (n > 0 && idx >= 0);\n\n\tif (idx === -1) {\n\t\treturn str;\n\t}\n\n\tif (str[idx - 1] === '\\r') {\n\t\tidx--;\n\t}\n\n\treturn str.substr(0, idx);\n}\n\n/**\n * Produces 'a'-'z', followed by 'A'-'Z'... followed by 'a'-'z', etc.\n */\nexport function singleLetterHash(n: number): string {\n\tconst LETTERS_CNT = (CharCode.Z - CharCode.A + 1);\n\n\tn = n % (2 * LETTERS_CNT);\n\n\tif (n < LETTERS_CNT) {\n\t\treturn String.fromCharCode(CharCode.a + n);\n\t}\n\n\treturn String.fromCharCode(CharCode.A + n - LETTERS_CNT);\n}\n\n//#region Unicode Grapheme Break\n\nexport function getGraphemeBreakType(codePoint: number): GraphemeBreakType {\n\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\treturn graphemeBreakTree.getGraphemeBreakType(codePoint);\n}\n\nexport function breakBetweenGraphemeBreakType(breakTypeA: GraphemeBreakType, breakTypeB: GraphemeBreakType): boolean {\n\t// http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundary_Rules\n\n\t// !!! Let's make the common case a bit faster\n\tif (breakTypeA === GraphemeBreakType.Other) {\n\t\t// see https://www.unicode.org/Public/13.0.0/ucd/auxiliary/GraphemeBreakTest-13.0.0d10.html#table\n\t\treturn (breakTypeB !== GraphemeBreakType.Extend && breakTypeB !== GraphemeBreakType.SpacingMark);\n\t}\n\n\t// Do not break between a CR and LF. Otherwise, break before and after controls.\n\t// GB3                                        CR  LF\n\t// GB4                       (Control | CR | LF) \n\t// GB5                                            (Control | CR | LF)\n\tif (breakTypeA === GraphemeBreakType.CR) {\n\t\tif (breakTypeB === GraphemeBreakType.LF) {\n\t\t\treturn false; // GB3\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.Control || breakTypeA === GraphemeBreakType.CR || breakTypeA === GraphemeBreakType.LF) {\n\t\treturn true; // GB4\n\t}\n\tif (breakTypeB === GraphemeBreakType.Control || breakTypeB === GraphemeBreakType.CR || breakTypeB === GraphemeBreakType.LF) {\n\t\treturn true; // GB5\n\t}\n\n\t// Do not break Hangul syllable sequences.\n\t// GB6                                         L  (L | V | LV | LVT)\n\t// GB7                                  (LV | V)  (V | T)\n\t// GB8                                 (LVT | T)  T\n\tif (breakTypeA === GraphemeBreakType.L) {\n\t\tif (breakTypeB === GraphemeBreakType.L || breakTypeB === GraphemeBreakType.V || breakTypeB === GraphemeBreakType.LV || breakTypeB === GraphemeBreakType.LVT) {\n\t\t\treturn false; // GB6\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.LV || breakTypeA === GraphemeBreakType.V) {\n\t\tif (breakTypeB === GraphemeBreakType.V || breakTypeB === GraphemeBreakType.T) {\n\t\t\treturn false; // GB7\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.LVT || breakTypeA === GraphemeBreakType.T) {\n\t\tif (breakTypeB === GraphemeBreakType.T) {\n\t\t\treturn false; // GB8\n\t\t}\n\t}\n\n\t// Do not break before extending characters or ZWJ.\n\t// GB9                                            (Extend | ZWJ)\n\tif (breakTypeB === GraphemeBreakType.Extend || breakTypeB === GraphemeBreakType.ZWJ) {\n\t\treturn false; // GB9\n\t}\n\n\t// The GB9a and GB9b rules only apply to extended grapheme clusters:\n\t// Do not break before SpacingMarks, or after Prepend characters.\n\t// GB9a                                           SpacingMark\n\t// GB9b                                  Prepend \n\tif (breakTypeB === GraphemeBreakType.SpacingMark) {\n\t\treturn false; // GB9a\n\t}\n\tif (breakTypeA === GraphemeBreakType.Prepend) {\n\t\treturn false; // GB9b\n\t}\n\n\t// Do not break within emoji modifier sequences or emoji zwj sequences.\n\t// GB11    \\p{Extended_Pictographic} Extend* ZWJ  \\p{Extended_Pictographic}\n\tif (breakTypeA === GraphemeBreakType.ZWJ && breakTypeB === GraphemeBreakType.Extended_Pictographic) {\n\t\t// Note: we are not implementing the rule entirely here to avoid introducing states\n\t\treturn false; // GB11\n\t}\n\n\t// GB12                          sot (RI RI)* RI  RI\n\t// GB13                        [^RI] (RI RI)* RI  RI\n\tif (breakTypeA === GraphemeBreakType.Regional_Indicator && breakTypeB === GraphemeBreakType.Regional_Indicator) {\n\t\t// Note: we are not implementing the rule entirely here to avoid introducing states\n\t\treturn false; // GB12 & GB13\n\t}\n\n\t// GB999                                     Any  Any\n\treturn true;\n}\n\nexport const enum GraphemeBreakType {\n\tOther = 0,\n\tPrepend = 1,\n\tCR = 2,\n\tLF = 3,\n\tControl = 4,\n\tExtend = 5,\n\tRegional_Indicator = 6,\n\tSpacingMark = 7,\n\tL = 8,\n\tV = 9,\n\tT = 10,\n\tLV = 11,\n\tLVT = 12,\n\tZWJ = 13,\n\tExtended_Pictographic = 14\n}\n\nclass GraphemeBreakTree {\n\n\tprivate static _INSTANCE: GraphemeBreakTree | null = null;\n\tpublic static getInstance(): GraphemeBreakTree {\n\t\tif (!GraphemeBreakTree._INSTANCE) {\n\t\t\tGraphemeBreakTree._INSTANCE = new GraphemeBreakTree();\n\t\t}\n\t\treturn GraphemeBreakTree._INSTANCE;\n\t}\n\n\tprivate readonly _data: number[];\n\n\tconstructor() {\n\t\tthis._data = getGraphemeBreakRawData();\n\t}\n\n\tpublic getGraphemeBreakType(codePoint: number): GraphemeBreakType {\n\t\t// !!! Let's make 7bit ASCII a bit faster: 0..31\n\t\tif (codePoint < 32) {\n\t\t\tif (codePoint === CharCode.LineFeed) {\n\t\t\t\treturn GraphemeBreakType.LF;\n\t\t\t}\n\t\t\tif (codePoint === CharCode.CarriageReturn) {\n\t\t\t\treturn GraphemeBreakType.CR;\n\t\t\t}\n\t\t\treturn GraphemeBreakType.Control;\n\t\t}\n\t\t// !!! Let's make 7bit ASCII a bit faster: 32..126\n\t\tif (codePoint < 127) {\n\t\t\treturn GraphemeBreakType.Other;\n\t\t}\n\n\t\tconst data = this._data;\n\t\tconst nodeCount = data.length / 3;\n\t\tlet nodeIndex = 1;\n\t\twhile (nodeIndex <= nodeCount) {\n\t\t\tif (codePoint < data[3 * nodeIndex]) {\n\t\t\t\t// go left\n\t\t\t\tnodeIndex = 2 * nodeIndex;\n\t\t\t} else if (codePoint > data[3 * nodeIndex + 1]) {\n\t\t\t\t// go right\n\t\t\t\tnodeIndex = 2 * nodeIndex + 1;\n\t\t\t} else {\n\t\t\t\t// hit\n\t\t\t\treturn data[3 * nodeIndex + 2];\n\t\t\t}\n\t\t}\n\n\t\treturn GraphemeBreakType.Other;\n\t}\n}\n\nfunction getGraphemeBreakRawData(): number[] {\n\t// generated using https://github.com/alexdima/unicode-utils/blob/master/generate-grapheme-break.js\n\treturn JSON.parse('[0,0,0,51592,51592,11,44424,44424,11,72251,72254,5,7150,7150,7,48008,48008,11,55176,55176,11,128420,128420,14,3276,3277,5,9979,9980,14,46216,46216,11,49800,49800,11,53384,53384,11,70726,70726,5,122915,122916,5,129320,129327,14,2558,2558,5,5906,5908,5,9762,9763,14,43360,43388,8,45320,45320,11,47112,47112,11,48904,48904,11,50696,50696,11,52488,52488,11,54280,54280,11,70082,70083,1,71350,71350,7,73111,73111,5,127892,127893,14,128726,128727,14,129473,129474,14,2027,2035,5,2901,2902,5,3784,3789,5,6754,6754,5,8418,8420,5,9877,9877,14,11088,11088,14,44008,44008,5,44872,44872,11,45768,45768,11,46664,46664,11,47560,47560,11,48456,48456,11,49352,49352,11,50248,50248,11,51144,51144,11,52040,52040,11,52936,52936,11,53832,53832,11,54728,54728,11,69811,69814,5,70459,70460,5,71096,71099,7,71998,71998,5,72874,72880,5,119149,119149,7,127374,127374,14,128335,128335,14,128482,128482,14,128765,128767,14,129399,129400,14,129680,129685,14,1476,1477,5,2377,2380,7,2759,2760,5,3137,3140,7,3458,3459,7,4153,4154,5,6432,6434,5,6978,6978,5,7675,7679,5,9723,9726,14,9823,9823,14,9919,9923,14,10035,10036,14,42736,42737,5,43596,43596,5,44200,44200,11,44648,44648,11,45096,45096,11,45544,45544,11,45992,45992,11,46440,46440,11,46888,46888,11,47336,47336,11,47784,47784,11,48232,48232,11,48680,48680,11,49128,49128,11,49576,49576,11,50024,50024,11,50472,50472,11,50920,50920,11,51368,51368,11,51816,51816,11,52264,52264,11,52712,52712,11,53160,53160,11,53608,53608,11,54056,54056,11,54504,54504,11,54952,54952,11,68108,68111,5,69933,69940,5,70197,70197,7,70498,70499,7,70845,70845,5,71229,71229,5,71727,71735,5,72154,72155,5,72344,72345,5,73023,73029,5,94095,94098,5,121403,121452,5,126981,127182,14,127538,127546,14,127990,127990,14,128391,128391,14,128445,128449,14,128500,128505,14,128752,128752,14,129160,129167,14,129356,129356,14,129432,129442,14,129648,129651,14,129751,131069,14,173,173,4,1757,1757,1,2274,2274,1,2494,2494,5,2641,2641,5,2876,2876,5,3014,3016,7,3262,3262,7,3393,3396,5,3570,3571,7,3968,3972,5,4228,4228,7,6086,6086,5,6679,6680,5,6912,6915,5,7080,7081,5,7380,7392,5,8252,8252,14,9096,9096,14,9748,9749,14,9784,9786,14,9833,9850,14,9890,9894,14,9938,9938,14,9999,9999,14,10085,10087,14,12349,12349,14,43136,43137,7,43454,43456,7,43755,43755,7,44088,44088,11,44312,44312,11,44536,44536,11,44760,44760,11,44984,44984,11,45208,45208,11,45432,45432,11,45656,45656,11,45880,45880,11,46104,46104,11,46328,46328,11,46552,46552,11,46776,46776,11,47000,47000,11,47224,47224,11,47448,47448,11,47672,47672,11,47896,47896,11,48120,48120,11,48344,48344,11,48568,48568,11,48792,48792,11,49016,49016,11,49240,49240,11,49464,49464,11,49688,49688,11,49912,49912,11,50136,50136,11,50360,50360,11,50584,50584,11,50808,50808,11,51032,51032,11,51256,51256,11,51480,51480,11,51704,51704,11,51928,51928,11,52152,52152,11,52376,52376,11,52600,52600,11,52824,52824,11,53048,53048,11,53272,53272,11,53496,53496,11,53720,53720,11,53944,53944,11,54168,54168,11,54392,54392,11,54616,54616,11,54840,54840,11,55064,55064,11,65438,65439,5,69633,69633,5,69837,69837,1,70018,70018,7,70188,70190,7,70368,70370,7,70465,70468,7,70712,70719,5,70835,70840,5,70850,70851,5,71132,71133,5,71340,71340,7,71458,71461,5,71985,71989,7,72002,72002,7,72193,72202,5,72281,72283,5,72766,72766,7,72885,72886,5,73104,73105,5,92912,92916,5,113824,113827,4,119173,119179,5,121505,121519,5,125136,125142,5,127279,127279,14,127489,127490,14,127570,127743,14,127900,127901,14,128254,128254,14,128369,128370,14,128400,128400,14,128425,128432,14,128468,128475,14,128489,128494,14,128715,128720,14,128745,128745,14,128759,128760,14,129004,129023,14,129296,129304,14,129340,129342,14,129388,129392,14,129404,129407,14,129454,129455,14,129485,129487,14,129659,129663,14,129719,129727,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2363,2363,7,2402,2403,5,2507,2508,7,2622,2624,7,2691,2691,7,2786,2787,5,2881,2884,5,3006,3006,5,3072,3072,5,3170,3171,5,3267,3268,7,3330,3331,7,3406,3406,1,3538,3540,5,3655,3662,5,3897,3897,5,4038,4038,5,4184,4185,5,4352,4447,8,6068,6069,5,6155,6157,5,6448,6449,7,6742,6742,5,6783,6783,5,6966,6970,5,7042,7042,7,7143,7143,7,7212,7219,5,7412,7412,5,8206,8207,4,8294,8303,4,8596,8601,14,9410,9410,14,9742,9742,14,9757,9757,14,9770,9770,14,9794,9794,14,9828,9828,14,9855,9855,14,9882,9882,14,9900,9903,14,9929,9933,14,9963,9967,14,9987,9988,14,10006,10006,14,10062,10062,14,10175,10175,14,11744,11775,5,42607,42607,5,43043,43044,7,43263,43263,5,43444,43445,7,43569,43570,5,43698,43700,5,43766,43766,5,44032,44032,11,44144,44144,11,44256,44256,11,44368,44368,11,44480,44480,11,44592,44592,11,44704,44704,11,44816,44816,11,44928,44928,11,45040,45040,11,45152,45152,11,45264,45264,11,45376,45376,11,45488,45488,11,45600,45600,11,45712,45712,11,45824,45824,11,45936,45936,11,46048,46048,11,46160,46160,11,46272,46272,11,46384,46384,11,46496,46496,11,46608,46608,11,46720,46720,11,46832,46832,11,46944,46944,11,47056,47056,11,47168,47168,11,47280,47280,11,47392,47392,11,47504,47504,11,47616,47616,11,47728,47728,11,47840,47840,11,47952,47952,11,48064,48064,11,48176,48176,11,48288,48288,11,48400,48400,11,48512,48512,11,48624,48624,11,48736,48736,11,48848,48848,11,48960,48960,11,49072,49072,11,49184,49184,11,49296,49296,11,49408,49408,11,49520,49520,11,49632,49632,11,49744,49744,11,49856,49856,11,49968,49968,11,50080,50080,11,50192,50192,11,50304,50304,11,50416,50416,11,50528,50528,11,50640,50640,11,50752,50752,11,50864,50864,11,50976,50976,11,51088,51088,11,51200,51200,11,51312,51312,11,51424,51424,11,51536,51536,11,51648,51648,11,51760,51760,11,51872,51872,11,51984,51984,11,52096,52096,11,52208,52208,11,52320,52320,11,52432,52432,11,52544,52544,11,52656,52656,11,52768,52768,11,52880,52880,11,52992,52992,11,53104,53104,11,53216,53216,11,53328,53328,11,53440,53440,11,53552,53552,11,53664,53664,11,53776,53776,11,53888,53888,11,54000,54000,11,54112,54112,11,54224,54224,11,54336,54336,11,54448,54448,11,54560,54560,11,54672,54672,11,54784,54784,11,54896,54896,11,55008,55008,11,55120,55120,11,64286,64286,5,66272,66272,5,68900,68903,5,69762,69762,7,69817,69818,5,69927,69931,5,70003,70003,5,70070,70078,5,70094,70094,7,70194,70195,7,70206,70206,5,70400,70401,5,70463,70463,7,70475,70477,7,70512,70516,5,70722,70724,5,70832,70832,5,70842,70842,5,70847,70848,5,71088,71089,7,71102,71102,7,71219,71226,5,71231,71232,5,71342,71343,7,71453,71455,5,71463,71467,5,71737,71738,5,71995,71996,5,72000,72000,7,72145,72147,7,72160,72160,5,72249,72249,7,72273,72278,5,72330,72342,5,72752,72758,5,72850,72871,5,72882,72883,5,73018,73018,5,73031,73031,5,73109,73109,5,73461,73462,7,94031,94031,5,94192,94193,7,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,126976,126979,14,127184,127231,14,127344,127345,14,127405,127461,14,127514,127514,14,127561,127567,14,127778,127779,14,127896,127896,14,127985,127986,14,127995,127999,5,128326,128328,14,128360,128366,14,128378,128378,14,128394,128397,14,128405,128406,14,128422,128423,14,128435,128443,14,128453,128464,14,128479,128480,14,128484,128487,14,128496,128498,14,128640,128709,14,128723,128724,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129096,129103,14,129292,129292,14,129311,129311,14,129329,129330,14,129344,129349,14,129360,129374,14,129394,129394,14,129402,129402,14,129413,129425,14,129445,129450,14,129466,129471,14,129483,129483,14,129511,129535,14,129653,129655,14,129667,129670,14,129705,129711,14,129731,129743,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2307,2307,7,2366,2368,7,2382,2383,7,2434,2435,7,2497,2500,5,2519,2519,5,2563,2563,7,2631,2632,5,2677,2677,5,2750,2752,7,2763,2764,7,2817,2817,5,2879,2879,5,2891,2892,7,2914,2915,5,3008,3008,5,3021,3021,5,3076,3076,5,3146,3149,5,3202,3203,7,3264,3265,7,3271,3272,7,3298,3299,5,3390,3390,5,3402,3404,7,3426,3427,5,3535,3535,5,3544,3550,7,3635,3635,7,3763,3763,7,3893,3893,5,3953,3966,5,3981,3991,5,4145,4145,7,4157,4158,5,4209,4212,5,4237,4237,5,4520,4607,10,5970,5971,5,6071,6077,5,6089,6099,5,6277,6278,5,6439,6440,5,6451,6456,7,6683,6683,5,6744,6750,5,6765,6770,7,6846,6846,5,6964,6964,5,6972,6972,5,7019,7027,5,7074,7077,5,7083,7085,5,7146,7148,7,7154,7155,7,7222,7223,5,7394,7400,5,7416,7417,5,8204,8204,5,8233,8233,4,8288,8292,4,8413,8416,5,8482,8482,14,8986,8987,14,9193,9203,14,9654,9654,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9775,14,9792,9792,14,9800,9811,14,9825,9826,14,9831,9831,14,9852,9853,14,9872,9873,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9936,9936,14,9941,9960,14,9974,9974,14,9982,9985,14,9992,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10145,10145,14,11013,11015,14,11503,11505,5,12334,12335,5,12951,12951,14,42612,42621,5,43014,43014,5,43047,43047,7,43204,43205,5,43335,43345,5,43395,43395,7,43450,43451,7,43561,43566,5,43573,43574,5,43644,43644,5,43710,43711,5,43758,43759,7,44005,44005,5,44012,44012,7,44060,44060,11,44116,44116,11,44172,44172,11,44228,44228,11,44284,44284,11,44340,44340,11,44396,44396,11,44452,44452,11,44508,44508,11,44564,44564,11,44620,44620,11,44676,44676,11,44732,44732,11,44788,44788,11,44844,44844,11,44900,44900,11,44956,44956,11,45012,45012,11,45068,45068,11,45124,45124,11,45180,45180,11,45236,45236,11,45292,45292,11,45348,45348,11,45404,45404,11,45460,45460,11,45516,45516,11,45572,45572,11,45628,45628,11,45684,45684,11,45740,45740,11,45796,45796,11,45852,45852,11,45908,45908,11,45964,45964,11,46020,46020,11,46076,46076,11,46132,46132,11,46188,46188,11,46244,46244,11,46300,46300,11,46356,46356,11,46412,46412,11,46468,46468,11,46524,46524,11,46580,46580,11,46636,46636,11,46692,46692,11,46748,46748,11,46804,46804,11,46860,46860,11,46916,46916,11,46972,46972,11,47028,47028,11,47084,47084,11,47140,47140,11,47196,47196,11,47252,47252,11,47308,47308,11,47364,47364,11,47420,47420,11,47476,47476,11,47532,47532,11,47588,47588,11,47644,47644,11,47700,47700,11,47756,47756,11,47812,47812,11,47868,47868,11,47924,47924,11,47980,47980,11,48036,48036,11,48092,48092,11,48148,48148,11,48204,48204,11,48260,48260,11,48316,48316,11,48372,48372,11,48428,48428,11,48484,48484,11,48540,48540,11,48596,48596,11,48652,48652,11,48708,48708,11,48764,48764,11,48820,48820,11,48876,48876,11,48932,48932,11,48988,48988,11,49044,49044,11,49100,49100,11,49156,49156,11,49212,49212,11,49268,49268,11,49324,49324,11,49380,49380,11,49436,49436,11,49492,49492,11,49548,49548,11,49604,49604,11,49660,49660,11,49716,49716,11,49772,49772,11,49828,49828,11,49884,49884,11,49940,49940,11,49996,49996,11,50052,50052,11,50108,50108,11,50164,50164,11,50220,50220,11,50276,50276,11,50332,50332,11,50388,50388,11,50444,50444,11,50500,50500,11,50556,50556,11,50612,50612,11,50668,50668,11,50724,50724,11,50780,50780,11,50836,50836,11,50892,50892,11,50948,50948,11,51004,51004,11,51060,51060,11,51116,51116,11,51172,51172,11,51228,51228,11,51284,51284,11,51340,51340,11,51396,51396,11,51452,51452,11,51508,51508,11,51564,51564,11,51620,51620,11,51676,51676,11,51732,51732,11,51788,51788,11,51844,51844,11,51900,51900,11,51956,51956,11,52012,52012,11,52068,52068,11,52124,52124,11,52180,52180,11,52236,52236,11,52292,52292,11,52348,52348,11,52404,52404,11,52460,52460,11,52516,52516,11,52572,52572,11,52628,52628,11,52684,52684,11,52740,52740,11,52796,52796,11,52852,52852,11,52908,52908,11,52964,52964,11,53020,53020,11,53076,53076,11,53132,53132,11,53188,53188,11,53244,53244,11,53300,53300,11,53356,53356,11,53412,53412,11,53468,53468,11,53524,53524,11,53580,53580,11,53636,53636,11,53692,53692,11,53748,53748,11,53804,53804,11,53860,53860,11,53916,53916,11,53972,53972,11,54028,54028,11,54084,54084,11,54140,54140,11,54196,54196,11,54252,54252,11,54308,54308,11,54364,54364,11,54420,54420,11,54476,54476,11,54532,54532,11,54588,54588,11,54644,54644,11,54700,54700,11,54756,54756,11,54812,54812,11,54868,54868,11,54924,54924,11,54980,54980,11,55036,55036,11,55092,55092,11,55148,55148,11,55216,55238,9,65056,65071,5,65529,65531,4,68097,68099,5,68159,68159,5,69446,69456,5,69688,69702,5,69808,69810,7,69815,69816,7,69821,69821,1,69888,69890,5,69932,69932,7,69957,69958,7,70016,70017,5,70067,70069,7,70079,70080,7,70089,70092,5,70095,70095,5,70191,70193,5,70196,70196,5,70198,70199,5,70367,70367,5,70371,70378,5,70402,70403,7,70462,70462,5,70464,70464,5,70471,70472,7,70487,70487,5,70502,70508,5,70709,70711,7,70720,70721,7,70725,70725,7,70750,70750,5,70833,70834,7,70841,70841,7,70843,70844,7,70846,70846,7,70849,70849,7,71087,71087,5,71090,71093,5,71100,71101,5,71103,71104,5,71216,71218,7,71227,71228,7,71230,71230,7,71339,71339,5,71341,71341,5,71344,71349,5,71351,71351,5,71456,71457,7,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123628,123631,5,125252,125258,5,126980,126980,14,127183,127183,14,127245,127247,14,127340,127343,14,127358,127359,14,127377,127386,14,127462,127487,6,127491,127503,14,127535,127535,14,127548,127551,14,127568,127569,14,127744,127777,14,127780,127891,14,127894,127895,14,127897,127899,14,127902,127984,14,127987,127989,14,127991,127994,14,128000,128253,14,128255,128317,14,128329,128334,14,128336,128359,14,128367,128368,14,128371,128377,14,128379,128390,14,128392,128393,14,128398,128399,14,128401,128404,14,128407,128419,14,128421,128421,14,128424,128424,14,128433,128434,14,128444,128444,14,128450,128452,14,128465,128467,14,128476,128478,14,128481,128481,14,128483,128483,14,128488,128488,14,128495,128495,14,128499,128499,14,128506,128591,14,128710,128714,14,128721,128722,14,128725,128725,14,128728,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129664,129666,14,129671,129679,14,129686,129704,14,129712,129718,14,129728,129730,14,129744,129750,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2259,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3134,3136,5,3142,3144,5,3157,3158,5,3201,3201,5,3260,3260,5,3263,3263,5,3266,3266,5,3270,3270,5,3274,3275,7,3285,3286,5,3328,3329,5,3387,3388,5,3391,3392,7,3398,3400,7,3405,3405,5,3415,3415,5,3457,3457,5,3530,3530,5,3536,3537,7,3542,3542,5,3551,3551,5,3633,3633,5,3636,3642,5,3761,3761,5,3764,3772,5,3864,3865,5,3895,3895,5,3902,3903,7,3967,3967,7,3974,3975,5,3993,4028,5,4141,4144,5,4146,4151,5,4155,4156,7,4182,4183,7,4190,4192,5,4226,4226,5,4229,4230,5,4253,4253,5,4448,4519,9,4957,4959,5,5938,5940,5,6002,6003,5,6070,6070,7,6078,6085,7,6087,6088,7,6109,6109,5,6158,6158,4,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6848,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7673,5,8203,8203,4,8205,8205,13,8232,8232,4,8234,8238,4,8265,8265,14,8293,8293,4,8400,8412,5,8417,8417,5,8421,8432,5,8505,8505,14,8617,8618,14,9000,9000,14,9167,9167,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9776,9783,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9935,14,9937,9937,14,9939,9940,14,9961,9962,14,9968,9973,14,9975,9978,14,9981,9981,14,9986,9986,14,9989,9989,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10084,14,10133,10135,14,10160,10160,14,10548,10549,14,11035,11036,14,11093,11093,14,11647,11647,5,12330,12333,5,12336,12336,14,12441,12442,5,12953,12953,14,42608,42610,5,42654,42655,5,43010,43010,5,43019,43019,5,43045,43046,5,43052,43052,5,43188,43203,7,43232,43249,5,43302,43309,5,43346,43347,7,43392,43394,5,43443,43443,5,43446,43449,5,43452,43453,5,43493,43493,5,43567,43568,7,43571,43572,7,43587,43587,5,43597,43597,7,43696,43696,5,43703,43704,5,43713,43713,5,43756,43757,5,43765,43765,7,44003,44004,7,44006,44007,7,44009,44010,7,44013,44013,5,44033,44059,12,44061,44087,12,44089,44115,12,44117,44143,12,44145,44171,12,44173,44199,12,44201,44227,12,44229,44255,12,44257,44283,12,44285,44311,12,44313,44339,12,44341,44367,12,44369,44395,12,44397,44423,12,44425,44451,12,44453,44479,12,44481,44507,12,44509,44535,12,44537,44563,12,44565,44591,12,44593,44619,12,44621,44647,12,44649,44675,12,44677,44703,12,44705,44731,12,44733,44759,12,44761,44787,12,44789,44815,12,44817,44843,12,44845,44871,12,44873,44899,12,44901,44927,12,44929,44955,12,44957,44983,12,44985,45011,12,45013,45039,12,45041,45067,12,45069,45095,12,45097,45123,12,45125,45151,12,45153,45179,12,45181,45207,12,45209,45235,12,45237,45263,12,45265,45291,12,45293,45319,12,45321,45347,12,45349,45375,12,45377,45403,12,45405,45431,12,45433,45459,12,45461,45487,12,45489,45515,12,45517,45543,12,45545,45571,12,45573,45599,12,45601,45627,12,45629,45655,12,45657,45683,12,45685,45711,12,45713,45739,12,45741,45767,12,45769,45795,12,45797,45823,12,45825,45851,12,45853,45879,12,45881,45907,12,45909,45935,12,45937,45963,12,45965,45991,12,45993,46019,12,46021,46047,12,46049,46075,12,46077,46103,12,46105,46131,12,46133,46159,12,46161,46187,12,46189,46215,12,46217,46243,12,46245,46271,12,46273,46299,12,46301,46327,12,46329,46355,12,46357,46383,12,46385,46411,12,46413,46439,12,46441,46467,12,46469,46495,12,46497,46523,12,46525,46551,12,46553,46579,12,46581,46607,12,46609,46635,12,46637,46663,12,46665,46691,12,46693,46719,12,46721,46747,12,46749,46775,12,46777,46803,12,46805,46831,12,46833,46859,12,46861,46887,12,46889,46915,12,46917,46943,12,46945,46971,12,46973,46999,12,47001,47027,12,47029,47055,12,47057,47083,12,47085,47111,12,47113,47139,12,47141,47167,12,47169,47195,12,47197,47223,12,47225,47251,12,47253,47279,12,47281,47307,12,47309,47335,12,47337,47363,12,47365,47391,12,47393,47419,12,47421,47447,12,47449,47475,12,47477,47503,12,47505,47531,12,47533,47559,12,47561,47587,12,47589,47615,12,47617,47643,12,47645,47671,12,47673,47699,12,47701,47727,12,47729,47755,12,47757,47783,12,47785,47811,12,47813,47839,12,47841,47867,12,47869,47895,12,47897,47923,12,47925,47951,12,47953,47979,12,47981,48007,12,48009,48035,12,48037,48063,12,48065,48091,12,48093,48119,12,48121,48147,12,48149,48175,12,48177,48203,12,48205,48231,12,48233,48259,12,48261,48287,12,48289,48315,12,48317,48343,12,48345,48371,12,48373,48399,12,48401,48427,12,48429,48455,12,48457,48483,12,48485,48511,12,48513,48539,12,48541,48567,12,48569,48595,12,48597,48623,12,48625,48651,12,48653,48679,12,48681,48707,12,48709,48735,12,48737,48763,12,48765,48791,12,48793,48819,12,48821,48847,12,48849,48875,12,48877,48903,12,48905,48931,12,48933,48959,12,48961,48987,12,48989,49015,12,49017,49043,12,49045,49071,12,49073,49099,12,49101,49127,12,49129,49155,12,49157,49183,12,49185,49211,12,49213,49239,12,49241,49267,12,49269,49295,12,49297,49323,12,49325,49351,12,49353,49379,12,49381,49407,12,49409,49435,12,49437,49463,12,49465,49491,12,49493,49519,12,49521,49547,12,49549,49575,12,49577,49603,12,49605,49631,12,49633,49659,12,49661,49687,12,49689,49715,12,49717,49743,12,49745,49771,12,49773,49799,12,49801,49827,12,49829,49855,12,49857,49883,12,49885,49911,12,49913,49939,12,49941,49967,12,49969,49995,12,49997,50023,12,50025,50051,12,50053,50079,12,50081,50107,12,50109,50135,12,50137,50163,12,50165,50191,12,50193,50219,12,50221,50247,12,50249,50275,12,50277,50303,12,50305,50331,12,50333,50359,12,50361,50387,12,50389,50415,12,50417,50443,12,50445,50471,12,50473,50499,12,50501,50527,12,50529,50555,12,50557,50583,12,50585,50611,12,50613,50639,12,50641,50667,12,50669,50695,12,50697,50723,12,50725,50751,12,50753,50779,12,50781,50807,12,50809,50835,12,50837,50863,12,50865,50891,12,50893,50919,12,50921,50947,12,50949,50975,12,50977,51003,12,51005,51031,12,51033,51059,12,51061,51087,12,51089,51115,12,51117,51143,12,51145,51171,12,51173,51199,12,51201,51227,12,51229,51255,12,51257,51283,12,51285,51311,12,51313,51339,12,51341,51367,12,51369,51395,12,51397,51423,12,51425,51451,12,51453,51479,12,51481,51507,12,51509,51535,12,51537,51563,12,51565,51591,12,51593,51619,12,51621,51647,12,51649,51675,12,51677,51703,12,51705,51731,12,51733,51759,12,51761,51787,12,51789,51815,12,51817,51843,12,51845,51871,12,51873,51899,12,51901,51927,12,51929,51955,12,51957,51983,12,51985,52011,12,52013,52039,12,52041,52067,12,52069,52095,12,52097,52123,12,52125,52151,12,52153,52179,12,52181,52207,12,52209,52235,12,52237,52263,12,52265,52291,12,52293,52319,12,52321,52347,12,52349,52375,12,52377,52403,12,52405,52431,12,52433,52459,12,52461,52487,12,52489,52515,12,52517,52543,12,52545,52571,12,52573,52599,12,52601,52627,12,52629,52655,12,52657,52683,12,52685,52711,12,52713,52739,12,52741,52767,12,52769,52795,12,52797,52823,12,52825,52851,12,52853,52879,12,52881,52907,12,52909,52935,12,52937,52963,12,52965,52991,12,52993,53019,12,53021,53047,12,53049,53075,12,53077,53103,12,53105,53131,12,53133,53159,12,53161,53187,12,53189,53215,12,53217,53243,12,53245,53271,12,53273,53299,12,53301,53327,12,53329,53355,12,53357,53383,12,53385,53411,12,53413,53439,12,53441,53467,12,53469,53495,12,53497,53523,12,53525,53551,12,53553,53579,12,53581,53607,12,53609,53635,12,53637,53663,12,53665,53691,12,53693,53719,12,53721,53747,12,53749,53775,12,53777,53803,12,53805,53831,12,53833,53859,12,53861,53887,12,53889,53915,12,53917,53943,12,53945,53971,12,53973,53999,12,54001,54027,12,54029,54055,12,54057,54083,12,54085,54111,12,54113,54139,12,54141,54167,12,54169,54195,12,54197,54223,12,54225,54251,12,54253,54279,12,54281,54307,12,54309,54335,12,54337,54363,12,54365,54391,12,54393,54419,12,54421,54447,12,54449,54475,12,54477,54503,12,54505,54531,12,54533,54559,12,54561,54587,12,54589,54615,12,54617,54643,12,54645,54671,12,54673,54699,12,54701,54727,12,54729,54755,12,54757,54783,12,54785,54811,12,54813,54839,12,54841,54867,12,54869,54895,12,54897,54923,12,54925,54951,12,54953,54979,12,54981,55007,12,55009,55035,12,55037,55063,12,55065,55091,12,55093,55119,12,55121,55147,12,55149,55175,12,55177,55203,12,55243,55291,10,65024,65039,5,65279,65279,4,65520,65528,4,66045,66045,5,66422,66426,5,68101,68102,5,68152,68154,5,68325,68326,5,69291,69292,5,69632,69632,7,69634,69634,7,69759,69761,5]');\n}\n\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as strings from 'vs/base/common/strings';\nimport * as streams from 'vs/base/common/stream';\n\ndeclare const Buffer: any;\n\nconst hasBuffer = (typeof Buffer !== 'undefined');\nconst hasTextEncoder = (typeof TextEncoder !== 'undefined');\nconst hasTextDecoder = (typeof TextDecoder !== 'undefined');\n\nlet textEncoder: TextEncoder | null;\nlet textDecoder: TextDecoder | null;\n\nexport class VSBuffer {\n\n\tstatic alloc(byteLength: number): VSBuffer {\n\t\tif (hasBuffer) {\n\t\t\treturn new VSBuffer(Buffer.allocUnsafe(byteLength));\n\t\t} else {\n\t\t\treturn new VSBuffer(new Uint8Array(byteLength));\n\t\t}\n\t}\n\n\tstatic wrap(actual: Uint8Array): VSBuffer {\n\t\tif (hasBuffer && !(Buffer.isBuffer(actual))) {\n\t\t\t// https://nodejs.org/dist/latest-v10.x/docs/api/buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length\n\t\t\t// Create a zero-copy Buffer wrapper around the ArrayBuffer pointed to by the Uint8Array\n\t\t\tactual = Buffer.from(actual.buffer, actual.byteOffset, actual.byteLength);\n\t\t}\n\t\treturn new VSBuffer(actual);\n\t}\n\n\tstatic fromString(source: string, options?: { dontUseNodeBuffer?: boolean; }): VSBuffer {\n\t\tconst dontUseNodeBuffer = options?.dontUseNodeBuffer || false;\n\t\tif (!dontUseNodeBuffer && hasBuffer) {\n\t\t\treturn new VSBuffer(Buffer.from(source));\n\t\t} else if (hasTextEncoder) {\n\t\t\tif (!textEncoder) {\n\t\t\t\ttextEncoder = new TextEncoder();\n\t\t\t}\n\t\t\treturn new VSBuffer(textEncoder.encode(source));\n\t\t} else {\n\t\t\treturn new VSBuffer(strings.encodeUTF8(source));\n\t\t}\n\t}\n\n\tstatic concat(buffers: VSBuffer[], totalLength?: number): VSBuffer {\n\t\tif (typeof totalLength === 'undefined') {\n\t\t\ttotalLength = 0;\n\t\t\tfor (let i = 0, len = buffers.length; i < len; i++) {\n\t\t\t\ttotalLength += buffers[i].byteLength;\n\t\t\t}\n\t\t}\n\n\t\tconst ret = VSBuffer.alloc(totalLength);\n\t\tlet offset = 0;\n\t\tfor (let i = 0, len = buffers.length; i < len; i++) {\n\t\t\tconst element = buffers[i];\n\t\t\tret.set(element, offset);\n\t\t\toffset += element.byteLength;\n\t\t}\n\n\t\treturn ret;\n\t}\n\n\treadonly buffer: Uint8Array;\n\treadonly byteLength: number;\n\n\tprivate constructor(buffer: Uint8Array) {\n\t\tthis.buffer = buffer;\n\t\tthis.byteLength = this.buffer.byteLength;\n\t}\n\n\ttoString(): string {\n\t\tif (hasBuffer) {\n\t\t\treturn this.buffer.toString();\n\t\t} else if (hasTextDecoder) {\n\t\t\tif (!textDecoder) {\n\t\t\t\ttextDecoder = new TextDecoder();\n\t\t\t}\n\t\t\treturn textDecoder.decode(this.buffer);\n\t\t} else {\n\t\t\treturn strings.decodeUTF8(this.buffer);\n\t\t}\n\t}\n\n\tslice(start?: number, end?: number): VSBuffer {\n\t\t// IMPORTANT: use subarray instead of slice because TypedArray#slice\n\t\t// creates shallow copy and NodeBuffer#slice doesn't. The use of subarray\n\t\t// ensures the same, performant, behaviour.\n\t\treturn new VSBuffer(this.buffer.subarray(start!/*bad lib.d.ts*/, end));\n\t}\n\n\tset(array: VSBuffer, offset?: number): void;\n\tset(array: Uint8Array, offset?: number): void;\n\tset(array: VSBuffer | Uint8Array, offset?: number): void {\n\t\tif (array instanceof VSBuffer) {\n\t\t\tthis.buffer.set(array.buffer, offset);\n\t\t} else {\n\t\t\tthis.buffer.set(array, offset);\n\t\t}\n\t}\n\n\treadUInt32BE(offset: number): number {\n\t\treturn readUInt32BE(this.buffer, offset);\n\t}\n\n\twriteUInt32BE(value: number, offset: number): void {\n\t\twriteUInt32BE(this.buffer, value, offset);\n\t}\n\n\treadUInt32LE(offset: number): number {\n\t\treturn readUInt32LE(this.buffer, offset);\n\t}\n\n\twriteUInt32LE(value: number, offset: number): void {\n\t\twriteUInt32LE(this.buffer, value, offset);\n\t}\n\n\treadUInt8(offset: number): number {\n\t\treturn readUInt8(this.buffer, offset);\n\t}\n\n\twriteUInt8(value: number, offset: number): void {\n\t\twriteUInt8(this.buffer, value, offset);\n\t}\n}\n\nexport function readUInt16LE(source: Uint8Array, offset: number): number {\n\treturn (\n\t\t((source[offset + 0] << 0) >>> 0) |\n\t\t((source[offset + 1] << 8) >>> 0)\n\t);\n}\n\nexport function writeUInt16LE(destination: Uint8Array, value: number, offset: number): void {\n\tdestination[offset + 0] = (value & 0b11111111);\n\tvalue = value >>> 8;\n\tdestination[offset + 1] = (value & 0b11111111);\n}\n\nexport function readUInt32BE(source: Uint8Array, offset: number): number {\n\treturn (\n\t\tsource[offset] * 2 ** 24\n\t\t+ source[offset + 1] * 2 ** 16\n\t\t+ source[offset + 2] * 2 ** 8\n\t\t+ source[offset + 3]\n\t);\n}\n\nexport function writeUInt32BE(destination: Uint8Array, value: number, offset: number): void {\n\tdestination[offset + 3] = value;\n\tvalue = value >>> 8;\n\tdestination[offset + 2] = value;\n\tvalue = value >>> 8;\n\tdestination[offset + 1] = value;\n\tvalue = value >>> 8;\n\tdestination[offset] = value;\n}\n\nexport function readUInt32LE(source: Uint8Array, offset: number): number {\n\treturn (\n\t\t((source[offset + 0] << 0) >>> 0) |\n\t\t((source[offset + 1] << 8) >>> 0) |\n\t\t((source[offset + 2] << 16) >>> 0) |\n\t\t((source[offset + 3] << 24) >>> 0)\n\t);\n}\n\nexport function writeUInt32LE(destination: Uint8Array, value: number, offset: number): void {\n\tdestination[offset + 0] = (value & 0b11111111);\n\tvalue = value >>> 8;\n\tdestination[offset + 1] = (value & 0b11111111);\n\tvalue = value >>> 8;\n\tdestination[offset + 2] = (value & 0b11111111);\n\tvalue = value >>> 8;\n\tdestination[offset + 3] = (value & 0b11111111);\n}\n\nexport function readUInt8(source: Uint8Array, offset: number): number {\n\treturn source[offset];\n}\n\nexport function writeUInt8(destination: Uint8Array, value: number, offset: number): void {\n\tdestination[offset] = value;\n}\n\nexport interface VSBufferReadable extends streams.Readable<VSBuffer> { }\n\nexport interface VSBufferReadableStream extends streams.ReadableStream<VSBuffer> { }\n\nexport interface VSBufferWriteableStream extends streams.WriteableStream<VSBuffer> { }\n\nexport interface VSBufferReadableBufferedStream extends streams.ReadableBufferedStream<VSBuffer> { }\n\nexport function readableToBuffer(readable: VSBufferReadable): VSBuffer {\n\treturn streams.consumeReadable<VSBuffer>(readable, chunks => VSBuffer.concat(chunks));\n}\n\nexport function bufferToReadable(buffer: VSBuffer): VSBufferReadable {\n\treturn streams.toReadable<VSBuffer>(buffer);\n}\n\nexport function streamToBuffer(stream: streams.ReadableStream<VSBuffer>): Promise<VSBuffer> {\n\treturn streams.consumeStream<VSBuffer>(stream, chunks => VSBuffer.concat(chunks));\n}\n\nexport async function bufferedStreamToBuffer(bufferedStream: streams.ReadableBufferedStream<VSBuffer>): Promise<VSBuffer> {\n\tif (bufferedStream.ended) {\n\t\treturn VSBuffer.concat(bufferedStream.buffer);\n\t}\n\n\treturn VSBuffer.concat([\n\n\t\t// Include already read chunks...\n\t\t...bufferedStream.buffer,\n\n\t\t// ...and all additional chunks\n\t\tawait streamToBuffer(bufferedStream.stream)\n\t]);\n}\n\nexport function bufferToStream(buffer: VSBuffer): streams.ReadableStream<VSBuffer> {\n\treturn streams.toStream<VSBuffer>(buffer, chunks => VSBuffer.concat(chunks));\n}\n\nexport function streamToBufferReadableStream(stream: streams.ReadableStreamEvents<Uint8Array | string>): streams.ReadableStream<VSBuffer> {\n\treturn streams.transform<Uint8Array | string, VSBuffer>(stream, { data: data => typeof data === 'string' ? VSBuffer.fromString(data) : VSBuffer.wrap(data) }, chunks => VSBuffer.concat(chunks));\n}\n\nexport function newWriteableBufferStream(options?: streams.WriteableStreamOptions): streams.WriteableStream<VSBuffer> {\n\treturn streams.newWriteableStream<VSBuffer>(chunks => VSBuffer.concat(chunks), options);\n}\n\nexport function prefixedBufferReadable(prefix: VSBuffer, readable: VSBufferReadable): VSBufferReadable {\n\treturn streams.prefixedReadable(prefix, readable, chunks => VSBuffer.concat(chunks));\n}\n\nexport function prefixedBufferStream(prefix: VSBuffer, stream: VSBufferReadableStream): VSBufferReadableStream {\n\treturn streams.prefixedStream(prefix, stream, chunks => VSBuffer.concat(chunks));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as strings from 'vs/base/common/strings';\n\n/**\n * Return a hash value for an object.\n */\nexport function hash(obj: any): number {\n\treturn doHash(obj, 0);\n}\n\nexport function doHash(obj: any, hashVal: number): number {\n\tswitch (typeof obj) {\n\t\tcase 'object':\n\t\t\tif (obj === null) {\n\t\t\t\treturn numberHash(349, hashVal);\n\t\t\t} else if (Array.isArray(obj)) {\n\t\t\t\treturn arrayHash(obj, hashVal);\n\t\t\t}\n\t\t\treturn objectHash(obj, hashVal);\n\t\tcase 'string':\n\t\t\treturn stringHash(obj, hashVal);\n\t\tcase 'boolean':\n\t\t\treturn booleanHash(obj, hashVal);\n\t\tcase 'number':\n\t\t\treturn numberHash(obj, hashVal);\n\t\tcase 'undefined':\n\t\t\treturn numberHash(937, hashVal);\n\t\tdefault:\n\t\t\treturn numberHash(617, hashVal);\n\t}\n}\n\nfunction numberHash(val: number, initialHashVal: number): number {\n\treturn (((initialHashVal << 5) - initialHashVal) + val) | 0;  // hashVal * 31 + ch, keep as int32\n}\n\nfunction booleanHash(b: boolean, initialHashVal: number): number {\n\treturn numberHash(b ? 433 : 863, initialHashVal);\n}\n\nexport function stringHash(s: string, hashVal: number) {\n\thashVal = numberHash(149417, hashVal);\n\tfor (let i = 0, length = s.length; i < length; i++) {\n\t\thashVal = numberHash(s.charCodeAt(i), hashVal);\n\t}\n\treturn hashVal;\n}\n\nfunction arrayHash(arr: any[], initialHashVal: number): number {\n\tinitialHashVal = numberHash(104579, initialHashVal);\n\treturn arr.reduce((hashVal, item) => doHash(item, hashVal), initialHashVal);\n}\n\nfunction objectHash(obj: any, initialHashVal: number): number {\n\tinitialHashVal = numberHash(181387, initialHashVal);\n\treturn Object.keys(obj).sort().reduce((hashVal, key) => {\n\t\thashVal = stringHash(key, hashVal);\n\t\treturn doHash(obj[key], hashVal);\n\t}, initialHashVal);\n}\n\nexport class Hasher {\n\n\tprivate _value = 0;\n\n\tget value(): number {\n\t\treturn this._value;\n\t}\n\n\thash(obj: any): number {\n\t\tthis._value = doHash(obj, this._value);\n\t\treturn this._value;\n\t}\n}\n\nconst enum SHA1Constant {\n\tBLOCK_SIZE = 64, // 512 / 8\n\tUNICODE_REPLACEMENT = 0xFFFD,\n}\n\nfunction leftRotate(value: number, bits: number, totalBits: number = 32): number {\n\t// delta + bits = totalBits\n\tconst delta = totalBits - bits;\n\n\t// All ones, expect `delta` zeros aligned to the right\n\tconst mask = ~((1 << delta) - 1);\n\n\t// Join (value left-shifted `bits` bits) with (masked value right-shifted `delta` bits)\n\treturn ((value << bits) | ((mask & value) >>> delta)) >>> 0;\n}\n\nfunction fill(dest: Uint8Array, index: number = 0, count: number = dest.byteLength, value: number = 0): void {\n\tfor (let i = 0; i < count; i++) {\n\t\tdest[index + i] = value;\n\t}\n}\n\nfunction leftPad(value: string, length: number, char: string = '0'): string {\n\twhile (value.length < length) {\n\t\tvalue = char + value;\n\t}\n\treturn value;\n}\n\nexport function toHexString(buffer: ArrayBuffer): string;\nexport function toHexString(value: number, bitsize?: number): string;\nexport function toHexString(bufferOrValue: ArrayBuffer | number, bitsize: number = 32): string {\n\tif (bufferOrValue instanceof ArrayBuffer) {\n\t\treturn Array.from(new Uint8Array(bufferOrValue)).map(b => b.toString(16).padStart(2, '0')).join('');\n\t}\n\n\treturn leftPad((bufferOrValue >>> 0).toString(16), bitsize / 4);\n}\n\n/**\n * A SHA1 implementation that works with strings and does not allocate.\n */\nexport class StringSHA1 {\n\tprivate static _bigBlock32 = new DataView(new ArrayBuffer(320)); // 80 * 4 = 320\n\n\tprivate _h0 = 0x67452301;\n\tprivate _h1 = 0xEFCDAB89;\n\tprivate _h2 = 0x98BADCFE;\n\tprivate _h3 = 0x10325476;\n\tprivate _h4 = 0xC3D2E1F0;\n\n\tprivate readonly _buff: Uint8Array;\n\tprivate readonly _buffDV: DataView;\n\tprivate _buffLen: number;\n\tprivate _totalLen: number;\n\tprivate _leftoverHighSurrogate: number;\n\tprivate _finished: boolean;\n\n\tconstructor() {\n\t\tthis._buff = new Uint8Array(SHA1Constant.BLOCK_SIZE + 3 /* to fit any utf-8 */);\n\t\tthis._buffDV = new DataView(this._buff.buffer);\n\t\tthis._buffLen = 0;\n\t\tthis._totalLen = 0;\n\t\tthis._leftoverHighSurrogate = 0;\n\t\tthis._finished = false;\n\t}\n\n\tpublic update(str: string): void {\n\t\tconst strLen = str.length;\n\t\tif (strLen === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst buff = this._buff;\n\t\tlet buffLen = this._buffLen;\n\t\tlet leftoverHighSurrogate = this._leftoverHighSurrogate;\n\t\tlet charCode: number;\n\t\tlet offset: number;\n\n\t\tif (leftoverHighSurrogate !== 0) {\n\t\t\tcharCode = leftoverHighSurrogate;\n\t\t\toffset = -1;\n\t\t\tleftoverHighSurrogate = 0;\n\t\t} else {\n\t\t\tcharCode = str.charCodeAt(0);\n\t\t\toffset = 0;\n\t\t}\n\n\t\twhile (true) {\n\t\t\tlet codePoint = charCode;\n\t\t\tif (strings.isHighSurrogate(charCode)) {\n\t\t\t\tif (offset + 1 < strLen) {\n\t\t\t\t\tconst nextCharCode = str.charCodeAt(offset + 1);\n\t\t\t\t\tif (strings.isLowSurrogate(nextCharCode)) {\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t\tcodePoint = strings.computeCodePoint(charCode, nextCharCode);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// illegal => unicode replacement character\n\t\t\t\t\t\tcodePoint = SHA1Constant.UNICODE_REPLACEMENT;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// last character is a surrogate pair\n\t\t\t\t\tleftoverHighSurrogate = charCode;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (strings.isLowSurrogate(charCode)) {\n\t\t\t\t// illegal => unicode replacement character\n\t\t\t\tcodePoint = SHA1Constant.UNICODE_REPLACEMENT;\n\t\t\t}\n\n\t\t\tbuffLen = this._push(buff, buffLen, codePoint);\n\t\t\toffset++;\n\t\t\tif (offset < strLen) {\n\t\t\t\tcharCode = str.charCodeAt(offset);\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tthis._buffLen = buffLen;\n\t\tthis._leftoverHighSurrogate = leftoverHighSurrogate;\n\t}\n\n\tprivate _push(buff: Uint8Array, buffLen: number, codePoint: number): number {\n\t\tif (codePoint < 0x0080) {\n\t\t\tbuff[buffLen++] = codePoint;\n\t\t} else if (codePoint < 0x0800) {\n\t\t\tbuff[buffLen++] = 0b11000000 | ((codePoint & 0b00000000000000000000011111000000) >>> 6);\n\t\t\tbuff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n\t\t} else if (codePoint < 0x10000) {\n\t\t\tbuff[buffLen++] = 0b11100000 | ((codePoint & 0b00000000000000001111000000000000) >>> 12);\n\t\t\tbuff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000111111000000) >>> 6);\n\t\t\tbuff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n\t\t} else {\n\t\t\tbuff[buffLen++] = 0b11110000 | ((codePoint & 0b00000000000111000000000000000000) >>> 18);\n\t\t\tbuff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000111111000000000000) >>> 12);\n\t\t\tbuff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000111111000000) >>> 6);\n\t\t\tbuff[buffLen++] = 0b10000000 | ((codePoint & 0b00000000000000000000000000111111) >>> 0);\n\t\t}\n\n\t\tif (buffLen >= SHA1Constant.BLOCK_SIZE) {\n\t\t\tthis._step();\n\t\t\tbuffLen -= SHA1Constant.BLOCK_SIZE;\n\t\t\tthis._totalLen += SHA1Constant.BLOCK_SIZE;\n\t\t\t// take last 3 in case of UTF8 overflow\n\t\t\tbuff[0] = buff[SHA1Constant.BLOCK_SIZE + 0];\n\t\t\tbuff[1] = buff[SHA1Constant.BLOCK_SIZE + 1];\n\t\t\tbuff[2] = buff[SHA1Constant.BLOCK_SIZE + 2];\n\t\t}\n\n\t\treturn buffLen;\n\t}\n\n\tpublic digest(): string {\n\t\tif (!this._finished) {\n\t\t\tthis._finished = true;\n\t\t\tif (this._leftoverHighSurrogate) {\n\t\t\t\t// illegal => unicode replacement character\n\t\t\t\tthis._leftoverHighSurrogate = 0;\n\t\t\t\tthis._buffLen = this._push(this._buff, this._buffLen, SHA1Constant.UNICODE_REPLACEMENT);\n\t\t\t}\n\t\t\tthis._totalLen += this._buffLen;\n\t\t\tthis._wrapUp();\n\t\t}\n\n\t\treturn toHexString(this._h0) + toHexString(this._h1) + toHexString(this._h2) + toHexString(this._h3) + toHexString(this._h4);\n\t}\n\n\tprivate _wrapUp(): void {\n\t\tthis._buff[this._buffLen++] = 0x80;\n\t\tfill(this._buff, this._buffLen);\n\n\t\tif (this._buffLen > 56) {\n\t\t\tthis._step();\n\t\t\tfill(this._buff);\n\t\t}\n\n\t\t// this will fit because the mantissa can cover up to 52 bits\n\t\tconst ml = 8 * this._totalLen;\n\n\t\tthis._buffDV.setUint32(56, Math.floor(ml / 4294967296), false);\n\t\tthis._buffDV.setUint32(60, ml % 4294967296, false);\n\n\t\tthis._step();\n\t}\n\n\tprivate _step(): void {\n\t\tconst bigBlock32 = StringSHA1._bigBlock32;\n\t\tconst data = this._buffDV;\n\n\t\tfor (let j = 0; j < 64 /* 16*4 */; j += 4) {\n\t\t\tbigBlock32.setUint32(j, data.getUint32(j, false), false);\n\t\t}\n\n\t\tfor (let j = 64; j < 320 /* 80*4 */; j += 4) {\n\t\t\tbigBlock32.setUint32(j, leftRotate((bigBlock32.getUint32(j - 12, false) ^ bigBlock32.getUint32(j - 32, false) ^ bigBlock32.getUint32(j - 56, false) ^ bigBlock32.getUint32(j - 64, false)), 1), false);\n\t\t}\n\n\t\tlet a = this._h0;\n\t\tlet b = this._h1;\n\t\tlet c = this._h2;\n\t\tlet d = this._h3;\n\t\tlet e = this._h4;\n\n\t\tlet f: number, k: number;\n\t\tlet temp: number;\n\n\t\tfor (let j = 0; j < 80; j++) {\n\t\t\tif (j < 20) {\n\t\t\t\tf = (b & c) | ((~b) & d);\n\t\t\t\tk = 0x5A827999;\n\t\t\t} else if (j < 40) {\n\t\t\t\tf = b ^ c ^ d;\n\t\t\t\tk = 0x6ED9EBA1;\n\t\t\t} else if (j < 60) {\n\t\t\t\tf = (b & c) | (b & d) | (c & d);\n\t\t\t\tk = 0x8F1BBCDC;\n\t\t\t} else {\n\t\t\t\tf = b ^ c ^ d;\n\t\t\t\tk = 0xCA62C1D6;\n\t\t\t}\n\n\t\t\ttemp = (leftRotate(a, 5) + f + e + k + bigBlock32.getUint32(j * 4, false)) & 0xffffffff;\n\t\t\te = d;\n\t\t\td = c;\n\t\t\tc = leftRotate(b, 30);\n\t\t\tb = a;\n\t\t\ta = temp;\n\t\t}\n\n\t\tthis._h0 = (this._h0 + a) & 0xffffffff;\n\t\tthis._h1 = (this._h1 + b) & 0xffffffff;\n\t\tthis._h2 = (this._h2 + c) & 0xffffffff;\n\t\tthis._h3 = (this._h3 + d) & 0xffffffff;\n\t\tthis._h4 = (this._h4 + e) & 0xffffffff;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DiffChange } from 'vs/base/common/diff/diffChange';\nimport { stringHash } from 'vs/base/common/hash';\nimport { Constants } from 'vs/base/common/uint';\n\nexport class StringDiffSequence implements ISequence {\n\n\tconstructor(private source: string) { }\n\n\tgetElements(): Int32Array | number[] | string[] {\n\t\tconst source = this.source;\n\t\tconst characters = new Int32Array(source.length);\n\t\tfor (let i = 0, len = source.length; i < len; i++) {\n\t\t\tcharacters[i] = source.charCodeAt(i);\n\t\t}\n\t\treturn characters;\n\t}\n}\n\nexport function stringDiff(original: string, modified: string, pretty: boolean): IDiffChange[] {\n\treturn new LcsDiff(new StringDiffSequence(original), new StringDiffSequence(modified)).ComputeDiff(pretty).changes;\n}\n\nexport interface ISequence {\n\tgetElements(): Int32Array | number[] | string[];\n}\n\nexport interface IDiffChange {\n\t/**\n\t * The position of the first element in the original sequence which\n\t * this change affects.\n\t */\n\toriginalStart: number;\n\n\t/**\n\t * The number of elements from the original sequence which were\n\t * affected.\n\t */\n\toriginalLength: number;\n\n\t/**\n\t * The position of the first element in the modified sequence which\n\t * this change affects.\n\t */\n\tmodifiedStart: number;\n\n\t/**\n\t * The number of elements from the modified sequence which were\n\t * affected (added).\n\t */\n\tmodifiedLength: number;\n}\n\nexport interface IContinueProcessingPredicate {\n\t(furthestOriginalIndex: number, matchLengthOfLongest: number): boolean;\n}\n\nexport interface IDiffResult {\n\tquitEarly: boolean;\n\tchanges: IDiffChange[];\n}\n\n//\n// The code below has been ported from a C# implementation in VS\n//\n\nexport class Debug {\n\n\tpublic static Assert(condition: boolean, message: string): void {\n\t\tif (!condition) {\n\t\t\tthrow new Error(message);\n\t\t}\n\t}\n}\n\nexport class MyArray {\n\t/**\n\t * Copies a range of elements from an Array starting at the specified source index and pastes\n\t * them to another Array starting at the specified destination index. The length and the indexes\n\t * are specified as 64-bit integers.\n\t * sourceArray:\n\t *\t\tThe Array that contains the data to copy.\n\t * sourceIndex:\n\t *\t\tA 64-bit integer that represents the index in the sourceArray at which copying begins.\n\t * destinationArray:\n\t *\t\tThe Array that receives the data.\n\t * destinationIndex:\n\t *\t\tA 64-bit integer that represents the index in the destinationArray at which storing begins.\n\t * length:\n\t *\t\tA 64-bit integer that represents the number of elements to copy.\n\t */\n\tpublic static Copy(sourceArray: any[], sourceIndex: number, destinationArray: any[], destinationIndex: number, length: number) {\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdestinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\n\t\t}\n\t}\n\tpublic static Copy2(sourceArray: Int32Array, sourceIndex: number, destinationArray: Int32Array, destinationIndex: number, length: number) {\n\t\tfor (let i = 0; i < length; i++) {\n\t\t\tdestinationArray[destinationIndex + i] = sourceArray[sourceIndex + i];\n\t\t}\n\t}\n}\n\n//*****************************************************************************\n// LcsDiff.cs\n//\n// An implementation of the difference algorithm described in\n// \"An O(ND) Difference Algorithm and its variations\" by Eugene W. Myers\n//\n// Copyright (C) 2008 Microsoft Corporation @minifier_do_not_preserve\n//*****************************************************************************\n\n// Our total memory usage for storing history is (worst-case):\n// 2 * [(MaxDifferencesHistory + 1) * (MaxDifferencesHistory + 1) - 1] * sizeof(int)\n// 2 * [1448*1448 - 1] * 4 = 16773624 = 16MB\nconst enum LocalConstants {\n\tMaxDifferencesHistory = 1447\n}\n\n/**\n * A utility class which helps to create the set of DiffChanges from\n * a difference operation. This class accepts original DiffElements and\n * modified DiffElements that are involved in a particular change. The\n * MarktNextChange() method can be called to mark the separation between\n * distinct changes. At the end, the Changes property can be called to retrieve\n * the constructed changes.\n */\nclass DiffChangeHelper {\n\n\tprivate m_changes: DiffChange[];\n\tprivate m_originalStart: number;\n\tprivate m_modifiedStart: number;\n\tprivate m_originalCount: number;\n\tprivate m_modifiedCount: number;\n\n\t/**\n\t * Constructs a new DiffChangeHelper for the given DiffSequences.\n\t */\n\tconstructor() {\n\t\tthis.m_changes = [];\n\t\tthis.m_originalStart = Constants.MAX_SAFE_SMALL_INTEGER;\n\t\tthis.m_modifiedStart = Constants.MAX_SAFE_SMALL_INTEGER;\n\t\tthis.m_originalCount = 0;\n\t\tthis.m_modifiedCount = 0;\n\t}\n\n\t/**\n\t * Marks the beginning of the next change in the set of differences.\n\t */\n\tpublic MarkNextChange(): void {\n\t\t// Only add to the list if there is something to add\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\n\t\t\t// Add the new change to our list\n\t\t\tthis.m_changes.push(new DiffChange(this.m_originalStart, this.m_originalCount,\n\t\t\t\tthis.m_modifiedStart, this.m_modifiedCount));\n\t\t}\n\n\t\t// Reset for the next change\n\t\tthis.m_originalCount = 0;\n\t\tthis.m_modifiedCount = 0;\n\t\tthis.m_originalStart = Constants.MAX_SAFE_SMALL_INTEGER;\n\t\tthis.m_modifiedStart = Constants.MAX_SAFE_SMALL_INTEGER;\n\t}\n\n\t/**\n\t * Adds the original element at the given position to the elements\n\t * affected by the current change. The modified index gives context\n\t * to the change position with respect to the original sequence.\n\t * @param originalIndex The index of the original element to add.\n\t * @param modifiedIndex The index of the modified element that provides corresponding position in the modified sequence.\n\t */\n\tpublic AddOriginalElement(originalIndex: number, modifiedIndex: number) {\n\t\t// The 'true' start index is the smallest of the ones we've seen\n\t\tthis.m_originalStart = Math.min(this.m_originalStart, originalIndex);\n\t\tthis.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\n\n\t\tthis.m_originalCount++;\n\t}\n\n\t/**\n\t * Adds the modified element at the given position to the elements\n\t * affected by the current change. The original index gives context\n\t * to the change position with respect to the modified sequence.\n\t * @param originalIndex The index of the original element that provides corresponding position in the original sequence.\n\t * @param modifiedIndex The index of the modified element to add.\n\t */\n\tpublic AddModifiedElement(originalIndex: number, modifiedIndex: number): void {\n\t\t// The 'true' start index is the smallest of the ones we've seen\n\t\tthis.m_originalStart = Math.min(this.m_originalStart, originalIndex);\n\t\tthis.m_modifiedStart = Math.min(this.m_modifiedStart, modifiedIndex);\n\n\t\tthis.m_modifiedCount++;\n\t}\n\n\t/**\n\t * Retrieves all of the changes marked by the class.\n\t */\n\tpublic getChanges(): DiffChange[] {\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\n\t\t\t// Finish up on whatever is left\n\t\t\tthis.MarkNextChange();\n\t\t}\n\n\t\treturn this.m_changes;\n\t}\n\n\t/**\n\t * Retrieves all of the changes marked by the class in the reverse order\n\t */\n\tpublic getReverseChanges(): DiffChange[] {\n\t\tif (this.m_originalCount > 0 || this.m_modifiedCount > 0) {\n\t\t\t// Finish up on whatever is left\n\t\t\tthis.MarkNextChange();\n\t\t}\n\n\t\tthis.m_changes.reverse();\n\t\treturn this.m_changes;\n\t}\n\n}\n\n/**\n * An implementation of the difference algorithm described in\n * \"An O(ND) Difference Algorithm and its variations\" by Eugene W. Myers\n */\nexport class LcsDiff {\n\n\tprivate readonly ContinueProcessingPredicate: IContinueProcessingPredicate | null;\n\n\tprivate readonly _hasStrings: boolean;\n\tprivate readonly _originalStringElements: string[];\n\tprivate readonly _originalElementsOrHash: Int32Array;\n\tprivate readonly _modifiedStringElements: string[];\n\tprivate readonly _modifiedElementsOrHash: Int32Array;\n\n\tprivate m_forwardHistory: Int32Array[];\n\tprivate m_reverseHistory: Int32Array[];\n\n\t/**\n\t * Constructs the DiffFinder\n\t */\n\tconstructor(originalSequence: ISequence, modifiedSequence: ISequence, continueProcessingPredicate: IContinueProcessingPredicate | null = null) {\n\t\tthis.ContinueProcessingPredicate = continueProcessingPredicate;\n\n\t\tconst [originalStringElements, originalElementsOrHash, originalHasStrings] = LcsDiff._getElements(originalSequence);\n\t\tconst [modifiedStringElements, modifiedElementsOrHash, modifiedHasStrings] = LcsDiff._getElements(modifiedSequence);\n\n\t\tthis._hasStrings = (originalHasStrings && modifiedHasStrings);\n\t\tthis._originalStringElements = originalStringElements;\n\t\tthis._originalElementsOrHash = originalElementsOrHash;\n\t\tthis._modifiedStringElements = modifiedStringElements;\n\t\tthis._modifiedElementsOrHash = modifiedElementsOrHash;\n\n\t\tthis.m_forwardHistory = [];\n\t\tthis.m_reverseHistory = [];\n\t}\n\n\tprivate static _isStringArray(arr: Int32Array | number[] | string[]): arr is string[] {\n\t\treturn (arr.length > 0 && typeof arr[0] === 'string');\n\t}\n\n\tprivate static _getElements(sequence: ISequence): [string[], Int32Array, boolean] {\n\t\tconst elements = sequence.getElements();\n\n\t\tif (LcsDiff._isStringArray(elements)) {\n\t\t\tconst hashes = new Int32Array(elements.length);\n\t\t\tfor (let i = 0, len = elements.length; i < len; i++) {\n\t\t\t\thashes[i] = stringHash(elements[i], 0);\n\t\t\t}\n\t\t\treturn [elements, hashes, true];\n\t\t}\n\n\t\tif (elements instanceof Int32Array) {\n\t\t\treturn [[], elements, false];\n\t\t}\n\n\t\treturn [[], new Int32Array(elements), false];\n\t}\n\n\tprivate ElementsAreEqual(originalIndex: number, newIndex: number): boolean {\n\t\tif (this._originalElementsOrHash[originalIndex] !== this._modifiedElementsOrHash[newIndex]) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (this._hasStrings ? this._originalStringElements[originalIndex] === this._modifiedStringElements[newIndex] : true);\n\t}\n\n\tprivate OriginalElementsAreEqual(index1: number, index2: number): boolean {\n\t\tif (this._originalElementsOrHash[index1] !== this._originalElementsOrHash[index2]) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (this._hasStrings ? this._originalStringElements[index1] === this._originalStringElements[index2] : true);\n\t}\n\n\tprivate ModifiedElementsAreEqual(index1: number, index2: number): boolean {\n\t\tif (this._modifiedElementsOrHash[index1] !== this._modifiedElementsOrHash[index2]) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (this._hasStrings ? this._modifiedStringElements[index1] === this._modifiedStringElements[index2] : true);\n\t}\n\n\tpublic ComputeDiff(pretty: boolean): IDiffResult {\n\t\treturn this._ComputeDiff(0, this._originalElementsOrHash.length - 1, 0, this._modifiedElementsOrHash.length - 1, pretty);\n\t}\n\n\t/**\n\t * Computes the differences between the original and modified input\n\t * sequences on the bounded range.\n\t * @returns An array of the differences between the two input sequences.\n\t */\n\tprivate _ComputeDiff(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, pretty: boolean): IDiffResult {\n\t\tconst quitEarlyArr = [false];\n\t\tlet changes = this.ComputeDiffRecursive(originalStart, originalEnd, modifiedStart, modifiedEnd, quitEarlyArr);\n\n\t\tif (pretty) {\n\t\t\t// We have to clean up the computed diff to be more intuitive\n\t\t\t// but it turns out this cannot be done correctly until the entire set\n\t\t\t// of diffs have been computed\n\t\t\tchanges = this.PrettifyChanges(changes);\n\t\t}\n\n\t\treturn {\n\t\t\tquitEarly: quitEarlyArr[0],\n\t\t\tchanges: changes\n\t\t};\n\t}\n\n\t/**\n\t * Private helper method which computes the differences on the bounded range\n\t * recursively.\n\t * @returns An array of the differences between the two input sequences.\n\t */\n\tprivate ComputeDiffRecursive(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, quitEarlyArr: boolean[]): DiffChange[] {\n\t\tquitEarlyArr[0] = false;\n\n\t\t// Find the start of the differences\n\t\twhile (originalStart <= originalEnd && modifiedStart <= modifiedEnd && this.ElementsAreEqual(originalStart, modifiedStart)) {\n\t\t\toriginalStart++;\n\t\t\tmodifiedStart++;\n\t\t}\n\n\t\t// Find the end of the differences\n\t\twhile (originalEnd >= originalStart && modifiedEnd >= modifiedStart && this.ElementsAreEqual(originalEnd, modifiedEnd)) {\n\t\t\toriginalEnd--;\n\t\t\tmodifiedEnd--;\n\t\t}\n\n\t\t// In the special case where we either have all insertions or all deletions or the sequences are identical\n\t\tif (originalStart > originalEnd || modifiedStart > modifiedEnd) {\n\t\t\tlet changes: DiffChange[];\n\n\t\t\tif (modifiedStart <= modifiedEnd) {\n\t\t\t\tDebug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\n\n\t\t\t\t// All insertions\n\t\t\t\tchanges = [\n\t\t\t\t\tnew DiffChange(originalStart, 0, modifiedStart, modifiedEnd - modifiedStart + 1)\n\t\t\t\t];\n\t\t\t} else if (originalStart <= originalEnd) {\n\t\t\t\tDebug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\n\n\t\t\t\t// All deletions\n\t\t\t\tchanges = [\n\t\t\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, 0)\n\t\t\t\t];\n\t\t\t} else {\n\t\t\t\tDebug.Assert(originalStart === originalEnd + 1, 'originalStart should only be one more than originalEnd');\n\t\t\t\tDebug.Assert(modifiedStart === modifiedEnd + 1, 'modifiedStart should only be one more than modifiedEnd');\n\n\t\t\t\t// Identical sequences - No differences\n\t\t\t\tchanges = [];\n\t\t\t}\n\n\t\t\treturn changes;\n\t\t}\n\n\t\t// This problem can be solved using the Divide-And-Conquer technique.\n\t\tconst midOriginalArr = [0];\n\t\tconst midModifiedArr = [0];\n\t\tconst result = this.ComputeRecursionPoint(originalStart, originalEnd, modifiedStart, modifiedEnd, midOriginalArr, midModifiedArr, quitEarlyArr);\n\n\t\tconst midOriginal = midOriginalArr[0];\n\t\tconst midModified = midModifiedArr[0];\n\n\t\tif (result !== null) {\n\t\t\t// Result is not-null when there was enough memory to compute the changes while\n\t\t\t// searching for the recursion point\n\t\t\treturn result;\n\t\t} else if (!quitEarlyArr[0]) {\n\t\t\t// We can break the problem down recursively by finding the changes in the\n\t\t\t// First Half:   (originalStart, modifiedStart) to (midOriginal, midModified)\n\t\t\t// Second Half:  (midOriginal + 1, minModified + 1) to (originalEnd, modifiedEnd)\n\t\t\t// NOTE: ComputeDiff() is inclusive, therefore the second range starts on the next point\n\n\t\t\tconst leftChanges = this.ComputeDiffRecursive(originalStart, midOriginal, modifiedStart, midModified, quitEarlyArr);\n\t\t\tlet rightChanges: DiffChange[] = [];\n\n\t\t\tif (!quitEarlyArr[0]) {\n\t\t\t\trightChanges = this.ComputeDiffRecursive(midOriginal + 1, originalEnd, midModified + 1, modifiedEnd, quitEarlyArr);\n\t\t\t} else {\n\t\t\t\t// We did't have time to finish the first half, so we don't have time to compute this half.\n\t\t\t\t// Consider the entire rest of the sequence different.\n\t\t\t\trightChanges = [\n\t\t\t\t\tnew DiffChange(midOriginal + 1, originalEnd - (midOriginal + 1) + 1, midModified + 1, modifiedEnd - (midModified + 1) + 1)\n\t\t\t\t];\n\t\t\t}\n\n\t\t\treturn this.ConcatenateChanges(leftChanges, rightChanges);\n\t\t}\n\n\t\t// If we hit here, we quit early, and so can't return anything meaningful\n\t\treturn [\n\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1, modifiedStart, modifiedEnd - modifiedStart + 1)\n\t\t];\n\t}\n\n\tprivate WALKTRACE(diagonalForwardBase: number, diagonalForwardStart: number, diagonalForwardEnd: number, diagonalForwardOffset: number,\n\t\tdiagonalReverseBase: number, diagonalReverseStart: number, diagonalReverseEnd: number, diagonalReverseOffset: number,\n\t\tforwardPoints: Int32Array, reversePoints: Int32Array,\n\t\toriginalIndex: number, originalEnd: number, midOriginalArr: number[],\n\t\tmodifiedIndex: number, modifiedEnd: number, midModifiedArr: number[],\n\t\tdeltaIsEven: boolean, quitEarlyArr: boolean[]\n\t): DiffChange[] {\n\t\tlet forwardChanges: DiffChange[] | null = null;\n\t\tlet reverseChanges: DiffChange[] | null = null;\n\n\t\t// First, walk backward through the forward diagonals history\n\t\tlet changeHelper = new DiffChangeHelper();\n\t\tlet diagonalMin = diagonalForwardStart;\n\t\tlet diagonalMax = diagonalForwardEnd;\n\t\tlet diagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalForwardOffset;\n\t\tlet lastOriginalIndex = Constants.MIN_SAFE_SMALL_INTEGER;\n\t\tlet historyIndex = this.m_forwardHistory.length - 1;\n\n\t\tdo {\n\t\t\t// Get the diagonal index from the relative diagonal number\n\t\t\tconst diagonal = diagonalRelative + diagonalForwardBase;\n\n\t\t\t// Figure out where we came from\n\t\t\tif (diagonal === diagonalMin || (diagonal < diagonalMax && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\n\t\t\t\t// Vertical line (the element is an insert)\n\t\t\t\toriginalIndex = forwardPoints[diagonal + 1];\n\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\n\t\t\t\tif (originalIndex < lastOriginalIndex) {\n\t\t\t\t\tchangeHelper.MarkNextChange();\n\t\t\t\t}\n\t\t\t\tlastOriginalIndex = originalIndex;\n\t\t\t\tchangeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex);\n\t\t\t\tdiagonalRelative = (diagonal + 1) - diagonalForwardBase; //Setup for the next iteration\n\t\t\t} else {\n\t\t\t\t// Horizontal line (the element is a deletion)\n\t\t\t\toriginalIndex = forwardPoints[diagonal - 1] + 1;\n\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalForwardOffset;\n\t\t\t\tif (originalIndex < lastOriginalIndex) {\n\t\t\t\t\tchangeHelper.MarkNextChange();\n\t\t\t\t}\n\t\t\t\tlastOriginalIndex = originalIndex - 1;\n\t\t\t\tchangeHelper.AddOriginalElement(originalIndex, modifiedIndex + 1);\n\t\t\t\tdiagonalRelative = (diagonal - 1) - diagonalForwardBase; //Setup for the next iteration\n\t\t\t}\n\n\t\t\tif (historyIndex >= 0) {\n\t\t\t\tforwardPoints = this.m_forwardHistory[historyIndex];\n\t\t\t\tdiagonalForwardBase = forwardPoints[0]; //We stored this in the first spot\n\t\t\t\tdiagonalMin = 1;\n\t\t\t\tdiagonalMax = forwardPoints.length - 1;\n\t\t\t}\n\t\t} while (--historyIndex >= -1);\n\n\t\t// Ironically, we get the forward changes as the reverse of the\n\t\t// order we added them since we technically added them backwards\n\t\tforwardChanges = changeHelper.getReverseChanges();\n\n\t\tif (quitEarlyArr[0]) {\n\t\t\t// TODO: Calculate a partial from the reverse diagonals.\n\t\t\t//       For now, just assume everything after the midOriginal/midModified point is a diff\n\n\t\t\tlet originalStartPoint = midOriginalArr[0] + 1;\n\t\t\tlet modifiedStartPoint = midModifiedArr[0] + 1;\n\n\t\t\tif (forwardChanges !== null && forwardChanges.length > 0) {\n\t\t\t\tconst lastForwardChange = forwardChanges[forwardChanges.length - 1];\n\t\t\t\toriginalStartPoint = Math.max(originalStartPoint, lastForwardChange.getOriginalEnd());\n\t\t\t\tmodifiedStartPoint = Math.max(modifiedStartPoint, lastForwardChange.getModifiedEnd());\n\t\t\t}\n\n\t\t\treverseChanges = [\n\t\t\t\tnew DiffChange(originalStartPoint, originalEnd - originalStartPoint + 1,\n\t\t\t\t\tmodifiedStartPoint, modifiedEnd - modifiedStartPoint + 1)\n\t\t\t];\n\t\t} else {\n\t\t\t// Now walk backward through the reverse diagonals history\n\t\t\tchangeHelper = new DiffChangeHelper();\n\t\t\tdiagonalMin = diagonalReverseStart;\n\t\t\tdiagonalMax = diagonalReverseEnd;\n\t\t\tdiagonalRelative = (midOriginalArr[0] - midModifiedArr[0]) - diagonalReverseOffset;\n\t\t\tlastOriginalIndex = Constants.MAX_SAFE_SMALL_INTEGER;\n\t\t\thistoryIndex = (deltaIsEven) ? this.m_reverseHistory.length - 1 : this.m_reverseHistory.length - 2;\n\n\t\t\tdo {\n\t\t\t\t// Get the diagonal index from the relative diagonal number\n\t\t\t\tconst diagonal = diagonalRelative + diagonalReverseBase;\n\n\t\t\t\t// Figure out where we came from\n\t\t\t\tif (diagonal === diagonalMin || (diagonal < diagonalMax && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\n\t\t\t\t\t// Horizontal line (the element is a deletion))\n\t\t\t\t\toriginalIndex = reversePoints[diagonal + 1] - 1;\n\t\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\n\t\t\t\t\tif (originalIndex > lastOriginalIndex) {\n\t\t\t\t\t\tchangeHelper.MarkNextChange();\n\t\t\t\t\t}\n\t\t\t\t\tlastOriginalIndex = originalIndex + 1;\n\t\t\t\t\tchangeHelper.AddOriginalElement(originalIndex + 1, modifiedIndex + 1);\n\t\t\t\t\tdiagonalRelative = (diagonal + 1) - diagonalReverseBase; //Setup for the next iteration\n\t\t\t\t} else {\n\t\t\t\t\t// Vertical line (the element is an insertion)\n\t\t\t\t\toriginalIndex = reversePoints[diagonal - 1];\n\t\t\t\t\tmodifiedIndex = originalIndex - diagonalRelative - diagonalReverseOffset;\n\t\t\t\t\tif (originalIndex > lastOriginalIndex) {\n\t\t\t\t\t\tchangeHelper.MarkNextChange();\n\t\t\t\t\t}\n\t\t\t\t\tlastOriginalIndex = originalIndex;\n\t\t\t\t\tchangeHelper.AddModifiedElement(originalIndex + 1, modifiedIndex + 1);\n\t\t\t\t\tdiagonalRelative = (diagonal - 1) - diagonalReverseBase; //Setup for the next iteration\n\t\t\t\t}\n\n\t\t\t\tif (historyIndex >= 0) {\n\t\t\t\t\treversePoints = this.m_reverseHistory[historyIndex];\n\t\t\t\t\tdiagonalReverseBase = reversePoints[0]; //We stored this in the first spot\n\t\t\t\t\tdiagonalMin = 1;\n\t\t\t\t\tdiagonalMax = reversePoints.length - 1;\n\t\t\t\t}\n\t\t\t} while (--historyIndex >= -1);\n\n\t\t\t// There are cases where the reverse history will find diffs that\n\t\t\t// are correct, but not intuitive, so we need shift them.\n\t\t\treverseChanges = changeHelper.getChanges();\n\t\t}\n\n\t\treturn this.ConcatenateChanges(forwardChanges, reverseChanges);\n\t}\n\n\t/**\n\t * Given the range to compute the diff on, this method finds the point:\n\t * (midOriginal, midModified)\n\t * that exists in the middle of the LCS of the two sequences and\n\t * is the point at which the LCS problem may be broken down recursively.\n\t * This method will try to keep the LCS trace in memory. If the LCS recursion\n\t * point is calculated and the full trace is available in memory, then this method\n\t * will return the change list.\n\t * @param originalStart The start bound of the original sequence range\n\t * @param originalEnd The end bound of the original sequence range\n\t * @param modifiedStart The start bound of the modified sequence range\n\t * @param modifiedEnd The end bound of the modified sequence range\n\t * @param midOriginal The middle point of the original sequence range\n\t * @param midModified The middle point of the modified sequence range\n\t * @returns The diff changes, if available, otherwise null\n\t */\n\tprivate ComputeRecursionPoint(originalStart: number, originalEnd: number, modifiedStart: number, modifiedEnd: number, midOriginalArr: number[], midModifiedArr: number[], quitEarlyArr: boolean[]) {\n\t\tlet originalIndex = 0, modifiedIndex = 0;\n\t\tlet diagonalForwardStart = 0, diagonalForwardEnd = 0;\n\t\tlet diagonalReverseStart = 0, diagonalReverseEnd = 0;\n\n\t\t// To traverse the edit graph and produce the proper LCS, our actual\n\t\t// start position is just outside the given boundary\n\t\toriginalStart--;\n\t\tmodifiedStart--;\n\n\t\t// We set these up to make the compiler happy, but they will\n\t\t// be replaced before we return with the actual recursion point\n\t\tmidOriginalArr[0] = 0;\n\t\tmidModifiedArr[0] = 0;\n\n\t\t// Clear out the history\n\t\tthis.m_forwardHistory = [];\n\t\tthis.m_reverseHistory = [];\n\n\t\t// Each cell in the two arrays corresponds to a diagonal in the edit graph.\n\t\t// The integer value in the cell represents the originalIndex of the furthest\n\t\t// reaching point found so far that ends in that diagonal.\n\t\t// The modifiedIndex can be computed mathematically from the originalIndex and the diagonal number.\n\t\tconst maxDifferences = (originalEnd - originalStart) + (modifiedEnd - modifiedStart);\n\t\tconst numDiagonals = maxDifferences + 1;\n\t\tconst forwardPoints = new Int32Array(numDiagonals);\n\t\tconst reversePoints = new Int32Array(numDiagonals);\n\t\t// diagonalForwardBase: Index into forwardPoints of the diagonal which passes through (originalStart, modifiedStart)\n\t\t// diagonalReverseBase: Index into reversePoints of the diagonal which passes through (originalEnd, modifiedEnd)\n\t\tconst diagonalForwardBase = (modifiedEnd - modifiedStart);\n\t\tconst diagonalReverseBase = (originalEnd - originalStart);\n\t\t// diagonalForwardOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\n\t\t//    diagonal number (relative to diagonalForwardBase)\n\t\t// diagonalReverseOffset: Geometric offset which allows modifiedIndex to be computed from originalIndex and the\n\t\t//    diagonal number (relative to diagonalReverseBase)\n\t\tconst diagonalForwardOffset = (originalStart - modifiedStart);\n\t\tconst diagonalReverseOffset = (originalEnd - modifiedEnd);\n\n\t\t// delta: The difference between the end diagonal and the start diagonal. This is used to relate diagonal numbers\n\t\t//   relative to the start diagonal with diagonal numbers relative to the end diagonal.\n\t\t// The Even/Oddn-ness of this delta is important for determining when we should check for overlap\n\t\tconst delta = diagonalReverseBase - diagonalForwardBase;\n\t\tconst deltaIsEven = (delta % 2 === 0);\n\n\t\t// Here we set up the start and end points as the furthest points found so far\n\t\t// in both the forward and reverse directions, respectively\n\t\tforwardPoints[diagonalForwardBase] = originalStart;\n\t\treversePoints[diagonalReverseBase] = originalEnd;\n\n\t\t// Remember if we quit early, and thus need to do a best-effort result instead of a real result.\n\t\tquitEarlyArr[0] = false;\n\n\n\n\t\t// A couple of points:\n\t\t// --With this method, we iterate on the number of differences between the two sequences.\n\t\t//   The more differences there actually are, the longer this will take.\n\t\t// --Also, as the number of differences increases, we have to search on diagonals further\n\t\t//   away from the reference diagonal (which is diagonalForwardBase for forward, diagonalReverseBase for reverse).\n\t\t// --We extend on even diagonals (relative to the reference diagonal) only when numDifferences\n\t\t//   is even and odd diagonals only when numDifferences is odd.\n\t\tfor (let numDifferences = 1; numDifferences <= (maxDifferences / 2) + 1; numDifferences++) {\n\t\t\tlet furthestOriginalIndex = 0;\n\t\t\tlet furthestModifiedIndex = 0;\n\n\t\t\t// Run the algorithm in the forward direction\n\t\t\tdiagonalForwardStart = this.ClipDiagonalBound(diagonalForwardBase - numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\n\t\t\tdiagonalForwardEnd = this.ClipDiagonalBound(diagonalForwardBase + numDifferences, numDifferences, diagonalForwardBase, numDiagonals);\n\t\t\tfor (let diagonal = diagonalForwardStart; diagonal <= diagonalForwardEnd; diagonal += 2) {\n\t\t\t\t// STEP 1: We extend the furthest reaching point in the present diagonal\n\t\t\t\t// by looking at the diagonals above and below and picking the one whose point\n\t\t\t\t// is further away from the start point (originalStart, modifiedStart)\n\t\t\t\tif (diagonal === diagonalForwardStart || (diagonal < diagonalForwardEnd && forwardPoints[diagonal - 1] < forwardPoints[diagonal + 1])) {\n\t\t\t\t\toriginalIndex = forwardPoints[diagonal + 1];\n\t\t\t\t} else {\n\t\t\t\t\toriginalIndex = forwardPoints[diagonal - 1] + 1;\n\t\t\t\t}\n\t\t\t\tmodifiedIndex = originalIndex - (diagonal - diagonalForwardBase) - diagonalForwardOffset;\n\n\t\t\t\t// Save the current originalIndex so we can test for false overlap in step 3\n\t\t\t\tconst tempOriginalIndex = originalIndex;\n\n\t\t\t\t// STEP 2: We can continue to extend the furthest reaching point in the present diagonal\n\t\t\t\t// so long as the elements are equal.\n\t\t\t\twhile (originalIndex < originalEnd && modifiedIndex < modifiedEnd && this.ElementsAreEqual(originalIndex + 1, modifiedIndex + 1)) {\n\t\t\t\t\toriginalIndex++;\n\t\t\t\t\tmodifiedIndex++;\n\t\t\t\t}\n\t\t\t\tforwardPoints[diagonal] = originalIndex;\n\n\t\t\t\tif (originalIndex + modifiedIndex > furthestOriginalIndex + furthestModifiedIndex) {\n\t\t\t\t\tfurthestOriginalIndex = originalIndex;\n\t\t\t\t\tfurthestModifiedIndex = modifiedIndex;\n\t\t\t\t}\n\n\t\t\t\t// STEP 3: If delta is odd (overlap first happens on forward when delta is odd)\n\t\t\t\t// and diagonal is in the range of reverse diagonals computed for numDifferences-1\n\t\t\t\t// (the previous iteration; we haven't computed reverse diagonals for numDifferences yet)\n\t\t\t\t// then check for overlap.\n\t\t\t\tif (!deltaIsEven && Math.abs(diagonal - diagonalReverseBase) <= (numDifferences - 1)) {\n\t\t\t\t\tif (originalIndex >= reversePoints[diagonal]) {\n\t\t\t\t\t\tmidOriginalArr[0] = originalIndex;\n\t\t\t\t\t\tmidModifiedArr[0] = modifiedIndex;\n\n\t\t\t\t\t\tif (tempOriginalIndex <= reversePoints[diagonal] && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\n\t\t\t\t\t\t\t// BINGO! We overlapped, and we have the full trace in memory!\n\t\t\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\n\t\t\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\n\t\t\t\t\t\t\t\tforwardPoints, reversePoints,\n\t\t\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\n\t\t\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\n\t\t\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Either false overlap, or we didn't have enough memory for the full trace\n\t\t\t\t\t\t\t// Just return the recursion point\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Check to see if we should be quitting early, before moving on to the next iteration.\n\t\t\tconst matchLengthOfLongest = ((furthestOriginalIndex - originalStart) + (furthestModifiedIndex - modifiedStart) - numDifferences) / 2;\n\n\t\t\tif (this.ContinueProcessingPredicate !== null && !this.ContinueProcessingPredicate(furthestOriginalIndex, matchLengthOfLongest)) {\n\t\t\t\t// We can't finish, so skip ahead to generating a result from what we have.\n\t\t\t\tquitEarlyArr[0] = true;\n\n\t\t\t\t// Use the furthest distance we got in the forward direction.\n\t\t\t\tmidOriginalArr[0] = furthestOriginalIndex;\n\t\t\t\tmidModifiedArr[0] = furthestModifiedIndex;\n\n\t\t\t\tif (matchLengthOfLongest > 0 && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\n\t\t\t\t\t// Enough of the history is in memory to walk it backwards\n\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\n\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\n\t\t\t\t\t\tforwardPoints, reversePoints,\n\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\n\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\n\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\t// We didn't actually remember enough of the history.\n\n\t\t\t\t\t//Since we are quiting the diff early, we need to shift back the originalStart and modified start\n\t\t\t\t\t//back into the boundary limits since we decremented their value above beyond the boundary limit.\n\t\t\t\t\toriginalStart++;\n\t\t\t\t\tmodifiedStart++;\n\n\t\t\t\t\treturn [\n\t\t\t\t\t\tnew DiffChange(originalStart, originalEnd - originalStart + 1,\n\t\t\t\t\t\t\tmodifiedStart, modifiedEnd - modifiedStart + 1)\n\t\t\t\t\t];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Run the algorithm in the reverse direction\n\t\t\tdiagonalReverseStart = this.ClipDiagonalBound(diagonalReverseBase - numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\n\t\t\tdiagonalReverseEnd = this.ClipDiagonalBound(diagonalReverseBase + numDifferences, numDifferences, diagonalReverseBase, numDiagonals);\n\t\t\tfor (let diagonal = diagonalReverseStart; diagonal <= diagonalReverseEnd; diagonal += 2) {\n\t\t\t\t// STEP 1: We extend the furthest reaching point in the present diagonal\n\t\t\t\t// by looking at the diagonals above and below and picking the one whose point\n\t\t\t\t// is further away from the start point (originalEnd, modifiedEnd)\n\t\t\t\tif (diagonal === diagonalReverseStart || (diagonal < diagonalReverseEnd && reversePoints[diagonal - 1] >= reversePoints[diagonal + 1])) {\n\t\t\t\t\toriginalIndex = reversePoints[diagonal + 1] - 1;\n\t\t\t\t} else {\n\t\t\t\t\toriginalIndex = reversePoints[diagonal - 1];\n\t\t\t\t}\n\t\t\t\tmodifiedIndex = originalIndex - (diagonal - diagonalReverseBase) - diagonalReverseOffset;\n\n\t\t\t\t// Save the current originalIndex so we can test for false overlap\n\t\t\t\tconst tempOriginalIndex = originalIndex;\n\n\t\t\t\t// STEP 2: We can continue to extend the furthest reaching point in the present diagonal\n\t\t\t\t// as long as the elements are equal.\n\t\t\t\twhile (originalIndex > originalStart && modifiedIndex > modifiedStart && this.ElementsAreEqual(originalIndex, modifiedIndex)) {\n\t\t\t\t\toriginalIndex--;\n\t\t\t\t\tmodifiedIndex--;\n\t\t\t\t}\n\t\t\t\treversePoints[diagonal] = originalIndex;\n\n\t\t\t\t// STEP 4: If delta is even (overlap first happens on reverse when delta is even)\n\t\t\t\t// and diagonal is in the range of forward diagonals computed for numDifferences\n\t\t\t\t// then check for overlap.\n\t\t\t\tif (deltaIsEven && Math.abs(diagonal - diagonalForwardBase) <= numDifferences) {\n\t\t\t\t\tif (originalIndex <= forwardPoints[diagonal]) {\n\t\t\t\t\t\tmidOriginalArr[0] = originalIndex;\n\t\t\t\t\t\tmidModifiedArr[0] = modifiedIndex;\n\n\t\t\t\t\t\tif (tempOriginalIndex >= forwardPoints[diagonal] && LocalConstants.MaxDifferencesHistory > 0 && numDifferences <= (LocalConstants.MaxDifferencesHistory + 1)) {\n\t\t\t\t\t\t\t// BINGO! We overlapped, and we have the full trace in memory!\n\t\t\t\t\t\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\n\t\t\t\t\t\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\n\t\t\t\t\t\t\t\tforwardPoints, reversePoints,\n\t\t\t\t\t\t\t\toriginalIndex, originalEnd, midOriginalArr,\n\t\t\t\t\t\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\n\t\t\t\t\t\t\t\tdeltaIsEven, quitEarlyArr\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Either false overlap, or we didn't have enough memory for the full trace\n\t\t\t\t\t\t\t// Just return the recursion point\n\t\t\t\t\t\t\treturn null;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Save current vectors to history before the next iteration\n\t\t\tif (numDifferences <= LocalConstants.MaxDifferencesHistory) {\n\t\t\t\t// We are allocating space for one extra int, which we fill with\n\t\t\t\t// the index of the diagonal base index\n\t\t\t\tlet temp = new Int32Array(diagonalForwardEnd - diagonalForwardStart + 2);\n\t\t\t\ttemp[0] = diagonalForwardBase - diagonalForwardStart + 1;\n\t\t\t\tMyArray.Copy2(forwardPoints, diagonalForwardStart, temp, 1, diagonalForwardEnd - diagonalForwardStart + 1);\n\t\t\t\tthis.m_forwardHistory.push(temp);\n\n\t\t\t\ttemp = new Int32Array(diagonalReverseEnd - diagonalReverseStart + 2);\n\t\t\t\ttemp[0] = diagonalReverseBase - diagonalReverseStart + 1;\n\t\t\t\tMyArray.Copy2(reversePoints, diagonalReverseStart, temp, 1, diagonalReverseEnd - diagonalReverseStart + 1);\n\t\t\t\tthis.m_reverseHistory.push(temp);\n\t\t\t}\n\n\t\t}\n\n\t\t// If we got here, then we have the full trace in history. We just have to convert it to a change list\n\t\t// NOTE: This part is a bit messy\n\t\treturn this.WALKTRACE(diagonalForwardBase, diagonalForwardStart, diagonalForwardEnd, diagonalForwardOffset,\n\t\t\tdiagonalReverseBase, diagonalReverseStart, diagonalReverseEnd, diagonalReverseOffset,\n\t\t\tforwardPoints, reversePoints,\n\t\t\toriginalIndex, originalEnd, midOriginalArr,\n\t\t\tmodifiedIndex, modifiedEnd, midModifiedArr,\n\t\t\tdeltaIsEven, quitEarlyArr\n\t\t);\n\t}\n\n\t/**\n\t * Shifts the given changes to provide a more intuitive diff.\n\t * While the first element in a diff matches the first element after the diff,\n\t * we shift the diff down.\n\t *\n\t * @param changes The list of changes to shift\n\t * @returns The shifted changes\n\t */\n\tprivate PrettifyChanges(changes: DiffChange[]): DiffChange[] {\n\n\t\t// Shift all the changes down first\n\t\tfor (let i = 0; i < changes.length; i++) {\n\t\t\tconst change = changes[i];\n\t\t\tconst originalStop = (i < changes.length - 1) ? changes[i + 1].originalStart : this._originalElementsOrHash.length;\n\t\t\tconst modifiedStop = (i < changes.length - 1) ? changes[i + 1].modifiedStart : this._modifiedElementsOrHash.length;\n\t\t\tconst checkOriginal = change.originalLength > 0;\n\t\t\tconst checkModified = change.modifiedLength > 0;\n\n\t\t\twhile (change.originalStart + change.originalLength < originalStop &&\n\t\t\t\tchange.modifiedStart + change.modifiedLength < modifiedStop &&\n\t\t\t\t(!checkOriginal || this.OriginalElementsAreEqual(change.originalStart, change.originalStart + change.originalLength)) &&\n\t\t\t\t(!checkModified || this.ModifiedElementsAreEqual(change.modifiedStart, change.modifiedStart + change.modifiedLength))) {\n\t\t\t\tchange.originalStart++;\n\t\t\t\tchange.modifiedStart++;\n\t\t\t}\n\n\t\t\tlet mergedChangeArr: Array<DiffChange | null> = [null];\n\t\t\tif (i < changes.length - 1 && this.ChangesOverlap(changes[i], changes[i + 1], mergedChangeArr)) {\n\t\t\t\tchanges[i] = mergedChangeArr[0]!;\n\t\t\t\tchanges.splice(i + 1, 1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\t// Shift changes back up until we hit empty or whitespace-only lines\n\t\tfor (let i = changes.length - 1; i >= 0; i--) {\n\t\t\tconst change = changes[i];\n\n\t\t\tlet originalStop = 0;\n\t\t\tlet modifiedStop = 0;\n\t\t\tif (i > 0) {\n\t\t\t\tconst prevChange = changes[i - 1];\n\t\t\t\toriginalStop = prevChange.originalStart + prevChange.originalLength;\n\t\t\t\tmodifiedStop = prevChange.modifiedStart + prevChange.modifiedLength;\n\t\t\t}\n\n\t\t\tconst checkOriginal = change.originalLength > 0;\n\t\t\tconst checkModified = change.modifiedLength > 0;\n\n\t\t\tlet bestDelta = 0;\n\t\t\tlet bestScore = this._boundaryScore(change.originalStart, change.originalLength, change.modifiedStart, change.modifiedLength);\n\n\t\t\tfor (let delta = 1; ; delta++) {\n\t\t\t\tconst originalStart = change.originalStart - delta;\n\t\t\t\tconst modifiedStart = change.modifiedStart - delta;\n\n\t\t\t\tif (originalStart < originalStop || modifiedStart < modifiedStop) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (checkOriginal && !this.OriginalElementsAreEqual(originalStart, originalStart + change.originalLength)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (checkModified && !this.ModifiedElementsAreEqual(modifiedStart, modifiedStart + change.modifiedLength)) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tconst touchingPreviousChange = (originalStart === originalStop && modifiedStart === modifiedStop);\n\t\t\t\tconst score = (\n\t\t\t\t\t(touchingPreviousChange ? 5 : 0)\n\t\t\t\t\t+ this._boundaryScore(originalStart, change.originalLength, modifiedStart, change.modifiedLength)\n\t\t\t\t);\n\n\t\t\t\tif (score > bestScore) {\n\t\t\t\t\tbestScore = score;\n\t\t\t\t\tbestDelta = delta;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchange.originalStart -= bestDelta;\n\t\t\tchange.modifiedStart -= bestDelta;\n\n\t\t\tconst mergedChangeArr: Array<DiffChange | null> = [null];\n\t\t\tif (i > 0 && this.ChangesOverlap(changes[i - 1], changes[i], mergedChangeArr)) {\n\t\t\t\tchanges[i - 1] = mergedChangeArr[0]!;\n\t\t\t\tchanges.splice(i, 1);\n\t\t\t\ti++;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\n\t\t// There could be multiple longest common substrings.\n\t\t// Give preference to the ones containing longer lines\n\t\tif (this._hasStrings) {\n\t\t\tfor (let i = 1, len = changes.length; i < len; i++) {\n\t\t\t\tconst aChange = changes[i - 1];\n\t\t\t\tconst bChange = changes[i];\n\t\t\t\tconst matchedLength = bChange.originalStart - aChange.originalStart - aChange.originalLength;\n\t\t\t\tconst aOriginalStart = aChange.originalStart;\n\t\t\t\tconst bOriginalEnd = bChange.originalStart + bChange.originalLength;\n\t\t\t\tconst abOriginalLength = bOriginalEnd - aOriginalStart;\n\t\t\t\tconst aModifiedStart = aChange.modifiedStart;\n\t\t\t\tconst bModifiedEnd = bChange.modifiedStart + bChange.modifiedLength;\n\t\t\t\tconst abModifiedLength = bModifiedEnd - aModifiedStart;\n\t\t\t\t// Avoid wasting a lot of time with these searches\n\t\t\t\tif (matchedLength < 5 && abOriginalLength < 20 && abModifiedLength < 20) {\n\t\t\t\t\tconst t = this._findBetterContiguousSequence(\n\t\t\t\t\t\taOriginalStart, abOriginalLength,\n\t\t\t\t\t\taModifiedStart, abModifiedLength,\n\t\t\t\t\t\tmatchedLength\n\t\t\t\t\t);\n\t\t\t\t\tif (t) {\n\t\t\t\t\t\tconst [originalMatchStart, modifiedMatchStart] = t;\n\t\t\t\t\t\tif (originalMatchStart !== aChange.originalStart + aChange.originalLength || modifiedMatchStart !== aChange.modifiedStart + aChange.modifiedLength) {\n\t\t\t\t\t\t\t// switch to another sequence that has a better score\n\t\t\t\t\t\t\taChange.originalLength = originalMatchStart - aChange.originalStart;\n\t\t\t\t\t\t\taChange.modifiedLength = modifiedMatchStart - aChange.modifiedStart;\n\t\t\t\t\t\t\tbChange.originalStart = originalMatchStart + matchedLength;\n\t\t\t\t\t\t\tbChange.modifiedStart = modifiedMatchStart + matchedLength;\n\t\t\t\t\t\t\tbChange.originalLength = bOriginalEnd - bChange.originalStart;\n\t\t\t\t\t\t\tbChange.modifiedLength = bModifiedEnd - bChange.modifiedStart;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn changes;\n\t}\n\n\tprivate _findBetterContiguousSequence(originalStart: number, originalLength: number, modifiedStart: number, modifiedLength: number, desiredLength: number): [number, number] | null {\n\t\tif (originalLength < desiredLength || modifiedLength < desiredLength) {\n\t\t\treturn null;\n\t\t}\n\t\tconst originalMax = originalStart + originalLength - desiredLength + 1;\n\t\tconst modifiedMax = modifiedStart + modifiedLength - desiredLength + 1;\n\t\tlet bestScore = 0;\n\t\tlet bestOriginalStart = 0;\n\t\tlet bestModifiedStart = 0;\n\t\tfor (let i = originalStart; i < originalMax; i++) {\n\t\t\tfor (let j = modifiedStart; j < modifiedMax; j++) {\n\t\t\t\tconst score = this._contiguousSequenceScore(i, j, desiredLength);\n\t\t\t\tif (score > 0 && score > bestScore) {\n\t\t\t\t\tbestScore = score;\n\t\t\t\t\tbestOriginalStart = i;\n\t\t\t\t\tbestModifiedStart = j;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (bestScore > 0) {\n\t\t\treturn [bestOriginalStart, bestModifiedStart];\n\t\t}\n\t\treturn null;\n\t}\n\n\tprivate _contiguousSequenceScore(originalStart: number, modifiedStart: number, length: number): number {\n\t\tlet score = 0;\n\t\tfor (let l = 0; l < length; l++) {\n\t\t\tif (!this.ElementsAreEqual(originalStart + l, modifiedStart + l)) {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t\tscore += this._originalStringElements[originalStart + l].length;\n\t\t}\n\t\treturn score;\n\t}\n\n\tprivate _OriginalIsBoundary(index: number): boolean {\n\t\tif (index <= 0 || index >= this._originalElementsOrHash.length - 1) {\n\t\t\treturn true;\n\t\t}\n\t\treturn (this._hasStrings && /^\\s*$/.test(this._originalStringElements[index]));\n\t}\n\n\tprivate _OriginalRegionIsBoundary(originalStart: number, originalLength: number): boolean {\n\t\tif (this._OriginalIsBoundary(originalStart) || this._OriginalIsBoundary(originalStart - 1)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (originalLength > 0) {\n\t\t\tconst originalEnd = originalStart + originalLength;\n\t\t\tif (this._OriginalIsBoundary(originalEnd - 1) || this._OriginalIsBoundary(originalEnd)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _ModifiedIsBoundary(index: number): boolean {\n\t\tif (index <= 0 || index >= this._modifiedElementsOrHash.length - 1) {\n\t\t\treturn true;\n\t\t}\n\t\treturn (this._hasStrings && /^\\s*$/.test(this._modifiedStringElements[index]));\n\t}\n\n\tprivate _ModifiedRegionIsBoundary(modifiedStart: number, modifiedLength: number): boolean {\n\t\tif (this._ModifiedIsBoundary(modifiedStart) || this._ModifiedIsBoundary(modifiedStart - 1)) {\n\t\t\treturn true;\n\t\t}\n\t\tif (modifiedLength > 0) {\n\t\t\tconst modifiedEnd = modifiedStart + modifiedLength;\n\t\t\tif (this._ModifiedIsBoundary(modifiedEnd - 1) || this._ModifiedIsBoundary(modifiedEnd)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate _boundaryScore(originalStart: number, originalLength: number, modifiedStart: number, modifiedLength: number): number {\n\t\tconst originalScore = (this._OriginalRegionIsBoundary(originalStart, originalLength) ? 1 : 0);\n\t\tconst modifiedScore = (this._ModifiedRegionIsBoundary(modifiedStart, modifiedLength) ? 1 : 0);\n\t\treturn (originalScore + modifiedScore);\n\t}\n\n\t/**\n\t * Concatenates the two input DiffChange lists and returns the resulting\n\t * list.\n\t * @param The left changes\n\t * @param The right changes\n\t * @returns The concatenated list\n\t */\n\tprivate ConcatenateChanges(left: DiffChange[], right: DiffChange[]): DiffChange[] {\n\t\tlet mergedChangeArr: DiffChange[] = [];\n\n\t\tif (left.length === 0 || right.length === 0) {\n\t\t\treturn (right.length > 0) ? right : left;\n\t\t} else if (this.ChangesOverlap(left[left.length - 1], right[0], mergedChangeArr)) {\n\t\t\t// Since we break the problem down recursively, it is possible that we\n\t\t\t// might recurse in the middle of a change thereby splitting it into\n\t\t\t// two changes. Here in the combining stage, we detect and fuse those\n\t\t\t// changes back together\n\t\t\tconst result = new Array<DiffChange>(left.length + right.length - 1);\n\t\t\tMyArray.Copy(left, 0, result, 0, left.length - 1);\n\t\t\tresult[left.length - 1] = mergedChangeArr[0];\n\t\t\tMyArray.Copy(right, 1, result, left.length, right.length - 1);\n\n\t\t\treturn result;\n\t\t} else {\n\t\t\tconst result = new Array<DiffChange>(left.length + right.length);\n\t\t\tMyArray.Copy(left, 0, result, 0, left.length);\n\t\t\tMyArray.Copy(right, 0, result, left.length, right.length);\n\n\t\t\treturn result;\n\t\t}\n\t}\n\n\t/**\n\t * Returns true if the two changes overlap and can be merged into a single\n\t * change\n\t * @param left The left change\n\t * @param right The right change\n\t * @param mergedChange The merged change if the two overlap, null otherwise\n\t * @returns True if the two changes overlap\n\t */\n\tprivate ChangesOverlap(left: DiffChange, right: DiffChange, mergedChangeArr: Array<DiffChange | null>): boolean {\n\t\tDebug.Assert(left.originalStart <= right.originalStart, 'Left change is not less than or equal to right change');\n\t\tDebug.Assert(left.modifiedStart <= right.modifiedStart, 'Left change is not less than or equal to right change');\n\n\t\tif (left.originalStart + left.originalLength >= right.originalStart || left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\n\t\t\tconst originalStart = left.originalStart;\n\t\t\tlet originalLength = left.originalLength;\n\t\t\tconst modifiedStart = left.modifiedStart;\n\t\t\tlet modifiedLength = left.modifiedLength;\n\n\t\t\tif (left.originalStart + left.originalLength >= right.originalStart) {\n\t\t\t\toriginalLength = right.originalStart + right.originalLength - left.originalStart;\n\t\t\t}\n\t\t\tif (left.modifiedStart + left.modifiedLength >= right.modifiedStart) {\n\t\t\t\tmodifiedLength = right.modifiedStart + right.modifiedLength - left.modifiedStart;\n\t\t\t}\n\n\t\t\tmergedChangeArr[0] = new DiffChange(originalStart, originalLength, modifiedStart, modifiedLength);\n\t\t\treturn true;\n\t\t} else {\n\t\t\tmergedChangeArr[0] = null;\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/**\n\t * Helper method used to clip a diagonal index to the range of valid\n\t * diagonals. This also decides whether or not the diagonal index,\n\t * if it exceeds the boundary, should be clipped to the boundary or clipped\n\t * one inside the boundary depending on the Even/Odd status of the boundary\n\t * and numDifferences.\n\t * @param diagonal The index of the diagonal to clip.\n\t * @param numDifferences The current number of differences being iterated upon.\n\t * @param diagonalBaseIndex The base reference diagonal.\n\t * @param numDiagonals The total number of diagonals.\n\t * @returns The clipped diagonal index.\n\t */\n\tprivate ClipDiagonalBound(diagonal: number, numDifferences: number, diagonalBaseIndex: number, numDiagonals: number): number {\n\t\tif (diagonal >= 0 && diagonal < numDiagonals) {\n\t\t\t// Nothing to clip, its in range\n\t\t\treturn diagonal;\n\t\t}\n\n\t\t// diagonalsBelow: The number of diagonals below the reference diagonal\n\t\t// diagonalsAbove: The number of diagonals above the reference diagonal\n\t\tconst diagonalsBelow = diagonalBaseIndex;\n\t\tconst diagonalsAbove = numDiagonals - diagonalBaseIndex - 1;\n\t\tconst diffEven = (numDifferences % 2 === 0);\n\n\t\tif (diagonal < 0) {\n\t\t\tconst lowerBoundEven = (diagonalsBelow % 2 === 0);\n\t\t\treturn (diffEven === lowerBoundEven) ? 0 : 1;\n\t\t} else {\n\t\t\tconst upperBoundEven = (diagonalsAbove % 2 === 0);\n\t\t\treturn (diffEven === upperBoundEven) ? numDiagonals - 1 : numDiagonals - 2;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IIdentityProvider } from 'vs/base/browser/ui/list/list';\nimport { ICollapseStateChangeEvent, ITreeElement, ITreeFilter, ITreeFilterDataResult, ITreeModel, ITreeNode, TreeVisibility, ITreeModelSpliceEvent, TreeError } from 'vs/base/browser/ui/tree/tree';\nimport { tail2 } from 'vs/base/common/arrays';\nimport { LcsDiff } from 'vs/base/common/diff/diff';\nimport { Emitter, Event, EventBufferer } from 'vs/base/common/event';\nimport { Iterable } from 'vs/base/common/iterator';\nimport { ISpliceable } from 'vs/base/common/sequence';\n\n// Exported for tests\nexport interface IIndexTreeNode<T, TFilterData = void> extends ITreeNode<T, TFilterData> {\n\treadonly parent: IIndexTreeNode<T, TFilterData> | undefined;\n\treadonly children: IIndexTreeNode<T, TFilterData>[];\n\tvisibleChildrenCount: number;\n\tvisibleChildIndex: number;\n\tcollapsible: boolean;\n\tcollapsed: boolean;\n\trenderNodeCount: number;\n\tvisibility: TreeVisibility;\n\tvisible: boolean;\n\tfilterData: TFilterData | undefined;\n}\n\nexport function isFilterResult<T>(obj: any): obj is ITreeFilterDataResult<T> {\n\treturn typeof obj === 'object' && 'visibility' in obj && 'data' in obj;\n}\n\nexport function getVisibleState(visibility: boolean | TreeVisibility): TreeVisibility {\n\tswitch (visibility) {\n\t\tcase true: return TreeVisibility.Visible;\n\t\tcase false: return TreeVisibility.Hidden;\n\t\tdefault: return visibility;\n\t}\n}\n\nexport interface IIndexTreeModelOptions<T, TFilterData> {\n\treadonly collapseByDefault?: boolean; // defaults to false\n\treadonly filter?: ITreeFilter<T, TFilterData>;\n\treadonly autoExpandSingleChildren?: boolean;\n}\n\nexport interface IIndexTreeModelSpliceOptions<T, TFilterData> {\n\t/**\n\t * If set, child updates will recurse the given number of levels even if\n\t * items in the splice operation are unchanged. `Infinity` is a valid value.\n\t */\n\treadonly diffDepth?: number;\n\n\t/**\n\t * Identity provider used to optimize splice() calls in the IndexTree. If\n\t * this is not present, optimized splicing is not enabled.\n\t *\n\t * Warning: if this is present, calls to `setChildren()` will not replace\n\t * or update nodes if their identity is the same, even if the elements are\n\t * different. For this, you should call `rerender()`.\n\t */\n\treadonly diffIdentityProvider?: IIdentityProvider<T>;\n\n\t/**\n\t * Callback for when a node is created.\n\t */\n\tonDidCreateNode?: (node: ITreeNode<T, TFilterData>) => void;\n\n\t/**\n\t * Callback for when a node is deleted.\n\t */\n\tonDidDeleteNode?: (node: ITreeNode<T, TFilterData>) => void\n}\n\ninterface CollapsibleStateUpdate {\n\treadonly collapsible: boolean;\n}\n\ninterface CollapsedStateUpdate {\n\treadonly collapsed: boolean;\n\treadonly recursive: boolean;\n}\n\ntype CollapseStateUpdate = CollapsibleStateUpdate | CollapsedStateUpdate;\n\nfunction isCollapsibleStateUpdate(update: CollapseStateUpdate): update is CollapsibleStateUpdate {\n\treturn typeof (update as any).collapsible === 'boolean';\n}\n\nexport interface IList<T> extends ISpliceable<T> {\n\tupdateElementHeight(index: number, height: number): void;\n}\n\nexport class IndexTreeModel<T extends Exclude<any, undefined>, TFilterData = void> implements ITreeModel<T, TFilterData, number[]> {\n\n\treadonly rootRef = [];\n\n\tprivate root: IIndexTreeNode<T, TFilterData>;\n\tprivate eventBufferer = new EventBufferer();\n\n\tprivate readonly _onDidChangeCollapseState = new Emitter<ICollapseStateChangeEvent<T, TFilterData>>();\n\treadonly onDidChangeCollapseState: Event<ICollapseStateChangeEvent<T, TFilterData>> = this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);\n\n\tprivate readonly _onDidChangeRenderNodeCount = new Emitter<ITreeNode<T, TFilterData>>();\n\treadonly onDidChangeRenderNodeCount: Event<ITreeNode<T, TFilterData>> = this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);\n\n\tprivate collapseByDefault: boolean;\n\tprivate filter?: ITreeFilter<T, TFilterData>;\n\tprivate autoExpandSingleChildren: boolean;\n\n\tprivate readonly _onDidSplice = new Emitter<ITreeModelSpliceEvent<T, TFilterData>>();\n\treadonly onDidSplice = this._onDidSplice.event;\n\n\tconstructor(\n\t\tprivate user: string,\n\t\tprivate list: IList<ITreeNode<T, TFilterData>>,\n\t\trootElement: T,\n\t\toptions: IIndexTreeModelOptions<T, TFilterData> = {}\n\t) {\n\t\tthis.collapseByDefault = typeof options.collapseByDefault === 'undefined' ? false : options.collapseByDefault;\n\t\tthis.filter = options.filter;\n\t\tthis.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n\n\t\tthis.root = {\n\t\t\tparent: undefined,\n\t\t\telement: rootElement,\n\t\t\tchildren: [],\n\t\t\tdepth: 0,\n\t\t\tvisibleChildrenCount: 0,\n\t\t\tvisibleChildIndex: -1,\n\t\t\tcollapsible: false,\n\t\t\tcollapsed: false,\n\t\t\trenderNodeCount: 0,\n\t\t\tvisibility: TreeVisibility.Visible,\n\t\t\tvisible: true,\n\t\t\tfilterData: undefined\n\t\t};\n\t}\n\n\tsplice(\n\t\tlocation: number[],\n\t\tdeleteCount: number,\n\t\ttoInsert: Iterable<ITreeElement<T>> = Iterable.empty(),\n\t\toptions: IIndexTreeModelSpliceOptions<T, TFilterData> = {},\n\t): void {\n\t\tif (location.length === 0) {\n\t\t\tthrow new TreeError(this.user, 'Invalid tree location');\n\t\t}\n\n\t\tif (options.diffIdentityProvider) {\n\t\t\tthis.spliceSmart(options.diffIdentityProvider, location, deleteCount, toInsert, options);\n\t\t} else {\n\t\t\tthis.spliceSimple(location, deleteCount, toInsert, options);\n\t\t}\n\t}\n\n\tprivate spliceSmart(\n\t\tidentity: IIdentityProvider<T>,\n\t\tlocation: number[],\n\t\tdeleteCount: number,\n\t\ttoInsertIterable: Iterable<ITreeElement<T>> = Iterable.empty(),\n\t\toptions: IIndexTreeModelSpliceOptions<T, TFilterData>,\n\t\trecurseLevels = options.diffDepth ?? 0,\n\t) {\n\t\tconst { parentNode } = this.getParentNodeWithListIndex(location);\n\t\tconst toInsert = [...toInsertIterable];\n\t\tconst index = location[location.length - 1];\n\t\tconst diff = new LcsDiff(\n\t\t\t{ getElements: () => parentNode.children.map(e => identity.getId(e.element).toString()) },\n\t\t\t{\n\t\t\t\tgetElements: () => [\n\t\t\t\t\t...parentNode.children.slice(0, index),\n\t\t\t\t\t...toInsert,\n\t\t\t\t\t...parentNode.children.slice(index + deleteCount),\n\t\t\t\t].map(e => identity.getId(e.element).toString())\n\t\t\t},\n\t\t).ComputeDiff(false);\n\n\t\t// if we were given a 'best effort' diff, use default behavior\n\t\tif (diff.quitEarly) {\n\t\t\treturn this.spliceSimple(location, deleteCount, toInsert, options);\n\t\t}\n\n\t\tconst locationPrefix = location.slice(0, -1);\n\t\tconst recurseSplice = (fromOriginal: number, fromModified: number, count: number) => {\n\t\t\tif (recurseLevels > 0) {\n\t\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\t\tfromOriginal--;\n\t\t\t\t\tfromModified--;\n\t\t\t\t\tthis.spliceSmart(\n\t\t\t\t\t\tidentity,\n\t\t\t\t\t\t[...locationPrefix, fromOriginal, 0],\n\t\t\t\t\t\tNumber.MAX_SAFE_INTEGER,\n\t\t\t\t\t\ttoInsert[fromModified].children,\n\t\t\t\t\t\toptions,\n\t\t\t\t\t\trecurseLevels - 1,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tlet lastStartO = Math.min(parentNode.children.length, index + deleteCount);\n\t\tlet lastStartM = toInsert.length;\n\t\tfor (const change of diff.changes.sort((a, b) => b.originalStart - a.originalStart)) {\n\t\t\trecurseSplice(lastStartO, lastStartM, lastStartO - (change.originalStart + change.originalLength));\n\t\t\tlastStartO = change.originalStart;\n\t\t\tlastStartM = change.modifiedStart - index;\n\n\t\t\tthis.spliceSimple(\n\t\t\t\t[...locationPrefix, lastStartO],\n\t\t\t\tchange.originalLength,\n\t\t\t\tIterable.slice(toInsert, lastStartM, lastStartM + change.modifiedLength),\n\t\t\t\toptions,\n\t\t\t);\n\t\t}\n\n\t\t// at this point, startO === startM === count since any remaining prefix should match\n\t\trecurseSplice(lastStartO, lastStartM, lastStartO);\n\t}\n\n\tprivate spliceSimple(\n\t\tlocation: number[],\n\t\tdeleteCount: number,\n\t\ttoInsert: Iterable<ITreeElement<T>> = Iterable.empty(),\n\t\t{ onDidCreateNode, onDidDeleteNode }: IIndexTreeModelSpliceOptions<T, TFilterData>,\n\t) {\n\t\tconst { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n\t\tconst treeListElementsToInsert: ITreeNode<T, TFilterData>[] = [];\n\t\tconst nodesToInsertIterator = Iterable.map(toInsert, el => this.createTreeNode(el, parentNode, parentNode.visible ? TreeVisibility.Visible : TreeVisibility.Hidden, revealed, treeListElementsToInsert, onDidCreateNode));\n\n\t\tconst lastIndex = location[location.length - 1];\n\t\tconst lastHadChildren = parentNode.children.length > 0;\n\n\t\t// figure out what's the visible child start index right before the\n\t\t// splice point\n\t\tlet visibleChildStartIndex = 0;\n\n\t\tfor (let i = lastIndex; i >= 0 && i < parentNode.children.length; i--) {\n\t\t\tconst child = parentNode.children[i];\n\n\t\t\tif (child.visible) {\n\t\t\t\tvisibleChildStartIndex = child.visibleChildIndex;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tconst nodesToInsert: IIndexTreeNode<T, TFilterData>[] = [];\n\t\tlet insertedVisibleChildrenCount = 0;\n\t\tlet renderNodeCount = 0;\n\n\t\tfor (const child of nodesToInsertIterator) {\n\t\t\tnodesToInsert.push(child);\n\t\t\trenderNodeCount += child.renderNodeCount;\n\n\t\t\tif (child.visible) {\n\t\t\t\tchild.visibleChildIndex = visibleChildStartIndex + insertedVisibleChildrenCount++;\n\t\t\t}\n\t\t}\n\n\t\tconst deletedNodes = parentNode.children.splice(lastIndex, deleteCount, ...nodesToInsert);\n\n\t\t// figure out what is the count of deleted visible children\n\t\tlet deletedVisibleChildrenCount = 0;\n\n\t\tfor (const child of deletedNodes) {\n\t\t\tif (child.visible) {\n\t\t\t\tdeletedVisibleChildrenCount++;\n\t\t\t}\n\t\t}\n\n\t\t// and adjust for all visible children after the splice point\n\t\tif (deletedVisibleChildrenCount !== 0) {\n\t\t\tfor (let i = lastIndex + nodesToInsert.length; i < parentNode.children.length; i++) {\n\t\t\t\tconst child = parentNode.children[i];\n\n\t\t\t\tif (child.visible) {\n\t\t\t\t\tchild.visibleChildIndex -= deletedVisibleChildrenCount;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// update parent's visible children count\n\t\tparentNode.visibleChildrenCount += insertedVisibleChildrenCount - deletedVisibleChildrenCount;\n\n\t\tif (revealed && visible) {\n\t\t\tconst visibleDeleteCount = deletedNodes.reduce((r, node) => r + (node.visible ? node.renderNodeCount : 0), 0);\n\n\t\t\tthis._updateAncestorsRenderNodeCount(parentNode, renderNodeCount - visibleDeleteCount);\n\t\t\tthis.list.splice(listIndex, visibleDeleteCount, treeListElementsToInsert);\n\t\t}\n\n\t\tif (deletedNodes.length > 0 && onDidDeleteNode) {\n\t\t\tconst visit = (node: ITreeNode<T, TFilterData>) => {\n\t\t\t\tonDidDeleteNode(node);\n\t\t\t\tnode.children.forEach(visit);\n\t\t\t};\n\n\t\t\tdeletedNodes.forEach(visit);\n\t\t}\n\n\t\tconst currentlyHasChildren = parentNode.children.length > 0;\n\t\tif (lastHadChildren !== currentlyHasChildren) {\n\t\t\tthis.setCollapsible(location.slice(0, -1), currentlyHasChildren);\n\t\t}\n\n\t\tthis._onDidSplice.fire({ insertedNodes: nodesToInsert, deletedNodes });\n\n\t\tlet node: IIndexTreeNode<T, TFilterData> | undefined = parentNode;\n\n\t\twhile (node) {\n\t\t\tif (node.visibility === TreeVisibility.Recurse) {\n\t\t\t\tthis.refilter();\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tnode = node.parent;\n\t\t}\n\t}\n\n\trerender(location: number[]): void {\n\t\tif (location.length === 0) {\n\t\t\tthrow new TreeError(this.user, 'Invalid tree location');\n\t\t}\n\n\t\tconst { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n\n\t\tif (node.visible && revealed) {\n\t\t\tthis.list.splice(listIndex, 1, [node]);\n\t\t}\n\t}\n\n\tupdateElementHeight(location: number[], height: number): void {\n\t\tif (location.length === 0) {\n\t\t\tthrow new TreeError(this.user, 'Invalid tree location');\n\t\t}\n\n\t\tconst { listIndex } = this.getTreeNodeWithListIndex(location);\n\t\tthis.list.updateElementHeight(listIndex, height);\n\t}\n\n\thas(location: number[]): boolean {\n\t\treturn this.hasTreeNode(location);\n\t}\n\n\tgetListIndex(location: number[]): number {\n\t\tconst { listIndex, visible, revealed } = this.getTreeNodeWithListIndex(location);\n\t\treturn visible && revealed ? listIndex : -1;\n\t}\n\n\tgetListRenderCount(location: number[]): number {\n\t\treturn this.getTreeNode(location).renderNodeCount;\n\t}\n\n\tisCollapsible(location: number[]): boolean {\n\t\treturn this.getTreeNode(location).collapsible;\n\t}\n\n\tsetCollapsible(location: number[], collapsible?: boolean): boolean {\n\t\tconst node = this.getTreeNode(location);\n\n\t\tif (typeof collapsible === 'undefined') {\n\t\t\tcollapsible = !node.collapsible;\n\t\t}\n\n\t\tconst update: CollapsibleStateUpdate = { collapsible };\n\t\treturn this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n\t}\n\n\tisCollapsed(location: number[]): boolean {\n\t\treturn this.getTreeNode(location).collapsed;\n\t}\n\n\tsetCollapsed(location: number[], collapsed?: boolean, recursive?: boolean): boolean {\n\t\tconst node = this.getTreeNode(location);\n\n\t\tif (typeof collapsed === 'undefined') {\n\t\t\tcollapsed = !node.collapsed;\n\t\t}\n\n\t\tconst update: CollapsedStateUpdate = { collapsed, recursive: recursive || false };\n\t\treturn this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n\t}\n\n\tprivate _setCollapseState(location: number[], update: CollapseStateUpdate): boolean {\n\t\tconst { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n\n\t\tconst result = this._setListNodeCollapseState(node, listIndex, revealed, update);\n\n\t\tif (node !== this.root && this.autoExpandSingleChildren && result && !isCollapsibleStateUpdate(update) && node.collapsible && !node.collapsed && !update.recursive) {\n\t\t\tlet onlyVisibleChildIndex = -1;\n\n\t\t\tfor (let i = 0; i < node.children.length; i++) {\n\t\t\t\tconst child = node.children[i];\n\n\t\t\t\tif (child.visible) {\n\t\t\t\t\tif (onlyVisibleChildIndex > -1) {\n\t\t\t\t\t\tonlyVisibleChildIndex = -1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonlyVisibleChildIndex = i;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (onlyVisibleChildIndex > -1) {\n\t\t\t\tthis._setCollapseState([...location, onlyVisibleChildIndex], update);\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tprivate _setListNodeCollapseState(node: IIndexTreeNode<T, TFilterData>, listIndex: number, revealed: boolean, update: CollapseStateUpdate): boolean {\n\t\tconst result = this._setNodeCollapseState(node, update, false);\n\n\t\tif (!revealed || !node.visible || !result) {\n\t\t\treturn result;\n\t\t}\n\n\t\tconst previousRenderNodeCount = node.renderNodeCount;\n\t\tconst toInsert = this.updateNodeAfterCollapseChange(node);\n\t\tconst deleteCount = previousRenderNodeCount - (listIndex === -1 ? 0 : 1);\n\t\tthis.list.splice(listIndex + 1, deleteCount, toInsert.slice(1));\n\n\t\treturn result;\n\t}\n\n\tprivate _setNodeCollapseState(node: IIndexTreeNode<T, TFilterData>, update: CollapseStateUpdate, deep: boolean): boolean {\n\t\tlet result: boolean;\n\n\t\tif (node === this.root) {\n\t\t\tresult = false;\n\t\t} else {\n\t\t\tif (isCollapsibleStateUpdate(update)) {\n\t\t\t\tresult = node.collapsible !== update.collapsible;\n\t\t\t\tnode.collapsible = update.collapsible;\n\t\t\t} else if (!node.collapsible) {\n\t\t\t\tresult = false;\n\t\t\t} else {\n\t\t\t\tresult = node.collapsed !== update.collapsed;\n\t\t\t\tnode.collapsed = update.collapsed;\n\t\t\t}\n\n\t\t\tif (result) {\n\t\t\t\tthis._onDidChangeCollapseState.fire({ node, deep });\n\t\t\t}\n\t\t}\n\n\t\tif (!isCollapsibleStateUpdate(update) && update.recursive) {\n\t\t\tfor (const child of node.children) {\n\t\t\t\tresult = this._setNodeCollapseState(child, update, true) || result;\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}\n\n\texpandTo(location: number[]): void {\n\t\tthis.eventBufferer.bufferEvents(() => {\n\t\t\tlet node = this.getTreeNode(location);\n\n\t\t\twhile (node.parent) {\n\t\t\t\tnode = node.parent;\n\t\t\t\tlocation = location.slice(0, location.length - 1);\n\n\t\t\t\tif (node.collapsed) {\n\t\t\t\t\tthis._setCollapseState(location, { collapsed: false, recursive: false });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\trefilter(): void {\n\t\tconst previousRenderNodeCount = this.root.renderNodeCount;\n\t\tconst toInsert = this.updateNodeAfterFilterChange(this.root);\n\t\tthis.list.splice(0, previousRenderNodeCount, toInsert);\n\t}\n\n\tprivate createTreeNode(\n\t\ttreeElement: ITreeElement<T>,\n\t\tparent: IIndexTreeNode<T, TFilterData>,\n\t\tparentVisibility: TreeVisibility,\n\t\trevealed: boolean,\n\t\ttreeListElements: ITreeNode<T, TFilterData>[],\n\t\tonDidCreateNode?: (node: ITreeNode<T, TFilterData>) => void\n\t): IIndexTreeNode<T, TFilterData> {\n\t\tconst node: IIndexTreeNode<T, TFilterData> = {\n\t\t\tparent,\n\t\t\telement: treeElement.element,\n\t\t\tchildren: [],\n\t\t\tdepth: parent.depth + 1,\n\t\t\tvisibleChildrenCount: 0,\n\t\t\tvisibleChildIndex: -1,\n\t\t\tcollapsible: typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : (typeof treeElement.collapsed !== 'undefined'),\n\t\t\tcollapsed: typeof treeElement.collapsed === 'undefined' ? this.collapseByDefault : treeElement.collapsed,\n\t\t\trenderNodeCount: 1,\n\t\t\tvisibility: TreeVisibility.Visible,\n\t\t\tvisible: true,\n\t\t\tfilterData: undefined\n\t\t};\n\n\t\tconst visibility = this._filterNode(node, parentVisibility);\n\t\tnode.visibility = visibility;\n\n\t\tif (revealed) {\n\t\t\ttreeListElements.push(node);\n\t\t}\n\n\t\tconst childElements = treeElement.children || Iterable.empty();\n\t\tconst childRevealed = revealed && visibility !== TreeVisibility.Hidden && !node.collapsed;\n\t\tconst childNodes = Iterable.map(childElements, el => this.createTreeNode(el, node, visibility, childRevealed, treeListElements, onDidCreateNode));\n\n\t\tlet visibleChildrenCount = 0;\n\t\tlet renderNodeCount = 1;\n\n\t\tfor (const child of childNodes) {\n\t\t\tnode.children.push(child);\n\t\t\trenderNodeCount += child.renderNodeCount;\n\n\t\t\tif (child.visible) {\n\t\t\t\tchild.visibleChildIndex = visibleChildrenCount++;\n\t\t\t}\n\t\t}\n\n\t\tnode.collapsible = node.collapsible || node.children.length > 0;\n\t\tnode.visibleChildrenCount = visibleChildrenCount;\n\t\tnode.visible = visibility === TreeVisibility.Recurse ? visibleChildrenCount > 0 : (visibility === TreeVisibility.Visible);\n\n\t\tif (!node.visible) {\n\t\t\tnode.renderNodeCount = 0;\n\n\t\t\tif (revealed) {\n\t\t\t\ttreeListElements.pop();\n\t\t\t}\n\t\t} else if (!node.collapsed) {\n\t\t\tnode.renderNodeCount = renderNodeCount;\n\t\t}\n\n\t\tif (onDidCreateNode) {\n\t\t\tonDidCreateNode(node);\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tprivate updateNodeAfterCollapseChange(node: IIndexTreeNode<T, TFilterData>): ITreeNode<T, TFilterData>[] {\n\t\tconst previousRenderNodeCount = node.renderNodeCount;\n\t\tconst result: ITreeNode<T, TFilterData>[] = [];\n\n\t\tthis._updateNodeAfterCollapseChange(node, result);\n\t\tthis._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n\n\t\treturn result;\n\t}\n\n\tprivate _updateNodeAfterCollapseChange(node: IIndexTreeNode<T, TFilterData>, result: ITreeNode<T, TFilterData>[]): number {\n\t\tif (node.visible === false) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tresult.push(node);\n\t\tnode.renderNodeCount = 1;\n\n\t\tif (!node.collapsed) {\n\t\t\tfor (const child of node.children) {\n\t\t\t\tnode.renderNodeCount += this._updateNodeAfterCollapseChange(child, result);\n\t\t\t}\n\t\t}\n\n\t\tthis._onDidChangeRenderNodeCount.fire(node);\n\t\treturn node.renderNodeCount;\n\t}\n\n\tprivate updateNodeAfterFilterChange(node: IIndexTreeNode<T, TFilterData>): ITreeNode<T, TFilterData>[] {\n\t\tconst previousRenderNodeCount = node.renderNodeCount;\n\t\tconst result: ITreeNode<T, TFilterData>[] = [];\n\n\t\tthis._updateNodeAfterFilterChange(node, node.visible ? TreeVisibility.Visible : TreeVisibility.Hidden, result);\n\t\tthis._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n\n\t\treturn result;\n\t}\n\n\tprivate _updateNodeAfterFilterChange(node: IIndexTreeNode<T, TFilterData>, parentVisibility: TreeVisibility, result: ITreeNode<T, TFilterData>[], revealed = true): boolean {\n\t\tlet visibility: TreeVisibility;\n\n\t\tif (node !== this.root) {\n\t\t\tvisibility = this._filterNode(node, parentVisibility);\n\n\t\t\tif (visibility === TreeVisibility.Hidden) {\n\t\t\t\tnode.visible = false;\n\t\t\t\tnode.renderNodeCount = 0;\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (revealed) {\n\t\t\t\tresult.push(node);\n\t\t\t}\n\t\t}\n\n\t\tconst resultStartLength = result.length;\n\t\tnode.renderNodeCount = node === this.root ? 0 : 1;\n\n\t\tlet hasVisibleDescendants = false;\n\t\tif (!node.collapsed || visibility! !== TreeVisibility.Hidden) {\n\t\t\tlet visibleChildIndex = 0;\n\n\t\t\tfor (const child of node.children) {\n\t\t\t\thasVisibleDescendants = this._updateNodeAfterFilterChange(child, visibility!, result, revealed && !node.collapsed) || hasVisibleDescendants;\n\n\t\t\t\tif (child.visible) {\n\t\t\t\t\tchild.visibleChildIndex = visibleChildIndex++;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnode.visibleChildrenCount = visibleChildIndex;\n\t\t} else {\n\t\t\tnode.visibleChildrenCount = 0;\n\t\t}\n\n\t\tif (node !== this.root) {\n\t\t\tnode.visible = visibility! === TreeVisibility.Recurse ? hasVisibleDescendants : (visibility! === TreeVisibility.Visible);\n\t\t}\n\n\t\tif (!node.visible) {\n\t\t\tnode.renderNodeCount = 0;\n\n\t\t\tif (revealed) {\n\t\t\t\tresult.pop();\n\t\t\t}\n\t\t} else if (!node.collapsed) {\n\t\t\tnode.renderNodeCount += result.length - resultStartLength;\n\t\t}\n\n\t\tthis._onDidChangeRenderNodeCount.fire(node);\n\t\treturn node.visible;\n\t}\n\n\tprivate _updateAncestorsRenderNodeCount(node: IIndexTreeNode<T, TFilterData> | undefined, diff: number): void {\n\t\tif (diff === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\twhile (node) {\n\t\t\tnode.renderNodeCount += diff;\n\t\t\tthis._onDidChangeRenderNodeCount.fire(node);\n\t\t\tnode = node.parent;\n\t\t}\n\t}\n\n\tprivate _filterNode(node: IIndexTreeNode<T, TFilterData>, parentVisibility: TreeVisibility): TreeVisibility {\n\t\tconst result = this.filter ? this.filter.filter(node.element, parentVisibility) : TreeVisibility.Visible;\n\n\t\tif (typeof result === 'boolean') {\n\t\t\tnode.filterData = undefined;\n\t\t\treturn result ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t} else if (isFilterResult<TFilterData>(result)) {\n\t\t\tnode.filterData = result.data;\n\t\t\treturn getVisibleState(result.visibility);\n\t\t} else {\n\t\t\tnode.filterData = undefined;\n\t\t\treturn getVisibleState(result);\n\t\t}\n\t}\n\n\t// cheap\n\tprivate hasTreeNode(location: number[], node: IIndexTreeNode<T, TFilterData> = this.root): boolean {\n\t\tif (!location || location.length === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst [index, ...rest] = location;\n\n\t\tif (index < 0 || index > node.children.length) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn this.hasTreeNode(rest, node.children[index]);\n\t}\n\n\t// cheap\n\tprivate getTreeNode(location: number[], node: IIndexTreeNode<T, TFilterData> = this.root): IIndexTreeNode<T, TFilterData> {\n\t\tif (!location || location.length === 0) {\n\t\t\treturn node;\n\t\t}\n\n\t\tconst [index, ...rest] = location;\n\n\t\tif (index < 0 || index > node.children.length) {\n\t\t\tthrow new TreeError(this.user, 'Invalid tree location');\n\t\t}\n\n\t\treturn this.getTreeNode(rest, node.children[index]);\n\t}\n\n\t// expensive\n\tprivate getTreeNodeWithListIndex(location: number[]): { node: IIndexTreeNode<T, TFilterData>, listIndex: number, revealed: boolean, visible: boolean } {\n\t\tif (location.length === 0) {\n\t\t\treturn { node: this.root, listIndex: -1, revealed: true, visible: false };\n\t\t}\n\n\t\tconst { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n\t\tconst index = location[location.length - 1];\n\n\t\tif (index < 0 || index > parentNode.children.length) {\n\t\t\tthrow new TreeError(this.user, 'Invalid tree location');\n\t\t}\n\n\t\tconst node = parentNode.children[index];\n\n\t\treturn { node, listIndex, revealed, visible: visible && node.visible };\n\t}\n\n\tprivate getParentNodeWithListIndex(location: number[], node: IIndexTreeNode<T, TFilterData> = this.root, listIndex: number = 0, revealed = true, visible = true): { parentNode: IIndexTreeNode<T, TFilterData>; listIndex: number; revealed: boolean; visible: boolean; } {\n\t\tconst [index, ...rest] = location;\n\n\t\tif (index < 0 || index > node.children.length) {\n\t\t\tthrow new TreeError(this.user, 'Invalid tree location');\n\t\t}\n\n\t\t// TODO@joao perf!\n\t\tfor (let i = 0; i < index; i++) {\n\t\t\tlistIndex += node.children[i].renderNodeCount;\n\t\t}\n\n\t\trevealed = revealed && !node.collapsed;\n\t\tvisible = visible && node.visible;\n\n\t\tif (rest.length === 0) {\n\t\t\treturn { parentNode: node, listIndex, revealed, visible };\n\t\t}\n\n\t\treturn this.getParentNodeWithListIndex(rest, node.children[index], listIndex + 1, revealed, visible);\n\t}\n\n\tgetNode(location: number[] = []): ITreeNode<T, TFilterData> {\n\t\treturn this.getTreeNode(location);\n\t}\n\n\t// TODO@joao perf!\n\tgetNodeLocation(node: ITreeNode<T, TFilterData>): number[] {\n\t\tconst location: number[] = [];\n\t\tlet indexTreeNode = node as IIndexTreeNode<T, TFilterData>; // typing woes\n\n\t\twhile (indexTreeNode.parent) {\n\t\t\tlocation.push(indexTreeNode.parent.children.indexOf(indexTreeNode));\n\t\t\tindexTreeNode = indexTreeNode.parent;\n\t\t}\n\n\t\treturn location.reverse();\n\t}\n\n\tgetParentNodeLocation(location: number[]): number[] | undefined {\n\t\tif (location.length === 0) {\n\t\t\treturn undefined;\n\t\t} else if (location.length === 1) {\n\t\t\treturn [];\n\t\t} else {\n\t\t\treturn tail2(location)[0];\n\t\t}\n\t}\n\n\tgetFirstElementChild(location: number[]): T | undefined {\n\t\tconst node = this.getTreeNode(location);\n\n\t\tif (node.children.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn node.children[0].element;\n\t}\n\n\tgetLastElementAncestor(location: number[] = []): T | undefined {\n\t\tconst node = this.getTreeNode(location);\n\n\t\tif (node.children.length === 0) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn this._getLastElementAncestor(node);\n\t}\n\n\tprivate _getLastElementAncestor(node: ITreeNode<T, TFilterData>): T {\n\t\tif (node.children.length === 0) {\n\t\t\treturn node.element;\n\t\t}\n\n\t\treturn this._getLastElementAncestor(node.children[node.children.length - 1]);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Iterable } from 'vs/base/common/iterator';\nimport { IndexTreeModel, IIndexTreeModelOptions, IList, IIndexTreeModelSpliceOptions } from 'vs/base/browser/ui/tree/indexTreeModel';\nimport { Event } from 'vs/base/common/event';\nimport { ITreeModel, ITreeNode, ITreeElement, ITreeSorter, ICollapseStateChangeEvent, ITreeModelSpliceEvent, TreeError } from 'vs/base/browser/ui/tree/tree';\nimport { IIdentityProvider } from 'vs/base/browser/ui/list/list';\n\nexport type ITreeNodeCallback<T, TFilterData> = (node: ITreeNode<T, TFilterData>) => void;\n\nexport interface IObjectTreeModel<T extends NonNullable<any>, TFilterData extends NonNullable<any> = void> extends ITreeModel<T | null, TFilterData, T | null> {\n\tsetChildren(element: T | null, children: Iterable<ITreeElement<T>> | undefined, options?: IObjectTreeModelSetChildrenOptions<T, TFilterData>): void;\n\tresort(element?: T | null, recursive?: boolean): void;\n\tupdateElementHeight(element: T, height: number): void;\n}\n\nexport interface IObjectTreeModelSetChildrenOptions<T, TFilterData> extends IIndexTreeModelSpliceOptions<T, TFilterData> {\n}\n\nexport interface IObjectTreeModelOptions<T, TFilterData> extends IIndexTreeModelOptions<T, TFilterData> {\n\treadonly sorter?: ITreeSorter<T>;\n\treadonly identityProvider?: IIdentityProvider<T>;\n}\n\nexport class ObjectTreeModel<T extends NonNullable<any>, TFilterData extends NonNullable<any> = void> implements IObjectTreeModel<T, TFilterData> {\n\n\treadonly rootRef = null;\n\n\tprivate model: IndexTreeModel<T | null, TFilterData>;\n\tprivate nodes = new Map<T | null, ITreeNode<T, TFilterData>>();\n\tprivate readonly nodesByIdentity = new Map<string, ITreeNode<T, TFilterData>>();\n\tprivate readonly identityProvider?: IIdentityProvider<T>;\n\tprivate sorter?: ITreeSorter<{ element: T; }>;\n\n\treadonly onDidSplice: Event<ITreeModelSpliceEvent<T | null, TFilterData>>;\n\treadonly onDidChangeCollapseState: Event<ICollapseStateChangeEvent<T, TFilterData>>;\n\treadonly onDidChangeRenderNodeCount: Event<ITreeNode<T, TFilterData>>;\n\n\tget size(): number { return this.nodes.size; }\n\n\tconstructor(\n\t\tprivate user: string,\n\t\tlist: IList<ITreeNode<T, TFilterData>>,\n\t\toptions: IObjectTreeModelOptions<T, TFilterData> = {}\n\t) {\n\t\tthis.model = new IndexTreeModel(user, list, null, options);\n\t\tthis.onDidSplice = this.model.onDidSplice;\n\t\tthis.onDidChangeCollapseState = this.model.onDidChangeCollapseState as Event<ICollapseStateChangeEvent<T, TFilterData>>;\n\t\tthis.onDidChangeRenderNodeCount = this.model.onDidChangeRenderNodeCount as Event<ITreeNode<T, TFilterData>>;\n\n\t\tif (options.sorter) {\n\t\t\tthis.sorter = {\n\t\t\t\tcompare(a, b) {\n\t\t\t\t\treturn options.sorter!.compare(a.element, b.element);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tthis.identityProvider = options.identityProvider;\n\t}\n\n\tsetChildren(\n\t\telement: T | null,\n\t\tchildren: Iterable<ITreeElement<T>> = Iterable.empty(),\n\t\toptions: IObjectTreeModelSetChildrenOptions<T, TFilterData> = {},\n\t): void {\n\t\tconst location = this.getElementLocation(element);\n\t\tthis._setChildren(location, this.preserveCollapseState(children), options);\n\t}\n\n\tprivate _setChildren(\n\t\tlocation: number[],\n\t\tchildren: Iterable<ITreeElement<T>> = Iterable.empty(),\n\t\toptions: IObjectTreeModelSetChildrenOptions<T, TFilterData>,\n\t): void {\n\t\tconst insertedElements = new Set<T | null>();\n\t\tconst insertedElementIds = new Set<string>();\n\n\t\tconst onDidCreateNode = (node: ITreeNode<T | null, TFilterData>) => {\n\t\t\tif (node.element === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst tnode = node as ITreeNode<T, TFilterData>;\n\n\t\t\tinsertedElements.add(tnode.element);\n\t\t\tthis.nodes.set(tnode.element, tnode);\n\n\t\t\tif (this.identityProvider) {\n\t\t\t\tconst id = this.identityProvider.getId(tnode.element).toString();\n\t\t\t\tinsertedElementIds.add(id);\n\t\t\t\tthis.nodesByIdentity.set(id, tnode);\n\t\t\t}\n\n\t\t\toptions.onDidCreateNode?.(tnode);\n\t\t};\n\n\t\tconst onDidDeleteNode = (node: ITreeNode<T | null, TFilterData>) => {\n\t\t\tif (node.element === null) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst tnode = node as ITreeNode<T, TFilterData>;\n\n\t\t\tif (!insertedElements.has(tnode.element)) {\n\t\t\t\tthis.nodes.delete(tnode.element);\n\t\t\t}\n\n\t\t\tif (this.identityProvider) {\n\t\t\t\tconst id = this.identityProvider.getId(tnode.element).toString();\n\t\t\t\tif (!insertedElementIds.has(id)) {\n\t\t\t\t\tthis.nodesByIdentity.delete(id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\toptions.onDidDeleteNode?.(tnode);\n\t\t};\n\n\t\tthis.model.splice(\n\t\t\t[...location, 0],\n\t\t\tNumber.MAX_VALUE,\n\t\t\tchildren,\n\t\t\t{ ...options, onDidCreateNode, onDidDeleteNode }\n\t\t);\n\t}\n\n\tprivate preserveCollapseState(elements: Iterable<ITreeElement<T>> = Iterable.empty()): Iterable<ITreeElement<T>> {\n\t\tif (this.sorter) {\n\t\t\telements = [...elements].sort(this.sorter.compare.bind(this.sorter));\n\t\t}\n\n\t\treturn Iterable.map(elements, treeElement => {\n\t\t\tlet node = this.nodes.get(treeElement.element);\n\n\t\t\tif (!node && this.identityProvider) {\n\t\t\t\tconst id = this.identityProvider.getId(treeElement.element).toString();\n\t\t\t\tnode = this.nodesByIdentity.get(id);\n\t\t\t}\n\n\t\t\tif (!node) {\n\t\t\t\treturn {\n\t\t\t\t\t...treeElement,\n\t\t\t\t\tchildren: this.preserveCollapseState(treeElement.children)\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tconst collapsible = typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : node.collapsible;\n\t\t\tconst collapsed = typeof treeElement.collapsed !== 'undefined' ? treeElement.collapsed : node.collapsed;\n\n\t\t\treturn {\n\t\t\t\t...treeElement,\n\t\t\t\tcollapsible,\n\t\t\t\tcollapsed,\n\t\t\t\tchildren: this.preserveCollapseState(treeElement.children)\n\t\t\t};\n\t\t});\n\t}\n\n\trerender(element: T | null): void {\n\t\tconst location = this.getElementLocation(element);\n\t\tthis.model.rerender(location);\n\t}\n\n\tupdateElementHeight(element: T, height: number): void {\n\t\tconst location = this.getElementLocation(element);\n\t\tthis.model.updateElementHeight(location, height);\n\t}\n\n\tresort(element: T | null = null, recursive = true): void {\n\t\tif (!this.sorter) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst location = this.getElementLocation(element);\n\t\tconst node = this.model.getNode(location);\n\n\t\tthis._setChildren(location, this.resortChildren(node, recursive), {});\n\t}\n\n\tprivate resortChildren(node: ITreeNode<T | null, TFilterData>, recursive: boolean, first = true): Iterable<ITreeElement<T>> {\n\t\tlet childrenNodes = [...node.children] as ITreeNode<T, TFilterData>[];\n\n\t\tif (recursive || first) {\n\t\t\tchildrenNodes = childrenNodes.sort(this.sorter!.compare.bind(this.sorter));\n\t\t}\n\n\t\treturn Iterable.map<ITreeNode<T | null, TFilterData>, ITreeElement<T>>(childrenNodes, node => ({\n\t\t\telement: node.element as T,\n\t\t\tcollapsible: node.collapsible,\n\t\t\tcollapsed: node.collapsed,\n\t\t\tchildren: this.resortChildren(node, recursive, false)\n\t\t}));\n\t}\n\n\tgetFirstElementChild(ref: T | null = null): T | null | undefined {\n\t\tconst location = this.getElementLocation(ref);\n\t\treturn this.model.getFirstElementChild(location);\n\t}\n\n\tgetLastElementAncestor(ref: T | null = null): T | null | undefined {\n\t\tconst location = this.getElementLocation(ref);\n\t\treturn this.model.getLastElementAncestor(location);\n\t}\n\n\thas(element: T | null): boolean {\n\t\treturn this.nodes.has(element);\n\t}\n\n\tgetListIndex(element: T | null): number {\n\t\tconst location = this.getElementLocation(element);\n\t\treturn this.model.getListIndex(location);\n\t}\n\n\tgetListRenderCount(element: T | null): number {\n\t\tconst location = this.getElementLocation(element);\n\t\treturn this.model.getListRenderCount(location);\n\t}\n\n\tisCollapsible(element: T | null): boolean {\n\t\tconst location = this.getElementLocation(element);\n\t\treturn this.model.isCollapsible(location);\n\t}\n\n\tsetCollapsible(element: T | null, collapsible?: boolean): boolean {\n\t\tconst location = this.getElementLocation(element);\n\t\treturn this.model.setCollapsible(location, collapsible);\n\t}\n\n\tisCollapsed(element: T | null): boolean {\n\t\tconst location = this.getElementLocation(element);\n\t\treturn this.model.isCollapsed(location);\n\t}\n\n\tsetCollapsed(element: T | null, collapsed?: boolean, recursive?: boolean): boolean {\n\t\tconst location = this.getElementLocation(element);\n\t\treturn this.model.setCollapsed(location, collapsed, recursive);\n\t}\n\n\texpandTo(element: T | null): void {\n\t\tconst location = this.getElementLocation(element);\n\t\tthis.model.expandTo(location);\n\t}\n\n\trefilter(): void {\n\t\tthis.model.refilter();\n\t}\n\n\tgetNode(element: T | null = null): ITreeNode<T | null, TFilterData> {\n\t\tif (element === null) {\n\t\t\treturn this.model.getNode(this.model.rootRef);\n\t\t}\n\n\t\tconst node = this.nodes.get(element);\n\n\t\tif (!node) {\n\t\t\tthrow new TreeError(this.user, `Tree element not found: ${element}`);\n\t\t}\n\n\t\treturn node;\n\t}\n\n\tgetNodeLocation(node: ITreeNode<T, TFilterData>): T | null {\n\t\treturn node.element;\n\t}\n\n\tgetParentNodeLocation(element: T | null): T | null {\n\t\tif (element === null) {\n\t\t\tthrow new TreeError(this.user, `Invalid getParentNodeLocation call`);\n\t\t}\n\n\t\tconst node = this.nodes.get(element);\n\n\t\tif (!node) {\n\t\t\tthrow new TreeError(this.user, `Tree element not found: ${element}`);\n\t\t}\n\n\t\tconst location = this.model.getNodeLocation(node);\n\t\tconst parentLocation = this.model.getParentNodeLocation(location);\n\t\tconst parent = this.model.getNode(parentLocation);\n\n\t\treturn parent.element;\n\t}\n\n\tprivate getElementLocation(element: T | null): number[] {\n\t\tif (element === null) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst node = this.nodes.get(element);\n\n\t\tif (!node) {\n\t\t\tthrow new TreeError(this.user, `Tree element not found: ${element}`);\n\t\t}\n\n\t\treturn this.model.getNodeLocation(node);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriComponents } from 'vs/base/common/uri';\n\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n\treturn Array.isArray(array);\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript String or not.\n */\nexport function isString(str: unknown): str is string {\n\treturn (typeof str === 'string');\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Array and each element in the array is a string.\n */\nexport function isStringArray(value: unknown): value is string[] {\n\treturn Array.isArray(value) && (<unknown[]>value).every(elem => isString(elem));\n}\n\n/**\n *\n * @returns whether the provided parameter is of type `object` but **not**\n *\t`null`, an `array`, a `regexp`, nor a `date`.\n */\nexport function isObject(obj: unknown): obj is Object {\n\t// The method can't do a type cast since there are type (like strings) which\n\t// are subclasses of any put not positvely matched by the function. Hence type\n\t// narrowing results in wrong results.\n\treturn typeof obj === 'object'\n\t\t&& obj !== null\n\t\t&& !Array.isArray(obj)\n\t\t&& !(obj instanceof RegExp)\n\t\t&& !(obj instanceof Date);\n}\n\n/**\n * In **contrast** to just checking `typeof` this will return `false` for `NaN`.\n * @returns whether the provided parameter is a JavaScript Number or not.\n */\nexport function isNumber(obj: unknown): obj is number {\n\treturn (typeof obj === 'number' && !isNaN(obj));\n}\n\n/**\n * @returns whether the provided parameter is an Iterable, casting to the given generic\n */\nexport function isIterable<T>(obj: unknown): obj is Iterable<T> {\n\treturn !!obj && typeof (obj as any)[Symbol.iterator] === 'function';\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Boolean or not.\n */\nexport function isBoolean(obj: unknown): obj is boolean {\n\treturn (obj === true || obj === false);\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: unknown): obj is undefined {\n\treturn (typeof obj === 'undefined');\n}\n\n/**\n * @returns whether the provided parameter is defined.\n */\nexport function isDefined<T>(arg: T | null | undefined): arg is T {\n\treturn !isUndefinedOrNull(arg);\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: unknown): obj is undefined | null {\n\treturn (isUndefined(obj) || obj === null);\n}\n\n\nexport function assertType(condition: unknown, type?: string): asserts condition {\n\tif (!condition) {\n\t\tthrow new Error(type ? `Unexpected type, expected '${type}'` : 'Unexpected type');\n\t}\n}\n\n/**\n * Asserts that the argument passed in is neither undefined nor null.\n */\nexport function assertIsDefined<T>(arg: T | null | undefined): T {\n\tif (isUndefinedOrNull(arg)) {\n\t\tthrow new Error('Assertion Failed: argument is undefined or null');\n\t}\n\n\treturn arg;\n}\n\n/**\n * Asserts that each argument passed in is neither undefined nor null.\n */\nexport function assertAllDefined<T1, T2>(t1: T1 | null | undefined, t2: T2 | null | undefined): [T1, T2];\nexport function assertAllDefined<T1, T2, T3>(t1: T1 | null | undefined, t2: T2 | null | undefined, t3: T3 | null | undefined): [T1, T2, T3];\nexport function assertAllDefined<T1, T2, T3, T4>(t1: T1 | null | undefined, t2: T2 | null | undefined, t3: T3 | null | undefined, t4: T4 | null | undefined): [T1, T2, T3, T4];\nexport function assertAllDefined(...args: (unknown | null | undefined)[]): unknown[] {\n\tconst result = [];\n\n\tfor (let i = 0; i < args.length; i++) {\n\t\tconst arg = args[i];\n\n\t\tif (isUndefinedOrNull(arg)) {\n\t\t\tthrow new Error(`Assertion Failed: argument at index ${i} is undefined or null`);\n\t\t}\n\n\t\tresult.push(arg);\n\t}\n\n\treturn result;\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * @returns whether the provided parameter is an empty JavaScript Object or not.\n */\nexport function isEmptyObject(obj: unknown): obj is object {\n\tif (!isObject(obj)) {\n\t\treturn false;\n\t}\n\n\tfor (let key in obj) {\n\t\tif (hasOwnProperty.call(obj, key)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Function or not.\n */\nexport function isFunction(obj: unknown): obj is Function {\n\treturn (typeof obj === 'function');\n}\n\n/**\n * @returns whether the provided parameters is are JavaScript Function or not.\n */\nexport function areFunctions(...objects: unknown[]): boolean {\n\treturn objects.length > 0 && objects.every(isFunction);\n}\n\nexport type TypeConstraint = string | Function;\n\nexport function validateConstraints(args: unknown[], constraints: Array<TypeConstraint | undefined>): void {\n\tconst len = Math.min(args.length, constraints.length);\n\tfor (let i = 0; i < len; i++) {\n\t\tvalidateConstraint(args[i], constraints[i]);\n\t}\n}\n\nexport function validateConstraint(arg: unknown, constraint: TypeConstraint | undefined): void {\n\n\tif (isString(constraint)) {\n\t\tif (typeof arg !== constraint) {\n\t\t\tthrow new Error(`argument does not match constraint: typeof ${constraint}`);\n\t\t}\n\t} else if (isFunction(constraint)) {\n\t\ttry {\n\t\t\tif (arg instanceof constraint) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch {\n\t\t\t// ignore\n\t\t}\n\t\tif (!isUndefinedOrNull(arg) && (arg as any).constructor === constraint) {\n\t\t\treturn;\n\t\t}\n\t\tif (constraint.length === 1 && constraint.call(undefined, arg) === true) {\n\t\t\treturn;\n\t\t}\n\t\tthrow new Error(`argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true`);\n\t}\n}\n\nexport function getAllPropertyNames(obj: object): string[] {\n\tlet res: string[] = [];\n\tlet proto = Object.getPrototypeOf(obj);\n\twhile (Object.prototype !== proto) {\n\t\tres = res.concat(Object.getOwnPropertyNames(proto));\n\t\tproto = Object.getPrototypeOf(proto);\n\t}\n\treturn res;\n}\n\nexport function getAllMethodNames(obj: object): string[] {\n\tconst methods: string[] = [];\n\tfor (const prop of getAllPropertyNames(obj)) {\n\t\tif (typeof (obj as any)[prop] === 'function') {\n\t\t\tmethods.push(prop);\n\t\t}\n\t}\n\treturn methods;\n}\n\nexport function createProxyObject<T extends object>(methodNames: string[], invoke: (method: string, args: unknown[]) => unknown): T {\n\tconst createProxyMethod = (method: string): () => unknown => {\n\t\treturn function () {\n\t\t\tconst args = Array.prototype.slice.call(arguments, 0);\n\t\t\treturn invoke(method, args);\n\t\t};\n\t};\n\n\tlet result = {} as T;\n\tfor (const methodName of methodNames) {\n\t\t(<any>result)[methodName] = createProxyMethod(methodName);\n\t}\n\treturn result;\n}\n\n/**\n * Converts null to undefined, passes all other values through.\n */\nexport function withNullAsUndefined<T>(x: T | null): T | undefined {\n\treturn x === null ? undefined : x;\n}\n\n/**\n * Converts undefined to null, passes all other values through.\n */\nexport function withUndefinedAsNull<T>(x: T | undefined): T | null {\n\treturn typeof x === 'undefined' ? null : x;\n}\n\ntype AddFirstParameterToFunction<T, TargetFunctionsReturnType, FirstParameter> = T extends (...args: any[]) => TargetFunctionsReturnType ?\n\t// Function: add param to function\n\t(firstArg: FirstParameter, ...args: Parameters<T>) => ReturnType<T> :\n\n\t// Else: just leave as is\n\tT;\n\n/**\n * Allows to add a first parameter to functions of a type.\n */\nexport type AddFirstParameterToFunctions<Target, TargetFunctionsReturnType, FirstParameter> = {\n\t// For every property\n\t[K in keyof Target]: AddFirstParameterToFunction<Target[K], TargetFunctionsReturnType, FirstParameter>;\n};\n\n/**\n * Mapped-type that replaces all occurrences of URI with UriComponents\n */\nexport type UriDto<T> = { [K in keyof T]: T[K] extends URI\n\t? UriComponents\n\t: UriDto<T[K]> };\n\n/**\n * Mapped-type that replaces all occurrences of URI with UriComponents and\n * drops all functions.\n */\nexport type Dto<T> = T extends { toJSON(): infer U }\n\t? U\n\t: T extends object\n\t? { [k in keyof T]: Dto<T[k]>; }\n\t: T;\n\nexport function NotImplementedProxy<T>(name: string): { new(): T } {\n\treturn <any>class {\n\t\tconstructor() {\n\t\t\treturn new Proxy({}, {\n\t\t\t\tget(target: any, prop: PropertyKey) {\n\t\t\t\t\tif (target[prop]) {\n\t\t\t\t\t\treturn target[prop];\n\t\t\t\t\t}\n\t\t\t\t\tthrow new Error(`Not Implemented: ${name}->${String(prop)}`);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n}\n\nexport function assertNever(value: never) {\n\tthrow new Error('Unreachable');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isWindows } from 'vs/base/common/platform';\nimport { startsWithIgnoreCase, equalsIgnoreCase, rtrim } from 'vs/base/common/strings';\nimport { CharCode } from 'vs/base/common/charCode';\nimport { sep, posix, isAbsolute, join, normalize } from 'vs/base/common/path';\nimport { isNumber } from 'vs/base/common/types';\n\nexport function isPathSeparator(code: number) {\n\treturn code === CharCode.Slash || code === CharCode.Backslash;\n}\n\n/**\n * Takes a Windows OS path and changes backward slashes to forward slashes.\n * This should only be done for OS paths from Windows (or user provided paths potentially from Windows).\n * Using it on a Linux or MaxOS path might change it.\n */\nexport function toSlashes(osPath: string) {\n\treturn osPath.replace(/[\\\\/]/g, posix.sep);\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\nexport function getRoot(path: string, sep: string = posix.sep): string {\n\tif (!path) {\n\t\treturn '';\n\t}\n\n\tconst len = path.length;\n\tconst firstLetter = path.charCodeAt(0);\n\tif (isPathSeparator(firstLetter)) {\n\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t// UNC candidate \\\\localhost\\shares\\ddd\n\t\t\t//               ^^^^^^^^^^^^^^^^^^^\n\t\t\tif (!isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\tlet pos = 3;\n\t\t\t\tconst start = pos;\n\t\t\t\tfor (; pos < len; pos++) {\n\t\t\t\t\tif (isPathSeparator(path.charCodeAt(pos))) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (start !== pos && !isPathSeparator(path.charCodeAt(pos + 1))) {\n\t\t\t\t\tpos += 1;\n\t\t\t\t\tfor (; pos < len; pos++) {\n\t\t\t\t\t\tif (isPathSeparator(path.charCodeAt(pos))) {\n\t\t\t\t\t\t\treturn path.slice(0, pos + 1) // consume this separator\n\t\t\t\t\t\t\t\t.replace(/[\\\\/]/g, sep);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// /user/far\n\t\t// ^\n\t\treturn sep;\n\n\t} else if (isWindowsDriveLetter(firstLetter)) {\n\t\t// check for windows drive letter c:\\ or c:\n\n\t\tif (path.charCodeAt(1) === CharCode.Colon) {\n\t\t\tif (isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\t// C:\\fff\n\t\t\t\t// ^^^\n\t\t\t\treturn path.slice(0, 2) + sep;\n\t\t\t} else {\n\t\t\t\t// C:\n\t\t\t\t// ^^\n\t\t\t\treturn path.slice(0, 2);\n\t\t\t}\n\t\t}\n\t}\n\n\t// check for URI\n\t// scheme://authority/path\n\t// ^^^^^^^^^^^^^^^^^^^\n\tlet pos = path.indexOf('://');\n\tif (pos !== -1) {\n\t\tpos += 3; // 3 -> \"://\".length\n\t\tfor (; pos < len; pos++) {\n\t\t\tif (isPathSeparator(path.charCodeAt(pos))) {\n\t\t\t\treturn path.slice(0, pos + 1); // consume this separator\n\t\t\t}\n\t\t}\n\t}\n\n\treturn '';\n}\n\n/**\n * Check if the path follows this pattern: `\\\\hostname\\sharename`.\n *\n * @see https://msdn.microsoft.com/en-us/library/gg465305.aspx\n * @return A boolean indication if the path is a UNC path, on none-windows\n * always false.\n */\nexport function isUNC(path: string): boolean {\n\tif (!isWindows) {\n\t\t// UNC is a windows concept\n\t\treturn false;\n\t}\n\n\tif (!path || path.length < 5) {\n\t\t// at least \\\\a\\b\n\t\treturn false;\n\t}\n\n\tlet code = path.charCodeAt(0);\n\tif (code !== CharCode.Backslash) {\n\t\treturn false;\n\t}\n\tcode = path.charCodeAt(1);\n\tif (code !== CharCode.Backslash) {\n\t\treturn false;\n\t}\n\tlet pos = 2;\n\tconst start = pos;\n\tfor (; pos < path.length; pos++) {\n\t\tcode = path.charCodeAt(pos);\n\t\tif (code === CharCode.Backslash) {\n\t\t\tbreak;\n\t\t}\n\t}\n\tif (start === pos) {\n\t\treturn false;\n\t}\n\tcode = path.charCodeAt(pos + 1);\n\tif (isNaN(code) || code === CharCode.Backslash) {\n\t\treturn false;\n\t}\n\treturn true;\n}\n\n// Reference: https://en.wikipedia.org/wiki/Filename\nconst WINDOWS_INVALID_FILE_CHARS = /[\\\\/:\\*\\?\"<>\\|]/g;\nconst UNIX_INVALID_FILE_CHARS = /[\\\\/]/g;\nconst WINDOWS_FORBIDDEN_NAMES = /^(con|prn|aux|clock\\$|nul|lpt[0-9]|com[0-9])(\\.(.*?))?$/i;\nexport function isValidBasename(name: string | null | undefined, isWindowsOS: boolean = isWindows): boolean {\n\tconst invalidFileChars = isWindowsOS ? WINDOWS_INVALID_FILE_CHARS : UNIX_INVALID_FILE_CHARS;\n\n\tif (!name || name.length === 0 || /^\\s+$/.test(name)) {\n\t\treturn false; // require a name that is not just whitespace\n\t}\n\n\tinvalidFileChars.lastIndex = 0; // the holy grail of software development\n\tif (invalidFileChars.test(name)) {\n\t\treturn false; // check for certain invalid file characters\n\t}\n\n\tif (isWindowsOS && WINDOWS_FORBIDDEN_NAMES.test(name)) {\n\t\treturn false; // check for certain invalid file names\n\t}\n\n\tif (name === '.' || name === '..') {\n\t\treturn false; // check for reserved values\n\t}\n\n\tif (isWindowsOS && name[name.length - 1] === '.') {\n\t\treturn false; // Windows: file cannot end with a \".\"\n\t}\n\n\tif (isWindowsOS && name.length !== name.trim().length) {\n\t\treturn false; // Windows: file cannot end with a whitespace\n\t}\n\n\tif (name.length > 255) {\n\t\treturn false; // most file systems do not allow files > 255 length\n\t}\n\n\treturn true;\n}\n\nexport function isEqual(pathA: string, pathB: string, ignoreCase?: boolean): boolean {\n\tconst identityEquals = (pathA === pathB);\n\tif (!ignoreCase || identityEquals) {\n\t\treturn identityEquals;\n\t}\n\n\tif (!pathA || !pathB) {\n\t\treturn false;\n\t}\n\n\treturn equalsIgnoreCase(pathA, pathB);\n}\n\nexport function isEqualOrParent(base: string, parentCandidate: string, ignoreCase?: boolean, separator = sep): boolean {\n\tif (base === parentCandidate) {\n\t\treturn true;\n\t}\n\n\tif (!base || !parentCandidate) {\n\t\treturn false;\n\t}\n\n\tif (parentCandidate.length > base.length) {\n\t\treturn false;\n\t}\n\n\tif (ignoreCase) {\n\t\tconst beginsWith = startsWithIgnoreCase(base, parentCandidate);\n\t\tif (!beginsWith) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (parentCandidate.length === base.length) {\n\t\t\treturn true; // same path, different casing\n\t\t}\n\n\t\tlet sepOffset = parentCandidate.length;\n\t\tif (parentCandidate.charAt(parentCandidate.length - 1) === separator) {\n\t\t\tsepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n\t\t}\n\n\t\treturn base.charAt(sepOffset) === separator;\n\t}\n\n\tif (parentCandidate.charAt(parentCandidate.length - 1) !== separator) {\n\t\tparentCandidate += separator;\n\t}\n\n\treturn base.indexOf(parentCandidate) === 0;\n}\n\nexport function isWindowsDriveLetter(char0: number): boolean {\n\treturn char0 >= CharCode.A && char0 <= CharCode.Z || char0 >= CharCode.a && char0 <= CharCode.z;\n}\n\nexport function sanitizeFilePath(candidate: string, cwd: string): string {\n\n\t// Special case: allow to open a drive letter without trailing backslash\n\tif (isWindows && candidate.endsWith(':')) {\n\t\tcandidate += sep;\n\t}\n\n\t// Ensure absolute\n\tif (!isAbsolute(candidate)) {\n\t\tcandidate = join(cwd, candidate);\n\t}\n\n\t// Ensure normalized\n\tcandidate = normalize(candidate);\n\n\t// Ensure no trailing slash/backslash\n\tif (isWindows) {\n\t\tcandidate = rtrim(candidate, sep);\n\n\t\t// Special case: allow to open drive root ('C:\\')\n\t\tif (candidate.endsWith(':')) {\n\t\t\tcandidate += sep;\n\t\t}\n\n\t} else {\n\t\tcandidate = rtrim(candidate, sep);\n\n\t\t// Special case: allow to open root ('/')\n\t\tif (!candidate) {\n\t\t\tcandidate = sep;\n\t\t}\n\t}\n\n\treturn candidate;\n}\n\nexport function isRootOrDriveLetter(path: string): boolean {\n\tconst pathNormalized = normalize(path);\n\n\tif (isWindows) {\n\t\tif (path.length > 3) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn hasDriveLetter(pathNormalized) &&\n\t\t\t(path.length === 2 || pathNormalized.charCodeAt(2) === CharCode.Backslash);\n\t}\n\n\treturn pathNormalized === posix.sep;\n}\n\nexport function hasDriveLetter(path: string): boolean {\n\tif (isWindows) {\n\t\treturn isWindowsDriveLetter(path.charCodeAt(0)) && path.charCodeAt(1) === CharCode.Colon;\n\t}\n\n\treturn false;\n}\n\nexport function getDriveLetter(path: string): string | undefined {\n\treturn hasDriveLetter(path) ? path[0] : undefined;\n}\n\nexport function indexOfPath(path: string, candidate: string, ignoreCase?: boolean): number {\n\tif (candidate.length > path.length) {\n\t\treturn -1;\n\t}\n\n\tif (path === candidate) {\n\t\treturn 0;\n\t}\n\n\tif (ignoreCase) {\n\t\tpath = path.toLowerCase();\n\t\tcandidate = candidate.toLowerCase();\n\t}\n\n\treturn path.indexOf(candidate);\n}\n\nexport interface IPathWithLineAndColumn {\n\tpath: string;\n\tline?: number;\n\tcolumn?: number;\n}\n\nexport function parseLineAndColumnAware(rawPath: string): IPathWithLineAndColumn {\n\tconst segments = rawPath.split(':'); // C:\\file.txt:<line>:<column>\n\n\tlet path: string | undefined = undefined;\n\tlet line: number | undefined = undefined;\n\tlet column: number | undefined = undefined;\n\n\tsegments.forEach(segment => {\n\t\tconst segmentAsNumber = Number(segment);\n\t\tif (!isNumber(segmentAsNumber)) {\n\t\t\tpath = !!path ? [path, segment].join(':') : segment; // a colon can well be part of a path (e.g. C:\\...)\n\t\t} else if (line === undefined) {\n\t\t\tline = segmentAsNumber;\n\t\t} else if (column === undefined) {\n\t\t\tcolumn = segmentAsNumber;\n\t\t}\n\t});\n\n\tif (!path) {\n\t\tthrow new Error('Format for `--goto` should be: `FILE:LINE(:COLUMN)`');\n\t}\n\n\treturn {\n\t\tpath,\n\t\tline: line !== undefined ? line : undefined,\n\t\tcolumn: column !== undefined ? column : line !== undefined ? 1 : undefined // if we have a line, make sure column is also set\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isObject, isUndefinedOrNull, isArray } from 'vs/base/common/types';\n\nexport function deepClone<T>(obj: T): T {\n\tif (!obj || typeof obj !== 'object') {\n\t\treturn obj;\n\t}\n\tif (obj instanceof RegExp) {\n\t\t// See https://github.com/microsoft/TypeScript/issues/10990\n\t\treturn obj as any;\n\t}\n\tconst result: any = Array.isArray(obj) ? [] : {};\n\tObject.keys(<any>obj).forEach((key: string) => {\n\t\tif ((<any>obj)[key] && typeof (<any>obj)[key] === 'object') {\n\t\t\tresult[key] = deepClone((<any>obj)[key]);\n\t\t} else {\n\t\t\tresult[key] = (<any>obj)[key];\n\t\t}\n\t});\n\treturn result;\n}\n\nexport function deepFreeze<T>(obj: T): T {\n\tif (!obj || typeof obj !== 'object') {\n\t\treturn obj;\n\t}\n\tconst stack: any[] = [obj];\n\twhile (stack.length > 0) {\n\t\tconst obj = stack.shift();\n\t\tObject.freeze(obj);\n\t\tfor (const key in obj) {\n\t\t\tif (_hasOwnProperty.call(obj, key)) {\n\t\t\t\tconst prop = obj[key];\n\t\t\t\tif (typeof prop === 'object' && !Object.isFrozen(prop)) {\n\t\t\t\t\tstack.push(prop);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn obj;\n}\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n\treturn _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n\tif (isUndefinedOrNull(obj)) {\n\t\treturn obj;\n\t}\n\n\tconst changed = changer(obj);\n\tif (typeof changed !== 'undefined') {\n\t\treturn changed;\n\t}\n\n\tif (isArray(obj)) {\n\t\tconst r1: any[] = [];\n\t\tfor (const e of obj) {\n\t\t\tr1.push(_cloneAndChange(e, changer, seen));\n\t\t}\n\t\treturn r1;\n\t}\n\n\tif (isObject(obj)) {\n\t\tif (seen.has(obj)) {\n\t\t\tthrow new Error('Cannot clone recursive data-structure');\n\t\t}\n\t\tseen.add(obj);\n\t\tconst r2 = {};\n\t\tfor (let i2 in obj) {\n\t\t\tif (_hasOwnProperty.call(obj, i2)) {\n\t\t\t\t(r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n\t\t\t}\n\t\t}\n\t\tseen.delete(obj);\n\t\treturn r2;\n\t}\n\n\treturn obj;\n}\n\n/**\n * Copies all properties of source into destination. The optional parameter \"overwrite\" allows to control\n * if existing properties on the destination should be overwritten or not. Defaults to true (overwrite).\n */\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n\tif (!isObject(destination)) {\n\t\treturn source;\n\t}\n\n\tif (isObject(source)) {\n\t\tObject.keys(source).forEach(key => {\n\t\t\tif (key in destination) {\n\t\t\t\tif (overwrite) {\n\t\t\t\t\tif (isObject(destination[key]) && isObject(source[key])) {\n\t\t\t\t\t\tmixin(destination[key], source[key], overwrite);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestination[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdestination[key] = source[key];\n\t\t\t}\n\t\t});\n\t}\n\treturn destination;\n}\n\nexport function equals(one: any, other: any): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\tif (one === null || one === undefined || other === null || other === undefined) {\n\t\treturn false;\n\t}\n\tif (typeof one !== typeof other) {\n\t\treturn false;\n\t}\n\tif (typeof one !== 'object') {\n\t\treturn false;\n\t}\n\tif ((Array.isArray(one)) !== (Array.isArray(other))) {\n\t\treturn false;\n\t}\n\n\tlet i: number;\n\tlet key: string;\n\n\tif (Array.isArray(one)) {\n\t\tif (one.length !== other.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0; i < one.length; i++) {\n\t\t\tif (!equals(one[i], other[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst oneKeys: string[] = [];\n\n\t\tfor (key in one) {\n\t\t\toneKeys.push(key);\n\t\t}\n\t\toneKeys.sort();\n\t\tconst otherKeys: string[] = [];\n\t\tfor (key in other) {\n\t\t\totherKeys.push(key);\n\t\t}\n\t\totherKeys.sort();\n\t\tif (!equals(oneKeys, otherKeys)) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0; i < oneKeys.length; i++) {\n\t\t\tif (!equals(one[oneKeys[i]], other[oneKeys[i]])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\n/**\n * Calls `JSON.Stringify` with a replacer to break apart any circular references.\n * This prevents `JSON`.stringify` from throwing the exception\n *  \"Uncaught TypeError: Converting circular structure to JSON\"\n */\nexport function safeStringify(obj: any): string {\n\tconst seen = new Set<any>();\n\treturn JSON.stringify(obj, (key, value) => {\n\t\tif (isObject(value) || Array.isArray(value)) {\n\t\t\tif (seen.has(value)) {\n\t\t\t\treturn '[Circular]';\n\t\t\t} else {\n\t\t\t\tseen.add(value);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t});\n}\n\nexport function getOrDefault<T, R>(obj: T, fn: (obj: T) => R | undefined, defaultValue: R): R {\n\tconst result = fn(obj);\n\treturn typeof result === 'undefined' ? defaultValue : result;\n}\n\ntype obj = { [key: string]: any; };\n/**\n * Returns an object that has keys for each value that is different in the base object. Keys\n * that do not exist in the target but in the base object are not considered.\n *\n * Note: This is not a deep-diffing method, so the values are strictly taken into the resulting\n * object if they differ.\n *\n * @param base the object to diff against\n * @param obj the object to use for diffing\n */\nexport function distinct(base: obj, target: obj): obj {\n\tconst result = Object.create(null);\n\n\tif (!base || !target) {\n\t\treturn result;\n\t}\n\n\tconst targetKeys = Object.keys(target);\n\ttargetKeys.forEach(k => {\n\t\tconst baseValue = base[k];\n\t\tconst targetValue = target[k];\n\n\t\tif (!equals(baseValue, targetValue)) {\n\t\t\tresult[k] = targetValue;\n\t\t}\n\t});\n\n\treturn result;\n}\n\nexport function getCaseInsensitive(target: obj, key: string): any {\n\tconst lowercaseKey = key.toLowerCase();\n\tconst equivalentKey = Object.keys(target).find(k => k.toLowerCase() === lowercaseKey);\n\treturn equivalentKey ? target[equivalentKey] : target[key];\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isWindows } from 'vs/base/common/platform';\nimport { CharCode } from 'vs/base/common/charCode';\nimport * as paths from 'vs/base/common/path';\n\nconst _schemePattern = /^\\w[\\w\\d+.-]*$/;\nconst _singleSlashStart = /^\\//;\nconst _doubleSlashStart = /^\\/\\//;\n\nfunction _validateUri(ret: URI, _strict?: boolean): void {\n\n\t// scheme, must be set\n\tif (!ret.scheme && _strict) {\n\t\tthrow new Error(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\n\t}\n\n\t// scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n\t// ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n\tif (ret.scheme && !_schemePattern.test(ret.scheme)) {\n\t\tthrow new Error('[UriError]: Scheme contains illegal characters.');\n\t}\n\n\t// path, http://tools.ietf.org/html/rfc3986#section-3.3\n\t// If a URI contains an authority component, then the path component\n\t// must either be empty or begin with a slash (\"/\") character.  If a URI\n\t// does not contain an authority component, then the path cannot begin\n\t// with two slash characters (\"//\").\n\tif (ret.path) {\n\t\tif (ret.authority) {\n\t\t\tif (!_singleSlashStart.test(ret.path)) {\n\t\t\t\tthrow new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n\t\t\t}\n\t\t} else {\n\t\t\tif (_doubleSlashStart.test(ret.path)) {\n\t\t\t\tthrow new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n\t\t\t}\n\t\t}\n\t}\n}\n\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme: string, _strict: boolean): string {\n\tif (!scheme && !_strict) {\n\t\treturn 'file';\n\t}\n\treturn scheme;\n}\n\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme: string, path: string): string {\n\n\t// the slash-character is our 'default base' as we don't\n\t// support constructing URIs relative to other URIs. This\n\t// also means that we alter and potentially break paths.\n\t// see https://tools.ietf.org/html/rfc3986#section-5.1.4\n\tswitch (scheme) {\n\t\tcase 'https':\n\t\tcase 'http':\n\t\tcase 'file':\n\t\t\tif (!path) {\n\t\t\t\tpath = _slash;\n\t\t\t} else if (path[0] !== _slash) {\n\t\t\t\tpath = _slash + path;\n\t\t\t}\n\t\t\tbreak;\n\t}\n\treturn path;\n}\n\nconst _empty = '';\nconst _slash = '/';\nconst _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nexport class URI implements UriComponents {\n\n\tstatic isUri(thing: any): thing is URI {\n\t\tif (thing instanceof URI) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!thing) {\n\t\t\treturn false;\n\t\t}\n\t\treturn typeof (<URI>thing).authority === 'string'\n\t\t\t&& typeof (<URI>thing).fragment === 'string'\n\t\t\t&& typeof (<URI>thing).path === 'string'\n\t\t\t&& typeof (<URI>thing).query === 'string'\n\t\t\t&& typeof (<URI>thing).scheme === 'string'\n\t\t\t&& typeof (<URI>thing).fsPath === 'string'\n\t\t\t&& typeof (<URI>thing).with === 'function'\n\t\t\t&& typeof (<URI>thing).toString === 'function';\n\t}\n\n\t/**\n\t * scheme is the 'http' part of 'http://www.msft.com/some/path?query#fragment'.\n\t * The part before the first colon.\n\t */\n\treadonly scheme: string;\n\n\t/**\n\t * authority is the 'www.msft.com' part of 'http://www.msft.com/some/path?query#fragment'.\n\t * The part between the first double slashes and the next slash.\n\t */\n\treadonly authority: string;\n\n\t/**\n\t * path is the '/some/path' part of 'http://www.msft.com/some/path?query#fragment'.\n\t */\n\treadonly path: string;\n\n\t/**\n\t * query is the 'query' part of 'http://www.msft.com/some/path?query#fragment'.\n\t */\n\treadonly query: string;\n\n\t/**\n\t * fragment is the 'fragment' part of 'http://www.msft.com/some/path?query#fragment'.\n\t */\n\treadonly fragment: string;\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(scheme: string, authority?: string, path?: string, query?: string, fragment?: string, _strict?: boolean);\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(components: UriComponents);\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(schemeOrData: string | UriComponents, authority?: string, path?: string, query?: string, fragment?: string, _strict: boolean = false) {\n\n\t\tif (typeof schemeOrData === 'object') {\n\t\t\tthis.scheme = schemeOrData.scheme || _empty;\n\t\t\tthis.authority = schemeOrData.authority || _empty;\n\t\t\tthis.path = schemeOrData.path || _empty;\n\t\t\tthis.query = schemeOrData.query || _empty;\n\t\t\tthis.fragment = schemeOrData.fragment || _empty;\n\t\t\t// no validation because it's this URI\n\t\t\t// that creates uri components.\n\t\t\t// _validateUri(this);\n\t\t} else {\n\t\t\tthis.scheme = _schemeFix(schemeOrData, _strict);\n\t\t\tthis.authority = authority || _empty;\n\t\t\tthis.path = _referenceResolution(this.scheme, path || _empty);\n\t\t\tthis.query = query || _empty;\n\t\t\tthis.fragment = fragment || _empty;\n\n\t\t\t_validateUri(this, _strict);\n\t\t}\n\t}\n\n\t// ---- filesystem path -----------------------\n\n\t/**\n\t * Returns a string representing the corresponding file system path of this URI.\n\t * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n\t * platform specific path separator.\n\t *\n\t * * Will *not* validate the path for invalid characters and semantics.\n\t * * Will *not* look at the scheme of this URI.\n\t * * The result shall *not* be used for display purposes but for accessing a file on disk.\n\t *\n\t *\n\t * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n\t * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n\t *\n\t * ```ts\n\t\tconst u = URI.parse('file://server/c$/folder/file.txt')\n\t\tu.authority === 'server'\n\t\tu.path === '/shares/c$/file.txt'\n\t\tu.fsPath === '\\\\server\\c$\\folder\\file.txt'\n\t```\n\t *\n\t * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n\t * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n\t * with URIs that represent files on disk (`file` scheme).\n\t */\n\tget fsPath(): string {\n\t\t// if (this.scheme !== 'file') {\n\t\t// \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n\t\t// }\n\t\treturn uriToFsPath(this, false);\n\t}\n\n\t// ---- modify to new -------------------------\n\n\twith(change: { scheme?: string; authority?: string | null; path?: string | null; query?: string | null; fragment?: string | null }): URI {\n\n\t\tif (!change) {\n\t\t\treturn this;\n\t\t}\n\n\t\tlet { scheme, authority, path, query, fragment } = change;\n\t\tif (scheme === undefined) {\n\t\t\tscheme = this.scheme;\n\t\t} else if (scheme === null) {\n\t\t\tscheme = _empty;\n\t\t}\n\t\tif (authority === undefined) {\n\t\t\tauthority = this.authority;\n\t\t} else if (authority === null) {\n\t\t\tauthority = _empty;\n\t\t}\n\t\tif (path === undefined) {\n\t\t\tpath = this.path;\n\t\t} else if (path === null) {\n\t\t\tpath = _empty;\n\t\t}\n\t\tif (query === undefined) {\n\t\t\tquery = this.query;\n\t\t} else if (query === null) {\n\t\t\tquery = _empty;\n\t\t}\n\t\tif (fragment === undefined) {\n\t\t\tfragment = this.fragment;\n\t\t} else if (fragment === null) {\n\t\t\tfragment = _empty;\n\t\t}\n\n\t\tif (scheme === this.scheme\n\t\t\t&& authority === this.authority\n\t\t\t&& path === this.path\n\t\t\t&& query === this.query\n\t\t\t&& fragment === this.fragment) {\n\n\t\t\treturn this;\n\t\t}\n\n\t\treturn new Uri(scheme, authority, path, query, fragment);\n\t}\n\n\t// ---- parse & validate ------------------------\n\n\t/**\n\t * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n\t * `file:///usr/home`, or `scheme:with/path`.\n\t *\n\t * @param value A string which represents an URI (see `URI#toString`).\n\t */\n\tstatic parse(value: string, _strict: boolean = false): URI {\n\t\tconst match = _regexp.exec(value);\n\t\tif (!match) {\n\t\t\treturn new Uri(_empty, _empty, _empty, _empty, _empty);\n\t\t}\n\t\treturn new Uri(\n\t\t\tmatch[2] || _empty,\n\t\t\tpercentDecode(match[4] || _empty),\n\t\t\tpercentDecode(match[5] || _empty),\n\t\t\tpercentDecode(match[7] || _empty),\n\t\t\tpercentDecode(match[9] || _empty),\n\t\t\t_strict\n\t\t);\n\t}\n\n\t/**\n\t * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n\t * `/usr/home`, or `\\\\server\\share\\some\\path`.\n\t *\n\t * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n\t * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n\t * `URI.parse('file://' + path)` because the path might contain characters that are\n\t * interpreted (# and ?). See the following sample:\n\t * ```ts\n\tconst good = URI.file('/coding/c#/project1');\n\tgood.scheme === 'file';\n\tgood.path === '/coding/c#/project1';\n\tgood.fragment === '';\n\tconst bad = URI.parse('file://' + '/coding/c#/project1');\n\tbad.scheme === 'file';\n\tbad.path === '/coding/c'; // path is now broken\n\tbad.fragment === '/project1';\n\t```\n\t *\n\t * @param path A file system path (see `URI#fsPath`)\n\t */\n\tstatic file(path: string): URI {\n\n\t\tlet authority = _empty;\n\n\t\t// normalize to fwd-slashes on windows,\n\t\t// on other systems bwd-slashes are valid\n\t\t// filename character, eg /f\\oo/ba\\r.txt\n\t\tif (isWindows) {\n\t\t\tpath = path.replace(/\\\\/g, _slash);\n\t\t}\n\n\t\t// check for authority as used in UNC shares\n\t\t// or use the path as given\n\t\tif (path[0] === _slash && path[1] === _slash) {\n\t\t\tconst idx = path.indexOf(_slash, 2);\n\t\t\tif (idx === -1) {\n\t\t\t\tauthority = path.substring(2);\n\t\t\t\tpath = _slash;\n\t\t\t} else {\n\t\t\t\tauthority = path.substring(2, idx);\n\t\t\t\tpath = path.substring(idx) || _slash;\n\t\t\t}\n\t\t}\n\n\t\treturn new Uri('file', authority, path, _empty, _empty);\n\t}\n\n\tstatic from(components: { scheme: string; authority?: string; path?: string; query?: string; fragment?: string }): URI {\n\t\treturn new Uri(\n\t\t\tcomponents.scheme,\n\t\t\tcomponents.authority,\n\t\t\tcomponents.path,\n\t\t\tcomponents.query,\n\t\t\tcomponents.fragment,\n\t\t);\n\t}\n\n\t/**\n\t * Join a URI path with path fragments and normalizes the resulting path.\n\t *\n\t * @param uri The input URI.\n\t * @param pathFragment The path fragment to add to the URI path.\n\t * @returns The resulting URI.\n\t */\n\tstatic joinPath(uri: URI, ...pathFragment: string[]): URI {\n\t\tif (!uri.path) {\n\t\t\tthrow new Error(`[UriError]: cannot call joinPath on URI without path`);\n\t\t}\n\t\tlet newPath: string;\n\t\tif (isWindows && uri.scheme === 'file') {\n\t\t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n\t\t} else {\n\t\t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n\t\t}\n\t\treturn uri.with({ path: newPath });\n\t}\n\n\t// ---- printing/externalize ---------------------------\n\n\t/**\n\t * Creates a string representation for this URI. It's guaranteed that calling\n\t * `URI.parse` with the result of this function creates an URI which is equal\n\t * to this URI.\n\t *\n\t * * The result shall *not* be used for display purposes but for externalization or transport.\n\t * * The result will be encoded using the percentage encoding and encoding happens mostly\n\t * ignore the scheme-specific encoding rules.\n\t *\n\t * @param skipEncoding Do not encode the result, default is `false`\n\t */\n\ttoString(skipEncoding: boolean = false): string {\n\t\treturn _asFormatted(this, skipEncoding);\n\t}\n\n\ttoJSON(): UriComponents {\n\t\treturn this;\n\t}\n\n\tstatic revive(data: UriComponents | URI): URI;\n\tstatic revive(data: UriComponents | URI | undefined): URI | undefined;\n\tstatic revive(data: UriComponents | URI | null): URI | null;\n\tstatic revive(data: UriComponents | URI | undefined | null): URI | undefined | null;\n\tstatic revive(data: UriComponents | URI | undefined | null): URI | undefined | null {\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t} else if (data instanceof URI) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tconst result = new Uri(data);\n\t\t\tresult._formatted = (<UriState>data).external;\n\t\t\tresult._fsPath = (<UriState>data)._sep === _pathSepMarker ? (<UriState>data).fsPath : null;\n\t\t\treturn result;\n\t\t}\n\t}\n}\n\nexport interface UriComponents {\n\tscheme: string;\n\tauthority: string;\n\tpath: string;\n\tquery: string;\n\tfragment: string;\n}\n\ninterface UriState extends UriComponents {\n\t$mid: number;\n\texternal: string;\n\tfsPath: string;\n\t_sep: 1 | undefined;\n}\n\nconst _pathSepMarker = isWindows ? 1 : undefined;\n\n// This class exists so that URI is compatibile with vscode.Uri (API).\nclass Uri extends URI {\n\n\t_formatted: string | null = null;\n\t_fsPath: string | null = null;\n\n\toverride get fsPath(): string {\n\t\tif (!this._fsPath) {\n\t\t\tthis._fsPath = uriToFsPath(this, false);\n\t\t}\n\t\treturn this._fsPath;\n\t}\n\n\toverride toString(skipEncoding: boolean = false): string {\n\t\tif (!skipEncoding) {\n\t\t\tif (!this._formatted) {\n\t\t\t\tthis._formatted = _asFormatted(this, false);\n\t\t\t}\n\t\t\treturn this._formatted;\n\t\t} else {\n\t\t\t// we don't cache that\n\t\t\treturn _asFormatted(this, true);\n\t\t}\n\t}\n\n\toverride toJSON(): UriComponents {\n\t\tconst res = <UriState>{\n\t\t\t$mid: 1\n\t\t};\n\t\t// cached state\n\t\tif (this._fsPath) {\n\t\t\tres.fsPath = this._fsPath;\n\t\t\tres._sep = _pathSepMarker;\n\t\t}\n\t\tif (this._formatted) {\n\t\t\tres.external = this._formatted;\n\t\t}\n\t\t// uri components\n\t\tif (this.path) {\n\t\t\tres.path = this.path;\n\t\t}\n\t\tif (this.scheme) {\n\t\t\tres.scheme = this.scheme;\n\t\t}\n\t\tif (this.authority) {\n\t\t\tres.authority = this.authority;\n\t\t}\n\t\tif (this.query) {\n\t\t\tres.query = this.query;\n\t\t}\n\t\tif (this.fragment) {\n\t\t\tres.fragment = this.fragment;\n\t\t}\n\t\treturn res;\n\t}\n}\n\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nconst encodeTable: { [ch: number]: string } = {\n\t[CharCode.Colon]: '%3A', // gen-delims\n\t[CharCode.Slash]: '%2F',\n\t[CharCode.QuestionMark]: '%3F',\n\t[CharCode.Hash]: '%23',\n\t[CharCode.OpenSquareBracket]: '%5B',\n\t[CharCode.CloseSquareBracket]: '%5D',\n\t[CharCode.AtSign]: '%40',\n\n\t[CharCode.ExclamationMark]: '%21', // sub-delims\n\t[CharCode.DollarSign]: '%24',\n\t[CharCode.Ampersand]: '%26',\n\t[CharCode.SingleQuote]: '%27',\n\t[CharCode.OpenParen]: '%28',\n\t[CharCode.CloseParen]: '%29',\n\t[CharCode.Asterisk]: '%2A',\n\t[CharCode.Plus]: '%2B',\n\t[CharCode.Comma]: '%2C',\n\t[CharCode.Semicolon]: '%3B',\n\t[CharCode.Equals]: '%3D',\n\n\t[CharCode.Space]: '%20',\n};\n\nfunction encodeURIComponentFast(uriComponent: string, allowSlash: boolean): string {\n\tlet res: string | undefined = undefined;\n\tlet nativeEncodePos = -1;\n\n\tfor (let pos = 0; pos < uriComponent.length; pos++) {\n\t\tconst code = uriComponent.charCodeAt(pos);\n\n\t\t// unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n\t\tif (\n\t\t\t(code >= CharCode.a && code <= CharCode.z)\n\t\t\t|| (code >= CharCode.A && code <= CharCode.Z)\n\t\t\t|| (code >= CharCode.Digit0 && code <= CharCode.Digit9)\n\t\t\t|| code === CharCode.Dash\n\t\t\t|| code === CharCode.Period\n\t\t\t|| code === CharCode.Underline\n\t\t\t|| code === CharCode.Tilde\n\t\t\t|| (allowSlash && code === CharCode.Slash)\n\t\t) {\n\t\t\t// check if we are delaying native encode\n\t\t\tif (nativeEncodePos !== -1) {\n\t\t\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n\t\t\t\tnativeEncodePos = -1;\n\t\t\t}\n\t\t\t// check if we write into a new string (by default we try to return the param)\n\t\t\tif (res !== undefined) {\n\t\t\t\tres += uriComponent.charAt(pos);\n\t\t\t}\n\n\t\t} else {\n\t\t\t// encoding needed, we need to allocate a new string\n\t\t\tif (res === undefined) {\n\t\t\t\tres = uriComponent.substr(0, pos);\n\t\t\t}\n\n\t\t\t// check with default table first\n\t\t\tconst escaped = encodeTable[code];\n\t\t\tif (escaped !== undefined) {\n\n\t\t\t\t// check if we are delaying native encode\n\t\t\t\tif (nativeEncodePos !== -1) {\n\t\t\t\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n\t\t\t\t\tnativeEncodePos = -1;\n\t\t\t\t}\n\n\t\t\t\t// append escaped variant to result\n\t\t\t\tres += escaped;\n\n\t\t\t} else if (nativeEncodePos === -1) {\n\t\t\t\t// use native encode only when needed\n\t\t\t\tnativeEncodePos = pos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (nativeEncodePos !== -1) {\n\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n\t}\n\n\treturn res !== undefined ? res : uriComponent;\n}\n\nfunction encodeURIComponentMinimal(path: string): string {\n\tlet res: string | undefined = undefined;\n\tfor (let pos = 0; pos < path.length; pos++) {\n\t\tconst code = path.charCodeAt(pos);\n\t\tif (code === CharCode.Hash || code === CharCode.QuestionMark) {\n\t\t\tif (res === undefined) {\n\t\t\t\tres = path.substr(0, pos);\n\t\t\t}\n\t\t\tres += encodeTable[code];\n\t\t} else {\n\t\t\tif (res !== undefined) {\n\t\t\t\tres += path[pos];\n\t\t\t}\n\t\t}\n\t}\n\treturn res !== undefined ? res : path;\n}\n\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri: URI, keepDriveLetterCasing: boolean): string {\n\n\tlet value: string;\n\tif (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n\t\t// unc path: file://shares/c$/far/boo\n\t\tvalue = `//${uri.authority}${uri.path}`;\n\t} else if (\n\t\turi.path.charCodeAt(0) === CharCode.Slash\n\t\t&& (uri.path.charCodeAt(1) >= CharCode.A && uri.path.charCodeAt(1) <= CharCode.Z || uri.path.charCodeAt(1) >= CharCode.a && uri.path.charCodeAt(1) <= CharCode.z)\n\t\t&& uri.path.charCodeAt(2) === CharCode.Colon\n\t) {\n\t\tif (!keepDriveLetterCasing) {\n\t\t\t// windows drive letter: file:///c:/far/boo\n\t\t\tvalue = uri.path[1].toLowerCase() + uri.path.substr(2);\n\t\t} else {\n\t\t\tvalue = uri.path.substr(1);\n\t\t}\n\t} else {\n\t\t// other path\n\t\tvalue = uri.path;\n\t}\n\tif (isWindows) {\n\t\tvalue = value.replace(/\\//g, '\\\\');\n\t}\n\treturn value;\n}\n\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri: URI, skipEncoding: boolean): string {\n\n\tconst encoder = !skipEncoding\n\t\t? encodeURIComponentFast\n\t\t: encodeURIComponentMinimal;\n\n\tlet res = '';\n\tlet { scheme, authority, path, query, fragment } = uri;\n\tif (scheme) {\n\t\tres += scheme;\n\t\tres += ':';\n\t}\n\tif (authority || scheme === 'file') {\n\t\tres += _slash;\n\t\tres += _slash;\n\t}\n\tif (authority) {\n\t\tlet idx = authority.indexOf('@');\n\t\tif (idx !== -1) {\n\t\t\t// <user>@<auth>\n\t\t\tconst userinfo = authority.substr(0, idx);\n\t\t\tauthority = authority.substr(idx + 1);\n\t\t\tidx = userinfo.indexOf(':');\n\t\t\tif (idx === -1) {\n\t\t\t\tres += encoder(userinfo, false);\n\t\t\t} else {\n\t\t\t\t// <user>:<pass>@<auth>\n\t\t\t\tres += encoder(userinfo.substr(0, idx), false);\n\t\t\t\tres += ':';\n\t\t\t\tres += encoder(userinfo.substr(idx + 1), false);\n\t\t\t}\n\t\t\tres += '@';\n\t\t}\n\t\tauthority = authority.toLowerCase();\n\t\tidx = authority.indexOf(':');\n\t\tif (idx === -1) {\n\t\t\tres += encoder(authority, false);\n\t\t} else {\n\t\t\t// <auth>:<port>\n\t\t\tres += encoder(authority.substr(0, idx), false);\n\t\t\tres += authority.substr(idx);\n\t\t}\n\t}\n\tif (path) {\n\t\t// lower-case windows drive letters in /C:/fff or C:/fff\n\t\tif (path.length >= 3 && path.charCodeAt(0) === CharCode.Slash && path.charCodeAt(2) === CharCode.Colon) {\n\t\t\tconst code = path.charCodeAt(1);\n\t\t\tif (code >= CharCode.A && code <= CharCode.Z) {\n\t\t\t\tpath = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n\t\t\t}\n\t\t} else if (path.length >= 2 && path.charCodeAt(1) === CharCode.Colon) {\n\t\t\tconst code = path.charCodeAt(0);\n\t\t\tif (code >= CharCode.A && code <= CharCode.Z) {\n\t\t\t\tpath = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"/c:\".length === 3\n\t\t\t}\n\t\t}\n\t\t// encode the rest of the path\n\t\tres += encoder(path, true);\n\t}\n\tif (query) {\n\t\tres += '?';\n\t\tres += encoder(query, false);\n\t}\n\tif (fragment) {\n\t\tres += '#';\n\t\tres += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n\t}\n\treturn res;\n}\n\n// --- decode\n\nfunction decodeURIComponentGraceful(str: string): string {\n\ttry {\n\t\treturn decodeURIComponent(str);\n\t} catch {\n\t\tif (str.length > 3) {\n\t\t\treturn str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n\t\t} else {\n\t\t\treturn str;\n\t\t}\n\t}\n}\n\nconst _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\n\nfunction percentDecode(str: string): string {\n\tif (!str.match(_rEncodedAsHex)) {\n\t\treturn str;\n\t}\n\treturn str.replace(_rEncodedAsHex, (match) => decodeURIComponentGraceful(match));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vs/base/common/uri';\nimport { CharCode } from 'vs/base/common/charCode';\nimport { compareSubstringIgnoreCase, compare, compareSubstring, compareIgnoreCase } from 'vs/base/common/strings';\n\nexport function getOrSet<K, V>(map: Map<K, V>, key: K, value: V): V {\n\tlet result = map.get(key);\n\tif (result === undefined) {\n\t\tresult = value;\n\t\tmap.set(key, result);\n\t}\n\n\treturn result;\n}\n\nexport function mapToString<K, V>(map: Map<K, V>): string {\n\tconst entries: string[] = [];\n\tmap.forEach((value, key) => {\n\t\tentries.push(`${key} => ${value}`);\n\t});\n\n\treturn `Map(${map.size}) {${entries.join(', ')}}`;\n}\n\nexport function setToString<K>(set: Set<K>): string {\n\tconst entries: K[] = [];\n\tset.forEach(value => {\n\t\tentries.push(value);\n\t});\n\n\treturn `Set(${set.size}) {${entries.join(', ')}}`;\n}\n\nexport interface IKeyIterator<K> {\n\treset(key: K): this;\n\tnext(): this;\n\n\thasNext(): boolean;\n\tcmp(a: string): number;\n\tvalue(): string;\n}\n\nexport class StringIterator implements IKeyIterator<string> {\n\n\tprivate _value: string = '';\n\tprivate _pos: number = 0;\n\n\treset(key: string): this {\n\t\tthis._value = key;\n\t\tthis._pos = 0;\n\t\treturn this;\n\t}\n\n\tnext(): this {\n\t\tthis._pos += 1;\n\t\treturn this;\n\t}\n\n\thasNext(): boolean {\n\t\treturn this._pos < this._value.length - 1;\n\t}\n\n\tcmp(a: string): number {\n\t\tconst aCode = a.charCodeAt(0);\n\t\tconst thisCode = this._value.charCodeAt(this._pos);\n\t\treturn aCode - thisCode;\n\t}\n\n\tvalue(): string {\n\t\treturn this._value[this._pos];\n\t}\n}\n\nexport class ConfigKeysIterator implements IKeyIterator<string> {\n\n\tprivate _value!: string;\n\tprivate _from!: number;\n\tprivate _to!: number;\n\n\tconstructor(\n\t\tprivate readonly _caseSensitive: boolean = true\n\t) { }\n\n\treset(key: string): this {\n\t\tthis._value = key;\n\t\tthis._from = 0;\n\t\tthis._to = 0;\n\t\treturn this.next();\n\t}\n\n\thasNext(): boolean {\n\t\treturn this._to < this._value.length;\n\t}\n\n\tnext(): this {\n\t\t// this._data = key.split(/[\\\\/]/).filter(s => !!s);\n\t\tthis._from = this._to;\n\t\tlet justSeps = true;\n\t\tfor (; this._to < this._value.length; this._to++) {\n\t\t\tconst ch = this._value.charCodeAt(this._to);\n\t\t\tif (ch === CharCode.Period) {\n\t\t\t\tif (justSeps) {\n\t\t\t\t\tthis._from++;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjustSeps = false;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tcmp(a: string): number {\n\t\treturn this._caseSensitive\n\t\t\t? compareSubstring(a, this._value, 0, a.length, this._from, this._to)\n\t\t\t: compareSubstringIgnoreCase(a, this._value, 0, a.length, this._from, this._to);\n\t}\n\n\tvalue(): string {\n\t\treturn this._value.substring(this._from, this._to);\n\t}\n}\n\nexport class PathIterator implements IKeyIterator<string> {\n\n\tprivate _value!: string;\n\tprivate _from!: number;\n\tprivate _to!: number;\n\n\tconstructor(\n\t\tprivate readonly _splitOnBackslash: boolean = true,\n\t\tprivate readonly _caseSensitive: boolean = true\n\t) { }\n\n\treset(key: string): this {\n\t\tthis._value = key.replace(/\\\\$|\\/$/, '');\n\t\tthis._from = 0;\n\t\tthis._to = 0;\n\t\treturn this.next();\n\t}\n\n\thasNext(): boolean {\n\t\treturn this._to < this._value.length;\n\t}\n\n\tnext(): this {\n\t\t// this._data = key.split(/[\\\\/]/).filter(s => !!s);\n\t\tthis._from = this._to;\n\t\tlet justSeps = true;\n\t\tfor (; this._to < this._value.length; this._to++) {\n\t\t\tconst ch = this._value.charCodeAt(this._to);\n\t\t\tif (ch === CharCode.Slash || this._splitOnBackslash && ch === CharCode.Backslash) {\n\t\t\t\tif (justSeps) {\n\t\t\t\t\tthis._from++;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjustSeps = false;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tcmp(a: string): number {\n\t\treturn this._caseSensitive\n\t\t\t? compareSubstring(a, this._value, 0, a.length, this._from, this._to)\n\t\t\t: compareSubstringIgnoreCase(a, this._value, 0, a.length, this._from, this._to);\n\t}\n\n\tvalue(): string {\n\t\treturn this._value.substring(this._from, this._to);\n\t}\n}\n\nconst enum UriIteratorState {\n\tScheme = 1, Authority = 2, Path = 3, Query = 4, Fragment = 5\n}\n\nexport class UriIterator implements IKeyIterator<URI> {\n\n\tprivate _pathIterator!: PathIterator;\n\tprivate _value!: URI;\n\tprivate _states: UriIteratorState[] = [];\n\tprivate _stateIdx: number = 0;\n\n\tconstructor(private readonly _ignorePathCasing: (uri: URI) => boolean) { }\n\n\treset(key: URI): this {\n\t\tthis._value = key;\n\t\tthis._states = [];\n\t\tif (this._value.scheme) {\n\t\t\tthis._states.push(UriIteratorState.Scheme);\n\t\t}\n\t\tif (this._value.authority) {\n\t\t\tthis._states.push(UriIteratorState.Authority);\n\t\t}\n\t\tif (this._value.path) {\n\t\t\tthis._pathIterator = new PathIterator(false, !this._ignorePathCasing(key));\n\t\t\tthis._pathIterator.reset(key.path);\n\t\t\tif (this._pathIterator.value()) {\n\t\t\t\tthis._states.push(UriIteratorState.Path);\n\t\t\t}\n\t\t}\n\t\tif (this._value.query) {\n\t\t\tthis._states.push(UriIteratorState.Query);\n\t\t}\n\t\tif (this._value.fragment) {\n\t\t\tthis._states.push(UriIteratorState.Fragment);\n\t\t}\n\t\tthis._stateIdx = 0;\n\t\treturn this;\n\t}\n\n\tnext(): this {\n\t\tif (this._states[this._stateIdx] === UriIteratorState.Path && this._pathIterator.hasNext()) {\n\t\t\tthis._pathIterator.next();\n\t\t} else {\n\t\t\tthis._stateIdx += 1;\n\t\t}\n\t\treturn this;\n\t}\n\n\thasNext(): boolean {\n\t\treturn (this._states[this._stateIdx] === UriIteratorState.Path && this._pathIterator.hasNext())\n\t\t\t|| this._stateIdx < this._states.length - 1;\n\t}\n\n\tcmp(a: string): number {\n\t\tif (this._states[this._stateIdx] === UriIteratorState.Scheme) {\n\t\t\treturn compareIgnoreCase(a, this._value.scheme);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Authority) {\n\t\t\treturn compareIgnoreCase(a, this._value.authority);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Path) {\n\t\t\treturn this._pathIterator.cmp(a);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Query) {\n\t\t\treturn compare(a, this._value.query);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Fragment) {\n\t\t\treturn compare(a, this._value.fragment);\n\t\t}\n\t\tthrow new Error();\n\t}\n\n\tvalue(): string {\n\t\tif (this._states[this._stateIdx] === UriIteratorState.Scheme) {\n\t\t\treturn this._value.scheme;\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Authority) {\n\t\t\treturn this._value.authority;\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Path) {\n\t\t\treturn this._pathIterator.value();\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Query) {\n\t\t\treturn this._value.query;\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Fragment) {\n\t\t\treturn this._value.fragment;\n\t\t}\n\t\tthrow new Error();\n\t}\n}\n\nclass TernarySearchTreeNode<K, V> {\n\tsegment!: string;\n\tvalue: V | undefined;\n\tkey!: K;\n\tleft: TernarySearchTreeNode<K, V> | undefined;\n\tmid: TernarySearchTreeNode<K, V> | undefined;\n\tright: TernarySearchTreeNode<K, V> | undefined;\n\n\tisEmpty(): boolean {\n\t\treturn !this.left && !this.mid && !this.right && !this.value;\n\t}\n}\n\nexport class TernarySearchTree<K, V> {\n\n\tstatic forUris<E>(ignorePathCasing: (key: URI) => boolean = () => false): TernarySearchTree<URI, E> {\n\t\treturn new TernarySearchTree<URI, E>(new UriIterator(ignorePathCasing));\n\t}\n\n\tstatic forPaths<E>(): TernarySearchTree<string, E> {\n\t\treturn new TernarySearchTree<string, E>(new PathIterator());\n\t}\n\n\tstatic forStrings<E>(): TernarySearchTree<string, E> {\n\t\treturn new TernarySearchTree<string, E>(new StringIterator());\n\t}\n\n\tstatic forConfigKeys<E>(): TernarySearchTree<string, E> {\n\t\treturn new TernarySearchTree<string, E>(new ConfigKeysIterator());\n\t}\n\n\tprivate _iter: IKeyIterator<K>;\n\tprivate _root: TernarySearchTreeNode<K, V> | undefined;\n\n\tconstructor(segments: IKeyIterator<K>) {\n\t\tthis._iter = segments;\n\t}\n\n\tclear(): void {\n\t\tthis._root = undefined;\n\t}\n\n\tset(key: K, element: V): V | undefined {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node: TernarySearchTreeNode<K, V>;\n\n\t\tif (!this._root) {\n\t\t\tthis._root = new TernarySearchTreeNode<K, V>();\n\t\t\tthis._root.segment = iter.value();\n\t\t}\n\n\t\tnode = this._root;\n\t\twhile (true) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tif (!node.left) {\n\t\t\t\t\tnode.left = new TernarySearchTreeNode<K, V>();\n\t\t\t\t\tnode.left.segment = iter.value();\n\t\t\t\t}\n\t\t\t\tnode = node.left;\n\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tif (!node.right) {\n\t\t\t\t\tnode.right = new TernarySearchTreeNode<K, V>();\n\t\t\t\t\tnode.right.segment = iter.value();\n\t\t\t\t}\n\t\t\t\tnode = node.right;\n\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tif (!node.mid) {\n\t\t\t\t\tnode.mid = new TernarySearchTreeNode<K, V>();\n\t\t\t\t\tnode.mid.segment = iter.value();\n\t\t\t\t}\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tconst oldElement = node.value;\n\t\tnode.value = element;\n\t\tnode.key = key;\n\t\treturn oldElement;\n\t}\n\n\tget(key: K): V | undefined {\n\t\treturn this._getNode(key)?.value;\n\t}\n\n\tprivate _getNode(key: K) {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node = this._root;\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\thas(key: K): boolean {\n\t\tconst node = this._getNode(key);\n\t\treturn !(node?.value === undefined && node?.mid === undefined);\n\t}\n\n\tdelete(key: K): void {\n\t\treturn this._delete(key, false);\n\t}\n\n\tdeleteSuperstr(key: K): void {\n\t\treturn this._delete(key, true);\n\t}\n\n\tprivate _delete(key: K, superStr: boolean): void {\n\t\tconst iter = this._iter.reset(key);\n\t\tconst stack: [-1 | 0 | 1, TernarySearchTreeNode<K, V>][] = [];\n\t\tlet node = this._root;\n\n\t\t// find and unset node\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tstack.push([1, node]);\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tstack.push([-1, node]);\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tstack.push([0, node]);\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tif (superStr) {\n\t\t\t\t\t// remove children\n\t\t\t\t\tnode.left = undefined;\n\t\t\t\t\tnode.mid = undefined;\n\t\t\t\t\tnode.right = undefined;\n\t\t\t\t} else {\n\t\t\t\t\t// remove element\n\t\t\t\t\tnode.value = undefined;\n\t\t\t\t}\n\n\t\t\t\t// clean up empty nodes\n\t\t\t\twhile (stack.length > 0 && node.isEmpty()) {\n\t\t\t\t\tlet [dir, parent] = stack.pop()!;\n\t\t\t\t\tswitch (dir) {\n\t\t\t\t\t\tcase 1: parent.left = undefined; break;\n\t\t\t\t\t\tcase 0: parent.mid = undefined; break;\n\t\t\t\t\t\tcase -1: parent.right = undefined; break;\n\t\t\t\t\t}\n\t\t\t\t\tnode = parent;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tfindSubstr(key: K): V | undefined {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node = this._root;\n\t\tlet candidate: V | undefined = undefined;\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tcandidate = node.value || candidate;\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn node && node.value || candidate;\n\t}\n\n\tfindSuperstr(key: K): IterableIterator<[K, V]> | undefined {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node = this._root;\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\t// collect\n\t\t\t\tif (!node.mid) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\treturn this._entries(node.mid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tforEach(callback: (value: V, index: K) => any): void {\n\t\tfor (const [key, value] of this) {\n\t\t\tcallback(value, key);\n\t\t}\n\t}\n\n\t*[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\tyield* this._entries(this._root);\n\t}\n\n\tprivate *_entries(node: TernarySearchTreeNode<K, V> | undefined): IterableIterator<[K, V]> {\n\t\tif (node) {\n\t\t\t// left\n\t\t\tyield* this._entries(node.left);\n\n\t\t\t// node\n\t\t\tif (node.value) {\n\t\t\t\t// callback(node.value, this._iter.join(parts));\n\t\t\t\tyield [node.key, node.value];\n\t\t\t}\n\t\t\t// mid\n\t\t\tyield* this._entries(node.mid);\n\n\t\t\t// right\n\t\t\tyield* this._entries(node.right);\n\t\t}\n\t}\n}\n\ninterface ResourceMapKeyFn {\n\t(resource: URI): string;\n}\n\nexport class ResourceMap<T> implements Map<URI, T> {\n\n\tprivate static readonly defaultToKey = (resource: URI) => resource.toString();\n\n\treadonly [Symbol.toStringTag] = 'ResourceMap';\n\n\tprivate readonly map: Map<string, T>;\n\tprivate readonly toKey: ResourceMapKeyFn;\n\n\t/**\n\t *\n\t * @param toKey Custom uri identity function, e.g use an existing `IExtUri#getComparison`-util\n\t */\n\tconstructor(toKey?: ResourceMapKeyFn);\n\n\t/**\n\t *\n\t * @param other Another resource which this maps is created from\n\t * @param toKey Custom uri identity function, e.g use an existing `IExtUri#getComparison`-util\n\t */\n\tconstructor(other?: ResourceMap<T>, toKey?: ResourceMapKeyFn);\n\n\tconstructor(mapOrKeyFn?: ResourceMap<T> | ResourceMapKeyFn, toKey?: ResourceMapKeyFn) {\n\t\tif (mapOrKeyFn instanceof ResourceMap) {\n\t\t\tthis.map = new Map(mapOrKeyFn.map);\n\t\t\tthis.toKey = toKey ?? ResourceMap.defaultToKey;\n\t\t} else {\n\t\t\tthis.map = new Map();\n\t\t\tthis.toKey = mapOrKeyFn ?? ResourceMap.defaultToKey;\n\t\t}\n\t}\n\n\tset(resource: URI, value: T): this {\n\t\tthis.map.set(this.toKey(resource), value);\n\t\treturn this;\n\t}\n\n\tget(resource: URI): T | undefined {\n\t\treturn this.map.get(this.toKey(resource));\n\t}\n\n\thas(resource: URI): boolean {\n\t\treturn this.map.has(this.toKey(resource));\n\t}\n\n\tget size(): number {\n\t\treturn this.map.size;\n\t}\n\n\tclear(): void {\n\t\tthis.map.clear();\n\t}\n\n\tdelete(resource: URI): boolean {\n\t\treturn this.map.delete(this.toKey(resource));\n\t}\n\n\tforEach(clb: (value: T, key: URI, map: Map<URI, T>) => void, thisArg?: any): void {\n\t\tif (typeof thisArg !== 'undefined') {\n\t\t\tclb = clb.bind(thisArg);\n\t\t}\n\t\tfor (let [index, value] of this.map) {\n\t\t\tclb(value, URI.parse(index), <any>this);\n\t\t}\n\t}\n\n\tvalues(): IterableIterator<T> {\n\t\treturn this.map.values();\n\t}\n\n\t*keys(): IterableIterator<URI> {\n\t\tfor (let key of this.map.keys()) {\n\t\t\tyield URI.parse(key);\n\t\t}\n\t}\n\n\t*entries(): IterableIterator<[URI, T]> {\n\t\tfor (let tuple of this.map.entries()) {\n\t\t\tyield [URI.parse(tuple[0]), tuple[1]];\n\t\t}\n\t}\n\n\t*[Symbol.iterator](): IterableIterator<[URI, T]> {\n\t\tfor (let item of this.map) {\n\t\t\tyield [URI.parse(item[0]), item[1]];\n\t\t}\n\t}\n}\n\ninterface Item<K, V> {\n\tprevious: Item<K, V> | undefined;\n\tnext: Item<K, V> | undefined;\n\tkey: K;\n\tvalue: V;\n}\n\nexport const enum Touch {\n\tNone = 0,\n\tAsOld = 1,\n\tAsNew = 2\n}\n\nexport class LinkedMap<K, V> implements Map<K, V> {\n\n\treadonly [Symbol.toStringTag] = 'LinkedMap';\n\n\tprivate _map: Map<K, Item<K, V>>;\n\tprivate _head: Item<K, V> | undefined;\n\tprivate _tail: Item<K, V> | undefined;\n\tprivate _size: number;\n\n\tprivate _state: number;\n\n\tconstructor() {\n\t\tthis._map = new Map<K, Item<K, V>>();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state = 0;\n\t}\n\n\tclear(): void {\n\t\tthis._map.clear();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state++;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn !this._head && !this._tail;\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tget first(): V | undefined {\n\t\treturn this._head?.value;\n\t}\n\n\tget last(): V | undefined {\n\t\treturn this._tail?.value;\n\t}\n\n\thas(key: K): boolean {\n\t\treturn this._map.has(key);\n\t}\n\n\tget(key: K, touch: Touch = Touch.None): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (touch !== Touch.None) {\n\t\t\tthis.touch(item, touch);\n\t\t}\n\t\treturn item.value;\n\t}\n\n\tset(key: K, value: V, touch: Touch = Touch.None): this {\n\t\tlet item = this._map.get(key);\n\t\tif (item) {\n\t\t\titem.value = value;\n\t\t\tif (touch !== Touch.None) {\n\t\t\t\tthis.touch(item, touch);\n\t\t\t}\n\t\t} else {\n\t\t\titem = { key, value, next: undefined, previous: undefined };\n\t\t\tswitch (touch) {\n\t\t\t\tcase Touch.None:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.AsOld:\n\t\t\t\t\tthis.addItemFirst(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.AsNew:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis._map.set(key, item);\n\t\t\tthis._size++;\n\t\t}\n\t\treturn this;\n\t}\n\n\tdelete(key: K): boolean {\n\t\treturn !!this.remove(key);\n\t}\n\n\tremove(key: K): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._map.delete(key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tshift(): V | undefined {\n\t\tif (!this._head && !this._tail) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tconst item = this._head;\n\t\tthis._map.delete(item.key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tforEach(callbackfn: (value: V, key: K, map: LinkedMap<K, V>) => void, thisArg?: any): void {\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\twhile (current) {\n\t\t\tif (thisArg) {\n\t\t\t\tcallbackfn.bind(thisArg)(current.value, current.key, this);\n\t\t\t} else {\n\t\t\t\tcallbackfn(current.value, current.key, this);\n\t\t\t}\n\t\t\tif (this._state !== state) {\n\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t}\n\t\t\tcurrent = current.next;\n\t\t}\n\t}\n\n\tkeys(): IterableIterator<K> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<K> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<K> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.key, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tvalues(): IterableIterator<V> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<V> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<V> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.value, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tentries(): IterableIterator<[K, V]> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<[K, V]> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<[K, V]> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result: IteratorResult<[K, V]> = { value: [current.key, current.value], done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\treturn this.entries();\n\t}\n\n\tprotected trimOld(newSize: number) {\n\t\tif (newSize >= this.size) {\n\t\t\treturn;\n\t\t}\n\t\tif (newSize === 0) {\n\t\t\tthis.clear();\n\t\t\treturn;\n\t\t}\n\t\tlet current = this._head;\n\t\tlet currentSize = this.size;\n\t\twhile (current && currentSize > newSize) {\n\t\t\tthis._map.delete(current.key);\n\t\t\tcurrent = current.next;\n\t\t\tcurrentSize--;\n\t\t}\n\t\tthis._head = current;\n\t\tthis._size = currentSize;\n\t\tif (current) {\n\t\t\tcurrent.previous = undefined;\n\t\t}\n\t\tthis._state++;\n\t}\n\n\tprivate addItemFirst(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._tail = item;\n\t\t} else if (!this._head) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t}\n\t\tthis._head = item;\n\t\tthis._state++;\n\t}\n\n\tprivate addItemLast(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._head = item;\n\t\t} else if (!this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t}\n\t\tthis._tail = item;\n\t\tthis._state++;\n\t}\n\n\tprivate removeItem(item: Item<K, V>): void {\n\t\tif (item === this._head && item === this._tail) {\n\t\t\tthis._head = undefined;\n\t\t\tthis._tail = undefined;\n\t\t}\n\t\telse if (item === this._head) {\n\t\t\t// This can only happen if size === 1 which is handled\n\t\t\t// by the case above.\n\t\t\tif (!item.next) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.next.previous = undefined;\n\t\t\tthis._head = item.next;\n\t\t}\n\t\telse if (item === this._tail) {\n\t\t\t// This can only happen if size === 1 which is handled\n\t\t\t// by the case above.\n\t\t\tif (!item.previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.previous.next = undefined;\n\t\t\tthis._tail = item.previous;\n\t\t}\n\t\telse {\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\t\t\tif (!next || !previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\tnext.previous = previous;\n\t\t\tprevious.next = next;\n\t\t}\n\t\titem.next = undefined;\n\t\titem.previous = undefined;\n\t\tthis._state++;\n\t}\n\n\tprivate touch(item: Item<K, V>, touch: Touch): void {\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tif ((touch !== Touch.AsOld && touch !== Touch.AsNew)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (touch === Touch.AsOld) {\n\t\t\tif (item === this._head) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item\n\t\t\tif (item === this._tail) {\n\t\t\t\t// previous must be defined since item was not head but is tail\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tprevious!.next = undefined;\n\t\t\t\tthis._tail = previous;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\n\t\t\t// Insert the node at head\n\t\t\titem.previous = undefined;\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t\tthis._head = item;\n\t\t\tthis._state++;\n\t\t} else if (touch === Touch.AsNew) {\n\t\t\tif (item === this._tail) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item.\n\t\t\tif (item === this._head) {\n\t\t\t\t// next must be defined since item was not tail but is head\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tnext!.previous = undefined;\n\t\t\t\tthis._head = next;\n\t\t\t} else {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\t\t\titem.next = undefined;\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t\tthis._tail = item;\n\t\t\tthis._state++;\n\t\t}\n\t}\n\n\ttoJSON(): [K, V][] {\n\t\tconst data: [K, V][] = [];\n\n\t\tthis.forEach((value, key) => {\n\t\t\tdata.push([key, value]);\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tfromJSON(data: [K, V][]): void {\n\t\tthis.clear();\n\n\t\tfor (const [key, value] of data) {\n\t\t\tthis.set(key, value);\n\t\t}\n\t}\n}\n\nexport class LRUCache<K, V> extends LinkedMap<K, V> {\n\n\tprivate _limit: number;\n\tprivate _ratio: number;\n\n\tconstructor(limit: number, ratio: number = 1) {\n\t\tsuper();\n\t\tthis._limit = limit;\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t}\n\n\tget limit(): number {\n\t\treturn this._limit;\n\t}\n\n\tset limit(limit: number) {\n\t\tthis._limit = limit;\n\t\tthis.checkTrim();\n\t}\n\n\tget ratio(): number {\n\t\treturn this._ratio;\n\t}\n\n\tset ratio(ratio: number) {\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t\tthis.checkTrim();\n\t}\n\n\toverride get(key: K, touch: Touch = Touch.AsNew): V | undefined {\n\t\treturn super.get(key, touch);\n\t}\n\n\tpeek(key: K): V | undefined {\n\t\treturn super.get(key, Touch.None);\n\t}\n\n\toverride set(key: K, value: V): this {\n\t\tsuper.set(key, value, Touch.AsNew);\n\t\tthis.checkTrim();\n\t\treturn this;\n\t}\n\n\tprivate checkTrim() {\n\t\tif (this.size > this._limit) {\n\t\t\tthis.trimOld(Math.round(this._limit * this._ratio));\n\t\t}\n\t}\n}\n\n/**\n * Wraps the map in type that only implements readonly properties. Useful\n * in the extension host to prevent the consumer from making any mutations.\n */\nexport class ReadonlyMapView<K, V> implements ReadonlyMap<K, V>{\n\treadonly #source: ReadonlyMap<K, V>;\n\n\tpublic get size() {\n\t\treturn this.#source.size;\n\t}\n\n\tconstructor(source: ReadonlyMap<K, V>) {\n\t\tthis.#source = source;\n\t}\n\n\tforEach(callbackfn: (value: V, key: K, map: ReadonlyMap<K, V>) => void, thisArg?: any): void {\n\t\tthis.#source.forEach(callbackfn, thisArg);\n\t}\n\n\tget(key: K): V | undefined {\n\t\treturn this.#source.get(key);\n\t}\n\n\thas(key: K): boolean {\n\t\treturn this.#source.has(key);\n\t}\n\n\tentries(): IterableIterator<[K, V]> {\n\t\treturn this.#source.entries();\n\t}\n\n\tkeys(): IterableIterator<K> {\n\t\treturn this.#source.keys();\n\t}\n\n\tvalues(): IterableIterator<V> {\n\t\treturn this.#source.values();\n\t}\n\n\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\treturn this.#source.entries();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from 'vs/base/common/charCode';\nimport { LRUCache } from 'vs/base/common/map';\nimport * as strings from 'vs/base/common/strings';\n\nexport interface IFilter {\n\t// Returns null if word doesn't match.\n\t(word: string, wordToMatchAgainst: string): IMatch[] | null;\n}\n\nexport interface IMatch {\n\tstart: number;\n\tend: number;\n}\n\n// Combined filters\n\n/**\n * @returns A filter which combines the provided set\n * of filters with an or. The *first* filters that\n * matches defined the return value of the returned\n * filter.\n */\nexport function or(...filter: IFilter[]): IFilter {\n\treturn function (word: string, wordToMatchAgainst: string): IMatch[] | null {\n\t\tfor (let i = 0, len = filter.length; i < len; i++) {\n\t\t\tconst match = filter[i](word, wordToMatchAgainst);\n\t\t\tif (match) {\n\t\t\t\treturn match;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t};\n}\n\n// Prefix\n\nexport const matchesStrictPrefix: IFilter = _matchesPrefix.bind(undefined, false);\nexport const matchesPrefix: IFilter = _matchesPrefix.bind(undefined, true);\n\nfunction _matchesPrefix(ignoreCase: boolean, word: string, wordToMatchAgainst: string): IMatch[] | null {\n\tif (!wordToMatchAgainst || wordToMatchAgainst.length < word.length) {\n\t\treturn null;\n\t}\n\n\tlet matches: boolean;\n\tif (ignoreCase) {\n\t\tmatches = strings.startsWithIgnoreCase(wordToMatchAgainst, word);\n\t} else {\n\t\tmatches = wordToMatchAgainst.indexOf(word) === 0;\n\t}\n\n\tif (!matches) {\n\t\treturn null;\n\t}\n\n\treturn word.length > 0 ? [{ start: 0, end: word.length }] : [];\n}\n\n// Contiguous Substring\n\nexport function matchesContiguousSubString(word: string, wordToMatchAgainst: string): IMatch[] | null {\n\tconst index = wordToMatchAgainst.toLowerCase().indexOf(word.toLowerCase());\n\tif (index === -1) {\n\t\treturn null;\n\t}\n\n\treturn [{ start: index, end: index + word.length }];\n}\n\n// Substring\n\nexport function matchesSubString(word: string, wordToMatchAgainst: string): IMatch[] | null {\n\treturn _matchesSubString(word.toLowerCase(), wordToMatchAgainst.toLowerCase(), 0, 0);\n}\n\nfunction _matchesSubString(word: string, wordToMatchAgainst: string, i: number, j: number): IMatch[] | null {\n\tif (i === word.length) {\n\t\treturn [];\n\t} else if (j === wordToMatchAgainst.length) {\n\t\treturn null;\n\t} else {\n\t\tif (word[i] === wordToMatchAgainst[j]) {\n\t\t\tlet result: IMatch[] | null = null;\n\t\t\tif (result = _matchesSubString(word, wordToMatchAgainst, i + 1, j + 1)) {\n\t\t\t\treturn join({ start: j, end: j + 1 }, result);\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\n\t\treturn _matchesSubString(word, wordToMatchAgainst, i, j + 1);\n\t}\n}\n\n// CamelCase\n\nfunction isLower(code: number): boolean {\n\treturn CharCode.a <= code && code <= CharCode.z;\n}\n\nexport function isUpper(code: number): boolean {\n\treturn CharCode.A <= code && code <= CharCode.Z;\n}\n\nfunction isNumber(code: number): boolean {\n\treturn CharCode.Digit0 <= code && code <= CharCode.Digit9;\n}\n\nfunction isWhitespace(code: number): boolean {\n\treturn (\n\t\tcode === CharCode.Space\n\t\t|| code === CharCode.Tab\n\t\t|| code === CharCode.LineFeed\n\t\t|| code === CharCode.CarriageReturn\n\t);\n}\n\nconst wordSeparators = new Set<number>();\n'`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?'\n\t.split('')\n\t.forEach(s => wordSeparators.add(s.charCodeAt(0)));\n\nfunction isWordSeparator(code: number): boolean {\n\treturn isWhitespace(code) || wordSeparators.has(code);\n}\n\nfunction charactersMatch(codeA: number, codeB: number): boolean {\n\treturn (codeA === codeB) || (isWordSeparator(codeA) && isWordSeparator(codeB));\n}\n\nfunction isAlphanumeric(code: number): boolean {\n\treturn isLower(code) || isUpper(code) || isNumber(code);\n}\n\nfunction join(head: IMatch, tail: IMatch[]): IMatch[] {\n\tif (tail.length === 0) {\n\t\ttail = [head];\n\t} else if (head.end === tail[0].start) {\n\t\ttail[0].start = head.start;\n\t} else {\n\t\ttail.unshift(head);\n\t}\n\treturn tail;\n}\n\nfunction nextAnchor(camelCaseWord: string, start: number): number {\n\tfor (let i = start; i < camelCaseWord.length; i++) {\n\t\tconst c = camelCaseWord.charCodeAt(i);\n\t\tif (isUpper(c) || isNumber(c) || (i > 0 && !isAlphanumeric(camelCaseWord.charCodeAt(i - 1)))) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn camelCaseWord.length;\n}\n\nfunction _matchesCamelCase(word: string, camelCaseWord: string, i: number, j: number): IMatch[] | null {\n\tif (i === word.length) {\n\t\treturn [];\n\t} else if (j === camelCaseWord.length) {\n\t\treturn null;\n\t} else if (word[i] !== camelCaseWord[j].toLowerCase()) {\n\t\treturn null;\n\t} else {\n\t\tlet result: IMatch[] | null = null;\n\t\tlet nextUpperIndex = j + 1;\n\t\tresult = _matchesCamelCase(word, camelCaseWord, i + 1, j + 1);\n\t\twhile (!result && (nextUpperIndex = nextAnchor(camelCaseWord, nextUpperIndex)) < camelCaseWord.length) {\n\t\t\tresult = _matchesCamelCase(word, camelCaseWord, i + 1, nextUpperIndex);\n\t\t\tnextUpperIndex++;\n\t\t}\n\t\treturn result === null ? null : join({ start: j, end: j + 1 }, result);\n\t}\n}\n\ninterface ICamelCaseAnalysis {\n\tupperPercent: number;\n\tlowerPercent: number;\n\talphaPercent: number;\n\tnumericPercent: number;\n}\n\n// Heuristic to avoid computing camel case matcher for words that don't\n// look like camelCaseWords.\nfunction analyzeCamelCaseWord(word: string): ICamelCaseAnalysis {\n\tlet upper = 0, lower = 0, alpha = 0, numeric = 0, code = 0;\n\n\tfor (let i = 0; i < word.length; i++) {\n\t\tcode = word.charCodeAt(i);\n\n\t\tif (isUpper(code)) { upper++; }\n\t\tif (isLower(code)) { lower++; }\n\t\tif (isAlphanumeric(code)) { alpha++; }\n\t\tif (isNumber(code)) { numeric++; }\n\t}\n\n\tconst upperPercent = upper / word.length;\n\tconst lowerPercent = lower / word.length;\n\tconst alphaPercent = alpha / word.length;\n\tconst numericPercent = numeric / word.length;\n\n\treturn { upperPercent, lowerPercent, alphaPercent, numericPercent };\n}\n\nfunction isUpperCaseWord(analysis: ICamelCaseAnalysis): boolean {\n\tconst { upperPercent, lowerPercent } = analysis;\n\treturn lowerPercent === 0 && upperPercent > 0.6;\n}\n\nfunction isCamelCaseWord(analysis: ICamelCaseAnalysis): boolean {\n\tconst { upperPercent, lowerPercent, alphaPercent, numericPercent } = analysis;\n\treturn lowerPercent > 0.2 && upperPercent < 0.8 && alphaPercent > 0.6 && numericPercent < 0.2;\n}\n\n// Heuristic to avoid computing camel case matcher for words that don't\n// look like camel case patterns.\nfunction isCamelCasePattern(word: string): boolean {\n\tlet upper = 0, lower = 0, code = 0, whitespace = 0;\n\n\tfor (let i = 0; i < word.length; i++) {\n\t\tcode = word.charCodeAt(i);\n\n\t\tif (isUpper(code)) { upper++; }\n\t\tif (isLower(code)) { lower++; }\n\t\tif (isWhitespace(code)) { whitespace++; }\n\t}\n\n\tif ((upper === 0 || lower === 0) && whitespace === 0) {\n\t\treturn word.length <= 30;\n\t} else {\n\t\treturn upper <= 5;\n\t}\n}\n\nexport function matchesCamelCase(word: string, camelCaseWord: string): IMatch[] | null {\n\tif (!camelCaseWord) {\n\t\treturn null;\n\t}\n\n\tcamelCaseWord = camelCaseWord.trim();\n\n\tif (camelCaseWord.length === 0) {\n\t\treturn null;\n\t}\n\n\tif (!isCamelCasePattern(word)) {\n\t\treturn null;\n\t}\n\n\tif (camelCaseWord.length > 60) {\n\t\treturn null;\n\t}\n\n\tconst analysis = analyzeCamelCaseWord(camelCaseWord);\n\n\tif (!isCamelCaseWord(analysis)) {\n\t\tif (!isUpperCaseWord(analysis)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tcamelCaseWord = camelCaseWord.toLowerCase();\n\t}\n\n\tlet result: IMatch[] | null = null;\n\tlet i = 0;\n\n\tword = word.toLowerCase();\n\twhile (i < camelCaseWord.length && (result = _matchesCamelCase(word, camelCaseWord, 0, i)) === null) {\n\t\ti = nextAnchor(camelCaseWord, i + 1);\n\t}\n\n\treturn result;\n}\n\n// Matches beginning of words supporting non-ASCII languages\n// If `contiguous` is true then matches word with beginnings of the words in the target. E.g. \"pul\" will match \"Git: Pull\"\n// Otherwise also matches sub string of the word with beginnings of the words in the target. E.g. \"gp\" or \"g p\" will match \"Git: Pull\"\n// Useful in cases where the target is words (e.g. command labels)\n\nexport function matchesWords(word: string, target: string, contiguous: boolean = false): IMatch[] | null {\n\tif (!target || target.length === 0) {\n\t\treturn null;\n\t}\n\n\tlet result: IMatch[] | null = null;\n\tlet i = 0;\n\n\tword = word.toLowerCase();\n\ttarget = target.toLowerCase();\n\twhile (i < target.length && (result = _matchesWords(word, target, 0, i, contiguous)) === null) {\n\t\ti = nextWord(target, i + 1);\n\t}\n\n\treturn result;\n}\n\nfunction _matchesWords(word: string, target: string, i: number, j: number, contiguous: boolean): IMatch[] | null {\n\tif (i === word.length) {\n\t\treturn [];\n\t} else if (j === target.length) {\n\t\treturn null;\n\t} else if (!charactersMatch(word.charCodeAt(i), target.charCodeAt(j))) {\n\t\treturn null;\n\t} else {\n\t\tlet result: IMatch[] | null = null;\n\t\tlet nextWordIndex = j + 1;\n\t\tresult = _matchesWords(word, target, i + 1, j + 1, contiguous);\n\t\tif (!contiguous) {\n\t\t\twhile (!result && (nextWordIndex = nextWord(target, nextWordIndex)) < target.length) {\n\t\t\t\tresult = _matchesWords(word, target, i + 1, nextWordIndex, contiguous);\n\t\t\t\tnextWordIndex++;\n\t\t\t}\n\t\t}\n\t\treturn result === null ? null : join({ start: j, end: j + 1 }, result);\n\t}\n}\n\nfunction nextWord(word: string, start: number): number {\n\tfor (let i = start; i < word.length; i++) {\n\t\tif (isWordSeparator(word.charCodeAt(i)) ||\n\t\t\t(i > 0 && isWordSeparator(word.charCodeAt(i - 1)))) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn word.length;\n}\n\n// Fuzzy\n\nconst fuzzyContiguousFilter = or(matchesPrefix, matchesCamelCase, matchesContiguousSubString);\nconst fuzzySeparateFilter = or(matchesPrefix, matchesCamelCase, matchesSubString);\nconst fuzzyRegExpCache = new LRUCache<string, RegExp>(10000); // bounded to 10000 elements\n\nexport function matchesFuzzy(word: string, wordToMatchAgainst: string, enableSeparateSubstringMatching = false): IMatch[] | null {\n\tif (typeof word !== 'string' || typeof wordToMatchAgainst !== 'string') {\n\t\treturn null; // return early for invalid input\n\t}\n\n\t// Form RegExp for wildcard matches\n\tlet regexp = fuzzyRegExpCache.get(word);\n\tif (!regexp) {\n\t\tregexp = new RegExp(strings.convertSimple2RegExpPattern(word), 'i');\n\t\tfuzzyRegExpCache.set(word, regexp);\n\t}\n\n\t// RegExp Filter\n\tconst match = regexp.exec(wordToMatchAgainst);\n\tif (match) {\n\t\treturn [{ start: match.index, end: match.index + match[0].length }];\n\t}\n\n\t// Default Filter\n\treturn enableSeparateSubstringMatching ? fuzzySeparateFilter(word, wordToMatchAgainst) : fuzzyContiguousFilter(word, wordToMatchAgainst);\n}\n\n/**\n * Match pattern againt word in a fuzzy way. As in IntelliSense and faster and more\n * powerfull than `matchesFuzzy`\n */\nexport function matchesFuzzy2(pattern: string, word: string): IMatch[] | null {\n\tconst score = fuzzyScore(pattern, pattern.toLowerCase(), 0, word, word.toLowerCase(), 0, true);\n\treturn score ? createMatches(score) : null;\n}\n\nexport function anyScore(pattern: string, lowPattern: string, patternPos: number, word: string, lowWord: string, wordPos: number): FuzzyScore {\n\tconst max = Math.min(13, pattern.length);\n\tfor (; patternPos < max; patternPos++) {\n\t\tconst result = fuzzyScore(pattern, lowPattern, patternPos, word, lowWord, wordPos, false);\n\t\tif (result) {\n\t\t\treturn result;\n\t\t}\n\t}\n\treturn [0, wordPos];\n}\n\n//#region --- fuzzyScore ---\n\nexport function createMatches(score: undefined | FuzzyScore): IMatch[] {\n\tif (typeof score === 'undefined') {\n\t\treturn [];\n\t}\n\tconst res: IMatch[] = [];\n\tconst wordPos = score[1];\n\tfor (let i = score.length - 1; i > 1; i--) {\n\t\tconst pos = score[i] + wordPos;\n\t\tconst last = res[res.length - 1];\n\t\tif (last && last.end === pos) {\n\t\t\tlast.end = pos + 1;\n\t\t} else {\n\t\t\tres.push({ start: pos, end: pos + 1 });\n\t\t}\n\t}\n\treturn res;\n}\n\nconst _maxLen = 128;\n\nfunction initTable() {\n\tconst table: number[][] = [];\n\tconst row: number[] = [];\n\tfor (let i = 0; i <= _maxLen; i++) {\n\t\trow[i] = 0;\n\t}\n\tfor (let i = 0; i <= _maxLen; i++) {\n\t\ttable.push(row.slice(0));\n\t}\n\treturn table;\n}\n\nfunction initArr(maxLen: number) {\n\tconst row: number[] = [];\n\tfor (let i = 0; i <= maxLen; i++) {\n\t\trow[i] = 0;\n\t}\n\treturn row;\n}\n\nconst _minWordMatchPos = initArr(2 * _maxLen); // min word position for a certain pattern position\nconst _maxWordMatchPos = initArr(2 * _maxLen); // max word position for a certain pattern position\nconst _diag = initTable(); // the length of a contiguous diagonal match\nconst _table = initTable();\nconst _arrows = <Arrow[][]>initTable();\nconst _debug = false;\n\nfunction printTable(table: number[][], pattern: string, patternLen: number, word: string, wordLen: number): string {\n\tfunction pad(s: string, n: number, pad = ' ') {\n\t\twhile (s.length < n) {\n\t\t\ts = pad + s;\n\t\t}\n\t\treturn s;\n\t}\n\tlet ret = ` |   |${word.split('').map(c => pad(c, 3)).join('|')}\\n`;\n\n\tfor (let i = 0; i <= patternLen; i++) {\n\t\tif (i === 0) {\n\t\t\tret += ' |';\n\t\t} else {\n\t\t\tret += `${pattern[i - 1]}|`;\n\t\t}\n\t\tret += table[i].slice(0, wordLen + 1).map(n => pad(n.toString(), 3)).join('|') + '\\n';\n\t}\n\treturn ret;\n}\n\nfunction printTables(pattern: string, patternStart: number, word: string, wordStart: number): void {\n\tpattern = pattern.substr(patternStart);\n\tword = word.substr(wordStart);\n\tconsole.log(printTable(_table, pattern, pattern.length, word, word.length));\n\tconsole.log(printTable(_arrows, pattern, pattern.length, word, word.length));\n\tconsole.log(printTable(_diag, pattern, pattern.length, word, word.length));\n}\n\nfunction isSeparatorAtPos(value: string, index: number): boolean {\n\tif (index < 0 || index >= value.length) {\n\t\treturn false;\n\t}\n\tconst code = value.codePointAt(index);\n\tswitch (code) {\n\t\tcase CharCode.Underline:\n\t\tcase CharCode.Dash:\n\t\tcase CharCode.Period:\n\t\tcase CharCode.Space:\n\t\tcase CharCode.Slash:\n\t\tcase CharCode.Backslash:\n\t\tcase CharCode.SingleQuote:\n\t\tcase CharCode.DoubleQuote:\n\t\tcase CharCode.Colon:\n\t\tcase CharCode.DollarSign:\n\t\tcase CharCode.LessThan:\n\t\tcase CharCode.OpenParen:\n\t\tcase CharCode.OpenSquareBracket:\n\t\t\treturn true;\n\t\tcase undefined:\n\t\t\treturn false;\n\t\tdefault:\n\t\t\tif (strings.isEmojiImprecise(code)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t}\n}\n\nfunction isWhitespaceAtPos(value: string, index: number): boolean {\n\tif (index < 0 || index >= value.length) {\n\t\treturn false;\n\t}\n\tconst code = value.charCodeAt(index);\n\tswitch (code) {\n\t\tcase CharCode.Space:\n\t\tcase CharCode.Tab:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nfunction isUpperCaseAtPos(pos: number, word: string, wordLow: string): boolean {\n\treturn word[pos] !== wordLow[pos];\n}\n\nexport function isPatternInWord(patternLow: string, patternPos: number, patternLen: number, wordLow: string, wordPos: number, wordLen: number, fillMinWordPosArr = false): boolean {\n\twhile (patternPos < patternLen && wordPos < wordLen) {\n\t\tif (patternLow[patternPos] === wordLow[wordPos]) {\n\t\t\tif (fillMinWordPosArr) {\n\t\t\t\t// Remember the min word position for each pattern position\n\t\t\t\t_minWordMatchPos[patternPos] = wordPos;\n\t\t\t}\n\t\t\tpatternPos += 1;\n\t\t}\n\t\twordPos += 1;\n\t}\n\treturn patternPos === patternLen; // pattern must be exhausted\n}\n\nconst enum Arrow { Diag = 1, Left = 2, LeftLeft = 3 }\n\n/**\n * An array representating a fuzzy match.\n *\n * 0. the score\n * 1. the offset at which matching started\n * 2. `<match_pos_N>`\n * 3. `<match_pos_1>`\n * 4. `<match_pos_0>` etc\n */\nexport type FuzzyScore = [score: number, wordStart: number, ...matches: number[]];// [number, number, number];\n\nexport namespace FuzzyScore {\n\t/**\n\t * No matches and value `-100`\n\t */\n\texport const Default: FuzzyScore = ([-100, 0]);\n\n\texport function isDefault(score?: FuzzyScore): score is [-100, 0] {\n\t\treturn !score || (score.length === 2 && score[0] === -100 && score[1] === 0);\n\t}\n}\n\nexport interface FuzzyScorer {\n\t(pattern: string, lowPattern: string, patternPos: number, word: string, lowWord: string, wordPos: number, firstMatchCanBeWeak: boolean): FuzzyScore | undefined;\n}\n\nexport function fuzzyScore(pattern: string, patternLow: string, patternStart: number, word: string, wordLow: string, wordStart: number, firstMatchCanBeWeak: boolean): FuzzyScore | undefined {\n\n\tconst patternLen = pattern.length > _maxLen ? _maxLen : pattern.length;\n\tconst wordLen = word.length > _maxLen ? _maxLen : word.length;\n\n\tif (patternStart >= patternLen || wordStart >= wordLen || (patternLen - patternStart) > (wordLen - wordStart)) {\n\t\treturn undefined;\n\t}\n\n\t// Run a simple check if the characters of pattern occur\n\t// (in order) at all in word. If that isn't the case we\n\t// stop because no match will be possible\n\tif (!isPatternInWord(patternLow, patternStart, patternLen, wordLow, wordStart, wordLen, true)) {\n\t\treturn undefined;\n\t}\n\n\t// Find the max matching word position for each pattern position\n\t// NOTE: the min matching word position was filled in above, in the `isPatternInWord` call\n\t_fillInMaxWordMatchPos(patternLen, wordLen, patternStart, wordStart, patternLow, wordLow);\n\n\tlet row: number = 1;\n\tlet column: number = 1;\n\tlet patternPos = patternStart;\n\tlet wordPos = wordStart;\n\n\tconst hasStrongFirstMatch = [false];\n\n\t// There will be a match, fill in tables\n\tfor (row = 1, patternPos = patternStart; patternPos < patternLen; row++, patternPos++) {\n\n\t\t// Reduce search space to possible matching word positions and to possible access from next row\n\t\tconst minWordMatchPos = _minWordMatchPos[patternPos];\n\t\tconst maxWordMatchPos = _maxWordMatchPos[patternPos];\n\t\tconst nextMaxWordMatchPos = (patternPos + 1 < patternLen ? _maxWordMatchPos[patternPos + 1] : wordLen);\n\n\t\tfor (column = minWordMatchPos - wordStart + 1, wordPos = minWordMatchPos; wordPos < nextMaxWordMatchPos; column++, wordPos++) {\n\n\t\t\tlet score = Number.MIN_SAFE_INTEGER;\n\t\t\tlet canComeDiag = false;\n\n\t\t\tif (wordPos <= maxWordMatchPos) {\n\t\t\t\tscore = _doScore(\n\t\t\t\t\tpattern, patternLow, patternPos, patternStart,\n\t\t\t\t\tword, wordLow, wordPos, wordLen, wordStart,\n\t\t\t\t\t_diag[row - 1][column - 1] === 0,\n\t\t\t\t\thasStrongFirstMatch\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tlet diagScore = 0;\n\t\t\tif (score !== Number.MAX_SAFE_INTEGER) {\n\t\t\t\tcanComeDiag = true;\n\t\t\t\tdiagScore = score + _table[row - 1][column - 1];\n\t\t\t}\n\n\t\t\tconst canComeLeft = wordPos > minWordMatchPos;\n\t\t\tconst leftScore = canComeLeft ? _table[row][column - 1] + (_diag[row][column - 1] > 0 ? -5 : 0) : 0; // penalty for a gap start\n\n\t\t\tconst canComeLeftLeft = wordPos > minWordMatchPos + 1 && _diag[row][column - 1] > 0;\n\t\t\tconst leftLeftScore = canComeLeftLeft ? _table[row][column - 2] + (_diag[row][column - 2] > 0 ? -5 : 0) : 0; // penalty for a gap start\n\n\t\t\tif (canComeLeftLeft && (!canComeLeft || leftLeftScore >= leftScore) && (!canComeDiag || leftLeftScore >= diagScore)) {\n\t\t\t\t// always prefer choosing left left to jump over a diagonal because that means a match is earlier in the word\n\t\t\t\t_table[row][column] = leftLeftScore;\n\t\t\t\t_arrows[row][column] = Arrow.LeftLeft;\n\t\t\t\t_diag[row][column] = 0;\n\t\t\t} else if (canComeLeft && (!canComeDiag || leftScore >= diagScore)) {\n\t\t\t\t// always prefer choosing left since that means a match is earlier in the word\n\t\t\t\t_table[row][column] = leftScore;\n\t\t\t\t_arrows[row][column] = Arrow.Left;\n\t\t\t\t_diag[row][column] = 0;\n\t\t\t} else if (canComeDiag) {\n\t\t\t\t_table[row][column] = diagScore;\n\t\t\t\t_arrows[row][column] = Arrow.Diag;\n\t\t\t\t_diag[row][column] = _diag[row - 1][column - 1] + 1;\n\t\t\t} else {\n\t\t\t\tthrow new Error(`not possible`);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (_debug) {\n\t\tprintTables(pattern, patternStart, word, wordStart);\n\t}\n\n\tif (!hasStrongFirstMatch[0] && !firstMatchCanBeWeak) {\n\t\treturn undefined;\n\t}\n\n\trow--;\n\tcolumn--;\n\n\tconst result: FuzzyScore = [_table[row][column], wordStart];\n\n\tlet backwardsDiagLength = 0;\n\tlet maxMatchColumn = 0;\n\n\twhile (row >= 1) {\n\t\t// Find the column where we go diagonally up\n\t\tlet diagColumn = column;\n\t\tdo {\n\t\t\tconst arrow = _arrows[row][diagColumn];\n\t\t\tif (arrow === Arrow.LeftLeft) {\n\t\t\t\tdiagColumn = diagColumn - 2;\n\t\t\t} else if (arrow === Arrow.Left) {\n\t\t\t\tdiagColumn = diagColumn - 1;\n\t\t\t} else {\n\t\t\t\t// found the diagonal\n\t\t\t\tbreak;\n\t\t\t}\n\t\t} while (diagColumn >= 1);\n\n\t\t// Overturn the \"forwards\" decision if keeping the \"backwards\" diagonal would give a better match\n\t\tif (\n\t\t\tbackwardsDiagLength > 1 // only if we would have a contiguous match of 3 characters\n\t\t\t&& patternLow[patternStart + row - 1] === wordLow[wordStart + column - 1] // only if we can do a contiguous match diagonally\n\t\t\t&& !isUpperCaseAtPos(diagColumn + wordStart - 1, word, wordLow) // only if the forwards chose diagonal is not an uppercase\n\t\t\t&& backwardsDiagLength + 1 > _diag[row][diagColumn] // only if our contiguous match would be longer than the \"forwards\" contiguous match\n\t\t) {\n\t\t\tdiagColumn = column;\n\t\t}\n\n\t\tif (diagColumn === column) {\n\t\t\t// this is a contiguous match\n\t\t\tbackwardsDiagLength++;\n\t\t} else {\n\t\t\tbackwardsDiagLength = 1;\n\t\t}\n\n\t\tif (!maxMatchColumn) {\n\t\t\t// remember the last matched column\n\t\t\tmaxMatchColumn = diagColumn;\n\t\t}\n\n\t\trow--;\n\t\tcolumn = diagColumn - 1;\n\t\tresult.push(column);\n\t}\n\n\tif (wordLen === patternLen) {\n\t\t// the word matches the pattern with all characters!\n\t\t// giving the score a total match boost (to come up ahead other words)\n\t\tresult[0] += 2;\n\t}\n\n\t// Add 1 penalty for each skipped character in the word\n\tconst skippedCharsCount = maxMatchColumn - patternLen;\n\tresult[0] -= skippedCharsCount;\n\n\treturn result;\n}\n\nfunction _fillInMaxWordMatchPos(patternLen: number, wordLen: number, patternStart: number, wordStart: number, patternLow: string, wordLow: string) {\n\tlet patternPos = patternLen - 1;\n\tlet wordPos = wordLen - 1;\n\twhile (patternPos >= patternStart && wordPos >= wordStart) {\n\t\tif (patternLow[patternPos] === wordLow[wordPos]) {\n\t\t\t_maxWordMatchPos[patternPos] = wordPos;\n\t\t\tpatternPos--;\n\t\t}\n\t\twordPos--;\n\t}\n}\n\nfunction _doScore(\n\tpattern: string, patternLow: string, patternPos: number, patternStart: number,\n\tword: string, wordLow: string, wordPos: number, wordLen: number, wordStart: number,\n\tnewMatchStart: boolean,\n\toutFirstMatchStrong: boolean[],\n): number {\n\tif (patternLow[patternPos] !== wordLow[wordPos]) {\n\t\treturn Number.MIN_SAFE_INTEGER;\n\t}\n\n\tlet score = 1;\n\tlet isGapLocation = false;\n\tif (wordPos === (patternPos - patternStart)) {\n\t\t// common prefix: `foobar <-> foobaz`\n\t\t//                            ^^^^^\n\t\tscore = pattern[patternPos] === word[wordPos] ? 7 : 5;\n\n\t} else if (isUpperCaseAtPos(wordPos, word, wordLow) && (wordPos === 0 || !isUpperCaseAtPos(wordPos - 1, word, wordLow))) {\n\t\t// hitting upper-case: `foo <-> forOthers`\n\t\t//                              ^^ ^\n\t\tscore = pattern[patternPos] === word[wordPos] ? 7 : 5;\n\t\tisGapLocation = true;\n\n\t} else if (isSeparatorAtPos(wordLow, wordPos) && (wordPos === 0 || !isSeparatorAtPos(wordLow, wordPos - 1))) {\n\t\t// hitting a separator: `. <-> foo.bar`\n\t\t//                                ^\n\t\tscore = 5;\n\n\t} else if (isSeparatorAtPos(wordLow, wordPos - 1) || isWhitespaceAtPos(wordLow, wordPos - 1)) {\n\t\t// post separator: `foo <-> bar_foo`\n\t\t//                              ^^^\n\t\tscore = 5;\n\t\tisGapLocation = true;\n\t}\n\n\tif (score > 1 && patternPos === patternStart) {\n\t\toutFirstMatchStrong[0] = true;\n\t}\n\n\tif (!isGapLocation) {\n\t\tisGapLocation = isUpperCaseAtPos(wordPos, word, wordLow) || isSeparatorAtPos(wordLow, wordPos - 1) || isWhitespaceAtPos(wordLow, wordPos - 1);\n\t}\n\n\t//\n\tif (patternPos === patternStart) { // first character in pattern\n\t\tif (wordPos > wordStart) {\n\t\t\t// the first pattern character would match a word character that is not at the word start\n\t\t\t// so introduce a penalty to account for the gap preceding this match\n\t\t\tscore -= isGapLocation ? 3 : 5;\n\t\t}\n\t} else {\n\t\tif (newMatchStart) {\n\t\t\t// this would be the beginning of a new match (i.e. there would be a gap before this location)\n\t\t\tscore += isGapLocation ? 2 : 0;\n\t\t} else {\n\t\t\t// this is part of a contiguous match, so give it a slight bonus, but do so only if it would not be a prefered gap location\n\t\t\tscore += isGapLocation ? 0 : 1;\n\t\t}\n\t}\n\n\tif (wordPos + 1 === wordLen) {\n\t\t// we always penalize gaps, but this gives unfair advantages to a match that would match the last character in the word\n\t\t// so pretend there is a gap after the last character in the word to normalize things\n\t\tscore -= isGapLocation ? 3 : 5;\n\t}\n\n\treturn score;\n}\n\n//#endregion\n\n\n//#region --- graceful ---\n\nexport function fuzzyScoreGracefulAggressive(pattern: string, lowPattern: string, patternPos: number, word: string, lowWord: string, wordPos: number, firstMatchCanBeWeak: boolean): FuzzyScore | undefined {\n\treturn fuzzyScoreWithPermutations(pattern, lowPattern, patternPos, word, lowWord, wordPos, true, firstMatchCanBeWeak);\n}\n\nexport function fuzzyScoreGraceful(pattern: string, lowPattern: string, patternPos: number, word: string, lowWord: string, wordPos: number, firstMatchCanBeWeak: boolean): FuzzyScore | undefined {\n\treturn fuzzyScoreWithPermutations(pattern, lowPattern, patternPos, word, lowWord, wordPos, false, firstMatchCanBeWeak);\n}\n\nfunction fuzzyScoreWithPermutations(pattern: string, lowPattern: string, patternPos: number, word: string, lowWord: string, wordPos: number, aggressive: boolean, firstMatchCanBeWeak: boolean): FuzzyScore | undefined {\n\tlet top = fuzzyScore(pattern, lowPattern, patternPos, word, lowWord, wordPos, firstMatchCanBeWeak);\n\n\tif (top && !aggressive) {\n\t\t// when using the original pattern yield a result we`\n\t\t// return it unless we are aggressive and try to find\n\t\t// a better alignment, e.g. `cno` -> `^co^ns^ole` or `^c^o^nsole`.\n\t\treturn top;\n\t}\n\n\tif (pattern.length >= 3) {\n\t\t// When the pattern is long enough then try a few (max 7)\n\t\t// permutations of the pattern to find a better match. The\n\t\t// permutations only swap neighbouring characters, e.g\n\t\t// `cnoso` becomes `conso`, `cnsoo`, `cnoos`.\n\t\tconst tries = Math.min(7, pattern.length - 1);\n\t\tfor (let movingPatternPos = patternPos + 1; movingPatternPos < tries; movingPatternPos++) {\n\t\t\tconst newPattern = nextTypoPermutation(pattern, movingPatternPos);\n\t\t\tif (newPattern) {\n\t\t\t\tconst candidate = fuzzyScore(newPattern, newPattern.toLowerCase(), patternPos, word, lowWord, wordPos, firstMatchCanBeWeak);\n\t\t\t\tif (candidate) {\n\t\t\t\t\tcandidate[0] -= 3; // permutation penalty\n\t\t\t\t\tif (!top || candidate[0] > top[0]) {\n\t\t\t\t\t\ttop = candidate;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn top;\n}\n\nfunction nextTypoPermutation(pattern: string, patternPos: number): string | undefined {\n\n\tif (patternPos + 1 >= pattern.length) {\n\t\treturn undefined;\n\t}\n\n\tconst swap1 = pattern[patternPos];\n\tconst swap2 = pattern[patternPos + 1];\n\n\tif (swap1 === swap2) {\n\t\treturn undefined;\n\t}\n\n\treturn pattern.slice(0, patternPos)\n\t\t+ swap2\n\t\t+ swap1\n\t\t+ pattern.slice(patternPos + 2);\n}\n\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { regExpFlags } from 'vs/base/common/strings';\nimport { URI, UriComponents } from 'vs/base/common/uri';\n\nexport function stringify(obj: any): string {\n\treturn JSON.stringify(obj, replacer);\n}\n\nexport function parse(text: string): any {\n\tlet data = JSON.parse(text);\n\tdata = revive(data);\n\treturn data;\n}\n\nexport interface MarshalledObject {\n\t$mid: number;\n}\n\nfunction replacer(key: string, value: any): any {\n\t// URI is done via toJSON-member\n\tif (value instanceof RegExp) {\n\t\treturn {\n\t\t\t$mid: 2,\n\t\t\tsource: value.source,\n\t\t\tflags: regExpFlags(value),\n\t\t};\n\t}\n\treturn value;\n}\n\n\ntype Deserialize<T> = T extends UriComponents ? URI\n\t: T extends object\n\t? Revived<T>\n\t: T;\n\nexport type Revived<T> = { [K in keyof T]: Deserialize<T[K]> };\n\nexport function revive<T = any>(obj: any, depth = 0): Revived<T> {\n\tif (!obj || depth > 200) {\n\t\treturn obj;\n\t}\n\n\tif (typeof obj === 'object') {\n\n\t\tswitch ((<MarshalledObject>obj).$mid) {\n\t\t\tcase 1: return <any>URI.revive(obj);\n\t\t\tcase 2: return <any>new RegExp(obj.source, obj.flags);\n\t\t}\n\n\t\tif (\n\t\t\tobj instanceof VSBuffer\n\t\t\t|| obj instanceof Uint8Array\n\t\t) {\n\t\t\treturn <any>obj;\n\t\t}\n\n\t\tif (Array.isArray(obj)) {\n\t\t\tfor (let i = 0; i < obj.length; ++i) {\n\t\t\t\tobj[i] = revive(obj[i], depth + 1);\n\t\t\t}\n\t\t} else {\n\t\t\t// walk object\n\t\t\tfor (const key in obj) {\n\t\t\t\tif (Object.hasOwnProperty.call(obj, key)) {\n\t\t\t\t\tobj[key] = revive(obj[key], depth + 1);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\treturn obj;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI } from 'vs/base/common/uri';\nimport * as platform from 'vs/base/common/platform';\n\nexport namespace Schemas {\n\n\t/**\n\t * A schema that is used for models that exist in memory\n\t * only and that have no correspondence on a server or such.\n\t */\n\texport const inMemory = 'inmemory';\n\n\t/**\n\t * A schema that is used for setting files\n\t */\n\texport const vscode = 'vscode';\n\n\t/**\n\t * A schema that is used for internal private files\n\t */\n\texport const internal = 'private';\n\n\t/**\n\t * A walk-through document.\n\t */\n\texport const walkThrough = 'walkThrough';\n\n\t/**\n\t * An embedded code snippet.\n\t */\n\texport const walkThroughSnippet = 'walkThroughSnippet';\n\n\texport const http = 'http';\n\n\texport const https = 'https';\n\n\texport const file = 'file';\n\n\texport const mailto = 'mailto';\n\n\texport const untitled = 'untitled';\n\n\texport const data = 'data';\n\n\texport const command = 'command';\n\n\texport const vscodeRemote = 'vscode-remote';\n\n\texport const vscodeRemoteResource = 'vscode-remote-resource';\n\n\texport const userData = 'vscode-userdata';\n\n\texport const vscodeCustomEditor = 'vscode-custom-editor';\n\n\texport const vscodeNotebook = 'vscode-notebook';\n\n\texport const vscodeNotebookCell = 'vscode-notebook-cell';\n\n\texport const vscodeNotebookCellMetadata = 'vscode-notebook-cell-metadata';\n\n\texport const vscodeSettings = 'vscode-settings';\n\n\texport const vscodeWorkspaceTrust = 'vscode-workspace-trust';\n\n\texport const vscodeTerminal = 'vscode-terminal';\n\n\texport const webviewPanel = 'webview-panel';\n\n\t/**\n\t * Scheme used for loading the wrapper html and script in webviews.\n\t */\n\texport const vscodeWebview = 'vscode-webview';\n\n\t/**\n\t * Scheme used for extension pages\n\t */\n\texport const extension = 'extension';\n\n\t/**\n\t * Scheme used as a replacement of `file` scheme to load\n\t * files with our custom protocol handler (desktop only).\n\t */\n\texport const vscodeFileResource = 'vscode-file';\n\n\t/**\n\t * Scheme used for temporary resources\n\t */\n\texport const tmp = 'tmp';\n}\n\nclass RemoteAuthoritiesImpl {\n\tprivate readonly _hosts: { [authority: string]: string | undefined; } = Object.create(null);\n\tprivate readonly _ports: { [authority: string]: number | undefined; } = Object.create(null);\n\tprivate readonly _connectionTokens: { [authority: string]: string | undefined; } = Object.create(null);\n\tprivate _preferredWebSchema: 'http' | 'https' = 'http';\n\tprivate _delegate: ((uri: URI) => URI) | null = null;\n\n\tsetPreferredWebSchema(schema: 'http' | 'https') {\n\t\tthis._preferredWebSchema = schema;\n\t}\n\n\tsetDelegate(delegate: (uri: URI) => URI): void {\n\t\tthis._delegate = delegate;\n\t}\n\n\tset(authority: string, host: string, port: number): void {\n\t\tthis._hosts[authority] = host;\n\t\tthis._ports[authority] = port;\n\t}\n\n\tsetConnectionToken(authority: string, connectionToken: string): void {\n\t\tthis._connectionTokens[authority] = connectionToken;\n\t}\n\n\trewrite(uri: URI): URI {\n\t\tif (this._delegate) {\n\t\t\treturn this._delegate(uri);\n\t\t}\n\t\tconst authority = uri.authority;\n\t\tlet host = this._hosts[authority];\n\t\tif (host && host.indexOf(':') !== -1) {\n\t\t\thost = `[${host}]`;\n\t\t}\n\t\tconst port = this._ports[authority];\n\t\tconst connectionToken = this._connectionTokens[authority];\n\t\tlet query = `path=${encodeURIComponent(uri.path)}`;\n\t\tif (typeof connectionToken === 'string') {\n\t\t\tquery += `&tkn=${encodeURIComponent(connectionToken)}`;\n\t\t}\n\t\treturn URI.from({\n\t\t\tscheme: platform.isWeb ? this._preferredWebSchema : Schemas.vscodeRemoteResource,\n\t\t\tauthority: `${host}:${port}`,\n\t\t\tpath: `/vscode-remote-resource`,\n\t\t\tquery\n\t\t});\n\t}\n}\n\nexport const RemoteAuthorities = new RemoteAuthoritiesImpl();\n\nclass FileAccessImpl {\n\n\tprivate readonly FALLBACK_AUTHORITY = 'vscode-app';\n\n\t/**\n\t * Returns a URI to use in contexts where the browser is responsible\n\t * for loading (e.g. fetch()) or when used within the DOM.\n\t *\n\t * **Note:** use `dom.ts#asCSSUrl` whenever the URL is to be used in CSS context.\n\t */\n\tasBrowserUri(uri: URI): URI;\n\tasBrowserUri(moduleId: string, moduleIdToUrl: { toUrl(moduleId: string): string }, __forceCodeFileUri?: boolean): URI;\n\tasBrowserUri(uriOrModule: URI | string, moduleIdToUrl?: { toUrl(moduleId: string): string }, __forceCodeFileUri?: boolean): URI {\n\t\tconst uri = this.toUri(uriOrModule, moduleIdToUrl);\n\n\t\t// Handle remote URIs via `RemoteAuthorities`\n\t\tif (uri.scheme === Schemas.vscodeRemote) {\n\t\t\treturn RemoteAuthorities.rewrite(uri);\n\t\t}\n\n\t\t// Only convert the URI if we are in a native context and it has `file:` scheme\n\t\t// and we have explicitly enabled the conversion (sandbox, or VSCODE_BROWSER_CODE_LOADING)\n\t\tif (platform.isNative && (__forceCodeFileUri || platform.isPreferringBrowserCodeLoad) && uri.scheme === Schemas.file) {\n\t\t\treturn uri.with({\n\t\t\t\tscheme: Schemas.vscodeFileResource,\n\t\t\t\t// We need to provide an authority here so that it can serve\n\t\t\t\t// as origin for network and loading matters in chromium.\n\t\t\t\t// If the URI is not coming with an authority already, we\n\t\t\t\t// add our own\n\t\t\t\tauthority: uri.authority || this.FALLBACK_AUTHORITY,\n\t\t\t\tquery: null,\n\t\t\t\tfragment: null\n\t\t\t});\n\t\t}\n\n\t\treturn uri;\n\t}\n\n\t/**\n\t * Returns the `file` URI to use in contexts where node.js\n\t * is responsible for loading.\n\t */\n\tasFileUri(uri: URI): URI;\n\tasFileUri(moduleId: string, moduleIdToUrl: { toUrl(moduleId: string): string }): URI;\n\tasFileUri(uriOrModule: URI | string, moduleIdToUrl?: { toUrl(moduleId: string): string }): URI {\n\t\tconst uri = this.toUri(uriOrModule, moduleIdToUrl);\n\n\t\t// Only convert the URI if it is `vscode-file:` scheme\n\t\tif (uri.scheme === Schemas.vscodeFileResource) {\n\t\t\treturn uri.with({\n\t\t\t\tscheme: Schemas.file,\n\t\t\t\t// Only preserve the `authority` if it is different from\n\t\t\t\t// our fallback authority. This ensures we properly preserve\n\t\t\t\t// Windows UNC paths that come with their own authority.\n\t\t\t\tauthority: uri.authority !== this.FALLBACK_AUTHORITY ? uri.authority : null,\n\t\t\t\tquery: null,\n\t\t\t\tfragment: null\n\t\t\t});\n\t\t}\n\n\t\treturn uri;\n\t}\n\n\tprivate toUri(uriOrModule: URI | string, moduleIdToUrl?: { toUrl(moduleId: string): string }): URI {\n\t\tif (URI.isUri(uriOrModule)) {\n\t\t\treturn uriOrModule;\n\t\t}\n\n\t\treturn URI.parse(moduleIdToUrl!.toUrl(uriOrModule));\n\t}\n}\n\nexport const FileAccess = new FileAccessImpl();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as extpath from 'vs/base/common/extpath';\nimport * as paths from 'vs/base/common/path';\nimport { URI, uriToFsPath } from 'vs/base/common/uri';\nimport { equalsIgnoreCase, compare as strCompare } from 'vs/base/common/strings';\nimport { Schemas } from 'vs/base/common/network';\nimport { isWindows, isLinux } from 'vs/base/common/platform';\nimport { CharCode } from 'vs/base/common/charCode';\n\nexport function originalFSPath(uri: URI): string {\n\treturn uriToFsPath(uri, true);\n}\n\n//#region IExtUri\n\nexport interface IExtUri {\n\n\t// --- identity\n\n\t/**\n\t * Compares two uris.\n\t *\n\t * @param uri1 Uri\n\t * @param uri2 Uri\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tcompare(uri1: URI, uri2: URI, ignoreFragment?: boolean): number;\n\n\t/**\n\t * Tests whether two uris are equal\n\t *\n\t * @param uri1 Uri\n\t * @param uri2 Uri\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tisEqual(uri1: URI | undefined, uri2: URI | undefined, ignoreFragment?: boolean): boolean;\n\n\t/**\n\t * Tests whether a `candidate` URI is a parent or equal of a given `base` URI.\n\t *\n\t * @param base A uri which is \"longer\" or at least same length as `parentCandidate`\n\t * @param parentCandidate A uri which is \"shorter\" or up to same length as `base`\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tisEqualOrParent(base: URI, parentCandidate: URI, ignoreFragment?: boolean): boolean;\n\n\t/**\n\t * Creates a key from a resource URI to be used to resource comparison and for resource maps.\n\t * @see ResourceMap\n\t * @param uri Uri\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tgetComparisonKey(uri: URI, ignoreFragment?: boolean): string;\n\n\t/**\n\t * Whether the casing of the path-component of the uri should be ignored.\n\t */\n\tignorePathCasing(uri: URI): boolean;\n\n\t// --- path math\n\n\tbasenameOrAuthority(resource: URI): string;\n\n\t/**\n\t * Returns the basename of the path component of an uri.\n\t * @param resource\n\t */\n\tbasename(resource: URI): string;\n\n\t/**\n\t * Returns the extension of the path component of an uri.\n\t * @param resource\n\t */\n\textname(resource: URI): string;\n\t/**\n\t * Return a URI representing the directory of a URI path.\n\t *\n\t * @param resource The input URI.\n\t * @returns The URI representing the directory of the input URI.\n\t */\n\tdirname(resource: URI): URI;\n\t/**\n\t * Join a URI path with path fragments and normalizes the resulting path.\n\t *\n\t * @param resource The input URI.\n\t * @param pathFragment The path fragment to add to the URI path.\n\t * @returns The resulting URI.\n\t */\n\tjoinPath(resource: URI, ...pathFragment: string[]): URI\n\t/**\n\t * Normalizes the path part of a URI: Resolves `.` and `..` elements with directory names.\n\t *\n\t * @param resource The URI to normalize the path.\n\t * @returns The URI with the normalized path.\n\t */\n\tnormalizePath(resource: URI): URI;\n\t/**\n\t *\n\t * @param from\n\t * @param to\n\t */\n\trelativePath(from: URI, to: URI): string | undefined;\n\t/**\n\t * Resolves an absolute or relative path against a base URI.\n\t * The path can be relative or absolute posix or a Windows path\n\t */\n\tresolvePath(base: URI, path: string): URI;\n\n\t// --- misc\n\n\t/**\n\t * Returns true if the URI path is absolute.\n\t */\n\tisAbsolutePath(resource: URI): boolean;\n\t/**\n\t * Tests whether the two authorities are the same\n\t */\n\tisEqualAuthority(a1: string, a2: string): boolean;\n\t/**\n\t * Returns true if the URI path has a trailing path separator\n\t */\n\thasTrailingPathSeparator(resource: URI, sep?: string): boolean;\n\t/**\n\t * Removes a trailing path separator, if there's one.\n\t * Important: Doesn't remove the first slash, it would make the URI invalid\n\t */\n\tremoveTrailingPathSeparator(resource: URI, sep?: string): URI;\n\t/**\n\t * Adds a trailing path separator to the URI if there isn't one already.\n\t * For example, c:\\ would be unchanged, but c:\\users would become c:\\users\\\n\t */\n\taddTrailingPathSeparator(resource: URI, sep?: string): URI;\n}\n\nexport class ExtUri implements IExtUri {\n\n\tconstructor(private _ignorePathCasing: (uri: URI) => boolean) { }\n\n\tcompare(uri1: URI, uri2: URI, ignoreFragment: boolean = false): number {\n\t\tif (uri1 === uri2) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn strCompare(this.getComparisonKey(uri1, ignoreFragment), this.getComparisonKey(uri2, ignoreFragment));\n\t}\n\n\tisEqual(uri1: URI | undefined, uri2: URI | undefined, ignoreFragment: boolean = false): boolean {\n\t\tif (uri1 === uri2) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!uri1 || !uri2) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.getComparisonKey(uri1, ignoreFragment) === this.getComparisonKey(uri2, ignoreFragment);\n\t}\n\n\tgetComparisonKey(uri: URI, ignoreFragment: boolean = false): string {\n\t\treturn uri.with({\n\t\t\tpath: this._ignorePathCasing(uri) ? uri.path.toLowerCase() : undefined,\n\t\t\tfragment: ignoreFragment ? null : undefined\n\t\t}).toString();\n\t}\n\n\tignorePathCasing(uri: URI): boolean {\n\t\treturn this._ignorePathCasing(uri);\n\t}\n\n\tisEqualOrParent(base: URI, parentCandidate: URI, ignoreFragment: boolean = false): boolean {\n\t\tif (base.scheme === parentCandidate.scheme) {\n\t\t\tif (base.scheme === Schemas.file) {\n\t\t\t\treturn extpath.isEqualOrParent(originalFSPath(base), originalFSPath(parentCandidate), this._ignorePathCasing(base)) && base.query === parentCandidate.query && (ignoreFragment || base.fragment === parentCandidate.fragment);\n\t\t\t}\n\t\t\tif (isEqualAuthority(base.authority, parentCandidate.authority)) {\n\t\t\t\treturn extpath.isEqualOrParent(base.path, parentCandidate.path, this._ignorePathCasing(base), '/') && base.query === parentCandidate.query && (ignoreFragment || base.fragment === parentCandidate.fragment);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t// --- path math\n\n\tjoinPath(resource: URI, ...pathFragment: string[]): URI {\n\t\treturn URI.joinPath(resource, ...pathFragment);\n\t}\n\n\tbasenameOrAuthority(resource: URI): string {\n\t\treturn basename(resource) || resource.authority;\n\t}\n\n\tbasename(resource: URI): string {\n\t\treturn paths.posix.basename(resource.path);\n\t}\n\n\textname(resource: URI): string {\n\t\treturn paths.posix.extname(resource.path);\n\t}\n\n\tdirname(resource: URI): URI {\n\t\tif (resource.path.length === 0) {\n\t\t\treturn resource;\n\t\t}\n\t\tlet dirname;\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tdirname = URI.file(paths.dirname(originalFSPath(resource))).path;\n\t\t} else {\n\t\t\tdirname = paths.posix.dirname(resource.path);\n\t\t\tif (resource.authority && dirname.length && dirname.charCodeAt(0) !== CharCode.Slash) {\n\t\t\t\tconsole.error(`dirname(\"${resource.toString})) resulted in a relative path`);\n\t\t\t\tdirname = '/'; // If a URI contains an authority component, then the path component must either be empty or begin with a CharCode.Slash (\"/\") character\n\t\t\t}\n\t\t}\n\t\treturn resource.with({\n\t\t\tpath: dirname\n\t\t});\n\t}\n\n\tnormalizePath(resource: URI): URI {\n\t\tif (!resource.path.length) {\n\t\t\treturn resource;\n\t\t}\n\t\tlet normalizedPath: string;\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tnormalizedPath = URI.file(paths.normalize(originalFSPath(resource))).path;\n\t\t} else {\n\t\t\tnormalizedPath = paths.posix.normalize(resource.path);\n\t\t}\n\t\treturn resource.with({\n\t\t\tpath: normalizedPath\n\t\t});\n\t}\n\n\trelativePath(from: URI, to: URI): string | undefined {\n\t\tif (from.scheme !== to.scheme || !isEqualAuthority(from.authority, to.authority)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (from.scheme === Schemas.file) {\n\t\t\tconst relativePath = paths.relative(originalFSPath(from), originalFSPath(to));\n\t\t\treturn isWindows ? extpath.toSlashes(relativePath) : relativePath;\n\t\t}\n\t\tlet fromPath = from.path || '/', toPath = to.path || '/';\n\t\tif (this._ignorePathCasing(from)) {\n\t\t\t// make casing of fromPath match toPath\n\t\t\tlet i = 0;\n\t\t\tfor (const len = Math.min(fromPath.length, toPath.length); i < len; i++) {\n\t\t\t\tif (fromPath.charCodeAt(i) !== toPath.charCodeAt(i)) {\n\t\t\t\t\tif (fromPath.charAt(i).toLowerCase() !== toPath.charAt(i).toLowerCase()) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfromPath = toPath.substr(0, i) + fromPath.substr(i);\n\t\t}\n\t\treturn paths.posix.relative(fromPath, toPath);\n\t}\n\n\tresolvePath(base: URI, path: string): URI {\n\t\tif (base.scheme === Schemas.file) {\n\t\t\tconst newURI = URI.file(paths.resolve(originalFSPath(base), path));\n\t\t\treturn base.with({\n\t\t\t\tauthority: newURI.authority,\n\t\t\t\tpath: newURI.path\n\t\t\t});\n\t\t}\n\t\tif (path.indexOf('/') === -1) { // no slashes? it's likely a Windows path\n\t\t\tpath = extpath.toSlashes(path);\n\t\t\tif (/^[a-zA-Z]:(\\/|$)/.test(path)) { // starts with a drive letter\n\t\t\t\tpath = '/' + path;\n\t\t\t}\n\t\t}\n\t\treturn base.with({\n\t\t\tpath: paths.posix.resolve(base.path, path)\n\t\t});\n\t}\n\n\t// --- misc\n\n\tisAbsolutePath(resource: URI): boolean {\n\t\treturn !!resource.path && resource.path[0] === '/';\n\t}\n\n\tisEqualAuthority(a1: string, a2: string) {\n\t\treturn a1 === a2 || equalsIgnoreCase(a1, a2);\n\t}\n\n\thasTrailingPathSeparator(resource: URI, sep: string = paths.sep): boolean {\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tconst fsp = originalFSPath(resource);\n\t\t\treturn fsp.length > extpath.getRoot(fsp).length && fsp[fsp.length - 1] === sep;\n\t\t} else {\n\t\t\tconst p = resource.path;\n\t\t\treturn (p.length > 1 && p.charCodeAt(p.length - 1) === CharCode.Slash) && !(/^[a-zA-Z]:(\\/$|\\\\$)/.test(resource.fsPath)); // ignore the slash at offset 0\n\t\t}\n\t}\n\n\tremoveTrailingPathSeparator(resource: URI, sep: string = paths.sep): URI {\n\t\t// Make sure that the path isn't a drive letter. A trailing separator there is not removable.\n\t\tif (hasTrailingPathSeparator(resource, sep)) {\n\t\t\treturn resource.with({ path: resource.path.substr(0, resource.path.length - 1) });\n\t\t}\n\t\treturn resource;\n\t}\n\n\taddTrailingPathSeparator(resource: URI, sep: string = paths.sep): URI {\n\t\tlet isRootSep: boolean = false;\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tconst fsp = originalFSPath(resource);\n\t\t\tisRootSep = ((fsp !== undefined) && (fsp.length === extpath.getRoot(fsp).length) && (fsp[fsp.length - 1] === sep));\n\t\t} else {\n\t\t\tsep = '/';\n\t\t\tconst p = resource.path;\n\t\t\tisRootSep = p.length === 1 && p.charCodeAt(p.length - 1) === CharCode.Slash;\n\t\t}\n\t\tif (!isRootSep && !hasTrailingPathSeparator(resource, sep)) {\n\t\t\treturn resource.with({ path: resource.path + '/' });\n\t\t}\n\t\treturn resource;\n\t}\n}\n\n\n/**\n * Unbiased utility that takes uris \"as they are\". This means it can be interchanged with\n * uri#toString() usages. The following is true\n * ```\n * assertEqual(aUri.toString() === bUri.toString(), exturi.isEqual(aUri, bUri))\n * ```\n */\nexport const extUri = new ExtUri(() => false);\n\n/**\n * BIASED utility that _mostly_ ignored the case of urs paths. ONLY use this util if you\n * understand what you are doing.\n *\n * This utility is INCOMPATIBLE with `uri.toString()`-usages and both CANNOT be used interchanged.\n *\n * When dealing with uris from files or documents, `extUri` (the unbiased friend)is sufficient\n * because those uris come from a \"trustworthy source\". When creating unknown uris it's always\n * better to use `IUriIdentityService` which exposes an `IExtUri`-instance which knows when path\n * casing matters.\n */\nexport const extUriBiasedIgnorePathCase = new ExtUri(uri => {\n\t// A file scheme resource is in the same platform as code, so ignore case for non linux platforms\n\t// Resource can be from another platform. Lowering the case as an hack. Should come from File system provider\n\treturn uri.scheme === Schemas.file ? !isLinux : true;\n});\n\n\n/**\n * BIASED utility that always ignores the casing of uris paths. ONLY use this util if you\n * understand what you are doing.\n *\n * This utility is INCOMPATIBLE with `uri.toString()`-usages and both CANNOT be used interchanged.\n *\n * When dealing with uris from files or documents, `extUri` (the unbiased friend)is sufficient\n * because those uris come from a \"trustworthy source\". When creating unknown uris it's always\n * better to use `IUriIdentityService` which exposes an `IExtUri`-instance which knows when path\n * casing matters.\n */\nexport const extUriIgnorePathCase = new ExtUri(_ => true);\n\nexport const isEqual = extUri.isEqual.bind(extUri);\nexport const isEqualOrParent = extUri.isEqualOrParent.bind(extUri);\nexport const getComparisonKey = extUri.getComparisonKey.bind(extUri);\nexport const basenameOrAuthority = extUri.basenameOrAuthority.bind(extUri);\nexport const basename = extUri.basename.bind(extUri);\nexport const extname = extUri.extname.bind(extUri);\nexport const dirname = extUri.dirname.bind(extUri);\nexport const joinPath = extUri.joinPath.bind(extUri);\nexport const normalizePath = extUri.normalizePath.bind(extUri);\nexport const relativePath = extUri.relativePath.bind(extUri);\nexport const resolvePath = extUri.resolvePath.bind(extUri);\nexport const isAbsolutePath = extUri.isAbsolutePath.bind(extUri);\nexport const isEqualAuthority = extUri.isEqualAuthority.bind(extUri);\nexport const hasTrailingPathSeparator = extUri.hasTrailingPathSeparator.bind(extUri);\nexport const removeTrailingPathSeparator = extUri.removeTrailingPathSeparator.bind(extUri);\nexport const addTrailingPathSeparator = extUri.addTrailingPathSeparator.bind(extUri);\n\n//#endregion\n\nexport function distinctParents<T>(items: T[], resourceAccessor: (item: T) => URI): T[] {\n\tconst distinctParents: T[] = [];\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst candidateResource = resourceAccessor(items[i]);\n\t\tif (items.some((otherItem, index) => {\n\t\t\tif (index === i) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn isEqualOrParent(candidateResource, resourceAccessor(otherItem));\n\t\t})) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdistinctParents.push(items[i]);\n\t}\n\n\treturn distinctParents;\n}\n\n/**\n * Data URI related helpers.\n */\nexport namespace DataUri {\n\n\texport const META_DATA_LABEL = 'label';\n\texport const META_DATA_DESCRIPTION = 'description';\n\texport const META_DATA_SIZE = 'size';\n\texport const META_DATA_MIME = 'mime';\n\n\texport function parseMetaData(dataUri: URI): Map<string, string> {\n\t\tconst metadata = new Map<string, string>();\n\n\t\t// Given a URI of:  data:image/png;size:2313;label:SomeLabel;description:SomeDescription;base64,77+9UE5...\n\t\t// the metadata is: size:2313;label:SomeLabel;description:SomeDescription\n\t\tconst meta = dataUri.path.substring(dataUri.path.indexOf(';') + 1, dataUri.path.lastIndexOf(';'));\n\t\tmeta.split(';').forEach(property => {\n\t\t\tconst [key, value] = property.split(':');\n\t\t\tif (key && value) {\n\t\t\t\tmetadata.set(key, value);\n\t\t\t}\n\t\t});\n\n\t\t// Given a URI of:  data:image/png;size:2313;label:SomeLabel;description:SomeDescription;base64,77+9UE5...\n\t\t// the mime is: image/png\n\t\tconst mime = dataUri.path.substring(0, dataUri.path.indexOf(';'));\n\t\tif (mime) {\n\t\t\tmetadata.set(META_DATA_MIME, mime);\n\t\t}\n\n\t\treturn metadata;\n\t}\n}\n\nexport function toLocalResource(resource: URI, authority: string | undefined, localScheme: string): URI {\n\tif (authority) {\n\t\tlet path = resource.path;\n\t\tif (path && path[0] !== paths.posix.sep) {\n\t\t\tpath = paths.posix.sep + path;\n\t\t}\n\n\t\treturn resource.with({ scheme: localScheme, authority, path });\n\t}\n\n\treturn resource.with({ scheme: localScheme });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport { canceled, onUnexpectedError } from 'vs/base/common/errors';\nimport { Emitter, Event, Listener } from 'vs/base/common/event';\nimport { IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport { LinkedList } from 'vs/base/common/linkedList';\nimport { extUri as defaultExtUri, IExtUri } from 'vs/base/common/resources';\nimport { URI } from 'vs/base/common/uri';\n\nexport function isThenable<T>(obj: unknown): obj is Promise<T> {\n\treturn !!obj && typeof (obj as unknown as Promise<T>).then === 'function';\n}\n\nexport interface CancelablePromise<T> extends Promise<T> {\n\tcancel(): void;\n}\n\nexport function createCancelablePromise<T>(callback: (token: CancellationToken) => Promise<T>): CancelablePromise<T> {\n\tconst source = new CancellationTokenSource();\n\n\tconst thenable = callback(source.token);\n\tconst promise = new Promise<T>((resolve, reject) => {\n\t\tsource.token.onCancellationRequested(() => {\n\t\t\treject(canceled());\n\t\t});\n\t\tPromise.resolve(thenable).then(value => {\n\t\t\tsource.dispose();\n\t\t\tresolve(value);\n\t\t}, err => {\n\t\t\tsource.dispose();\n\t\t\treject(err);\n\t\t});\n\t});\n\n\treturn <CancelablePromise<T>>new class {\n\t\tcancel() {\n\t\t\tsource.cancel();\n\t\t}\n\t\tthen<TResult1 = T, TResult2 = never>(resolve?: ((value: T) => TResult1 | Promise<TResult1>) | undefined | null, reject?: ((reason: any) => TResult2 | Promise<TResult2>) | undefined | null): Promise<TResult1 | TResult2> {\n\t\t\treturn promise.then(resolve, reject);\n\t\t}\n\t\tcatch<TResult = never>(reject?: ((reason: any) => TResult | Promise<TResult>) | undefined | null): Promise<T | TResult> {\n\t\t\treturn this.then(undefined, reject);\n\t\t}\n\t\tfinally(onfinally?: (() => void) | undefined | null): Promise<T> {\n\t\t\treturn promise.finally(onfinally);\n\t\t}\n\t};\n}\n\nexport function raceCancellation<T>(promise: Promise<T>, token: CancellationToken): Promise<T | undefined>;\nexport function raceCancellation<T>(promise: Promise<T>, token: CancellationToken, defaultValue: T): Promise<T>;\nexport function raceCancellation<T>(promise: Promise<T>, token: CancellationToken, defaultValue?: T): Promise<T | undefined> {\n\treturn Promise.race([promise, new Promise<T | undefined>(resolve => token.onCancellationRequested(() => resolve(defaultValue)))]);\n}\n\n/**\n * Returns as soon as one of the promises is resolved and cancels remaining promises\n */\nexport async function raceCancellablePromises<T>(cancellablePromises: CancelablePromise<T>[]): Promise<T> {\n\tlet resolvedPromiseIndex = -1;\n\tconst promises = cancellablePromises.map((promise, index) => promise.then(result => { resolvedPromiseIndex = index; return result; }));\n\tconst result = await Promise.race(promises);\n\tcancellablePromises.forEach((cancellablePromise, index) => {\n\t\tif (index !== resolvedPromiseIndex) {\n\t\t\tcancellablePromise.cancel();\n\t\t}\n\t});\n\treturn result;\n}\n\nexport function raceTimeout<T>(promise: Promise<T>, timeout: number, onTimeout?: () => void): Promise<T | undefined> {\n\tlet promiseResolve: ((value: T | undefined) => void) | undefined = undefined;\n\n\tconst timer = setTimeout(() => {\n\t\tpromiseResolve?.(undefined);\n\t\tonTimeout?.();\n\t}, timeout);\n\n\treturn Promise.race([\n\t\tpromise.finally(() => clearTimeout(timer)),\n\t\tnew Promise<T | undefined>(resolve => promiseResolve = resolve)\n\t]);\n}\n\nexport function asPromise<T>(callback: () => T | Thenable<T>): Promise<T> {\n\treturn new Promise<T>((resolve, reject) => {\n\t\tconst item = callback();\n\t\tif (isThenable<T>(item)) {\n\t\t\titem.then(resolve, reject);\n\t\t} else {\n\t\t\tresolve(item);\n\t\t}\n\t});\n}\n\nexport interface ITask<T> {\n\t(): T;\n}\n\n/**\n * A helper to prevent accumulation of sequential async tasks.\n *\n * Imagine a mail man with the sole task of delivering letters. As soon as\n * a letter submitted for delivery, he drives to the destination, delivers it\n * and returns to his base. Imagine that during the trip, N more letters were submitted.\n * When the mail man returns, he picks those N letters and delivers them all in a\n * single trip. Even though N+1 submissions occurred, only 2 deliveries were made.\n *\n * The throttler implements this via the queue() method, by providing it a task\n * factory. Following the example:\n *\n * \t\tconst throttler = new Throttler();\n * \t\tconst letters = [];\n *\n * \t\tfunction deliver() {\n * \t\t\tconst lettersToDeliver = letters;\n * \t\t\tletters = [];\n * \t\t\treturn makeTheTrip(lettersToDeliver);\n * \t\t}\n *\n * \t\tfunction onLetterReceived(l) {\n * \t\t\tletters.push(l);\n * \t\t\tthrottler.queue(deliver);\n * \t\t}\n */\nexport class Throttler {\n\n\tprivate activePromise: Promise<any> | null;\n\tprivate queuedPromise: Promise<any> | null;\n\tprivate queuedPromiseFactory: ITask<Promise<any>> | null;\n\n\tconstructor() {\n\t\tthis.activePromise = null;\n\t\tthis.queuedPromise = null;\n\t\tthis.queuedPromiseFactory = null;\n\t}\n\n\tqueue<T>(promiseFactory: ITask<Promise<T>>): Promise<T> {\n\t\tif (this.activePromise) {\n\t\t\tthis.queuedPromiseFactory = promiseFactory;\n\n\t\t\tif (!this.queuedPromise) {\n\t\t\t\tconst onComplete = () => {\n\t\t\t\t\tthis.queuedPromise = null;\n\n\t\t\t\t\tconst result = this.queue(this.queuedPromiseFactory!);\n\t\t\t\t\tthis.queuedPromiseFactory = null;\n\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\n\t\t\t\tthis.queuedPromise = new Promise(resolve => {\n\t\t\t\t\tthis.activePromise!.then(onComplete, onComplete).then(resolve);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.queuedPromise!.then(resolve, reject);\n\t\t\t});\n\t\t}\n\n\t\tthis.activePromise = promiseFactory();\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.activePromise!.then((result: T) => {\n\t\t\t\tthis.activePromise = null;\n\t\t\t\tresolve(result);\n\t\t\t}, (err: unknown) => {\n\t\t\t\tthis.activePromise = null;\n\t\t\t\treject(err);\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport class Sequencer {\n\n\tprivate current: Promise<unknown> = Promise.resolve(null);\n\n\tqueue<T>(promiseTask: ITask<Promise<T>>): Promise<T> {\n\t\treturn this.current = this.current.then(() => promiseTask(), () => promiseTask());\n\t}\n}\n\nexport class SequencerByKey<TKey> {\n\n\tprivate promiseMap = new Map<TKey, Promise<unknown>>();\n\n\tqueue<T>(key: TKey, promiseTask: ITask<Promise<T>>): Promise<T> {\n\t\tconst runningPromise = this.promiseMap.get(key) ?? Promise.resolve();\n\t\tconst newPromise = runningPromise\n\t\t\t.catch(() => { })\n\t\t\t.then(promiseTask)\n\t\t\t.finally(() => {\n\t\t\t\tif (this.promiseMap.get(key) === newPromise) {\n\t\t\t\t\tthis.promiseMap.delete(key);\n\t\t\t\t}\n\t\t\t});\n\t\tthis.promiseMap.set(key, newPromise);\n\t\treturn newPromise;\n\t}\n}\n\n/**\n * A helper to delay (debounce) execution of a task that is being requested often.\n *\n * Following the throttler, now imagine the mail man wants to optimize the number of\n * trips proactively. The trip itself can be long, so he decides not to make the trip\n * as soon as a letter is submitted. Instead he waits a while, in case more\n * letters are submitted. After said waiting period, if no letters were submitted, he\n * decides to make the trip. Imagine that N more letters were submitted after the first\n * one, all within a short period of time between each other. Even though N+1\n * submissions occurred, only 1 delivery was made.\n *\n * The delayer offers this behavior via the trigger() method, into which both the task\n * to be executed and the waiting period (delay) must be passed in as arguments. Following\n * the example:\n *\n * \t\tconst delayer = new Delayer(WAITING_PERIOD);\n * \t\tconst letters = [];\n *\n * \t\tfunction letterReceived(l) {\n * \t\t\tletters.push(l);\n * \t\t\tdelayer.trigger(() => { return makeTheTrip(); });\n * \t\t}\n */\nexport class Delayer<T> implements IDisposable {\n\n\tprivate timeout: any;\n\tprivate completionPromise: Promise<any> | null;\n\tprivate doResolve: ((value?: any | Promise<any>) => void) | null;\n\tprivate doReject: ((err: any) => void) | null;\n\tprivate task: ITask<T | Promise<T>> | null;\n\n\tconstructor(public defaultDelay: number) {\n\t\tthis.timeout = null;\n\t\tthis.completionPromise = null;\n\t\tthis.doResolve = null;\n\t\tthis.doReject = null;\n\t\tthis.task = null;\n\t}\n\n\ttrigger(task: ITask<T | Promise<T>>, delay: number = this.defaultDelay): Promise<T> {\n\t\tthis.task = task;\n\t\tthis.cancelTimeout();\n\n\t\tif (!this.completionPromise) {\n\t\t\tthis.completionPromise = new Promise((resolve, reject) => {\n\t\t\t\tthis.doResolve = resolve;\n\t\t\t\tthis.doReject = reject;\n\t\t\t}).then(() => {\n\t\t\t\tthis.completionPromise = null;\n\t\t\t\tthis.doResolve = null;\n\t\t\t\tif (this.task) {\n\t\t\t\t\tconst task = this.task;\n\t\t\t\t\tthis.task = null;\n\t\t\t\t\treturn task();\n\t\t\t\t}\n\t\t\t\treturn undefined;\n\t\t\t});\n\t\t}\n\n\t\tthis.timeout = setTimeout(() => {\n\t\t\tthis.timeout = null;\n\t\t\tif (this.doResolve) {\n\t\t\t\tthis.doResolve(null);\n\t\t\t}\n\t\t}, delay);\n\n\t\treturn this.completionPromise;\n\t}\n\n\tisTriggered(): boolean {\n\t\treturn this.timeout !== null;\n\t}\n\n\tcancel(): void {\n\t\tthis.cancelTimeout();\n\n\t\tif (this.completionPromise) {\n\t\t\tif (this.doReject) {\n\t\t\t\tthis.doReject(canceled());\n\t\t\t}\n\t\t\tthis.completionPromise = null;\n\t\t}\n\t}\n\n\tprivate cancelTimeout(): void {\n\t\tif (this.timeout !== null) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.cancelTimeout();\n\t}\n}\n\n/**\n * A helper to delay execution of a task that is being requested often, while\n * preventing accumulation of consecutive executions, while the task runs.\n *\n * The mail man is clever and waits for a certain amount of time, before going\n * out to deliver letters. While the mail man is going out, more letters arrive\n * and can only be delivered once he is back. Once he is back the mail man will\n * do one more trip to deliver the letters that have accumulated while he was out.\n */\nexport class ThrottledDelayer<T> {\n\n\tprivate delayer: Delayer<Promise<T>>;\n\tprivate throttler: Throttler;\n\n\tconstructor(defaultDelay: number) {\n\t\tthis.delayer = new Delayer(defaultDelay);\n\t\tthis.throttler = new Throttler();\n\t}\n\n\ttrigger(promiseFactory: ITask<Promise<T>>, delay?: number): Promise<T> {\n\t\treturn this.delayer.trigger(() => this.throttler.queue(promiseFactory), delay) as unknown as Promise<T>;\n\t}\n\n\tisTriggered(): boolean {\n\t\treturn this.delayer.isTriggered();\n\t}\n\n\tcancel(): void {\n\t\tthis.delayer.cancel();\n\t}\n\n\tdispose(): void {\n\t\tthis.delayer.dispose();\n\t}\n}\n\n/**\n * A barrier that is initially closed and then becomes opened permanently.\n */\nexport class Barrier {\n\n\tprivate _isOpen: boolean;\n\tprivate _promise: Promise<boolean>;\n\tprivate _completePromise!: (v: boolean) => void;\n\n\tconstructor() {\n\t\tthis._isOpen = false;\n\t\tthis._promise = new Promise<boolean>((c, e) => {\n\t\t\tthis._completePromise = c;\n\t\t});\n\t}\n\n\tisOpen(): boolean {\n\t\treturn this._isOpen;\n\t}\n\n\topen(): void {\n\t\tthis._isOpen = true;\n\t\tthis._completePromise(true);\n\t}\n\n\twait(): Promise<boolean> {\n\t\treturn this._promise;\n\t}\n}\n\n/**\n * A barrier that is initially closed and then becomes opened permanently after a certain period of\n * time or when open is called explicitly\n */\nexport class AutoOpenBarrier extends Barrier {\n\n\tprivate readonly _timeout: any;\n\n\tconstructor(autoOpenTimeMs: number) {\n\t\tsuper();\n\t\tthis._timeout = setTimeout(() => this.open(), autoOpenTimeMs);\n\t}\n\n\toverride open(): void {\n\t\tclearTimeout(this._timeout);\n\t\tsuper.open();\n\t}\n}\n\nexport function timeout(millis: number): CancelablePromise<void>;\nexport function timeout(millis: number, token: CancellationToken): Promise<void>;\nexport function timeout(millis: number, token?: CancellationToken): CancelablePromise<void> | Promise<void> {\n\tif (!token) {\n\t\treturn createCancelablePromise(token => timeout(millis, token));\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\tconst handle = setTimeout(resolve, millis);\n\t\ttoken.onCancellationRequested(() => {\n\t\t\tclearTimeout(handle);\n\t\t\treject(canceled());\n\t\t});\n\t});\n}\n\nexport function disposableTimeout(handler: () => void, timeout = 0): IDisposable {\n\tconst timer = setTimeout(handler, timeout);\n\treturn toDisposable(() => clearTimeout(timer));\n}\n\nexport function ignoreErrors<T>(promise: Promise<T>): Promise<T | undefined> {\n\treturn promise.then(undefined, _ => undefined);\n}\n\n/**\n * Runs the provided list of promise factories in sequential order. The returned\n * promise will complete to an array of results from each promise.\n */\n\nexport function sequence<T>(promiseFactories: ITask<Promise<T>>[]): Promise<T[]> {\n\tconst results: T[] = [];\n\tlet index = 0;\n\tconst len = promiseFactories.length;\n\n\tfunction next(): Promise<T> | null {\n\t\treturn index < len ? promiseFactories[index++]() : null;\n\t}\n\n\tfunction thenHandler(result: any): Promise<any> {\n\t\tif (result !== undefined && result !== null) {\n\t\t\tresults.push(result);\n\t\t}\n\n\t\tconst n = next();\n\t\tif (n) {\n\t\t\treturn n.then(thenHandler);\n\t\t}\n\n\t\treturn Promise.resolve(results);\n\t}\n\n\treturn Promise.resolve(null).then(thenHandler);\n}\n\nexport function first<T>(promiseFactories: ITask<Promise<T>>[], shouldStop: (t: T) => boolean = t => !!t, defaultValue: T | null = null): Promise<T | null> {\n\tlet index = 0;\n\tconst len = promiseFactories.length;\n\n\tconst loop: () => Promise<T | null> = () => {\n\t\tif (index >= len) {\n\t\t\treturn Promise.resolve(defaultValue);\n\t\t}\n\n\t\tconst factory = promiseFactories[index++];\n\t\tconst promise = Promise.resolve(factory());\n\n\t\treturn promise.then(result => {\n\t\t\tif (shouldStop(result)) {\n\t\t\t\treturn Promise.resolve(result);\n\t\t\t}\n\n\t\t\treturn loop();\n\t\t});\n\t};\n\n\treturn loop();\n}\n\n/**\n * Returns the result of the first promise that matches the \"shouldStop\",\n * running all promises in parallel. Supports cancelable promises.\n */\nexport function firstParallel<T>(promiseList: Promise<T>[], shouldStop?: (t: T) => boolean, defaultValue?: T | null): Promise<T | null>;\nexport function firstParallel<T, R extends T>(promiseList: Promise<T>[], shouldStop: (t: T) => t is R, defaultValue?: R | null): Promise<R | null>;\nexport function firstParallel<T>(promiseList: Promise<T>[], shouldStop: (t: T) => boolean = t => !!t, defaultValue: T | null = null) {\n\tif (promiseList.length === 0) {\n\t\treturn Promise.resolve(defaultValue);\n\t}\n\n\tlet todo = promiseList.length;\n\tconst finish = () => {\n\t\ttodo = -1;\n\t\tfor (const promise of promiseList) {\n\t\t\t(promise as Partial<CancelablePromise<T>>).cancel?.();\n\t\t}\n\t};\n\n\treturn new Promise<T | null>((resolve, reject) => {\n\t\tfor (const promise of promiseList) {\n\t\t\tpromise.then(result => {\n\t\t\t\tif (--todo >= 0 && shouldStop(result)) {\n\t\t\t\t\tfinish();\n\t\t\t\t\tresolve(result);\n\t\t\t\t} else if (todo === 0) {\n\t\t\t\t\tresolve(defaultValue);\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tif (--todo >= 0) {\n\t\t\t\t\t\tfinish();\n\t\t\t\t\t\treject(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t}\n\t});\n}\n\ninterface ILimitedTaskFactory<T> {\n\tfactory: ITask<Promise<T>>;\n\tc: (value: T | Promise<T>) => void;\n\te: (error?: unknown) => void;\n}\n\n/**\n * A helper to queue N promises and run them all with a max degree of parallelism. The helper\n * ensures that at any time no more than M promises are running at the same time.\n */\nexport class Limiter<T> {\n\n\tprivate _size = 0;\n\tprivate runningPromises: number;\n\tprivate maxDegreeOfParalellism: number;\n\tprivate outstandingPromises: ILimitedTaskFactory<T>[];\n\tprivate readonly _onFinished: Emitter<void>;\n\n\tconstructor(maxDegreeOfParalellism: number) {\n\t\tthis.maxDegreeOfParalellism = maxDegreeOfParalellism;\n\t\tthis.outstandingPromises = [];\n\t\tthis.runningPromises = 0;\n\t\tthis._onFinished = new Emitter<void>();\n\t}\n\n\tget onFinished(): Event<void> {\n\t\treturn this._onFinished.event;\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t\t// return this.runningPromises + this.outstandingPromises.length;\n\t}\n\n\tqueue(factory: ITask<Promise<T>>): Promise<T> {\n\t\tthis._size++;\n\n\t\treturn new Promise<T>((c, e) => {\n\t\t\tthis.outstandingPromises.push({ factory, c, e });\n\t\t\tthis.consume();\n\t\t});\n\t}\n\n\tprivate consume(): void {\n\t\twhile (this.outstandingPromises.length && this.runningPromises < this.maxDegreeOfParalellism) {\n\t\t\tconst iLimitedTask = this.outstandingPromises.shift()!;\n\t\t\tthis.runningPromises++;\n\n\t\t\tconst promise = iLimitedTask.factory();\n\t\t\tpromise.then(iLimitedTask.c, iLimitedTask.e);\n\t\t\tpromise.then(() => this.consumed(), () => this.consumed());\n\t\t}\n\t}\n\n\tprivate consumed(): void {\n\t\tthis._size--;\n\t\tthis.runningPromises--;\n\n\t\tif (this.outstandingPromises.length > 0) {\n\t\t\tthis.consume();\n\t\t} else {\n\t\t\tthis._onFinished.fire();\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis._onFinished.dispose();\n\t}\n}\n\n/**\n * A queue is handles one promise at a time and guarantees that at any time only one promise is executing.\n */\nexport class Queue<T> extends Limiter<T> {\n\n\tconstructor() {\n\t\tsuper(1);\n\t}\n}\n\n/**\n * A helper to organize queues per resource. The ResourceQueue makes sure to manage queues per resource\n * by disposing them once the queue is empty.\n */\nexport class ResourceQueue implements IDisposable {\n\n\tprivate readonly queues = new Map<string, Queue<void>>();\n\n\tqueueFor(resource: URI, extUri: IExtUri = defaultExtUri): Queue<void> {\n\t\tconst key = extUri.getComparisonKey(resource);\n\n\t\tlet queue = this.queues.get(key);\n\t\tif (!queue) {\n\t\t\tqueue = new Queue<void>();\n\t\t\tEvent.once(queue.onFinished)(() => {\n\t\t\t\tqueue?.dispose();\n\t\t\t\tthis.queues.delete(key);\n\t\t\t});\n\n\t\t\tthis.queues.set(key, queue);\n\t\t}\n\n\t\treturn queue;\n\t}\n\n\tdispose(): void {\n\t\tthis.queues.forEach(queue => queue.dispose());\n\t\tthis.queues.clear();\n\t}\n}\n\nexport class TimeoutTimer implements IDisposable {\n\tprivate _token: any;\n\n\tconstructor();\n\tconstructor(runner: () => void, timeout: number);\n\tconstructor(runner?: () => void, timeout?: number) {\n\t\tthis._token = -1;\n\n\t\tif (typeof runner === 'function' && typeof timeout === 'number') {\n\t\t\tthis.setIfNotSet(runner, timeout);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.cancel();\n\t}\n\n\tcancel(): void {\n\t\tif (this._token !== -1) {\n\t\t\tclearTimeout(this._token);\n\t\t\tthis._token = -1;\n\t\t}\n\t}\n\n\tcancelAndSet(runner: () => void, timeout: number): void {\n\t\tthis.cancel();\n\t\tthis._token = setTimeout(() => {\n\t\t\tthis._token = -1;\n\t\t\trunner();\n\t\t}, timeout);\n\t}\n\n\tsetIfNotSet(runner: () => void, timeout: number): void {\n\t\tif (this._token !== -1) {\n\t\t\t// timer is already set\n\t\t\treturn;\n\t\t}\n\t\tthis._token = setTimeout(() => {\n\t\t\tthis._token = -1;\n\t\t\trunner();\n\t\t}, timeout);\n\t}\n}\n\nexport class IntervalTimer implements IDisposable {\n\n\tprivate _token: any;\n\n\tconstructor() {\n\t\tthis._token = -1;\n\t}\n\n\tdispose(): void {\n\t\tthis.cancel();\n\t}\n\n\tcancel(): void {\n\t\tif (this._token !== -1) {\n\t\t\tclearInterval(this._token);\n\t\t\tthis._token = -1;\n\t\t}\n\t}\n\n\tcancelAndSet(runner: () => void, interval: number): void {\n\t\tthis.cancel();\n\t\tthis._token = setInterval(() => {\n\t\t\trunner();\n\t\t}, interval);\n\t}\n}\n\nexport class RunOnceScheduler {\n\n\tprotected runner: ((...args: unknown[]) => void) | null;\n\n\tprivate timeoutToken: any;\n\tprivate timeout: number;\n\tprivate timeoutHandler: () => void;\n\n\tconstructor(runner: (...args: any[]) => void, delay: number) {\n\t\tthis.timeoutToken = -1;\n\t\tthis.runner = runner;\n\t\tthis.timeout = delay;\n\t\tthis.timeoutHandler = this.onTimeout.bind(this);\n\t}\n\n\t/**\n\t * Dispose RunOnceScheduler\n\t */\n\tdispose(): void {\n\t\tthis.cancel();\n\t\tthis.runner = null;\n\t}\n\n\t/**\n\t * Cancel current scheduled runner (if any).\n\t */\n\tcancel(): void {\n\t\tif (this.isScheduled()) {\n\t\t\tclearTimeout(this.timeoutToken);\n\t\t\tthis.timeoutToken = -1;\n\t\t}\n\t}\n\n\t/**\n\t * Cancel previous runner (if any) & schedule a new runner.\n\t */\n\tschedule(delay = this.timeout): void {\n\t\tthis.cancel();\n\t\tthis.timeoutToken = setTimeout(this.timeoutHandler, delay);\n\t}\n\n\tget delay(): number {\n\t\treturn this.timeout;\n\t}\n\n\tset delay(value: number) {\n\t\tthis.timeout = value;\n\t}\n\n\t/**\n\t * Returns true if scheduled.\n\t */\n\tisScheduled(): boolean {\n\t\treturn this.timeoutToken !== -1;\n\t}\n\n\tprivate onTimeout() {\n\t\tthis.timeoutToken = -1;\n\t\tif (this.runner) {\n\t\t\tthis.doRun();\n\t\t}\n\t}\n\n\tprotected doRun(): void {\n\t\tif (this.runner) {\n\t\t\tthis.runner();\n\t\t}\n\t}\n}\n\nexport class RunOnceWorker<T> extends RunOnceScheduler {\n\tprivate units: T[] = [];\n\n\tconstructor(runner: (units: T[]) => void, timeout: number) {\n\t\tsuper(runner, timeout);\n\t}\n\n\twork(unit: T): void {\n\t\tthis.units.push(unit);\n\n\t\tif (!this.isScheduled()) {\n\t\t\tthis.schedule();\n\t\t}\n\t}\n\n\tprotected override doRun(): void {\n\t\tconst units = this.units;\n\t\tthis.units = [];\n\n\t\tif (this.runner) {\n\t\t\tthis.runner(units);\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tthis.units = [];\n\n\t\tsuper.dispose();\n\t}\n}\n\n//#region -- run on idle tricks ------------\n\nexport interface IdleDeadline {\n\treadonly didTimeout: boolean;\n\ttimeRemaining(): number;\n}\n/**\n * Execute the callback the next time the browser is idle\n */\nexport let runWhenIdle: (callback: (idle: IdleDeadline) => void, timeout?: number) => IDisposable;\n\ndeclare function requestIdleCallback(callback: (args: IdleDeadline) => void, options?: { timeout: number }): number;\ndeclare function cancelIdleCallback(handle: number): void;\n\n(function () {\n\tif (typeof requestIdleCallback !== 'function' || typeof cancelIdleCallback !== 'function') {\n\t\tconst dummyIdle: IdleDeadline = Object.freeze({\n\t\t\tdidTimeout: true,\n\t\t\ttimeRemaining() { return 15; }\n\t\t});\n\t\trunWhenIdle = (runner) => {\n\t\t\tconst handle = setTimeout(() => runner(dummyIdle));\n\t\t\tlet disposed = false;\n\t\t\treturn {\n\t\t\t\tdispose() {\n\t\t\t\t\tif (disposed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tdisposed = true;\n\t\t\t\t\tclearTimeout(handle);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t} else {\n\t\trunWhenIdle = (runner, timeout?) => {\n\t\t\tconst handle: number = requestIdleCallback(runner, typeof timeout === 'number' ? { timeout } : undefined);\n\t\t\tlet disposed = false;\n\t\t\treturn {\n\t\t\t\tdispose() {\n\t\t\t\t\tif (disposed) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tdisposed = true;\n\t\t\t\t\tcancelIdleCallback(handle);\n\t\t\t\t}\n\t\t\t};\n\t\t};\n\t}\n})();\n\n/**\n * An implementation of the \"idle-until-urgent\"-strategy as introduced\n * here: https://philipwalton.com/articles/idle-until-urgent/\n */\nexport class IdleValue<T> {\n\n\tprivate readonly _executor: () => void;\n\tprivate readonly _handle: IDisposable;\n\n\tprivate _didRun: boolean = false;\n\tprivate _value?: T;\n\tprivate _error: unknown;\n\n\tconstructor(executor: () => T) {\n\t\tthis._executor = () => {\n\t\t\ttry {\n\t\t\t\tthis._value = executor();\n\t\t\t} catch (err) {\n\t\t\t\tthis._error = err;\n\t\t\t} finally {\n\t\t\t\tthis._didRun = true;\n\t\t\t}\n\t\t};\n\t\tthis._handle = runWhenIdle(() => this._executor());\n\t}\n\n\tdispose(): void {\n\t\tthis._handle.dispose();\n\t}\n\n\tget value(): T {\n\t\tif (!this._didRun) {\n\t\t\tthis._handle.dispose();\n\t\t\tthis._executor();\n\t\t}\n\t\tif (this._error) {\n\t\t\tthrow this._error;\n\t\t}\n\t\treturn this._value!;\n\t}\n}\n\n//#endregion\n\nexport async function retry<T>(task: ITask<Promise<T>>, delay: number, retries: number): Promise<T> {\n\tlet lastError: Error | undefined;\n\n\tfor (let i = 0; i < retries; i++) {\n\t\ttry {\n\t\t\treturn await task();\n\t\t} catch (error) {\n\t\t\tlastError = error;\n\n\t\t\tawait timeout(delay);\n\t\t}\n\t}\n\n\tthrow lastError;\n}\n\n//#region Task Sequentializer\n\ninterface IPendingTask {\n\ttaskId: number;\n\tcancel: () => void;\n\tpromise: Promise<void>;\n}\n\ninterface ISequentialTask {\n\tpromise: Promise<void>;\n\tpromiseResolve: () => void;\n\tpromiseReject: (error: Error) => void;\n\trun: () => Promise<void>;\n}\n\nexport interface ITaskSequentializerWithPendingTask {\n\treadonly pending: Promise<void>;\n}\n\nexport class TaskSequentializer {\n\tprivate _pending?: IPendingTask;\n\tprivate _next?: ISequentialTask;\n\n\thasPending(taskId?: number): this is ITaskSequentializerWithPendingTask {\n\t\tif (!this._pending) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (typeof taskId === 'number') {\n\t\t\treturn this._pending.taskId === taskId;\n\t\t}\n\n\t\treturn !!this._pending;\n\t}\n\n\tget pending(): Promise<void> | undefined {\n\t\treturn this._pending ? this._pending.promise : undefined;\n\t}\n\n\tcancelPending(): void {\n\t\tthis._pending?.cancel();\n\t}\n\n\tsetPending(taskId: number, promise: Promise<void>, onCancel?: () => void,): Promise<void> {\n\t\tthis._pending = { taskId, cancel: () => onCancel?.(), promise };\n\n\t\tpromise.then(() => this.donePending(taskId), () => this.donePending(taskId));\n\n\t\treturn promise;\n\t}\n\n\tprivate donePending(taskId: number): void {\n\t\tif (this._pending && taskId === this._pending.taskId) {\n\n\t\t\t// only set pending to done if the promise finished that is associated with that taskId\n\t\t\tthis._pending = undefined;\n\n\t\t\t// schedule the next task now that we are free if we have any\n\t\t\tthis.triggerNext();\n\t\t}\n\t}\n\n\tprivate triggerNext(): void {\n\t\tif (this._next) {\n\t\t\tconst next = this._next;\n\t\t\tthis._next = undefined;\n\n\t\t\t// Run next task and complete on the associated promise\n\t\t\tnext.run().then(next.promiseResolve, next.promiseReject);\n\t\t}\n\t}\n\n\tsetNext(run: () => Promise<void>): Promise<void> {\n\n\t\t// this is our first next task, so we create associated promise with it\n\t\t// so that we can return a promise that completes when the task has\n\t\t// completed.\n\t\tif (!this._next) {\n\t\t\tlet promiseResolve: () => void;\n\t\t\tlet promiseReject: (error: Error) => void;\n\t\t\tconst promise = new Promise<void>((resolve, reject) => {\n\t\t\t\tpromiseResolve = resolve;\n\t\t\t\tpromiseReject = reject;\n\t\t\t});\n\n\t\t\tthis._next = {\n\t\t\t\trun,\n\t\t\t\tpromise,\n\t\t\t\tpromiseResolve: promiseResolve!,\n\t\t\t\tpromiseReject: promiseReject!\n\t\t\t};\n\t\t}\n\n\t\t// we have a previous next task, just overwrite it\n\t\telse {\n\t\t\tthis._next.run = run;\n\t\t}\n\n\t\treturn this._next.promise;\n\t}\n}\n\n//#endregion\n\n//#region\n\n/**\n * The `IntervalCounter` allows to count the number\n * of calls to `increment()` over a duration of\n * `interval`. This utility can be used to conditionally\n * throttle a frequent task when a certain threshold\n * is reached.\n */\nexport class IntervalCounter {\n\n\tprivate lastIncrementTime = 0;\n\n\tprivate value = 0;\n\n\tconstructor(private readonly interval: number) { }\n\n\tincrement(): number {\n\t\tconst now = Date.now();\n\n\t\t// We are outside of the range of `interval` and as such\n\t\t// start counting from 0 and remember the time\n\t\tif (now - this.lastIncrementTime > this.interval) {\n\t\t\tthis.lastIncrementTime = now;\n\t\t\tthis.value = 0;\n\t\t}\n\n\t\tthis.value++;\n\n\t\treturn this.value;\n\t}\n}\n\n//#endregion\n\n//#region\n\nexport type ValueCallback<T = unknown> = (value: T | Promise<T>) => void;\n\n/**\n * Creates a promise whose resolution or rejection can be controlled imperatively.\n */\nexport class DeferredPromise<T> {\n\n\tprivate completeCallback!: ValueCallback<T>;\n\tprivate errorCallback!: (err: unknown) => void;\n\tprivate rejected = false;\n\tprivate resolved = false;\n\n\tpublic get isRejected() {\n\t\treturn this.rejected;\n\t}\n\n\tpublic get isResolved() {\n\t\treturn this.resolved;\n\t}\n\n\tpublic get isSettled() {\n\t\treturn this.rejected || this.resolved;\n\t}\n\n\tpublic p: Promise<T>;\n\n\tconstructor() {\n\t\tthis.p = new Promise<T>((c, e) => {\n\t\t\tthis.completeCallback = c;\n\t\t\tthis.errorCallback = e;\n\t\t});\n\t}\n\n\tpublic complete(value: T) {\n\t\treturn new Promise<void>(resolve => {\n\t\t\tthis.completeCallback(value);\n\t\t\tthis.resolved = true;\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tpublic error(err: unknown) {\n\t\treturn new Promise<void>(resolve => {\n\t\t\tthis.errorCallback(err);\n\t\t\tthis.rejected = true;\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tpublic cancel() {\n\t\tnew Promise<void>(resolve => {\n\t\t\tthis.errorCallback(canceled());\n\t\t\tthis.rejected = true;\n\t\t\tresolve();\n\t\t});\n\t}\n}\n\n//#endregion\n\n//#region\n\nexport interface IWaitUntil {\n\twaitUntil(thenable: Promise<unknown>): void;\n}\n\nexport class AsyncEmitter<T extends IWaitUntil> extends Emitter<T> {\n\n\tprivate _asyncDeliveryQueue?: LinkedList<[Listener<T>, Omit<T, 'waitUntil'>]>;\n\n\tasync fireAsync(data: Omit<T, 'waitUntil'>, token: CancellationToken, promiseJoin?: (p: Promise<unknown>, listener: Function) => Promise<unknown>): Promise<void> {\n\t\tif (!this._listeners) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._asyncDeliveryQueue) {\n\t\t\tthis._asyncDeliveryQueue = new LinkedList();\n\t\t}\n\n\t\tfor (const listener of this._listeners) {\n\t\t\tthis._asyncDeliveryQueue.push([listener, data]);\n\t\t}\n\n\t\twhile (this._asyncDeliveryQueue.size > 0 && !token.isCancellationRequested) {\n\n\t\t\tconst [listener, data] = this._asyncDeliveryQueue.shift()!;\n\t\t\tconst thenables: Promise<unknown>[] = [];\n\n\t\t\tconst event = <T>{\n\t\t\t\t...data,\n\t\t\t\twaitUntil: (p: Promise<unknown>): void => {\n\t\t\t\t\tif (Object.isFrozen(thenables)) {\n\t\t\t\t\t\tthrow new Error('waitUntil can NOT be called asynchronous');\n\t\t\t\t\t}\n\t\t\t\t\tif (promiseJoin) {\n\t\t\t\t\t\tp = promiseJoin(p, typeof listener === 'function' ? listener : listener[0]);\n\t\t\t\t\t}\n\t\t\t\t\tthenables.push(p);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tif (typeof listener === 'function') {\n\t\t\t\t\tlistener.call(undefined, event);\n\t\t\t\t} else {\n\t\t\t\t\tlistener[0].call(listener[1], event);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedError(e);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// freeze thenables-collection to enforce sync-calls to\n\t\t\t// wait until and then wait for all thenables to resolve\n\t\t\tObject.freeze(thenables);\n\t\t\tawait Promises.settled(thenables).catch(e => onUnexpectedError(e));\n\t\t}\n\t}\n}\n\n//#endregion\n\n//#region Promises\n\nexport namespace Promises {\n\n\texport interface IResolvedPromise<T> {\n\t\tstatus: 'fulfilled';\n\t\tvalue: T;\n\t}\n\n\texport interface IRejectedPromise {\n\t\tstatus: 'rejected';\n\t\treason: Error;\n\t}\n\n\t/**\n\t * Interface of https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled\n\t */\n\tinterface PromiseWithAllSettled<T> {\n\t\tallSettled<T>(promises: Promise<T>[]): Promise<readonly (IResolvedPromise<T> | IRejectedPromise)[]>;\n\t}\n\n\t/**\n\t * A polyfill of `Promise.allSettled`: returns after all promises have\n\t * resolved or rejected and provides access to each result or error\n\t * in the order of the original passed in promises array.\n\t * See: https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/allSettled\n\t */\n\texport async function allSettled<T>(promises: Promise<T>[]): Promise<readonly (IResolvedPromise<T> | IRejectedPromise)[]> {\n\t\tif (typeof (Promise as unknown as PromiseWithAllSettled<T>).allSettled === 'function') {\n\t\t\treturn allSettledNative(promises); // in some environments we can benefit from native implementation\n\t\t}\n\n\t\treturn allSettledShim(promises);\n\t}\n\n\tasync function allSettledNative<T>(promises: Promise<T>[]): Promise<readonly (IResolvedPromise<T> | IRejectedPromise)[]> {\n\t\treturn (Promise as unknown as PromiseWithAllSettled<T>).allSettled(promises);\n\t}\n\n\tasync function allSettledShim<T>(promises: Promise<T>[]): Promise<readonly (IResolvedPromise<T> | IRejectedPromise)[]> {\n\t\treturn Promise.all(promises.map(promise => (promise.then(value => {\n\t\t\tconst fulfilled: IResolvedPromise<T> = { status: 'fulfilled', value };\n\n\t\t\treturn fulfilled;\n\t\t}, error => {\n\t\t\tconst rejected: IRejectedPromise = { status: 'rejected', reason: error };\n\n\t\t\treturn rejected;\n\t\t}))));\n\t}\n\n\t/**\n\t * A drop-in replacement for `Promise.all` with the only difference\n\t * that the method awaits every promise to either fulfill or reject.\n\t *\n\t * Similar to `Promise.all`, only the first error will be returned\n\t * if any.\n\t */\n\texport async function settled<T>(promises: Promise<T>[]): Promise<T[]> {\n\t\tlet firstError: Error | undefined = undefined;\n\n\t\tconst result = await Promise.all(promises.map(promise => promise.then(value => value, error => {\n\t\t\tif (!firstError) {\n\t\t\t\tfirstError = error;\n\t\t\t}\n\n\t\t\treturn undefined; // do not rethrow so that other promises can settle\n\t\t})));\n\n\t\tif (typeof firstError !== 'undefined') {\n\t\t\tthrow firstError;\n\t\t}\n\n\t\treturn result as unknown as T[]; // cast is needed and protected by the `throw` above\n\t}\n}\n\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as browser from 'vs/base/browser/browser';\nimport { domEvent } from 'vs/base/browser/event';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IMouseEvent, StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { onUnexpectedError } from 'vs/base/common/errors';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { Disposable, DisposableStore, IDisposable, toDisposable } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport { URI } from 'vs/base/common/uri';\nimport { FileAccess, RemoteAuthorities } from 'vs/base/common/network';\nimport { BrowserFeatures } from 'vs/base/browser/canIUse';\nimport { insane, InsaneOptions } from 'vs/base/common/insane/insane';\nimport { KeyCode } from 'vs/base/common/keyCodes';\n\nexport function clearNode(node: HTMLElement): void {\n\twhile (node.firstChild) {\n\t\tnode.firstChild.remove();\n\t}\n}\n\n/**\n * @deprecated Use node.isConnected directly\n */\nexport function isInDOM(node: Node | null): boolean {\n\treturn node?.isConnected ?? false;\n}\n\nclass DomListener implements IDisposable {\n\n\tprivate _handler: (e: any) => void;\n\tprivate _node: EventTarget;\n\tprivate readonly _type: string;\n\tprivate readonly _options: boolean | AddEventListenerOptions;\n\n\tconstructor(node: EventTarget, type: string, handler: (e: any) => void, options?: boolean | AddEventListenerOptions) {\n\t\tthis._node = node;\n\t\tthis._type = type;\n\t\tthis._handler = handler;\n\t\tthis._options = (options || false);\n\t\tthis._node.addEventListener(this._type, this._handler, this._options);\n\t}\n\n\tpublic dispose(): void {\n\t\tif (!this._handler) {\n\t\t\t// Already disposed\n\t\t\treturn;\n\t\t}\n\n\t\tthis._node.removeEventListener(this._type, this._handler, this._options);\n\n\t\t// Prevent leakers from holding on to the dom or handler func\n\t\tthis._node = null!;\n\t\tthis._handler = null!;\n\t}\n}\n\nexport function addDisposableListener<K extends keyof GlobalEventHandlersEventMap>(node: EventTarget, type: K, handler: (event: GlobalEventHandlersEventMap[K]) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, options: AddEventListenerOptions): IDisposable;\nexport function addDisposableListener(node: EventTarget, type: string, handler: (event: any) => void, useCaptureOrOptions?: boolean | AddEventListenerOptions): IDisposable {\n\treturn new DomListener(node, type, handler, useCaptureOrOptions);\n}\n\nexport interface IAddStandardDisposableListenerSignature {\n\t(node: HTMLElement, type: 'click', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'mousedown', handler: (event: IMouseEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keydown', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keypress', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: 'keyup', handler: (event: IKeyboardEvent) => void, useCapture?: boolean): IDisposable;\n\t(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable;\n}\nfunction _wrapAsStandardMouseEvent(handler: (e: IMouseEvent) => void): (e: MouseEvent) => void {\n\treturn function (e: MouseEvent) {\n\t\treturn handler(new StandardMouseEvent(e));\n\t};\n}\nfunction _wrapAsStandardKeyboardEvent(handler: (e: IKeyboardEvent) => void): (e: KeyboardEvent) => void {\n\treturn function (e: KeyboardEvent) {\n\t\treturn handler(new StandardKeyboardEvent(e));\n\t};\n}\nexport let addStandardDisposableListener: IAddStandardDisposableListenerSignature = function addStandardDisposableListener(node: HTMLElement, type: string, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = handler;\n\n\tif (type === 'click' || type === 'mousedown') {\n\t\twrapHandler = _wrapAsStandardMouseEvent(handler);\n\t} else if (type === 'keydown' || type === 'keypress' || type === 'keyup') {\n\t\twrapHandler = _wrapAsStandardKeyboardEvent(handler);\n\t}\n\n\treturn addDisposableListener(node, type, wrapHandler, useCapture);\n};\n\nexport let addStandardDisposableGenericMouseDownListner = function addStandardDisposableListener(node: HTMLElement, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = _wrapAsStandardMouseEvent(handler);\n\n\treturn addDisposableGenericMouseDownListner(node, wrapHandler, useCapture);\n};\n\nexport let addStandardDisposableGenericMouseUpListner = function addStandardDisposableListener(node: HTMLElement, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\tlet wrapHandler = _wrapAsStandardMouseEvent(handler);\n\n\treturn addDisposableGenericMouseUpListner(node, wrapHandler, useCapture);\n};\nexport function addDisposableGenericMouseDownListner(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_DOWN : EventType.MOUSE_DOWN, handler, useCapture);\n}\n\nexport function addDisposableGenericMouseMoveListner(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_MOVE : EventType.MOUSE_MOVE, handler, useCapture);\n}\n\nexport function addDisposableGenericMouseUpListner(node: EventTarget, handler: (event: any) => void, useCapture?: boolean): IDisposable {\n\treturn addDisposableListener(node, platform.isIOS && BrowserFeatures.pointerEvents ? EventType.POINTER_UP : EventType.MOUSE_UP, handler, useCapture);\n}\nexport function addDisposableNonBubblingMouseOutListener(node: Element, handler: (event: MouseEvent) => void): IDisposable {\n\treturn addDisposableListener(node, 'mouseout', (e: MouseEvent) => {\n\t\t// Mouse out bubbles, so this is an attempt to ignore faux mouse outs coming from children elements\n\t\tlet toElement: Node | null = <Node>(e.relatedTarget);\n\t\twhile (toElement && toElement !== node) {\n\t\t\ttoElement = toElement.parentNode;\n\t\t}\n\t\tif (toElement === node) {\n\t\t\treturn;\n\t\t}\n\n\t\thandler(e);\n\t});\n}\n\nexport function addDisposableNonBubblingPointerOutListener(node: Element, handler: (event: MouseEvent) => void): IDisposable {\n\treturn addDisposableListener(node, 'pointerout', (e: MouseEvent) => {\n\t\t// Mouse out bubbles, so this is an attempt to ignore faux mouse outs coming from children elements\n\t\tlet toElement: Node | null = <Node>(e.relatedTarget);\n\t\twhile (toElement && toElement !== node) {\n\t\t\ttoElement = toElement.parentNode;\n\t\t}\n\t\tif (toElement === node) {\n\t\t\treturn;\n\t\t}\n\n\t\thandler(e);\n\t});\n}\n\ninterface IRequestAnimationFrame {\n\t(callback: (time: number) => void): number;\n}\nlet _animationFrame: IRequestAnimationFrame | null = null;\nfunction doRequestAnimationFrame(callback: (time: number) => void): number {\n\tif (!_animationFrame) {\n\t\tconst emulatedRequestAnimationFrame = (callback: (time: number) => void): any => {\n\t\t\treturn setTimeout(() => callback(new Date().getTime()), 0);\n\t\t};\n\t\t_animationFrame = (\n\t\t\tself.requestAnimationFrame\n\t\t\t|| (<any>self).msRequestAnimationFrame\n\t\t\t|| (<any>self).webkitRequestAnimationFrame\n\t\t\t|| (<any>self).mozRequestAnimationFrame\n\t\t\t|| (<any>self).oRequestAnimationFrame\n\t\t\t|| emulatedRequestAnimationFrame\n\t\t);\n\t}\n\treturn _animationFrame.call(self, callback);\n}\n\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed immediately.\n * @return token that can be used to cancel the scheduled runner (only if `runner` was not executed immediately).\n */\nexport let runAtThisOrScheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n/**\n * Schedule a callback to be run at the next animation frame.\n * This allows multiple parties to register callbacks that should run at the next animation frame.\n * If currently in an animation frame, `runner` will be executed at the next animation frame.\n * @return token that can be used to cancel the scheduled runner.\n */\nexport let scheduleAtNextAnimationFrame: (runner: () => void, priority?: number) => IDisposable;\n\nclass AnimationFrameQueueItem implements IDisposable {\n\n\tprivate _runner: () => void;\n\tpublic priority: number;\n\tprivate _canceled: boolean;\n\n\tconstructor(runner: () => void, priority: number = 0) {\n\t\tthis._runner = runner;\n\t\tthis.priority = priority;\n\t\tthis._canceled = false;\n\t}\n\n\tpublic dispose(): void {\n\t\tthis._canceled = true;\n\t}\n\n\tpublic execute(): void {\n\t\tif (this._canceled) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tthis._runner();\n\t\t} catch (e) {\n\t\t\tonUnexpectedError(e);\n\t\t}\n\t}\n\n\t// Sort by priority (largest to lowest)\n\tpublic static sort(a: AnimationFrameQueueItem, b: AnimationFrameQueueItem): number {\n\t\treturn b.priority - a.priority;\n\t}\n}\n\n(function () {\n\t/**\n\t * The runners scheduled at the next animation frame\n\t */\n\tlet NEXT_QUEUE: AnimationFrameQueueItem[] = [];\n\t/**\n\t * The runners scheduled at the current animation frame\n\t */\n\tlet CURRENT_QUEUE: AnimationFrameQueueItem[] | null = null;\n\t/**\n\t * A flag to keep track if the native requestAnimationFrame was already called\n\t */\n\tlet animFrameRequested = false;\n\t/**\n\t * A flag to indicate if currently handling a native requestAnimationFrame callback\n\t */\n\tlet inAnimationFrameRunner = false;\n\n\tlet animationFrameRunner = () => {\n\t\tanimFrameRequested = false;\n\n\t\tCURRENT_QUEUE = NEXT_QUEUE;\n\t\tNEXT_QUEUE = [];\n\n\t\tinAnimationFrameRunner = true;\n\t\twhile (CURRENT_QUEUE.length > 0) {\n\t\t\tCURRENT_QUEUE.sort(AnimationFrameQueueItem.sort);\n\t\t\tlet top = CURRENT_QUEUE.shift()!;\n\t\t\ttop.execute();\n\t\t}\n\t\tinAnimationFrameRunner = false;\n\t};\n\n\tscheduleAtNextAnimationFrame = (runner: () => void, priority: number = 0) => {\n\t\tlet item = new AnimationFrameQueueItem(runner, priority);\n\t\tNEXT_QUEUE.push(item);\n\n\t\tif (!animFrameRequested) {\n\t\t\tanimFrameRequested = true;\n\t\t\tdoRequestAnimationFrame(animationFrameRunner);\n\t\t}\n\n\t\treturn item;\n\t};\n\n\trunAtThisOrScheduleAtNextAnimationFrame = (runner: () => void, priority?: number) => {\n\t\tif (inAnimationFrameRunner) {\n\t\t\tlet item = new AnimationFrameQueueItem(runner, priority);\n\t\t\tCURRENT_QUEUE!.push(item);\n\t\t\treturn item;\n\t\t} else {\n\t\t\treturn scheduleAtNextAnimationFrame(runner, priority);\n\t\t}\n\t};\n})();\n\nexport function measure(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, 10000 /* must be early */);\n}\n\nexport function modify(callback: () => void): IDisposable {\n\treturn scheduleAtNextAnimationFrame(callback, -10000 /* must be late */);\n}\n\n/**\n * Add a throttled listener. `handler` is fired at most every 8.33333ms or with the next animation frame (if browser supports it).\n */\nexport interface IEventMerger<R, E> {\n\t(lastEvent: R | null, currentEvent: E): R;\n}\n\nexport interface DOMEvent {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nconst MINIMUM_TIME_MS = 8;\nconst DEFAULT_EVENT_MERGER: IEventMerger<DOMEvent, DOMEvent> = function (lastEvent: DOMEvent | null, currentEvent: DOMEvent) {\n\treturn currentEvent;\n};\n\nclass TimeoutThrottledDomListener<R, E extends DOMEvent> extends Disposable {\n\n\tconstructor(node: any, type: string, handler: (event: R) => void, eventMerger: IEventMerger<R, E> = <any>DEFAULT_EVENT_MERGER, minimumTimeMs: number = MINIMUM_TIME_MS) {\n\t\tsuper();\n\n\t\tlet lastEvent: R | null = null;\n\t\tlet lastHandlerTime = 0;\n\t\tlet timeout = this._register(new TimeoutTimer());\n\n\t\tlet invokeHandler = () => {\n\t\t\tlastHandlerTime = (new Date()).getTime();\n\t\t\thandler(<R>lastEvent);\n\t\t\tlastEvent = null;\n\t\t};\n\n\t\tthis._register(addDisposableListener(node, type, (e) => {\n\n\t\t\tlastEvent = eventMerger(lastEvent, e);\n\t\t\tlet elapsedTime = (new Date()).getTime() - lastHandlerTime;\n\n\t\t\tif (elapsedTime >= minimumTimeMs) {\n\t\t\t\ttimeout.cancel();\n\t\t\t\tinvokeHandler();\n\t\t\t} else {\n\t\t\t\ttimeout.setIfNotSet(invokeHandler, minimumTimeMs - elapsedTime);\n\t\t\t}\n\t\t}));\n\t}\n}\n\nexport function addDisposableThrottledListener<R, E extends DOMEvent = DOMEvent>(node: any, type: string, handler: (event: R) => void, eventMerger?: IEventMerger<R, E>, minimumTimeMs?: number): IDisposable {\n\treturn new TimeoutThrottledDomListener<R, E>(node, type, handler, eventMerger, minimumTimeMs);\n}\n\nexport function getComputedStyle(el: HTMLElement): CSSStyleDeclaration {\n\treturn document.defaultView!.getComputedStyle(el, null);\n}\n\nexport function getClientArea(element: HTMLElement): Dimension {\n\n\t// Try with DOM clientWidth / clientHeight\n\tif (element !== document.body) {\n\t\treturn new Dimension(element.clientWidth, element.clientHeight);\n\t}\n\n\t// If visual view port exits and it's on mobile, it should be used instead of window innerWidth / innerHeight, or document.body.clientWidth / document.body.clientHeight\n\tif (platform.isIOS && window.visualViewport) {\n\t\tconst width = window.visualViewport.width;\n\t\tconst height = window.visualViewport.height - (\n\t\t\tbrowser.isStandalone\n\t\t\t\t// in PWA mode, the visual viewport always includes the safe-area-inset-bottom (which is for the home indicator)\n\t\t\t\t// even when you are using the onscreen monitor, the visual viewport will include the area between system statusbar and the onscreen keyboard\n\t\t\t\t// plus the area between onscreen keyboard and the bottom bezel, which is 20px on iOS.\n\t\t\t\t? (20 + 4) // + 4px for body margin\n\t\t\t\t: 0\n\t\t);\n\t\treturn new Dimension(width, height);\n\t}\n\n\t// Try innerWidth / innerHeight\n\tif (window.innerWidth && window.innerHeight) {\n\t\treturn new Dimension(window.innerWidth, window.innerHeight);\n\t}\n\n\t// Try with document.body.clientWidth / document.body.clientHeight\n\tif (document.body && document.body.clientWidth && document.body.clientHeight) {\n\t\treturn new Dimension(document.body.clientWidth, document.body.clientHeight);\n\t}\n\n\t// Try with document.documentElement.clientWidth / document.documentElement.clientHeight\n\tif (document.documentElement && document.documentElement.clientWidth && document.documentElement.clientHeight) {\n\t\treturn new Dimension(document.documentElement.clientWidth, document.documentElement.clientHeight);\n\t}\n\n\tthrow new Error('Unable to figure out browser width and height');\n}\n\nclass SizeUtils {\n\t// Adapted from WinJS\n\t// Converts a CSS positioning string for the specified element to pixels.\n\tprivate static convertToPixels(element: HTMLElement, value: string): number {\n\t\treturn parseFloat(value) || 0;\n\t}\n\n\tprivate static getDimension(element: HTMLElement, cssPropertyName: string, jsPropertyName: string): number {\n\t\tlet computedStyle: CSSStyleDeclaration = getComputedStyle(element);\n\t\tlet value = '0';\n\t\tif (computedStyle) {\n\t\t\tif (computedStyle.getPropertyValue) {\n\t\t\t\tvalue = computedStyle.getPropertyValue(cssPropertyName);\n\t\t\t} else {\n\t\t\t\t// IE8\n\t\t\t\tvalue = (<any>computedStyle).getAttribute(jsPropertyName);\n\t\t\t}\n\t\t}\n\t\treturn SizeUtils.convertToPixels(element, value);\n\t}\n\n\tstatic getBorderLeftWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-left-width', 'borderLeftWidth');\n\t}\n\tstatic getBorderRightWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-right-width', 'borderRightWidth');\n\t}\n\tstatic getBorderTopWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-top-width', 'borderTopWidth');\n\t}\n\tstatic getBorderBottomWidth(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'border-bottom-width', 'borderBottomWidth');\n\t}\n\n\tstatic getPaddingLeft(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-left', 'paddingLeft');\n\t}\n\tstatic getPaddingRight(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-right', 'paddingRight');\n\t}\n\tstatic getPaddingTop(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-top', 'paddingTop');\n\t}\n\tstatic getPaddingBottom(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'padding-bottom', 'paddingBottom');\n\t}\n\n\tstatic getMarginLeft(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-left', 'marginLeft');\n\t}\n\tstatic getMarginTop(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-top', 'marginTop');\n\t}\n\tstatic getMarginRight(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-right', 'marginRight');\n\t}\n\tstatic getMarginBottom(element: HTMLElement): number {\n\t\treturn SizeUtils.getDimension(element, 'margin-bottom', 'marginBottom');\n\t}\n}\n\n// ----------------------------------------------------------------------------------------\n// Position & Dimension\n\nexport interface IDimension {\n\treadonly width: number;\n\treadonly height: number;\n}\n\nexport class Dimension implements IDimension {\n\n\tstatic readonly None = new Dimension(0, 0);\n\n\tconstructor(\n\t\tpublic readonly width: number,\n\t\tpublic readonly height: number,\n\t) { }\n\n\twith(width: number = this.width, height: number = this.height): Dimension {\n\t\tif (width !== this.width || height !== this.height) {\n\t\t\treturn new Dimension(width, height);\n\t\t} else {\n\t\t\treturn this;\n\t\t}\n\t}\n\n\tstatic is(obj: unknown): obj is IDimension {\n\t\treturn typeof obj === 'object' && typeof (<IDimension>obj).height === 'number' && typeof (<IDimension>obj).width === 'number';\n\t}\n\n\tstatic lift(obj: IDimension): Dimension {\n\t\tif (obj instanceof Dimension) {\n\t\t\treturn obj;\n\t\t} else {\n\t\t\treturn new Dimension(obj.width, obj.height);\n\t\t}\n\t}\n\n\tstatic equals(a: Dimension | undefined, b: Dimension | undefined): boolean {\n\t\tif (a === b) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!a || !b) {\n\t\t\treturn false;\n\t\t}\n\t\treturn a.width === b.width && a.height === b.height;\n\t}\n}\n\nexport function getTopLeftOffset(element: HTMLElement): { left: number; top: number; } {\n\t// Adapted from WinJS.Utilities.getPosition\n\t// and added borders to the mix\n\n\tlet offsetParent = element.offsetParent;\n\tlet top = element.offsetTop;\n\tlet left = element.offsetLeft;\n\n\twhile (\n\t\t(element = <HTMLElement>element.parentNode) !== null\n\t\t&& element !== document.body\n\t\t&& element !== document.documentElement\n\t) {\n\t\ttop -= element.scrollTop;\n\t\tconst c = isShadowRoot(element) ? null : getComputedStyle(element);\n\t\tif (c) {\n\t\t\tleft -= c.direction !== 'rtl' ? element.scrollLeft : -element.scrollLeft;\n\t\t}\n\n\t\tif (element === offsetParent) {\n\t\t\tleft += SizeUtils.getBorderLeftWidth(element);\n\t\t\ttop += SizeUtils.getBorderTopWidth(element);\n\t\t\ttop += element.offsetTop;\n\t\t\tleft += element.offsetLeft;\n\t\t\toffsetParent = element.offsetParent;\n\t\t}\n\t}\n\n\treturn {\n\t\tleft: left,\n\t\ttop: top\n\t};\n}\n\nexport interface IDomNodePagePosition {\n\tleft: number;\n\ttop: number;\n\twidth: number;\n\theight: number;\n}\n\nexport function size(element: HTMLElement, width: number | null, height: number | null): void {\n\tif (typeof width === 'number') {\n\t\telement.style.width = `${width}px`;\n\t}\n\n\tif (typeof height === 'number') {\n\t\telement.style.height = `${height}px`;\n\t}\n}\n\nexport function position(element: HTMLElement, top: number, right?: number, bottom?: number, left?: number, position: string = 'absolute'): void {\n\tif (typeof top === 'number') {\n\t\telement.style.top = `${top}px`;\n\t}\n\n\tif (typeof right === 'number') {\n\t\telement.style.right = `${right}px`;\n\t}\n\n\tif (typeof bottom === 'number') {\n\t\telement.style.bottom = `${bottom}px`;\n\t}\n\n\tif (typeof left === 'number') {\n\t\telement.style.left = `${left}px`;\n\t}\n\n\telement.style.position = position;\n}\n\n/**\n * Returns the position of a dom node relative to the entire page.\n */\nexport function getDomNodePagePosition(domNode: HTMLElement): IDomNodePagePosition {\n\tlet bb = domNode.getBoundingClientRect();\n\treturn {\n\t\tleft: bb.left + StandardWindow.scrollX,\n\t\ttop: bb.top + StandardWindow.scrollY,\n\t\twidth: bb.width,\n\t\theight: bb.height\n\t};\n}\n\nexport interface IStandardWindow {\n\treadonly scrollX: number;\n\treadonly scrollY: number;\n}\n\nexport const StandardWindow: IStandardWindow = new class implements IStandardWindow {\n\tget scrollX(): number {\n\t\tif (typeof window.scrollX === 'number') {\n\t\t\t// modern browsers\n\t\t\treturn window.scrollX;\n\t\t} else {\n\t\t\treturn document.body.scrollLeft + document.documentElement!.scrollLeft;\n\t\t}\n\t}\n\n\tget scrollY(): number {\n\t\tif (typeof window.scrollY === 'number') {\n\t\t\t// modern browsers\n\t\t\treturn window.scrollY;\n\t\t} else {\n\t\t\treturn document.body.scrollTop + document.documentElement!.scrollTop;\n\t\t}\n\t}\n};\n\n// Adapted from WinJS\n// Gets the width of the element, including margins.\nexport function getTotalWidth(element: HTMLElement): number {\n\tlet margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n\treturn element.offsetWidth + margin;\n}\n\nexport function getContentWidth(element: HTMLElement): number {\n\tlet border = SizeUtils.getBorderLeftWidth(element) + SizeUtils.getBorderRightWidth(element);\n\tlet padding = SizeUtils.getPaddingLeft(element) + SizeUtils.getPaddingRight(element);\n\treturn element.offsetWidth - border - padding;\n}\n\nexport function getTotalScrollWidth(element: HTMLElement): number {\n\tlet margin = SizeUtils.getMarginLeft(element) + SizeUtils.getMarginRight(element);\n\treturn element.scrollWidth + margin;\n}\n\n// Adapted from WinJS\n// Gets the height of the content of the specified element. The content height does not include borders or padding.\nexport function getContentHeight(element: HTMLElement): number {\n\tlet border = SizeUtils.getBorderTopWidth(element) + SizeUtils.getBorderBottomWidth(element);\n\tlet padding = SizeUtils.getPaddingTop(element) + SizeUtils.getPaddingBottom(element);\n\treturn element.offsetHeight - border - padding;\n}\n\n// Adapted from WinJS\n// Gets the height of the element, including its margins.\nexport function getTotalHeight(element: HTMLElement): number {\n\tlet margin = SizeUtils.getMarginTop(element) + SizeUtils.getMarginBottom(element);\n\treturn element.offsetHeight + margin;\n}\n\n// Gets the left coordinate of the specified element relative to the specified parent.\nfunction getRelativeLeft(element: HTMLElement, parent: HTMLElement): number {\n\tif (element === null) {\n\t\treturn 0;\n\t}\n\n\tlet elementPosition = getTopLeftOffset(element);\n\tlet parentPosition = getTopLeftOffset(parent);\n\treturn elementPosition.left - parentPosition.left;\n}\n\nexport function getLargestChildWidth(parent: HTMLElement, children: HTMLElement[]): number {\n\tlet childWidths = children.map((child) => {\n\t\treturn Math.max(getTotalScrollWidth(child), getTotalWidth(child)) + getRelativeLeft(child, parent) || 0;\n\t});\n\tlet maxWidth = Math.max(...childWidths);\n\treturn maxWidth;\n}\n\n// ----------------------------------------------------------------------------------------\n\nexport function isAncestor(testChild: Node | null, testAncestor: Node | null): boolean {\n\twhile (testChild) {\n\t\tif (testChild === testAncestor) {\n\t\t\treturn true;\n\t\t}\n\t\ttestChild = testChild.parentNode;\n\t}\n\n\treturn false;\n}\n\nconst parentFlowToDataKey = 'parentFlowToElementId';\n\n/**\n * Set an explicit parent to use for nodes that are not part of the\n * regular dom structure.\n */\nexport function setParentFlowTo(fromChildElement: HTMLElement, toParentElement: Element): void {\n\tfromChildElement.dataset[parentFlowToDataKey] = toParentElement.id;\n}\n\nfunction getParentFlowToElement(node: HTMLElement): HTMLElement | null {\n\tconst flowToParentId = node.dataset[parentFlowToDataKey];\n\tif (typeof flowToParentId === 'string') {\n\t\treturn document.getElementById(flowToParentId);\n\t}\n\treturn null;\n}\n\n/**\n * Check if `testAncestor` is an ancessor of `testChild`, observing the explicit\n * parents set by `setParentFlowTo`.\n */\nexport function isAncestorUsingFlowTo(testChild: Node, testAncestor: Node): boolean {\n\tlet node: Node | null = testChild;\n\twhile (node) {\n\t\tif (node === testAncestor) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (node instanceof HTMLElement) {\n\t\t\tconst flowToParentElement = getParentFlowToElement(node);\n\t\t\tif (flowToParentElement) {\n\t\t\t\tnode = flowToParentElement;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t}\n\t\tnode = node.parentNode;\n\t}\n\n\treturn false;\n}\n\nexport function findParentWithClass(node: HTMLElement, clazz: string, stopAtClazzOrNode?: string | HTMLElement): HTMLElement | null {\n\twhile (node && node.nodeType === node.ELEMENT_NODE) {\n\t\tif (node.classList.contains(clazz)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tif (stopAtClazzOrNode) {\n\t\t\tif (typeof stopAtClazzOrNode === 'string') {\n\t\t\t\tif (node.classList.contains(stopAtClazzOrNode)) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (node === stopAtClazzOrNode) {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tnode = <HTMLElement>node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function hasParentWithClass(node: HTMLElement, clazz: string, stopAtClazzOrNode?: string | HTMLElement): boolean {\n\treturn !!findParentWithClass(node, clazz, stopAtClazzOrNode);\n}\n\nexport function isShadowRoot(node: Node): node is ShadowRoot {\n\treturn (\n\t\tnode && !!(<ShadowRoot>node).host && !!(<ShadowRoot>node).mode\n\t);\n}\n\nexport function isInShadowDOM(domNode: Node): boolean {\n\treturn !!getShadowRoot(domNode);\n}\n\nexport function getShadowRoot(domNode: Node): ShadowRoot | null {\n\twhile (domNode.parentNode) {\n\t\tif (domNode === document.body) {\n\t\t\t// reached the body\n\t\t\treturn null;\n\t\t}\n\t\tdomNode = domNode.parentNode;\n\t}\n\treturn isShadowRoot(domNode) ? domNode : null;\n}\n\nexport function getActiveElement(): Element | null {\n\tlet result = document.activeElement;\n\n\twhile (result?.shadowRoot) {\n\t\tresult = result.shadowRoot.activeElement;\n\t}\n\n\treturn result;\n}\n\nexport function createStyleSheet(container: HTMLElement = document.getElementsByTagName('head')[0]): HTMLStyleElement {\n\tlet style = document.createElement('style');\n\tstyle.type = 'text/css';\n\tstyle.media = 'screen';\n\tcontainer.appendChild(style);\n\treturn style;\n}\n\nexport function createMetaElement(container: HTMLElement = document.getElementsByTagName('head')[0]): HTMLMetaElement {\n\tlet meta = document.createElement('meta');\n\tcontainer.appendChild(meta);\n\treturn meta;\n}\n\nlet _sharedStyleSheet: HTMLStyleElement | null = null;\nfunction getSharedStyleSheet(): HTMLStyleElement {\n\tif (!_sharedStyleSheet) {\n\t\t_sharedStyleSheet = createStyleSheet();\n\t}\n\treturn _sharedStyleSheet;\n}\n\nfunction getDynamicStyleSheetRules(style: any) {\n\tif (style?.sheet?.rules) {\n\t\t// Chrome, IE\n\t\treturn style.sheet.rules;\n\t}\n\tif (style?.sheet?.cssRules) {\n\t\t// FF\n\t\treturn style.sheet.cssRules;\n\t}\n\treturn [];\n}\n\nexport function createCSSRule(selector: string, cssText: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style || !cssText) {\n\t\treturn;\n\t}\n\n\t(<CSSStyleSheet>style.sheet).insertRule(selector + '{' + cssText + '}', 0);\n}\n\nexport function removeCSSRulesContainingSelector(ruleName: string, style: HTMLStyleElement = getSharedStyleSheet()): void {\n\tif (!style) {\n\t\treturn;\n\t}\n\n\tlet rules = getDynamicStyleSheetRules(style);\n\tlet toDelete: number[] = [];\n\tfor (let i = 0; i < rules.length; i++) {\n\t\tlet rule = rules[i];\n\t\tif (rule.selectorText.indexOf(ruleName) !== -1) {\n\t\t\ttoDelete.push(i);\n\t\t}\n\t}\n\n\tfor (let i = toDelete.length - 1; i >= 0; i--) {\n\t\t(<any>style.sheet).deleteRule(toDelete[i]);\n\t}\n}\n\nexport function isHTMLElement(o: any): o is HTMLElement {\n\tif (typeof HTMLElement === 'object') {\n\t\treturn o instanceof HTMLElement;\n\t}\n\treturn o && typeof o === 'object' && o.nodeType === 1 && typeof o.nodeName === 'string';\n}\n\nexport const EventType = {\n\t// Mouse\n\tCLICK: 'click',\n\tAUXCLICK: 'auxclick',\n\tDBLCLICK: 'dblclick',\n\tMOUSE_UP: 'mouseup',\n\tMOUSE_DOWN: 'mousedown',\n\tMOUSE_OVER: 'mouseover',\n\tMOUSE_MOVE: 'mousemove',\n\tMOUSE_OUT: 'mouseout',\n\tMOUSE_ENTER: 'mouseenter',\n\tMOUSE_LEAVE: 'mouseleave',\n\tMOUSE_WHEEL: 'wheel',\n\tPOINTER_UP: 'pointerup',\n\tPOINTER_DOWN: 'pointerdown',\n\tPOINTER_MOVE: 'pointermove',\n\tCONTEXT_MENU: 'contextmenu',\n\tWHEEL: 'wheel',\n\t// Keyboard\n\tKEY_DOWN: 'keydown',\n\tKEY_PRESS: 'keypress',\n\tKEY_UP: 'keyup',\n\t// HTML Document\n\tLOAD: 'load',\n\tBEFORE_UNLOAD: 'beforeunload',\n\tUNLOAD: 'unload',\n\tABORT: 'abort',\n\tERROR: 'error',\n\tRESIZE: 'resize',\n\tSCROLL: 'scroll',\n\tFULLSCREEN_CHANGE: 'fullscreenchange',\n\tWK_FULLSCREEN_CHANGE: 'webkitfullscreenchange',\n\t// Form\n\tSELECT: 'select',\n\tCHANGE: 'change',\n\tSUBMIT: 'submit',\n\tRESET: 'reset',\n\tFOCUS: 'focus',\n\tFOCUS_IN: 'focusin',\n\tFOCUS_OUT: 'focusout',\n\tBLUR: 'blur',\n\tINPUT: 'input',\n\t// Local Storage\n\tSTORAGE: 'storage',\n\t// Drag\n\tDRAG_START: 'dragstart',\n\tDRAG: 'drag',\n\tDRAG_ENTER: 'dragenter',\n\tDRAG_LEAVE: 'dragleave',\n\tDRAG_OVER: 'dragover',\n\tDROP: 'drop',\n\tDRAG_END: 'dragend',\n\t// Animation\n\tANIMATION_START: browser.isWebKit ? 'webkitAnimationStart' : 'animationstart',\n\tANIMATION_END: browser.isWebKit ? 'webkitAnimationEnd' : 'animationend',\n\tANIMATION_ITERATION: browser.isWebKit ? 'webkitAnimationIteration' : 'animationiteration'\n} as const;\n\nexport interface EventLike {\n\tpreventDefault(): void;\n\tstopPropagation(): void;\n}\n\nexport const EventHelper = {\n\tstop: function (e: EventLike, cancelBubble?: boolean) {\n\t\tif (e.preventDefault) {\n\t\t\te.preventDefault();\n\t\t} else {\n\t\t\t// IE8\n\t\t\t(<any>e).returnValue = false;\n\t\t}\n\n\t\tif (cancelBubble) {\n\t\t\tif (e.stopPropagation) {\n\t\t\t\te.stopPropagation();\n\t\t\t} else {\n\t\t\t\t// IE8\n\t\t\t\t(<any>e).cancelBubble = true;\n\t\t\t}\n\t\t}\n\t}\n};\n\nexport interface IFocusTracker extends Disposable {\n\tonDidFocus: Event<void>;\n\tonDidBlur: Event<void>;\n\trefreshState?(): void;\n}\n\nexport function saveParentsScrollTop(node: Element): number[] {\n\tlet r: number[] = [];\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tr[i] = node.scrollTop;\n\t\tnode = <Element>node.parentNode;\n\t}\n\treturn r;\n}\n\nexport function restoreParentsScrollTop(node: Element, state: number[]): void {\n\tfor (let i = 0; node && node.nodeType === node.ELEMENT_NODE; i++) {\n\t\tif (node.scrollTop !== state[i]) {\n\t\t\tnode.scrollTop = state[i];\n\t\t}\n\t\tnode = <Element>node.parentNode;\n\t}\n}\n\nclass FocusTracker extends Disposable implements IFocusTracker {\n\n\tprivate readonly _onDidFocus = this._register(new Emitter<void>());\n\tpublic readonly onDidFocus: Event<void> = this._onDidFocus.event;\n\n\tprivate readonly _onDidBlur = this._register(new Emitter<void>());\n\tpublic readonly onDidBlur: Event<void> = this._onDidBlur.event;\n\n\tprivate _refreshStateHandler: () => void;\n\n\tconstructor(element: HTMLElement | Window) {\n\t\tsuper();\n\t\tlet hasFocus = isAncestor(document.activeElement, <HTMLElement>element);\n\t\tlet loosingFocus = false;\n\n\t\tconst onFocus = () => {\n\t\t\tloosingFocus = false;\n\t\t\tif (!hasFocus) {\n\t\t\t\thasFocus = true;\n\t\t\t\tthis._onDidFocus.fire();\n\t\t\t}\n\t\t};\n\n\t\tconst onBlur = () => {\n\t\t\tif (hasFocus) {\n\t\t\t\tloosingFocus = true;\n\t\t\t\twindow.setTimeout(() => {\n\t\t\t\t\tif (loosingFocus) {\n\t\t\t\t\t\tloosingFocus = false;\n\t\t\t\t\t\thasFocus = false;\n\t\t\t\t\t\tthis._onDidBlur.fire();\n\t\t\t\t\t}\n\t\t\t\t}, 0);\n\t\t\t}\n\t\t};\n\n\t\tthis._refreshStateHandler = () => {\n\t\t\tlet currentNodeHasFocus = isAncestor(document.activeElement, <HTMLElement>element);\n\t\t\tif (currentNodeHasFocus !== hasFocus) {\n\t\t\t\tif (hasFocus) {\n\t\t\t\t\tonBlur();\n\t\t\t\t} else {\n\t\t\t\t\tonFocus();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis._register(domEvent(element, EventType.FOCUS, true)(onFocus));\n\t\tthis._register(domEvent(element, EventType.BLUR, true)(onBlur));\n\t}\n\n\trefreshState() {\n\t\tthis._refreshStateHandler();\n\t}\n}\n\nexport function trackFocus(element: HTMLElement | Window): IFocusTracker {\n\treturn new FocusTracker(element);\n}\n\nexport function after<T extends Node>(sibling: HTMLElement, child: T): T {\n\tsibling.after(child);\n\treturn child;\n}\n\nexport function append<T extends Node>(parent: HTMLElement, child: T): T;\nexport function append<T extends Node>(parent: HTMLElement, ...children: (T | string)[]): void;\nexport function append<T extends Node>(parent: HTMLElement, ...children: (T | string)[]): T | void {\n\tparent.append(...children);\n\tif (children.length === 1 && typeof children[0] !== 'string') {\n\t\treturn <T>children[0];\n\t}\n}\n\nexport function prepend<T extends Node>(parent: HTMLElement, child: T): T {\n\tparent.insertBefore(child, parent.firstChild);\n\treturn child;\n}\n\n/**\n * Removes all children from `parent` and appends `children`\n */\nexport function reset(parent: HTMLElement, ...children: Array<Node | string>): void {\n\tparent.innerText = '';\n\tappend(parent, ...children);\n}\n\nconst SELECTOR_REGEX = /([\\w\\-]+)?(#([\\w\\-]+))?((\\.([\\w\\-]+))*)/;\n\nexport enum Namespace {\n\tHTML = 'http://www.w3.org/1999/xhtml',\n\tSVG = 'http://www.w3.org/2000/svg'\n}\n\nfunction _$<T extends Element>(namespace: Namespace, description: string, attrs?: { [key: string]: any; }, ...children: Array<Node | string>): T {\n\tlet match = SELECTOR_REGEX.exec(description);\n\n\tif (!match) {\n\t\tthrow new Error('Bad use of emmet');\n\t}\n\n\tattrs = { ...(attrs || {}) };\n\n\tlet tagName = match[1] || 'div';\n\tlet result: T;\n\n\tif (namespace !== Namespace.HTML) {\n\t\tresult = document.createElementNS(namespace as string, tagName) as T;\n\t} else {\n\t\tresult = document.createElement(tagName) as unknown as T;\n\t}\n\n\tif (match[3]) {\n\t\tresult.id = match[3];\n\t}\n\tif (match[4]) {\n\t\tresult.className = match[4].replace(/\\./g, ' ').trim();\n\t}\n\n\tObject.keys(attrs).forEach(name => {\n\t\tconst value = attrs![name];\n\n\t\tif (typeof value === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (/^on\\w+$/.test(name)) {\n\t\t\t(<any>result)[name] = value;\n\t\t} else if (name === 'selected') {\n\t\t\tif (value) {\n\t\t\t\tresult.setAttribute(name, 'true');\n\t\t\t}\n\n\t\t} else {\n\t\t\tresult.setAttribute(name, value);\n\t\t}\n\t});\n\n\tresult.append(...children);\n\n\treturn result as T;\n}\n\nexport function $<T extends HTMLElement>(description: string, attrs?: { [key: string]: any; }, ...children: Array<Node | string>): T {\n\treturn _$(Namespace.HTML, description, attrs, ...children);\n}\n\n$.SVG = function <T extends SVGElement>(description: string, attrs?: { [key: string]: any; }, ...children: Array<Node | string>): T {\n\treturn _$(Namespace.SVG, description, attrs, ...children);\n};\n\nexport function join(nodes: Node[], separator: Node | string): Node[] {\n\tconst result: Node[] = [];\n\n\tnodes.forEach((node, index) => {\n\t\tif (index > 0) {\n\t\t\tif (separator instanceof Node) {\n\t\t\t\tresult.push(separator.cloneNode());\n\t\t\t} else {\n\t\t\t\tresult.push(document.createTextNode(separator));\n\t\t\t}\n\t\t}\n\n\t\tresult.push(node);\n\t});\n\n\treturn result;\n}\n\nexport function show(...elements: HTMLElement[]): void {\n\tfor (let element of elements) {\n\t\telement.style.display = '';\n\t\telement.removeAttribute('aria-hidden');\n\t}\n}\n\nexport function hide(...elements: HTMLElement[]): void {\n\tfor (let element of elements) {\n\t\telement.style.display = 'none';\n\t\telement.setAttribute('aria-hidden', 'true');\n\t}\n}\n\nfunction findParentWithAttribute(node: Node | null, attribute: string): HTMLElement | null {\n\twhile (node && node.nodeType === node.ELEMENT_NODE) {\n\t\tif (node instanceof HTMLElement && node.hasAttribute(attribute)) {\n\t\t\treturn node;\n\t\t}\n\n\t\tnode = node.parentNode;\n\t}\n\n\treturn null;\n}\n\nexport function removeTabIndexAndUpdateFocus(node: HTMLElement): void {\n\tif (!node || !node.hasAttribute('tabIndex')) {\n\t\treturn;\n\t}\n\n\t// If we are the currently focused element and tabIndex is removed,\n\t// standard DOM behavior is to move focus to the <body> element. We\n\t// typically never want that, rather put focus to the closest element\n\t// in the hierarchy of the parent DOM nodes.\n\tif (document.activeElement === node) {\n\t\tlet parentFocusable = findParentWithAttribute(node.parentElement, 'tabIndex');\n\t\tif (parentFocusable) {\n\t\t\tparentFocusable.focus();\n\t\t}\n\t}\n\n\tnode.removeAttribute('tabindex');\n}\n\nexport function getElementsByTagName(tag: string): HTMLElement[] {\n\treturn Array.prototype.slice.call(document.getElementsByTagName(tag), 0);\n}\n\nexport function finalHandler<T extends DOMEvent>(fn: (event: T) => any): (event: T) => any {\n\treturn e => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tfn(e);\n\t};\n}\n\nexport function domContentLoaded(): Promise<any> {\n\treturn new Promise<any>(resolve => {\n\t\tconst readyState = document.readyState;\n\t\tif (readyState === 'complete' || (document && document.body !== null)) {\n\t\t\tplatform.setImmediate(resolve);\n\t\t} else {\n\t\t\twindow.addEventListener('DOMContentLoaded', resolve, false);\n\t\t}\n\t});\n}\n\n/**\n * Find a value usable for a dom node size such that the likelihood that it would be\n * displayed with constant screen pixels size is as high as possible.\n *\n * e.g. We would desire for the cursors to be 2px (CSS px) wide. Under a devicePixelRatio\n * of 1.25, the cursor will be 2.5 screen pixels wide. Depending on how the dom node aligns/\"snaps\"\n * with the screen pixels, it will sometimes be rendered with 2 screen pixels, and sometimes with 3 screen pixels.\n */\nexport function computeScreenAwareSize(cssPx: number): number {\n\tconst screenPx = window.devicePixelRatio * cssPx;\n\treturn Math.max(1, Math.floor(screenPx)) / window.devicePixelRatio;\n}\n\n/**\n * See https://github.com/microsoft/monaco-editor/issues/601\n * To protect against malicious code in the linked site, particularly phishing attempts,\n * the window.opener should be set to null to prevent the linked site from having access\n * to change the location of the current page.\n * See https://mathiasbynens.github.io/rel-noopener/\n */\nexport function windowOpenNoOpener(url: string): boolean {\n\tif (browser.isElectron || browser.isEdgeLegacyWebView) {\n\t\t// In VSCode, window.open() always returns null...\n\t\t// The same is true for a WebView (see https://github.com/microsoft/monaco-editor/issues/628)\n\t\t// Also call directly window.open in sandboxed Electron (see https://github.com/microsoft/monaco-editor/issues/2220)\n\t\twindow.open(url);\n\t\treturn true;\n\t} else {\n\t\tlet newTab = window.open();\n\t\tif (newTab) {\n\t\t\t(newTab as any).opener = null;\n\t\t\tnewTab.location.href = url;\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport function animate(fn: () => void): IDisposable {\n\tconst step = () => {\n\t\tfn();\n\t\tstepDisposable = scheduleAtNextAnimationFrame(step);\n\t};\n\n\tlet stepDisposable = scheduleAtNextAnimationFrame(step);\n\treturn toDisposable(() => stepDisposable.dispose());\n}\n\nRemoteAuthorities.setPreferredWebSchema(/^https:/.test(window.location.href) ? 'https' : 'http');\n\n/**\n * returns url('...')\n */\nexport function asCSSUrl(uri: URI): string {\n\tif (!uri) {\n\t\treturn `url('')`;\n\t}\n\treturn `url('${FileAccess.asBrowserUri(uri).toString(true).replace(/'/g, '%27')}')`;\n}\n\nexport function asCSSPropertyValue(value: string) {\n\treturn `'${value.replace(/'/g, '%27')}'`;\n}\n\nexport function triggerDownload(dataOrUri: Uint8Array | URI, name: string): void {\n\n\t// If the data is provided as Buffer, we create a\n\t// blob URL out of it to produce a valid link\n\tlet url: string;\n\tif (URI.isUri(dataOrUri)) {\n\t\turl = dataOrUri.toString(true);\n\t} else {\n\t\tconst blob = new Blob([dataOrUri]);\n\t\turl = URL.createObjectURL(blob);\n\n\t\t// Ensure to free the data from DOM eventually\n\t\tsetTimeout(() => URL.revokeObjectURL(url));\n\t}\n\n\t// In order to download from the browser, the only way seems\n\t// to be creating a <a> element with download attribute that\n\t// points to the file to download.\n\t// See also https://developers.google.com/web/updates/2011/08/Downloading-resources-in-HTML5-a-download\n\tconst anchor = document.createElement('a');\n\tdocument.body.appendChild(anchor);\n\tanchor.download = name;\n\tanchor.href = url;\n\tanchor.click();\n\n\t// Ensure to remove the element from DOM eventually\n\tsetTimeout(() => document.body.removeChild(anchor));\n}\n\nexport enum DetectedFullscreenMode {\n\n\t/**\n\t * The document is fullscreen, e.g. because an element\n\t * in the document requested to be fullscreen.\n\t */\n\tDOCUMENT = 1,\n\n\t/**\n\t * The browser is fullsreen, e.g. because the user enabled\n\t * native window fullscreen for it.\n\t */\n\tBROWSER\n}\n\nexport interface IDetectedFullscreen {\n\n\t/**\n\t * Figure out if the document is fullscreen or the browser.\n\t */\n\tmode: DetectedFullscreenMode;\n\n\t/**\n\t * Whether we know for sure that we are in fullscreen mode or\n\t * it is a guess.\n\t */\n\tguess: boolean;\n}\n\nexport function detectFullscreen(): IDetectedFullscreen | null {\n\n\t// Browser fullscreen: use DOM APIs to detect\n\tif (document.fullscreenElement || (<any>document).webkitFullscreenElement || (<any>document).webkitIsFullScreen) {\n\t\treturn { mode: DetectedFullscreenMode.DOCUMENT, guess: false };\n\t}\n\n\t// There is no standard way to figure out if the browser\n\t// is using native fullscreen. Via checking on screen\n\t// height and comparing that to window height, we can guess\n\t// it though.\n\n\tif (window.innerHeight === screen.height) {\n\t\t// if the height of the window matches the screen height, we can\n\t\t// safely assume that the browser is fullscreen because no browser\n\t\t// chrome is taking height away (e.g. like toolbars).\n\t\treturn { mode: DetectedFullscreenMode.BROWSER, guess: false };\n\t}\n\n\tif (platform.isMacintosh || platform.isLinux) {\n\t\t// macOS and Linux do not properly report `innerHeight`, only Windows does\n\t\tif (window.outerHeight === screen.height && window.outerWidth === screen.width) {\n\t\t\t// if the height of the browser matches the screen height, we can\n\t\t\t// only guess that we are in fullscreen. It is also possible that\n\t\t\t// the user has turned off taskbars in the OS and the browser is\n\t\t\t// simply able to span the entire size of the screen.\n\t\t\treturn { mode: DetectedFullscreenMode.BROWSER, guess: true };\n\t\t}\n\t}\n\n\t// Not in fullscreen\n\treturn null;\n}\n\n// -- sanitize and trusted html\n\nfunction _extInsaneOptions(opts: InsaneOptions, allowedAttributesForAll: string[]): InsaneOptions {\n\n\tlet allowedAttributes: Record<string, string[]> = opts.allowedAttributes ?? {};\n\n\tif (opts.allowedTags) {\n\t\tfor (let tag of opts.allowedTags) {\n\t\t\tlet array = allowedAttributes[tag];\n\t\t\tif (!array) {\n\t\t\t\tarray = allowedAttributesForAll;\n\t\t\t} else {\n\t\t\t\tarray = array.concat(allowedAttributesForAll);\n\t\t\t}\n\t\t\tallowedAttributes[tag] = array;\n\t\t}\n\t}\n\n\treturn { ...opts, allowedAttributes };\n}\n\nconst _ttpSafeInnerHtml = window.trustedTypes?.createPolicy('safeInnerHtml', {\n\tcreateHTML(value, options: InsaneOptions) {\n\t\treturn insane(value, options);\n\t}\n});\n\n/**\n * Sanitizes the given `value` and reset the given `node` with it.\n */\nexport function safeInnerHtml(node: HTMLElement, value: string): void {\n\n\tconst options = _extInsaneOptions({\n\t\tallowedTags: ['a', 'button', 'blockquote', 'code', 'div', 'h1', 'h2', 'h3', 'input', 'label', 'li', 'p', 'pre', 'select', 'small', 'span', 'strong', 'textarea', 'ul', 'ol'],\n\t\tallowedAttributes: {\n\t\t\t'a': ['href', 'x-dispatch'],\n\t\t\t'button': ['data-href', 'x-dispatch'],\n\t\t\t'input': ['type', 'placeholder', 'checked', 'required'],\n\t\t\t'label': ['for'],\n\t\t\t'select': ['required'],\n\t\t\t'span': ['data-command', 'role'],\n\t\t\t'textarea': ['name', 'placeholder', 'required'],\n\t\t},\n\t\tallowedSchemes: ['http', 'https', 'command']\n\t}, ['class', 'id', 'role', 'tabindex']);\n\n\tconst html = _ttpSafeInnerHtml?.createHTML(value, options) ?? insane(value, options);\n\tnode.innerHTML = html as string;\n}\n\n/**\n * Convert a Unicode string to a string in which each 16-bit unit occupies only one byte\n *\n * From https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/btoa\n */\nfunction toBinary(str: string): string {\n\tconst codeUnits = new Uint16Array(str.length);\n\tfor (let i = 0; i < codeUnits.length; i++) {\n\t\tcodeUnits[i] = str.charCodeAt(i);\n\t}\n\tlet binary = '';\n\tconst uint8array = new Uint8Array(codeUnits.buffer);\n\tfor (let i = 0; i < uint8array.length; i++) {\n\t\tbinary += String.fromCharCode(uint8array[i]);\n\t}\n\treturn binary;\n}\n\n/**\n * Version of the global `btoa` function that handles multi-byte characters instead\n * of throwing an exception.\n */\nexport function multibyteAwareBtoa(str: string): string {\n\treturn btoa(toBinary(str));\n}\n\n/**\n * Typings for the https://wicg.github.io/file-system-access\n *\n * Use `supported(window)` to find out if the browser supports this kind of API.\n */\nexport namespace WebFileSystemAccess {\n\n\texport function supported(obj: any & Window): boolean {\n\t\tif (typeof obj?.showDirectoryPicker === 'function') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\ntype ModifierKey = 'alt' | 'ctrl' | 'shift' | 'meta';\n\nexport interface IModifierKeyStatus {\n\taltKey: boolean;\n\tshiftKey: boolean;\n\tctrlKey: boolean;\n\tmetaKey: boolean;\n\tlastKeyPressed?: ModifierKey;\n\tlastKeyReleased?: ModifierKey;\n\tevent?: KeyboardEvent;\n}\n\nexport class ModifierKeyEmitter extends Emitter<IModifierKeyStatus> {\n\n\tprivate readonly _subscriptions = new DisposableStore();\n\tprivate _keyStatus: IModifierKeyStatus;\n\tprivate static instance: ModifierKeyEmitter;\n\n\tprivate constructor() {\n\t\tsuper();\n\n\t\tthis._keyStatus = {\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false\n\t\t};\n\n\t\tthis._subscriptions.add(domEvent(window, 'keydown', true)(e => {\n\n\t\t\tconst event = new StandardKeyboardEvent(e);\n\t\t\t// If Alt-key keydown event is repeated, ignore it #112347\n\t\t\t// Only known to be necessary for Alt-Key at the moment #115810\n\t\t\tif (event.keyCode === KeyCode.Alt && e.repeat) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (e.altKey && !this._keyStatus.altKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'alt';\n\t\t\t} else if (e.ctrlKey && !this._keyStatus.ctrlKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'ctrl';\n\t\t\t} else if (e.metaKey && !this._keyStatus.metaKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'meta';\n\t\t\t} else if (e.shiftKey && !this._keyStatus.shiftKey) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = 'shift';\n\t\t\t} else if (event.keyCode !== KeyCode.Alt) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t} else {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._keyStatus.altKey = e.altKey;\n\t\t\tthis._keyStatus.ctrlKey = e.ctrlKey;\n\t\t\tthis._keyStatus.metaKey = e.metaKey;\n\t\t\tthis._keyStatus.shiftKey = e.shiftKey;\n\n\t\t\tif (this._keyStatus.lastKeyPressed) {\n\t\t\t\tthis._keyStatus.event = e;\n\t\t\t\tthis.fire(this._keyStatus);\n\t\t\t}\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(window, 'keyup', true)(e => {\n\t\t\tif (!e.altKey && this._keyStatus.altKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'alt';\n\t\t\t} else if (!e.ctrlKey && this._keyStatus.ctrlKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'ctrl';\n\t\t\t} else if (!e.metaKey && this._keyStatus.metaKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'meta';\n\t\t\t} else if (!e.shiftKey && this._keyStatus.shiftKey) {\n\t\t\t\tthis._keyStatus.lastKeyReleased = 'shift';\n\t\t\t} else {\n\t\t\t\tthis._keyStatus.lastKeyReleased = undefined;\n\t\t\t}\n\n\t\t\tif (this._keyStatus.lastKeyPressed !== this._keyStatus.lastKeyReleased) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t}\n\n\t\t\tthis._keyStatus.altKey = e.altKey;\n\t\t\tthis._keyStatus.ctrlKey = e.ctrlKey;\n\t\t\tthis._keyStatus.metaKey = e.metaKey;\n\t\t\tthis._keyStatus.shiftKey = e.shiftKey;\n\n\t\t\tif (this._keyStatus.lastKeyReleased) {\n\t\t\t\tthis._keyStatus.event = e;\n\t\t\t\tthis.fire(this._keyStatus);\n\t\t\t}\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(document.body, 'mousedown', true)(e => {\n\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(document.body, 'mouseup', true)(e => {\n\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(document.body, 'mousemove', true)(e => {\n\t\t\tif (e.buttons) {\n\t\t\t\tthis._keyStatus.lastKeyPressed = undefined;\n\t\t\t}\n\t\t}));\n\n\t\tthis._subscriptions.add(domEvent(window, 'blur')(e => {\n\t\t\tthis.resetKeyStatus();\n\t\t}));\n\t}\n\n\tget keyStatus(): IModifierKeyStatus {\n\t\treturn this._keyStatus;\n\t}\n\n\tget isModifierPressed(): boolean {\n\t\treturn this._keyStatus.altKey || this._keyStatus.ctrlKey || this._keyStatus.metaKey || this._keyStatus.shiftKey;\n\t}\n\n\t/**\n\t * Allows to explicitly reset the key status based on more knowledge (#109062)\n\t */\n\tresetKeyStatus(): void {\n\t\tthis.doResetKeyStatus();\n\t\tthis.fire(this._keyStatus);\n\t}\n\n\tprivate doResetKeyStatus(): void {\n\t\tthis._keyStatus = {\n\t\t\taltKey: false,\n\t\t\tshiftKey: false,\n\t\t\tctrlKey: false,\n\t\t\tmetaKey: false\n\t\t};\n\t}\n\n\tstatic getInstance() {\n\t\tif (!ModifierKeyEmitter.instance) {\n\t\t\tModifierKeyEmitter.instance = new ModifierKeyEmitter();\n\t\t}\n\n\t\treturn ModifierKeyEmitter.instance;\n\t}\n\n\toverride dispose() {\n\t\tsuper.dispose();\n\t\tthis._subscriptions.dispose();\n\t}\n}\n\nexport function getCookieValue(name: string): string | undefined {\n\tconst match = document.cookie.match('(^|[^;]+)\\\\s*' + name + '\\\\s*=\\\\s*([^;]+)'); // See https://stackoverflow.com/a/25490531\n\n\treturn match ? match.pop() : undefined;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { addDisposableListener } from 'vs/base/browser/dom';\n\n/**\n * A helper that will execute a provided function when the provided HTMLElement receives\n *  dragover event for 800ms. If the drag is aborted before, the callback will not be triggered.\n */\nexport class DelayedDragHandler extends Disposable {\n\tprivate timeout: any;\n\n\tconstructor(container: HTMLElement, callback: () => void) {\n\t\tsuper();\n\n\t\tthis._register(addDisposableListener(container, 'dragover', e => {\n\t\t\te.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n\n\t\t\tif (!this.timeout) {\n\t\t\t\tthis.timeout = setTimeout(() => {\n\t\t\t\t\tcallback();\n\n\t\t\t\t\tthis.timeout = null;\n\t\t\t\t}, 800);\n\t\t\t}\n\t\t}));\n\n\t\t['dragleave', 'drop', 'dragend'].forEach(type => {\n\t\t\tthis._register(addDisposableListener(container, type, () => {\n\t\t\t\tthis.clearDragTimeout();\n\t\t\t}));\n\t\t});\n\t}\n\n\tprivate clearDragTimeout(): void {\n\t\tif (this.timeout) {\n\t\t\tclearTimeout(this.timeout);\n\t\t\tthis.timeout = null;\n\t\t}\n\t}\n\n\toverride dispose(): void {\n\t\tsuper.dispose();\n\n\t\tthis.clearDragTimeout();\n\t}\n}\n\n// Common data transfers\nexport const DataTransfers = {\n\n\t/**\n\t * Application specific resource transfer type\n\t */\n\tRESOURCES: 'ResourceURLs',\n\n\t/**\n\t * Browser specific transfer type to download\n\t */\n\tDOWNLOAD_URL: 'DownloadURL',\n\n\t/**\n\t * Browser specific transfer type for files\n\t */\n\tFILES: 'Files',\n\n\t/**\n\t * Typically transfer type for copy/paste transfers.\n\t */\n\tTEXT: 'text/plain'\n};\n\nexport function applyDragImage(event: DragEvent, label: string | null, clazz: string): void {\n\tconst dragImage = document.createElement('div');\n\tdragImage.className = clazz;\n\tdragImage.textContent = label;\n\n\tif (event.dataTransfer) {\n\t\tdocument.body.appendChild(dragImage);\n\t\tevent.dataTransfer.setDragImage(dragImage, -10, -10);\n\n\t\t// Removes the element when the DND operation is done\n\t\tsetTimeout(() => document.body.removeChild(dragImage), 0);\n\t}\n}\n\nexport interface IDragAndDropData {\n\tupdate(dataTransfer: DataTransfer): void;\n\tgetData(): unknown;\n}\n\nexport class DragAndDropData<T> implements IDragAndDropData {\n\n\tconstructor(private data: T) { }\n\n\tupdate(): void {\n\t\t// noop\n\t}\n\n\tgetData(): T {\n\t\treturn this.data;\n\t}\n}\n\nexport interface IStaticDND {\n\tCurrentDragAndDropData: IDragAndDropData | undefined;\n}\n\nexport const StaticDND: IStaticDND = {\n\tCurrentDragAndDropData: undefined\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IframeUtils } from 'vs/base/browser/iframe';\nimport { StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { IDisposable, DisposableStore } from 'vs/base/common/lifecycle';\n\nexport interface IStandardMouseMoveEventData {\n\tleftButton: boolean;\n\tbuttons: number;\n\tposx: number;\n\tposy: number;\n}\n\nexport interface IEventMerger<R> {\n\t(lastEvent: R | null, currentEvent: MouseEvent): R;\n}\n\nexport interface IMouseMoveCallback<R> {\n\t(mouseMoveData: R): void;\n}\n\nexport interface IOnStopCallback {\n\t(browserEvent?: MouseEvent | KeyboardEvent): void;\n}\n\nexport function standardMouseMoveMerger(lastEvent: IStandardMouseMoveEventData | null, currentEvent: MouseEvent): IStandardMouseMoveEventData {\n\tlet ev = new StandardMouseEvent(currentEvent);\n\tev.preventDefault();\n\treturn {\n\t\tleftButton: ev.leftButton,\n\t\tbuttons: ev.buttons,\n\t\tposx: ev.posx,\n\t\tposy: ev.posy\n\t};\n}\n\nexport class GlobalMouseMoveMonitor<R extends { buttons: number; }> implements IDisposable {\n\n\tprivate readonly _hooks = new DisposableStore();\n\tprivate _mouseMoveEventMerger: IEventMerger<R> | null = null;\n\tprivate _mouseMoveCallback: IMouseMoveCallback<R> | null = null;\n\tprivate _onStopCallback: IOnStopCallback | null = null;\n\n\tpublic dispose(): void {\n\t\tthis.stopMonitoring(false);\n\t\tthis._hooks.dispose();\n\t}\n\n\tpublic stopMonitoring(invokeStopCallback: boolean, browserEvent?: MouseEvent | KeyboardEvent): void {\n\t\tif (!this.isMonitoring()) {\n\t\t\t// Not monitoring\n\t\t\treturn;\n\t\t}\n\n\t\t// Unhook\n\t\tthis._hooks.clear();\n\t\tthis._mouseMoveEventMerger = null;\n\t\tthis._mouseMoveCallback = null;\n\t\tconst onStopCallback = this._onStopCallback;\n\t\tthis._onStopCallback = null;\n\n\t\tif (invokeStopCallback && onStopCallback) {\n\t\t\tonStopCallback(browserEvent);\n\t\t}\n\t}\n\n\tpublic isMonitoring(): boolean {\n\t\treturn !!this._mouseMoveEventMerger;\n\t}\n\n\tpublic startMonitoring(\n\t\tinitialElement: HTMLElement,\n\t\tinitialButtons: number,\n\t\tmouseMoveEventMerger: IEventMerger<R>,\n\t\tmouseMoveCallback: IMouseMoveCallback<R>,\n\t\tonStopCallback: IOnStopCallback\n\t): void {\n\t\tif (this.isMonitoring()) {\n\t\t\t// I am already hooked\n\t\t\treturn;\n\t\t}\n\t\tthis._mouseMoveEventMerger = mouseMoveEventMerger;\n\t\tthis._mouseMoveCallback = mouseMoveCallback;\n\t\tthis._onStopCallback = onStopCallback;\n\n\t\tconst windowChain = IframeUtils.getSameOriginWindowChain();\n\t\tconst mouseMove = 'mousemove';\n\t\tconst mouseUp = 'mouseup';\n\n\t\tconst listenTo: (Document | ShadowRoot)[] = windowChain.map(element => element.window.document);\n\t\tconst shadowRoot = dom.getShadowRoot(initialElement);\n\t\tif (shadowRoot) {\n\t\t\tlistenTo.unshift(shadowRoot);\n\t\t}\n\n\t\tfor (const element of listenTo) {\n\t\t\tthis._hooks.add(dom.addDisposableThrottledListener(element, mouseMove,\n\t\t\t\t(data: R) => {\n\t\t\t\t\tif (data.buttons !== initialButtons) {\n\t\t\t\t\t\t// Buttons state has changed in the meantime\n\t\t\t\t\t\tthis.stopMonitoring(true);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tthis._mouseMoveCallback!(data);\n\t\t\t\t},\n\t\t\t\t(lastEvent: R | null, currentEvent) => this._mouseMoveEventMerger!(lastEvent, currentEvent as MouseEvent)\n\t\t\t));\n\t\t\tthis._hooks.add(dom.addDisposableListener(element, mouseUp, (e: MouseEvent) => this.stopMonitoring(true)));\n\t\t}\n\n\t\tif (IframeUtils.hasDifferentOriginAncestor()) {\n\t\t\tlet lastSameOriginAncestor = windowChain[windowChain.length - 1];\n\t\t\t// We might miss a mouse up if it happens outside the iframe\n\t\t\t// This one is for Chrome\n\t\t\tthis._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document, 'mouseout', (browserEvent: MouseEvent) => {\n\t\t\t\tlet e = new StandardMouseEvent(browserEvent);\n\t\t\t\tif (e.target.tagName.toLowerCase() === 'html') {\n\t\t\t\t\tthis.stopMonitoring(true);\n\t\t\t\t}\n\t\t\t}));\n\t\t\t// This one is for FF\n\t\t\tthis._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document, 'mouseover', (browserEvent: MouseEvent) => {\n\t\t\t\tlet e = new StandardMouseEvent(browserEvent);\n\t\t\t\tif (e.target.tagName.toLowerCase() === 'html') {\n\t\t\t\t\tthis.stopMonitoring(true);\n\t\t\t\t}\n\t\t\t}));\n\t\t\t// This one is for IE\n\t\t\tthis._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document.body, 'mouseleave', (browserEvent: MouseEvent) => {\n\t\t\t\tthis.stopMonitoring(true);\n\t\t\t}));\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as arrays from 'vs/base/common/arrays';\nimport { IDisposable, Disposable } from 'vs/base/common/lifecycle';\nimport * as DomUtils from 'vs/base/browser/dom';\nimport { memoize } from 'vs/base/common/decorators';\n\nexport namespace EventType {\n\texport const Tap = '-monaco-gesturetap';\n\texport const Change = '-monaco-gesturechange';\n\texport const Start = '-monaco-gesturestart';\n\texport const End = '-monaco-gesturesend';\n\texport const Contextmenu = '-monaco-gesturecontextmenu';\n}\n\ninterface TouchData {\n\tid: number;\n\tinitialTarget: EventTarget;\n\tinitialTimeStamp: number;\n\tinitialPageX: number;\n\tinitialPageY: number;\n\trollingTimestamps: number[];\n\trollingPageX: number[];\n\trollingPageY: number[];\n}\n\nexport interface GestureEvent extends MouseEvent {\n\tinitialTarget: EventTarget | undefined;\n\ttranslationX: number;\n\ttranslationY: number;\n\tpageX: number;\n\tpageY: number;\n\ttapCount: number;\n}\n\ninterface Touch {\n\tidentifier: number;\n\tscreenX: number;\n\tscreenY: number;\n\tclientX: number;\n\tclientY: number;\n\tpageX: number;\n\tpageY: number;\n\tradiusX: number;\n\tradiusY: number;\n\trotationAngle: number;\n\tforce: number;\n\ttarget: Element;\n}\n\ninterface TouchList {\n\t[i: number]: Touch;\n\tlength: number;\n\titem(index: number): Touch;\n\tidentifiedTouch(id: number): Touch;\n}\n\ninterface TouchEvent extends Event {\n\ttouches: TouchList;\n\ttargetTouches: TouchList;\n\tchangedTouches: TouchList;\n}\n\nexport class Gesture extends Disposable {\n\n\tprivate static readonly SCROLL_FRICTION = -0.005;\n\tprivate static INSTANCE: Gesture;\n\tprivate static readonly HOLD_DELAY = 700;\n\n\tprivate dispatched = false;\n\tprivate targets: HTMLElement[];\n\tprivate ignoreTargets: HTMLElement[];\n\tprivate handle: IDisposable | null;\n\n\tprivate activeTouches: { [id: number]: TouchData; };\n\n\tprivate _lastSetTapCountTime: number;\n\n\tprivate static readonly CLEAR_TAP_COUNT_TIME = 400; // ms\n\n\n\tprivate constructor() {\n\t\tsuper();\n\n\t\tthis.activeTouches = {};\n\t\tthis.handle = null;\n\t\tthis.targets = [];\n\t\tthis.ignoreTargets = [];\n\t\tthis._lastSetTapCountTime = 0;\n\t\tthis._register(DomUtils.addDisposableListener(document, 'touchstart', (e: TouchEvent) => this.onTouchStart(e), { passive: false }));\n\t\tthis._register(DomUtils.addDisposableListener(document, 'touchend', (e: TouchEvent) => this.onTouchEnd(e)));\n\t\tthis._register(DomUtils.addDisposableListener(document, 'touchmove', (e: TouchEvent) => this.onTouchMove(e), { passive: false }));\n\t}\n\n\tpublic static addTarget(element: HTMLElement): IDisposable {\n\t\tif (!Gesture.isTouchDevice()) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\tif (!Gesture.INSTANCE) {\n\t\t\tGesture.INSTANCE = new Gesture();\n\t\t}\n\n\t\tGesture.INSTANCE.targets.push(element);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tGesture.INSTANCE.targets = Gesture.INSTANCE.targets.filter(t => t !== element);\n\t\t\t}\n\t\t};\n\t}\n\n\tpublic static ignoreTarget(element: HTMLElement): IDisposable {\n\t\tif (!Gesture.isTouchDevice()) {\n\t\t\treturn Disposable.None;\n\t\t}\n\t\tif (!Gesture.INSTANCE) {\n\t\t\tGesture.INSTANCE = new Gesture();\n\t\t}\n\n\t\tGesture.INSTANCE.ignoreTargets.push(element);\n\n\t\treturn {\n\t\t\tdispose: () => {\n\t\t\t\tGesture.INSTANCE.ignoreTargets = Gesture.INSTANCE.ignoreTargets.filter(t => t !== element);\n\t\t\t}\n\t\t};\n\t}\n\n\t@memoize\n\tprivate static isTouchDevice(): boolean {\n\t\t// `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be\n\t\t// `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n\t\treturn 'ontouchstart' in window || navigator.maxTouchPoints > 0 || (window as Window).navigator.msMaxTouchPoints > 0;\n\t}\n\n\tpublic override dispose(): void {\n\t\tif (this.handle) {\n\t\t\tthis.handle.dispose();\n\t\t\tthis.handle = null;\n\t\t}\n\n\t\tsuper.dispose();\n\t}\n\n\tprivate onTouchStart(e: TouchEvent): void {\n\t\tlet timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n\n\t\tif (this.handle) {\n\t\t\tthis.handle.dispose();\n\t\t\tthis.handle = null;\n\t\t}\n\n\t\tfor (let i = 0, len = e.targetTouches.length; i < len; i++) {\n\t\t\tlet touch = e.targetTouches.item(i);\n\n\t\t\tthis.activeTouches[touch.identifier] = {\n\t\t\t\tid: touch.identifier,\n\t\t\t\tinitialTarget: touch.target,\n\t\t\t\tinitialTimeStamp: timestamp,\n\t\t\t\tinitialPageX: touch.pageX,\n\t\t\t\tinitialPageY: touch.pageY,\n\t\t\t\trollingTimestamps: [timestamp],\n\t\t\t\trollingPageX: [touch.pageX],\n\t\t\t\trollingPageY: [touch.pageY]\n\t\t\t};\n\n\t\t\tlet evt = this.newGestureEvent(EventType.Start, touch.target);\n\t\t\tevt.pageX = touch.pageX;\n\t\t\tevt.pageY = touch.pageY;\n\t\t\tthis.dispatchEvent(evt);\n\t\t}\n\n\t\tif (this.dispatched) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.dispatched = false;\n\t\t}\n\t}\n\n\tprivate onTouchEnd(e: TouchEvent): void {\n\t\tlet timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n\n\t\tlet activeTouchCount = Object.keys(this.activeTouches).length;\n\n\t\tfor (let i = 0, len = e.changedTouches.length; i < len; i++) {\n\n\t\t\tlet touch = e.changedTouches.item(i);\n\n\t\t\tif (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n\t\t\t\tconsole.warn('move of an UNKNOWN touch', touch);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet data = this.activeTouches[touch.identifier],\n\t\t\t\tholdTime = Date.now() - data.initialTimeStamp;\n\n\t\t\tif (holdTime < Gesture.HOLD_DELAY\n\t\t\t\t&& Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n\t\t\t\t&& Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n\n\t\t\t\tlet evt = this.newGestureEvent(EventType.Tap, data.initialTarget);\n\t\t\t\tevt.pageX = arrays.tail(data.rollingPageX);\n\t\t\t\tevt.pageY = arrays.tail(data.rollingPageY);\n\t\t\t\tthis.dispatchEvent(evt);\n\n\t\t\t} else if (holdTime >= Gesture.HOLD_DELAY\n\t\t\t\t&& Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n\t\t\t\t&& Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n\n\t\t\t\tlet evt = this.newGestureEvent(EventType.Contextmenu, data.initialTarget);\n\t\t\t\tevt.pageX = arrays.tail(data.rollingPageX);\n\t\t\t\tevt.pageY = arrays.tail(data.rollingPageY);\n\t\t\t\tthis.dispatchEvent(evt);\n\n\t\t\t} else if (activeTouchCount === 1) {\n\t\t\t\tlet finalX = arrays.tail(data.rollingPageX);\n\t\t\t\tlet finalY = arrays.tail(data.rollingPageY);\n\n\t\t\t\tlet deltaT = arrays.tail(data.rollingTimestamps) - data.rollingTimestamps[0];\n\t\t\t\tlet deltaX = finalX - data.rollingPageX[0];\n\t\t\t\tlet deltaY = finalY - data.rollingPageY[0];\n\n\t\t\t\t// We need to get all the dispatch targets on the start of the inertia event\n\t\t\t\tconst dispatchTo = this.targets.filter(t => data.initialTarget instanceof Node && t.contains(data.initialTarget));\n\t\t\t\tthis.inertia(dispatchTo, timestamp,\t\t// time now\n\t\t\t\t\tMath.abs(deltaX) / deltaT,\t// speed\n\t\t\t\t\tdeltaX > 0 ? 1 : -1,\t\t// x direction\n\t\t\t\t\tfinalX,\t\t\t\t\t\t// x now\n\t\t\t\t\tMath.abs(deltaY) / deltaT,  // y speed\n\t\t\t\t\tdeltaY > 0 ? 1 : -1,\t\t// y direction\n\t\t\t\t\tfinalY\t\t\t\t\t\t// y now\n\t\t\t\t);\n\t\t\t}\n\n\n\t\t\tthis.dispatchEvent(this.newGestureEvent(EventType.End, data.initialTarget));\n\t\t\t// forget about this touch\n\t\t\tdelete this.activeTouches[touch.identifier];\n\t\t}\n\n\t\tif (this.dispatched) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.dispatched = false;\n\t\t}\n\t}\n\n\tprivate newGestureEvent(type: string, initialTarget?: EventTarget): GestureEvent {\n\t\tlet event = document.createEvent('CustomEvent') as unknown as GestureEvent;\n\t\tevent.initEvent(type, false, true);\n\t\tevent.initialTarget = initialTarget;\n\t\tevent.tapCount = 0;\n\t\treturn event;\n\t}\n\n\tprivate dispatchEvent(event: GestureEvent): void {\n\t\tif (event.type === EventType.Tap) {\n\t\t\tconst currentTime = (new Date()).getTime();\n\t\t\tlet setTapCount = 0;\n\t\t\tif (currentTime - this._lastSetTapCountTime > Gesture.CLEAR_TAP_COUNT_TIME) {\n\t\t\t\tsetTapCount = 1;\n\t\t\t} else {\n\t\t\t\tsetTapCount = 2;\n\t\t\t}\n\n\t\t\tthis._lastSetTapCountTime = currentTime;\n\t\t\tevent.tapCount = setTapCount;\n\t\t} else if (event.type === EventType.Change || event.type === EventType.Contextmenu) {\n\t\t\t// tap is canceled by scrolling or context menu\n\t\t\tthis._lastSetTapCountTime = 0;\n\t\t}\n\n\t\tfor (let i = 0; i < this.ignoreTargets.length; i++) {\n\t\t\tif (event.initialTarget instanceof Node && this.ignoreTargets[i].contains(event.initialTarget)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tthis.targets.forEach(target => {\n\t\t\tif (event.initialTarget instanceof Node && target.contains(event.initialTarget)) {\n\t\t\t\ttarget.dispatchEvent(event);\n\t\t\t\tthis.dispatched = true;\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate inertia(dispatchTo: EventTarget[], t1: number, vX: number, dirX: number, x: number, vY: number, dirY: number, y: number): void {\n\t\tthis.handle = DomUtils.scheduleAtNextAnimationFrame(() => {\n\t\t\tlet now = Date.now();\n\n\t\t\t// velocity: old speed + accel_over_time\n\t\t\tlet deltaT = now - t1,\n\t\t\t\tdelta_pos_x = 0, delta_pos_y = 0,\n\t\t\t\tstopped = true;\n\n\t\t\tvX += Gesture.SCROLL_FRICTION * deltaT;\n\t\t\tvY += Gesture.SCROLL_FRICTION * deltaT;\n\n\t\t\tif (vX > 0) {\n\t\t\t\tstopped = false;\n\t\t\t\tdelta_pos_x = dirX * vX * deltaT;\n\t\t\t}\n\n\t\t\tif (vY > 0) {\n\t\t\t\tstopped = false;\n\t\t\t\tdelta_pos_y = dirY * vY * deltaT;\n\t\t\t}\n\n\t\t\t// dispatch translation event\n\t\t\tlet evt = this.newGestureEvent(EventType.Change);\n\t\t\tevt.translationX = delta_pos_x;\n\t\t\tevt.translationY = delta_pos_y;\n\t\t\tdispatchTo.forEach(d => d.dispatchEvent(evt));\n\n\t\t\tif (!stopped) {\n\t\t\t\tthis.inertia(dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate onTouchMove(e: TouchEvent): void {\n\t\tlet timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n\n\t\tfor (let i = 0, len = e.changedTouches.length; i < len; i++) {\n\n\t\t\tlet touch = e.changedTouches.item(i);\n\n\t\t\tif (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n\t\t\t\tconsole.warn('end of an UNKNOWN touch', touch);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tlet data = this.activeTouches[touch.identifier];\n\n\t\t\tlet evt = this.newGestureEvent(EventType.Change, data.initialTarget);\n\t\t\tevt.translationX = touch.pageX - arrays.tail(data.rollingPageX);\n\t\t\tevt.translationY = touch.pageY - arrays.tail(data.rollingPageY);\n\t\t\tevt.pageX = touch.pageX;\n\t\t\tevt.pageY = touch.pageY;\n\t\t\tthis.dispatchEvent(evt);\n\n\t\t\t// only keep a few data points, to average the final speed\n\t\t\tif (data.rollingPageX.length > 3) {\n\t\t\t\tdata.rollingPageX.shift();\n\t\t\t\tdata.rollingPageY.shift();\n\t\t\t\tdata.rollingTimestamps.shift();\n\t\t\t}\n\n\t\t\tdata.rollingPageX.push(touch.pageX);\n\t\t\tdata.rollingPageY.push(touch.pageY);\n\t\t\tdata.rollingTimestamps.push(timestamp);\n\t\t}\n\n\t\tif (this.dispatched) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.dispatched = false;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IListRenderer } from './list';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { $ } from 'vs/base/browser/dom';\n\nexport interface IRow {\n\tdomNode: HTMLElement;\n\ttemplateId: string;\n\ttemplateData: any;\n}\n\nfunction removeFromParent(element: HTMLElement): void {\n\ttry {\n\t\tif (element.parentElement) {\n\t\t\telement.parentElement.removeChild(element);\n\t\t}\n\t} catch (e) {\n\t\t// this will throw if this happens due to a blur event, nasty business\n\t}\n}\n\nexport class RowCache<T> implements IDisposable {\n\n\tprivate cache = new Map<string, IRow[]>();\n\n\tconstructor(private renderers: Map<string, IListRenderer<T, any>>) { }\n\n\t/**\n\t * Returns a row either by creating a new one or reusing\n\t * a previously released row which shares the same templateId.\n\t */\n\talloc(templateId: string): IRow {\n\t\tlet result = this.getTemplateCache(templateId).pop();\n\n\t\tif (!result) {\n\t\t\tconst domNode = $('.monaco-list-row');\n\t\t\tconst renderer = this.getRenderer(templateId);\n\t\t\tconst templateData = renderer.renderTemplate(domNode);\n\t\t\tresult = { domNode, templateId, templateData };\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Releases the row for eventual reuse.\n\t */\n\trelease(row: IRow): void {\n\t\tif (!row) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.releaseRow(row);\n\t}\n\n\tprivate releaseRow(row: IRow): void {\n\t\tconst { domNode, templateId } = row;\n\t\tif (domNode) {\n\t\t\tdomNode.classList.remove('scrolling');\n\t\t\tremoveFromParent(domNode);\n\t\t}\n\n\t\tconst cache = this.getTemplateCache(templateId);\n\t\tcache.push(row);\n\t}\n\n\tprivate getTemplateCache(templateId: string): IRow[] {\n\t\tlet result = this.cache.get(templateId);\n\n\t\tif (!result) {\n\t\t\tresult = [];\n\t\t\tthis.cache.set(templateId, result);\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tdispose(): void {\n\t\tthis.cache.forEach((cachedRows, templateId) => {\n\t\t\tfor (const cachedRow of cachedRows) {\n\t\t\t\tconst renderer = this.getRenderer(templateId);\n\t\t\t\trenderer.disposeTemplate(cachedRow.templateData);\n\t\t\t\tcachedRow.templateData = null;\n\t\t\t}\n\t\t});\n\n\t\tthis.cache.clear();\n\t}\n\n\tprivate getRenderer(templateId: string): IListRenderer<T, any> {\n\t\tconst renderer = this.renderers.get(templateId);\n\t\tif (!renderer) {\n\t\t\tthrow new Error(`No renderer found for ${templateId}`);\n\t\t}\n\t\treturn renderer;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { FastDomNode } from 'vs/base/browser/fastDomNode';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { ScrollbarVisibility } from 'vs/base/common/scrollable';\n\nexport class ScrollbarVisibilityController extends Disposable {\n\tprivate _visibility: ScrollbarVisibility;\n\tprivate _visibleClassName: string;\n\tprivate _invisibleClassName: string;\n\tprivate _domNode: FastDomNode<HTMLElement> | null;\n\tprivate _shouldBeVisible: boolean;\n\tprivate _isNeeded: boolean;\n\tprivate _isVisible: boolean;\n\tprivate _revealTimer: TimeoutTimer;\n\n\tconstructor(visibility: ScrollbarVisibility, visibleClassName: string, invisibleClassName: string) {\n\t\tsuper();\n\t\tthis._visibility = visibility;\n\t\tthis._visibleClassName = visibleClassName;\n\t\tthis._invisibleClassName = invisibleClassName;\n\t\tthis._domNode = null;\n\t\tthis._isVisible = false;\n\t\tthis._isNeeded = false;\n\t\tthis._shouldBeVisible = false;\n\t\tthis._revealTimer = this._register(new TimeoutTimer());\n\t}\n\n\t// ----------------- Hide / Reveal\n\n\tprivate applyVisibilitySetting(shouldBeVisible: boolean): boolean {\n\t\tif (this._visibility === ScrollbarVisibility.Hidden) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._visibility === ScrollbarVisibility.Visible) {\n\t\t\treturn true;\n\t\t}\n\t\treturn shouldBeVisible;\n\t}\n\n\tpublic setShouldBeVisible(rawShouldBeVisible: boolean): void {\n\t\tconst shouldBeVisible = this.applyVisibilitySetting(rawShouldBeVisible);\n\n\t\tif (this._shouldBeVisible !== shouldBeVisible) {\n\t\t\tthis._shouldBeVisible = shouldBeVisible;\n\t\t\tthis.ensureVisibility();\n\t\t}\n\t}\n\n\tpublic setIsNeeded(isNeeded: boolean): void {\n\t\tif (this._isNeeded !== isNeeded) {\n\t\t\tthis._isNeeded = isNeeded;\n\t\t\tthis.ensureVisibility();\n\t\t}\n\t}\n\n\tpublic setDomNode(domNode: FastDomNode<HTMLElement>): void {\n\t\tthis._domNode = domNode;\n\t\tthis._domNode.setClassName(this._invisibleClassName);\n\n\t\t// Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n\t\tthis.setShouldBeVisible(false);\n\t}\n\n\tpublic ensureVisibility(): void {\n\n\t\tif (!this._isNeeded) {\n\t\t\t// Nothing to be rendered\n\t\t\tthis._hide(false);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this._shouldBeVisible) {\n\t\t\tthis._reveal();\n\t\t} else {\n\t\t\tthis._hide(true);\n\t\t}\n\t}\n\n\tprivate _reveal(): void {\n\t\tif (this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = true;\n\n\t\t// The CSS animation doesn't play otherwise\n\t\tthis._revealTimer.setIfNotSet(() => {\n\t\t\tif (this._domNode) {\n\t\t\t\tthis._domNode.setClassName(this._visibleClassName);\n\t\t\t}\n\t\t}, 0);\n\t}\n\n\tprivate _hide(withFadeAway: boolean): void {\n\t\tthis._revealTimer.cancel();\n\t\tif (!this._isVisible) {\n\t\t\treturn;\n\t\t}\n\t\tthis._isVisible = false;\n\t\tif (this._domNode) {\n\t\t\tthis._domNode.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { IKeyboardEvent, StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { IMouseEvent, StandardMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { Gesture } from 'vs/base/browser/touch';\n\nexport abstract class Widget extends Disposable {\n\n\tprotected onclick(domNode: HTMLElement, listener: (e: IMouseEvent) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.CLICK, (e: MouseEvent) => listener(new StandardMouseEvent(e))));\n\t}\n\n\tprotected onmousedown(domNode: HTMLElement, listener: (e: IMouseEvent) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_DOWN, (e: MouseEvent) => listener(new StandardMouseEvent(e))));\n\t}\n\n\tprotected onmouseover(domNode: HTMLElement, listener: (e: IMouseEvent) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_OVER, (e: MouseEvent) => listener(new StandardMouseEvent(e))));\n\t}\n\n\tprotected onnonbubblingmouseout(domNode: HTMLElement, listener: (e: IMouseEvent) => void): void {\n\t\tthis._register(dom.addDisposableNonBubblingMouseOutListener(domNode, (e: MouseEvent) => listener(new StandardMouseEvent(e))));\n\t}\n\n\tprotected onkeydown(domNode: HTMLElement, listener: (e: IKeyboardEvent) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e: KeyboardEvent) => listener(new StandardKeyboardEvent(e))));\n\t}\n\n\tprotected onkeyup(domNode: HTMLElement, listener: (e: IKeyboardEvent) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e: KeyboardEvent) => listener(new StandardKeyboardEvent(e))));\n\t}\n\n\tprotected oninput(domNode: HTMLElement, listener: (e: Event) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.INPUT, listener));\n\t}\n\n\tprotected onblur(domNode: HTMLElement, listener: (e: Event) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.BLUR, listener));\n\t}\n\n\tprotected onfocus(domNode: HTMLElement, listener: (e: Event) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.FOCUS, listener));\n\t}\n\n\tprotected onchange(domNode: HTMLElement, listener: (e: Event) => void): void {\n\t\tthis._register(dom.addDisposableListener(domNode, dom.EventType.CHANGE, listener));\n\t}\n\n\tprotected ignoreGesture(domNode: HTMLElement): void {\n\t\tGesture.ignoreTarget(domNode);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { GlobalMouseMoveMonitor, IStandardMouseMoveEventData, standardMouseMoveMerger } from 'vs/base/browser/globalMouseMoveMonitor';\nimport { IMouseEvent } from 'vs/base/browser/mouseEvent';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { IntervalTimer, TimeoutTimer } from 'vs/base/common/async';\nimport { Codicon } from 'vs/base/common/codicons';\n\n/**\n * The arrow image size.\n */\nexport const ARROW_IMG_SIZE = 11;\n\nexport interface ScrollbarArrowOptions {\n\tonActivate: () => void;\n\tclassName: string;\n\ticon: Codicon;\n\n\tbgWidth: number;\n\tbgHeight: number;\n\n\ttop?: number;\n\tleft?: number;\n\tbottom?: number;\n\tright?: number;\n}\n\nexport class ScrollbarArrow extends Widget {\n\n\tprivate _onActivate: () => void;\n\tpublic bgDomNode: HTMLElement;\n\tpublic domNode: HTMLElement;\n\tprivate _mousedownRepeatTimer: IntervalTimer;\n\tprivate _mousedownScheduleRepeatTimer: TimeoutTimer;\n\tprivate _mouseMoveMonitor: GlobalMouseMoveMonitor<IStandardMouseMoveEventData>;\n\n\tconstructor(opts: ScrollbarArrowOptions) {\n\t\tsuper();\n\t\tthis._onActivate = opts.onActivate;\n\n\t\tthis.bgDomNode = document.createElement('div');\n\t\tthis.bgDomNode.className = 'arrow-background';\n\t\tthis.bgDomNode.style.position = 'absolute';\n\t\tthis.bgDomNode.style.width = opts.bgWidth + 'px';\n\t\tthis.bgDomNode.style.height = opts.bgHeight + 'px';\n\t\tif (typeof opts.top !== 'undefined') {\n\t\t\tthis.bgDomNode.style.top = '0px';\n\t\t}\n\t\tif (typeof opts.left !== 'undefined') {\n\t\t\tthis.bgDomNode.style.left = '0px';\n\t\t}\n\t\tif (typeof opts.bottom !== 'undefined') {\n\t\t\tthis.bgDomNode.style.bottom = '0px';\n\t\t}\n\t\tif (typeof opts.right !== 'undefined') {\n\t\t\tthis.bgDomNode.style.right = '0px';\n\t\t}\n\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.className = opts.className;\n\t\tthis.domNode.classList.add(...opts.icon.classNamesArray);\n\n\t\tthis.domNode.style.position = 'absolute';\n\t\tthis.domNode.style.width = ARROW_IMG_SIZE + 'px';\n\t\tthis.domNode.style.height = ARROW_IMG_SIZE + 'px';\n\t\tif (typeof opts.top !== 'undefined') {\n\t\t\tthis.domNode.style.top = opts.top + 'px';\n\t\t}\n\t\tif (typeof opts.left !== 'undefined') {\n\t\t\tthis.domNode.style.left = opts.left + 'px';\n\t\t}\n\t\tif (typeof opts.bottom !== 'undefined') {\n\t\t\tthis.domNode.style.bottom = opts.bottom + 'px';\n\t\t}\n\t\tif (typeof opts.right !== 'undefined') {\n\t\t\tthis.domNode.style.right = opts.right + 'px';\n\t\t}\n\n\t\tthis._mouseMoveMonitor = this._register(new GlobalMouseMoveMonitor<IStandardMouseMoveEventData>());\n\t\tthis.onmousedown(this.bgDomNode, (e) => this._arrowMouseDown(e));\n\t\tthis.onmousedown(this.domNode, (e) => this._arrowMouseDown(e));\n\n\t\tthis._mousedownRepeatTimer = this._register(new IntervalTimer());\n\t\tthis._mousedownScheduleRepeatTimer = this._register(new TimeoutTimer());\n\t}\n\n\tprivate _arrowMouseDown(e: IMouseEvent): void {\n\t\tconst scheduleRepeater = () => {\n\t\t\tthis._mousedownRepeatTimer.cancelAndSet(() => this._onActivate(), 1000 / 24);\n\t\t};\n\n\t\tthis._onActivate();\n\t\tthis._mousedownRepeatTimer.cancel();\n\t\tthis._mousedownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\n\n\t\tthis._mouseMoveMonitor.startMonitoring(\n\t\t\te.target,\n\t\t\te.buttons,\n\t\t\tstandardMouseMoveMerger,\n\t\t\t(mouseMoveData: IStandardMouseMoveEventData) => {\n\t\t\t\t/* Intentional empty */\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis._mousedownRepeatTimer.cancel();\n\t\t\t\tthis._mousedownScheduleRepeatTimer.cancel();\n\t\t\t}\n\t\t);\n\n\t\te.preventDefault();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as dom from 'vs/base/browser/dom';\nimport { FastDomNode, createFastDomNode } from 'vs/base/browser/fastDomNode';\nimport { GlobalMouseMoveMonitor, IStandardMouseMoveEventData, standardMouseMoveMerger } from 'vs/base/browser/globalMouseMoveMonitor';\nimport { IMouseEvent, StandardWheelEvent } from 'vs/base/browser/mouseEvent';\nimport { ScrollbarArrow, ScrollbarArrowOptions } from 'vs/base/browser/ui/scrollbar/scrollbarArrow';\nimport { ScrollbarState } from 'vs/base/browser/ui/scrollbar/scrollbarState';\nimport { ScrollbarVisibilityController } from 'vs/base/browser/ui/scrollbar/scrollbarVisibilityController';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport * as platform from 'vs/base/common/platform';\nimport { INewScrollPosition, Scrollable, ScrollbarVisibility } from 'vs/base/common/scrollable';\n\n/**\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\n */\nconst MOUSE_DRAG_RESET_DISTANCE = 140;\n\nexport interface ISimplifiedMouseEvent {\n\tbuttons: number;\n\tposx: number;\n\tposy: number;\n}\n\nexport interface ScrollbarHost {\n\tonMouseWheel(mouseWheelEvent: StandardWheelEvent): void;\n\tonDragStart(): void;\n\tonDragEnd(): void;\n}\n\nexport interface AbstractScrollbarOptions {\n\tlazyRender: boolean;\n\thost: ScrollbarHost;\n\tscrollbarState: ScrollbarState;\n\tvisibility: ScrollbarVisibility;\n\textraScrollbarClassName: string;\n\tscrollable: Scrollable;\n\tscrollByPage: boolean;\n}\n\nexport abstract class AbstractScrollbar extends Widget {\n\n\tprotected _host: ScrollbarHost;\n\tprotected _scrollable: Scrollable;\n\tprotected _scrollByPage: boolean;\n\tprivate _lazyRender: boolean;\n\tprotected _scrollbarState: ScrollbarState;\n\tprivate _visibilityController: ScrollbarVisibilityController;\n\tprivate _mouseMoveMonitor: GlobalMouseMoveMonitor<IStandardMouseMoveEventData>;\n\n\tpublic domNode: FastDomNode<HTMLElement>;\n\tpublic slider!: FastDomNode<HTMLElement>;\n\n\tprotected _shouldRender: boolean;\n\n\tconstructor(opts: AbstractScrollbarOptions) {\n\t\tsuper();\n\t\tthis._lazyRender = opts.lazyRender;\n\t\tthis._host = opts.host;\n\t\tthis._scrollable = opts.scrollable;\n\t\tthis._scrollByPage = opts.scrollByPage;\n\t\tthis._scrollbarState = opts.scrollbarState;\n\t\tthis._visibilityController = this._register(new ScrollbarVisibilityController(opts.visibility, 'visible scrollbar ' + opts.extraScrollbarClassName, 'invisible scrollbar ' + opts.extraScrollbarClassName));\n\t\tthis._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n\t\tthis._mouseMoveMonitor = this._register(new GlobalMouseMoveMonitor<IStandardMouseMoveEventData>());\n\t\tthis._shouldRender = true;\n\t\tthis.domNode = createFastDomNode(document.createElement('div'));\n\t\tthis.domNode.setAttribute('role', 'presentation');\n\t\tthis.domNode.setAttribute('aria-hidden', 'true');\n\n\t\tthis._visibilityController.setDomNode(this.domNode);\n\t\tthis.domNode.setPosition('absolute');\n\n\t\tthis.onmousedown(this.domNode.domNode, (e) => this._domNodeMouseDown(e));\n\t}\n\n\t// ----------------- creation\n\n\t/**\n\t * Creates the dom node for an arrow & adds it to the container\n\t */\n\tprotected _createArrow(opts: ScrollbarArrowOptions): void {\n\t\tconst arrow = this._register(new ScrollbarArrow(opts));\n\t\tthis.domNode.domNode.appendChild(arrow.bgDomNode);\n\t\tthis.domNode.domNode.appendChild(arrow.domNode);\n\t}\n\n\t/**\n\t * Creates the slider dom node, adds it to the container & hooks up the events\n\t */\n\tprotected _createSlider(top: number, left: number, width: number | undefined, height: number | undefined): void {\n\t\tthis.slider = createFastDomNode(document.createElement('div'));\n\t\tthis.slider.setClassName('slider');\n\t\tthis.slider.setPosition('absolute');\n\t\tthis.slider.setTop(top);\n\t\tthis.slider.setLeft(left);\n\t\tif (typeof width === 'number') {\n\t\t\tthis.slider.setWidth(width);\n\t\t}\n\t\tif (typeof height === 'number') {\n\t\t\tthis.slider.setHeight(height);\n\t\t}\n\t\tthis.slider.setLayerHinting(true);\n\t\tthis.slider.setContain('strict');\n\n\t\tthis.domNode.domNode.appendChild(this.slider.domNode);\n\n\t\tthis.onmousedown(this.slider.domNode, (e) => {\n\t\t\tif (e.leftButton) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._sliderMouseDown(e, () => { /*nothing to do*/ });\n\t\t\t}\n\t\t});\n\n\t\tthis.onclick(this.slider.domNode, e => {\n\t\t\tif (e.leftButton) {\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t});\n\t}\n\n\t// ----------------- Update state\n\n\tprotected _onElementSize(visibleSize: number): boolean {\n\t\tif (this._scrollbarState.setVisibleSize(visibleSize)) {\n\t\t\tthis._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n\t\t\tthis._shouldRender = true;\n\t\t\tif (!this._lazyRender) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t\treturn this._shouldRender;\n\t}\n\n\tprotected _onElementScrollSize(elementScrollSize: number): boolean {\n\t\tif (this._scrollbarState.setScrollSize(elementScrollSize)) {\n\t\t\tthis._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n\t\t\tthis._shouldRender = true;\n\t\t\tif (!this._lazyRender) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t\treturn this._shouldRender;\n\t}\n\n\tprotected _onElementScrollPosition(elementScrollPosition: number): boolean {\n\t\tif (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\n\t\t\tthis._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n\t\t\tthis._shouldRender = true;\n\t\t\tif (!this._lazyRender) {\n\t\t\t\tthis.render();\n\t\t\t}\n\t\t}\n\t\treturn this._shouldRender;\n\t}\n\n\t// ----------------- rendering\n\n\tpublic beginReveal(): void {\n\t\tthis._visibilityController.setShouldBeVisible(true);\n\t}\n\n\tpublic beginHide(): void {\n\t\tthis._visibilityController.setShouldBeVisible(false);\n\t}\n\n\tpublic render(): void {\n\t\tif (!this._shouldRender) {\n\t\t\treturn;\n\t\t}\n\t\tthis._shouldRender = false;\n\n\t\tthis._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\n\t\tthis._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\n\t}\n\t// ----------------- DOM events\n\n\tprivate _domNodeMouseDown(e: IMouseEvent): void {\n\t\tif (e.target !== this.domNode.domNode) {\n\t\t\treturn;\n\t\t}\n\t\tthis._onMouseDown(e);\n\t}\n\n\tpublic delegateMouseDown(e: IMouseEvent): void {\n\t\tconst domTop = this.domNode.domNode.getClientRects()[0].top;\n\t\tconst sliderStart = domTop + this._scrollbarState.getSliderPosition();\n\t\tconst sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\n\t\tconst mousePos = this._sliderMousePosition(e);\n\t\tif (sliderStart <= mousePos && mousePos <= sliderStop) {\n\t\t\t// Act as if it was a mouse down on the slider\n\t\t\tif (e.leftButton) {\n\t\t\t\te.preventDefault();\n\t\t\t\tthis._sliderMouseDown(e, () => { /*nothing to do*/ });\n\t\t\t}\n\t\t} else {\n\t\t\t// Act as if it was a mouse down on the scrollbar\n\t\t\tthis._onMouseDown(e);\n\t\t}\n\t}\n\n\tprivate _onMouseDown(e: IMouseEvent): void {\n\t\tlet offsetX: number;\n\t\tlet offsetY: number;\n\t\tif (e.target === this.domNode.domNode && typeof e.browserEvent.offsetX === 'number' && typeof e.browserEvent.offsetY === 'number') {\n\t\t\toffsetX = e.browserEvent.offsetX;\n\t\t\toffsetY = e.browserEvent.offsetY;\n\t\t} else {\n\t\t\tconst domNodePosition = dom.getDomNodePagePosition(this.domNode.domNode);\n\t\t\toffsetX = e.posx - domNodePosition.left;\n\t\t\toffsetY = e.posy - domNodePosition.top;\n\t\t}\n\n\t\tconst offset = this._mouseDownRelativePosition(offsetX, offsetY);\n\t\tthis._setDesiredScrollPositionNow(\n\t\t\tthis._scrollByPage\n\t\t\t\t? this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(offset)\n\t\t\t\t: this._scrollbarState.getDesiredScrollPositionFromOffset(offset)\n\t\t);\n\n\t\tif (e.leftButton) {\n\t\t\te.preventDefault();\n\t\t\tthis._sliderMouseDown(e, () => { /*nothing to do*/ });\n\t\t}\n\t}\n\n\tprivate _sliderMouseDown(e: IMouseEvent, onDragFinished: () => void): void {\n\t\tconst initialMousePosition = this._sliderMousePosition(e);\n\t\tconst initialMouseOrthogonalPosition = this._sliderOrthogonalMousePosition(e);\n\t\tconst initialScrollbarState = this._scrollbarState.clone();\n\t\tthis.slider.toggleClassName('active', true);\n\n\t\tthis._mouseMoveMonitor.startMonitoring(\n\t\t\te.target,\n\t\t\te.buttons,\n\t\t\tstandardMouseMoveMerger,\n\t\t\t(mouseMoveData: IStandardMouseMoveEventData) => {\n\t\t\t\tconst mouseOrthogonalPosition = this._sliderOrthogonalMousePosition(mouseMoveData);\n\t\t\t\tconst mouseOrthogonalDelta = Math.abs(mouseOrthogonalPosition - initialMouseOrthogonalPosition);\n\n\t\t\t\tif (platform.isWindows && mouseOrthogonalDelta > MOUSE_DRAG_RESET_DISTANCE) {\n\t\t\t\t\t// The mouse has wondered away from the scrollbar => reset dragging\n\t\t\t\t\tthis._setDesiredScrollPositionNow(initialScrollbarState.getScrollPosition());\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst mousePosition = this._sliderMousePosition(mouseMoveData);\n\t\t\t\tconst mouseDelta = mousePosition - initialMousePosition;\n\t\t\t\tthis._setDesiredScrollPositionNow(initialScrollbarState.getDesiredScrollPositionFromDelta(mouseDelta));\n\t\t\t},\n\t\t\t() => {\n\t\t\t\tthis.slider.toggleClassName('active', false);\n\t\t\t\tthis._host.onDragEnd();\n\t\t\t\tonDragFinished();\n\t\t\t}\n\t\t);\n\n\t\tthis._host.onDragStart();\n\t}\n\n\tprivate _setDesiredScrollPositionNow(_desiredScrollPosition: number): void {\n\n\t\tconst desiredScrollPosition: INewScrollPosition = {};\n\t\tthis.writeScrollPosition(desiredScrollPosition, _desiredScrollPosition);\n\n\t\tthis._scrollable.setScrollPositionNow(desiredScrollPosition);\n\t}\n\n\tpublic updateScrollbarSize(scrollbarSize: number): void {\n\t\tthis._updateScrollbarSize(scrollbarSize);\n\t\tthis._scrollbarState.setScrollbarSize(scrollbarSize);\n\t\tthis._shouldRender = true;\n\t\tif (!this._lazyRender) {\n\t\t\tthis.render();\n\t\t}\n\t}\n\n\tpublic isNeeded(): boolean {\n\t\treturn this._scrollbarState.isNeeded();\n\t}\n\n\t// ----------------- Overwrite these\n\n\tprotected abstract _renderDomNode(largeSize: number, smallSize: number): void;\n\tprotected abstract _updateSlider(sliderSize: number, sliderPosition: number): void;\n\n\tprotected abstract _mouseDownRelativePosition(offsetX: number, offsetY: number): number;\n\tprotected abstract _sliderMousePosition(e: ISimplifiedMouseEvent): number;\n\tprotected abstract _sliderOrthogonalMousePosition(e: ISimplifiedMouseEvent): number;\n\tprotected abstract _updateScrollbarSize(size: number): void;\n\n\tpublic abstract writeScrollPosition(target: INewScrollPosition, scrollPosition: number): void;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { StandardWheelEvent } from 'vs/base/browser/mouseEvent';\nimport { AbstractScrollbar, ISimplifiedMouseEvent, ScrollbarHost } from 'vs/base/browser/ui/scrollbar/abstractScrollbar';\nimport { ScrollableElementResolvedOptions } from 'vs/base/browser/ui/scrollbar/scrollableElementOptions';\nimport { ARROW_IMG_SIZE } from 'vs/base/browser/ui/scrollbar/scrollbarArrow';\nimport { ScrollbarState } from 'vs/base/browser/ui/scrollbar/scrollbarState';\nimport { INewScrollPosition, ScrollEvent, Scrollable, ScrollbarVisibility } from 'vs/base/common/scrollable';\nimport { Codicon, registerCodicon } from 'vs/base/common/codicons';\n\n\nconst scrollbarButtonLeftIcon = registerCodicon('scrollbar-button-left', Codicon.triangleLeft);\nconst scrollbarButtonRightIcon = registerCodicon('scrollbar-button-right', Codicon.triangleRight);\n\nexport class HorizontalScrollbar extends AbstractScrollbar {\n\n\tconstructor(scrollable: Scrollable, options: ScrollableElementResolvedOptions, host: ScrollbarHost) {\n\t\tconst scrollDimensions = scrollable.getScrollDimensions();\n\t\tconst scrollPosition = scrollable.getCurrentScrollPosition();\n\t\tsuper({\n\t\t\tlazyRender: options.lazyRender,\n\t\t\thost: host,\n\t\t\tscrollbarState: new ScrollbarState(\n\t\t\t\t(options.horizontalHasArrows ? options.arrowSize : 0),\n\t\t\t\t(options.horizontal === ScrollbarVisibility.Hidden ? 0 : options.horizontalScrollbarSize),\n\t\t\t\t(options.vertical === ScrollbarVisibility.Hidden ? 0 : options.verticalScrollbarSize),\n\t\t\t\tscrollDimensions.width,\n\t\t\t\tscrollDimensions.scrollWidth,\n\t\t\t\tscrollPosition.scrollLeft\n\t\t\t),\n\t\t\tvisibility: options.horizontal,\n\t\t\textraScrollbarClassName: 'horizontal',\n\t\t\tscrollable: scrollable,\n\t\t\tscrollByPage: options.scrollByPage\n\t\t});\n\n\t\tif (options.horizontalHasArrows) {\n\t\t\tconst arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n\t\t\tconst scrollbarDelta = (options.horizontalScrollbarSize - ARROW_IMG_SIZE) / 2;\n\n\t\t\tthis._createArrow({\n\t\t\t\tclassName: 'scra',\n\t\t\t\ticon: scrollbarButtonLeftIcon,\n\t\t\t\ttop: scrollbarDelta,\n\t\t\t\tleft: arrowDelta,\n\t\t\t\tbottom: undefined,\n\t\t\t\tright: undefined,\n\t\t\t\tbgWidth: options.arrowSize,\n\t\t\t\tbgHeight: options.horizontalScrollbarSize,\n\t\t\t\tonActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 1, 0)),\n\t\t\t});\n\n\t\t\tthis._createArrow({\n\t\t\t\tclassName: 'scra',\n\t\t\t\ticon: scrollbarButtonRightIcon,\n\t\t\t\ttop: scrollbarDelta,\n\t\t\t\tleft: undefined,\n\t\t\t\tbottom: undefined,\n\t\t\t\tright: arrowDelta,\n\t\t\t\tbgWidth: options.arrowSize,\n\t\t\t\tbgHeight: options.horizontalScrollbarSize,\n\t\t\t\tonActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, -1, 0)),\n\t\t\t});\n\t\t}\n\n\t\tthis._createSlider(Math.floor((options.horizontalScrollbarSize - options.horizontalSliderSize) / 2), 0, undefined, options.horizontalSliderSize);\n\t}\n\n\tprotected _updateSlider(sliderSize: number, sliderPosition: number): void {\n\t\tthis.slider.setWidth(sliderSize);\n\t\tthis.slider.setLeft(sliderPosition);\n\t}\n\n\tprotected _renderDomNode(largeSize: number, smallSize: number): void {\n\t\tthis.domNode.setWidth(largeSize);\n\t\tthis.domNode.setHeight(smallSize);\n\t\tthis.domNode.setLeft(0);\n\t\tthis.domNode.setBottom(0);\n\t}\n\n\tpublic onDidScroll(e: ScrollEvent): boolean {\n\t\tthis._shouldRender = this._onElementScrollSize(e.scrollWidth) || this._shouldRender;\n\t\tthis._shouldRender = this._onElementScrollPosition(e.scrollLeft) || this._shouldRender;\n\t\tthis._shouldRender = this._onElementSize(e.width) || this._shouldRender;\n\t\treturn this._shouldRender;\n\t}\n\n\tprotected _mouseDownRelativePosition(offsetX: number, offsetY: number): number {\n\t\treturn offsetX;\n\t}\n\n\tprotected _sliderMousePosition(e: ISimplifiedMouseEvent): number {\n\t\treturn e.posx;\n\t}\n\n\tprotected _sliderOrthogonalMousePosition(e: ISimplifiedMouseEvent): number {\n\t\treturn e.posy;\n\t}\n\n\tprotected _updateScrollbarSize(size: number): void {\n\t\tthis.slider.setHeight(size);\n\t}\n\n\tpublic writeScrollPosition(target: INewScrollPosition, scrollPosition: number): void {\n\t\ttarget.scrollLeft = scrollPosition;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { StandardWheelEvent } from 'vs/base/browser/mouseEvent';\nimport { AbstractScrollbar, ISimplifiedMouseEvent, ScrollbarHost } from 'vs/base/browser/ui/scrollbar/abstractScrollbar';\nimport { ScrollableElementResolvedOptions } from 'vs/base/browser/ui/scrollbar/scrollableElementOptions';\nimport { ARROW_IMG_SIZE } from 'vs/base/browser/ui/scrollbar/scrollbarArrow';\nimport { ScrollbarState } from 'vs/base/browser/ui/scrollbar/scrollbarState';\nimport { INewScrollPosition, ScrollEvent, Scrollable, ScrollbarVisibility } from 'vs/base/common/scrollable';\nimport { Codicon, registerCodicon } from 'vs/base/common/codicons';\n\nconst scrollbarButtonUpIcon = registerCodicon('scrollbar-button-up', Codicon.triangleUp);\nconst scrollbarButtonDownIcon = registerCodicon('scrollbar-button-down', Codicon.triangleDown);\n\nexport class VerticalScrollbar extends AbstractScrollbar {\n\n\tconstructor(scrollable: Scrollable, options: ScrollableElementResolvedOptions, host: ScrollbarHost) {\n\t\tconst scrollDimensions = scrollable.getScrollDimensions();\n\t\tconst scrollPosition = scrollable.getCurrentScrollPosition();\n\t\tsuper({\n\t\t\tlazyRender: options.lazyRender,\n\t\t\thost: host,\n\t\t\tscrollbarState: new ScrollbarState(\n\t\t\t\t(options.verticalHasArrows ? options.arrowSize : 0),\n\t\t\t\t(options.vertical === ScrollbarVisibility.Hidden ? 0 : options.verticalScrollbarSize),\n\t\t\t\t// give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n\t\t\t\t0,\n\t\t\t\tscrollDimensions.height,\n\t\t\t\tscrollDimensions.scrollHeight,\n\t\t\t\tscrollPosition.scrollTop\n\t\t\t),\n\t\t\tvisibility: options.vertical,\n\t\t\textraScrollbarClassName: 'vertical',\n\t\t\tscrollable: scrollable,\n\t\t\tscrollByPage: options.scrollByPage\n\t\t});\n\n\t\tif (options.verticalHasArrows) {\n\t\t\tconst arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n\t\t\tconst scrollbarDelta = (options.verticalScrollbarSize - ARROW_IMG_SIZE) / 2;\n\n\t\t\tthis._createArrow({\n\t\t\t\tclassName: 'scra',\n\t\t\t\ticon: scrollbarButtonUpIcon,\n\t\t\t\ttop: arrowDelta,\n\t\t\t\tleft: scrollbarDelta,\n\t\t\t\tbottom: undefined,\n\t\t\t\tright: undefined,\n\t\t\t\tbgWidth: options.verticalScrollbarSize,\n\t\t\t\tbgHeight: options.arrowSize,\n\t\t\t\tonActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, 1)),\n\t\t\t});\n\n\t\t\tthis._createArrow({\n\t\t\t\tclassName: 'scra',\n\t\t\t\ticon: scrollbarButtonDownIcon,\n\t\t\t\ttop: undefined,\n\t\t\t\tleft: scrollbarDelta,\n\t\t\t\tbottom: arrowDelta,\n\t\t\t\tright: undefined,\n\t\t\t\tbgWidth: options.verticalScrollbarSize,\n\t\t\t\tbgHeight: options.arrowSize,\n\t\t\t\tonActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, -1)),\n\t\t\t});\n\t\t}\n\n\t\tthis._createSlider(0, Math.floor((options.verticalScrollbarSize - options.verticalSliderSize) / 2), options.verticalSliderSize, undefined);\n\t}\n\n\tprotected _updateSlider(sliderSize: number, sliderPosition: number): void {\n\t\tthis.slider.setHeight(sliderSize);\n\t\tthis.slider.setTop(sliderPosition);\n\t}\n\n\tprotected _renderDomNode(largeSize: number, smallSize: number): void {\n\t\tthis.domNode.setWidth(smallSize);\n\t\tthis.domNode.setHeight(largeSize);\n\t\tthis.domNode.setRight(0);\n\t\tthis.domNode.setTop(0);\n\t}\n\n\tpublic onDidScroll(e: ScrollEvent): boolean {\n\t\tthis._shouldRender = this._onElementScrollSize(e.scrollHeight) || this._shouldRender;\n\t\tthis._shouldRender = this._onElementScrollPosition(e.scrollTop) || this._shouldRender;\n\t\tthis._shouldRender = this._onElementSize(e.height) || this._shouldRender;\n\t\treturn this._shouldRender;\n\t}\n\n\tprotected _mouseDownRelativePosition(offsetX: number, offsetY: number): number {\n\t\treturn offsetY;\n\t}\n\n\tprotected _sliderMousePosition(e: ISimplifiedMouseEvent): number {\n\t\treturn e.posy;\n\t}\n\n\tprotected _sliderOrthogonalMousePosition(e: ISimplifiedMouseEvent): number {\n\t\treturn e.posx;\n\t}\n\n\tprotected _updateScrollbarSize(size: number): void {\n\t\tthis.slider.setWidth(size);\n\t}\n\n\tpublic writeScrollPosition(target: INewScrollPosition, scrollPosition: number): void {\n\t\ttarget.scrollTop = scrollPosition;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface ICommonContextMenuItem {\n\tlabel?: string;\n\n\ttype?: 'normal' | 'separator' | 'submenu' | 'checkbox' | 'radio';\n\n\taccelerator?: string;\n\n\tenabled?: boolean;\n\tvisible?: boolean;\n\tchecked?: boolean;\n}\n\nexport interface ISerializableContextMenuItem extends ICommonContextMenuItem {\n\tid: number;\n\tsubmenu?: ISerializableContextMenuItem[];\n}\n\nexport interface IContextMenuItem extends ICommonContextMenuItem {\n\tclick?: (event: IContextMenuEvent) => void;\n\tsubmenu?: IContextMenuItem[];\n}\n\nexport interface IContextMenuEvent {\n\tshiftKey?: boolean;\n\tctrlKey?: boolean;\n\taltKey?: boolean;\n\tmetaKey?: boolean;\n}\n\nexport interface IPopupOptions {\n\tx?: number;\n\ty?: number;\n\tpositioningItem?: number;\n}\n\nexport const CONTEXT_MENU_CHANNEL = 'vscode:contextmenu';\nexport const CONTEXT_MENU_CLOSE_CHANNEL = 'vscode:onCloseContextMenu';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter, Relay, EventMultiplexer } from 'vs/base/common/event';\nimport { IDisposable, toDisposable, combinedDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { CancelablePromise, createCancelablePromise, timeout } from 'vs/base/common/async';\nimport { CancellationToken, CancellationTokenSource } from 'vs/base/common/cancellation';\nimport * as errors from 'vs/base/common/errors';\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { getRandomElement } from 'vs/base/common/arrays';\nimport { isFunction, isUndefinedOrNull } from 'vs/base/common/types';\nimport { revive } from 'vs/base/common/marshalling';\nimport * as strings from 'vs/base/common/strings';\n\n/**\n * An `IChannel` is an abstraction over a collection of commands.\n * You can `call` several commands on a channel, each taking at\n * most one single argument. A `call` always returns a promise\n * with at most one single return value.\n */\nexport interface IChannel {\n\tcall<T>(command: string, arg?: any, cancellationToken?: CancellationToken): Promise<T>;\n\tlisten<T>(event: string, arg?: any): Event<T>;\n}\n\n/**\n * An `IServerChannel` is the counter part to `IChannel`,\n * on the server-side. You should implement this interface\n * if you'd like to handle remote promises or events.\n */\nexport interface IServerChannel<TContext = string> {\n\tcall<T>(ctx: TContext, command: string, arg?: any, cancellationToken?: CancellationToken): Promise<T>;\n\tlisten<T>(ctx: TContext, event: string, arg?: any): Event<T>;\n}\n\nexport const enum RequestType {\n\tPromise = 100,\n\tPromiseCancel = 101,\n\tEventListen = 102,\n\tEventDispose = 103\n}\n\nfunction requestTypeToStr(type: RequestType): string {\n\tswitch (type) {\n\t\tcase RequestType.Promise:\n\t\t\treturn 'req';\n\t\tcase RequestType.PromiseCancel:\n\t\t\treturn 'cancel';\n\t\tcase RequestType.EventListen:\n\t\t\treturn 'subscribe';\n\t\tcase RequestType.EventDispose:\n\t\t\treturn 'unsubscribe';\n\t}\n}\n\ntype IRawPromiseRequest = { type: RequestType.Promise; id: number; channelName: string; name: string; arg: any; };\ntype IRawPromiseCancelRequest = { type: RequestType.PromiseCancel, id: number };\ntype IRawEventListenRequest = { type: RequestType.EventListen; id: number; channelName: string; name: string; arg: any; };\ntype IRawEventDisposeRequest = { type: RequestType.EventDispose, id: number };\ntype IRawRequest = IRawPromiseRequest | IRawPromiseCancelRequest | IRawEventListenRequest | IRawEventDisposeRequest;\n\nexport const enum ResponseType {\n\tInitialize = 200,\n\tPromiseSuccess = 201,\n\tPromiseError = 202,\n\tPromiseErrorObj = 203,\n\tEventFire = 204\n}\n\nfunction responseTypeToStr(type: ResponseType): string {\n\tswitch (type) {\n\t\tcase ResponseType.Initialize:\n\t\t\treturn `init`;\n\t\tcase ResponseType.PromiseSuccess:\n\t\t\treturn `reply:`;\n\t\tcase ResponseType.PromiseError:\n\t\tcase ResponseType.PromiseErrorObj:\n\t\t\treturn `replyErr:`;\n\t\tcase ResponseType.EventFire:\n\t\t\treturn `event:`;\n\t}\n}\n\ntype IRawInitializeResponse = { type: ResponseType.Initialize };\ntype IRawPromiseSuccessResponse = { type: ResponseType.PromiseSuccess; id: number; data: any };\ntype IRawPromiseErrorResponse = { type: ResponseType.PromiseError; id: number; data: { message: string, name: string, stack: string[] | undefined } };\ntype IRawPromiseErrorObjResponse = { type: ResponseType.PromiseErrorObj; id: number; data: any };\ntype IRawEventFireResponse = { type: ResponseType.EventFire; id: number; data: any };\ntype IRawResponse = IRawInitializeResponse | IRawPromiseSuccessResponse | IRawPromiseErrorResponse | IRawPromiseErrorObjResponse | IRawEventFireResponse;\n\ninterface IHandler {\n\t(response: IRawResponse): void;\n}\n\nexport interface IMessagePassingProtocol {\n\tsend(buffer: VSBuffer): void;\n\tonMessage: Event<VSBuffer>;\n\t/**\n\t * Wait for the write buffer (if applicable) to become empty.\n\t */\n\tdrain?(): Promise<void>;\n}\n\nenum State {\n\tUninitialized,\n\tIdle\n}\n\n/**\n * An `IChannelServer` hosts a collection of channels. You are\n * able to register channels onto it, provided a channel name.\n */\nexport interface IChannelServer<TContext = string> {\n\tregisterChannel(channelName: string, channel: IServerChannel<TContext>): void;\n}\n\n/**\n * An `IChannelClient` has access to a collection of channels. You\n * are able to get those channels, given their channel name.\n */\nexport interface IChannelClient {\n\tgetChannel<T extends IChannel>(channelName: string): T;\n}\n\nexport interface Client<TContext> {\n\treadonly ctx: TContext;\n}\n\nexport interface IConnectionHub<TContext> {\n\treadonly connections: Connection<TContext>[];\n\treadonly onDidAddConnection: Event<Connection<TContext>>;\n\treadonly onDidRemoveConnection: Event<Connection<TContext>>;\n}\n\n/**\n * An `IClientRouter` is responsible for routing calls to specific\n * channels, in scenarios in which there are multiple possible\n * channels (each from a separate client) to pick from.\n */\nexport interface IClientRouter<TContext = string> {\n\trouteCall(hub: IConnectionHub<TContext>, command: string, arg?: any, cancellationToken?: CancellationToken): Promise<Client<TContext>>;\n\trouteEvent(hub: IConnectionHub<TContext>, event: string, arg?: any): Promise<Client<TContext>>;\n}\n\n/**\n * Similar to the `IChannelClient`, you can get channels from this\n * collection of channels. The difference being that in the\n * `IRoutingChannelClient`, there are multiple clients providing\n * the same channel. You'll need to pass in an `IClientRouter` in\n * order to pick the right one.\n */\nexport interface IRoutingChannelClient<TContext = string> {\n\tgetChannel<T extends IChannel>(channelName: string, router?: IClientRouter<TContext>): T;\n}\n\ninterface IReader {\n\tread(bytes: number): VSBuffer;\n}\n\ninterface IWriter {\n\twrite(buffer: VSBuffer): void;\n}\n\nclass BufferReader implements IReader {\n\n\tprivate pos = 0;\n\n\tconstructor(private buffer: VSBuffer) { }\n\n\tread(bytes: number): VSBuffer {\n\t\tconst result = this.buffer.slice(this.pos, this.pos + bytes);\n\t\tthis.pos += result.byteLength;\n\t\treturn result;\n\t}\n}\n\nclass BufferWriter implements IWriter {\n\n\tprivate buffers: VSBuffer[] = [];\n\n\tget buffer(): VSBuffer {\n\t\treturn VSBuffer.concat(this.buffers);\n\t}\n\n\twrite(buffer: VSBuffer): void {\n\t\tthis.buffers.push(buffer);\n\t}\n}\n\nenum DataType {\n\tUndefined = 0,\n\tString = 1,\n\tBuffer = 2,\n\tVSBuffer = 3,\n\tArray = 4,\n\tObject = 5\n}\n\nfunction createSizeBuffer(size: number): VSBuffer {\n\tconst result = VSBuffer.alloc(4);\n\tresult.writeUInt32BE(size, 0);\n\treturn result;\n}\n\nfunction readSizeBuffer(reader: IReader): number {\n\treturn reader.read(4).readUInt32BE(0);\n}\n\nfunction createOneByteBuffer(value: number): VSBuffer {\n\tconst result = VSBuffer.alloc(1);\n\tresult.writeUInt8(value, 0);\n\treturn result;\n}\n\nconst BufferPresets = {\n\tUndefined: createOneByteBuffer(DataType.Undefined),\n\tString: createOneByteBuffer(DataType.String),\n\tBuffer: createOneByteBuffer(DataType.Buffer),\n\tVSBuffer: createOneByteBuffer(DataType.VSBuffer),\n\tArray: createOneByteBuffer(DataType.Array),\n\tObject: createOneByteBuffer(DataType.Object),\n};\n\ndeclare const Buffer: any;\nconst hasBuffer = (typeof Buffer !== 'undefined');\n\nfunction serialize(writer: IWriter, data: any): void {\n\tif (typeof data === 'undefined') {\n\t\twriter.write(BufferPresets.Undefined);\n\t} else if (typeof data === 'string') {\n\t\tconst buffer = VSBuffer.fromString(data);\n\t\twriter.write(BufferPresets.String);\n\t\twriter.write(createSizeBuffer(buffer.byteLength));\n\t\twriter.write(buffer);\n\t} else if (hasBuffer && Buffer.isBuffer(data)) {\n\t\tconst buffer = VSBuffer.wrap(data);\n\t\twriter.write(BufferPresets.Buffer);\n\t\twriter.write(createSizeBuffer(buffer.byteLength));\n\t\twriter.write(buffer);\n\t} else if (data instanceof VSBuffer) {\n\t\twriter.write(BufferPresets.VSBuffer);\n\t\twriter.write(createSizeBuffer(data.byteLength));\n\t\twriter.write(data);\n\t} else if (Array.isArray(data)) {\n\t\twriter.write(BufferPresets.Array);\n\t\twriter.write(createSizeBuffer(data.length));\n\n\t\tfor (const el of data) {\n\t\t\tserialize(writer, el);\n\t\t}\n\t} else {\n\t\tconst buffer = VSBuffer.fromString(JSON.stringify(data));\n\t\twriter.write(BufferPresets.Object);\n\t\twriter.write(createSizeBuffer(buffer.byteLength));\n\t\twriter.write(buffer);\n\t}\n}\n\nfunction deserialize(reader: IReader): any {\n\tconst type = reader.read(1).readUInt8(0);\n\n\tswitch (type) {\n\t\tcase DataType.Undefined: return undefined;\n\t\tcase DataType.String: return reader.read(readSizeBuffer(reader)).toString();\n\t\tcase DataType.Buffer: return reader.read(readSizeBuffer(reader)).buffer;\n\t\tcase DataType.VSBuffer: return reader.read(readSizeBuffer(reader));\n\t\tcase DataType.Array: {\n\t\t\tconst length = readSizeBuffer(reader);\n\t\t\tconst result: any[] = [];\n\n\t\t\tfor (let i = 0; i < length; i++) {\n\t\t\t\tresult.push(deserialize(reader));\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\t\tcase DataType.Object: return JSON.parse(reader.read(readSizeBuffer(reader)).toString());\n\t}\n}\n\ninterface PendingRequest {\n\trequest: IRawPromiseRequest | IRawEventListenRequest;\n\ttimeoutTimer: any;\n}\n\nexport class ChannelServer<TContext = string> implements IChannelServer<TContext>, IDisposable {\n\n\tprivate channels = new Map<string, IServerChannel<TContext>>();\n\tprivate activeRequests = new Map<number, IDisposable>();\n\tprivate protocolListener: IDisposable | null;\n\n\t// Requests might come in for channels which are not yet registered.\n\t// They will timeout after `timeoutDelay`.\n\tprivate pendingRequests = new Map<string, PendingRequest[]>();\n\n\tconstructor(private protocol: IMessagePassingProtocol, private ctx: TContext, private logger: IIPCLogger | null = null, private timeoutDelay: number = 1000) {\n\t\tthis.protocolListener = this.protocol.onMessage(msg => this.onRawMessage(msg));\n\t\tthis.sendResponse({ type: ResponseType.Initialize });\n\t}\n\n\tregisterChannel(channelName: string, channel: IServerChannel<TContext>): void {\n\t\tthis.channels.set(channelName, channel);\n\n\t\t// https://github.com/microsoft/vscode/issues/72531\n\t\tsetTimeout(() => this.flushPendingRequests(channelName), 0);\n\t}\n\n\tprivate sendResponse(response: IRawResponse): void {\n\t\tswitch (response.type) {\n\t\t\tcase ResponseType.Initialize: {\n\t\t\t\tconst msgLength = this.send([response.type]);\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logOutgoing(msgLength, 0, RequestInitiator.OtherSide, responseTypeToStr(response.type));\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcase ResponseType.PromiseSuccess:\n\t\t\tcase ResponseType.PromiseError:\n\t\t\tcase ResponseType.EventFire:\n\t\t\tcase ResponseType.PromiseErrorObj: {\n\t\t\t\tconst msgLength = this.send([response.type, response.id], response.data);\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logOutgoing(msgLength, response.id, RequestInitiator.OtherSide, responseTypeToStr(response.type), response.data);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate send(header: any, body: any = undefined): number {\n\t\tconst writer = new BufferWriter();\n\t\tserialize(writer, header);\n\t\tserialize(writer, body);\n\t\treturn this.sendBuffer(writer.buffer);\n\t}\n\n\tprivate sendBuffer(message: VSBuffer): number {\n\t\ttry {\n\t\t\tthis.protocol.send(message);\n\t\t\treturn message.byteLength;\n\t\t} catch (err) {\n\t\t\t// noop\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tprivate onRawMessage(message: VSBuffer): void {\n\t\tconst reader = new BufferReader(message);\n\t\tconst header = deserialize(reader);\n\t\tconst body = deserialize(reader);\n\t\tconst type = header[0] as RequestType;\n\n\t\tswitch (type) {\n\t\t\tcase RequestType.Promise:\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logIncoming(message.byteLength, header[1], RequestInitiator.OtherSide, `${requestTypeToStr(type)}: ${header[2]}.${header[3]}`, body);\n\t\t\t\t}\n\t\t\t\treturn this.onPromise({ type, id: header[1], channelName: header[2], name: header[3], arg: body });\n\t\t\tcase RequestType.EventListen:\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logIncoming(message.byteLength, header[1], RequestInitiator.OtherSide, `${requestTypeToStr(type)}: ${header[2]}.${header[3]}`, body);\n\t\t\t\t}\n\t\t\t\treturn this.onEventListen({ type, id: header[1], channelName: header[2], name: header[3], arg: body });\n\t\t\tcase RequestType.PromiseCancel:\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logIncoming(message.byteLength, header[1], RequestInitiator.OtherSide, `${requestTypeToStr(type)}`);\n\t\t\t\t}\n\t\t\t\treturn this.disposeActiveRequest({ type, id: header[1] });\n\t\t\tcase RequestType.EventDispose:\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logIncoming(message.byteLength, header[1], RequestInitiator.OtherSide, `${requestTypeToStr(type)}`);\n\t\t\t\t}\n\t\t\t\treturn this.disposeActiveRequest({ type, id: header[1] });\n\t\t}\n\t}\n\n\tprivate onPromise(request: IRawPromiseRequest): void {\n\t\tconst channel = this.channels.get(request.channelName);\n\n\t\tif (!channel) {\n\t\t\tthis.collectPendingRequest(request);\n\t\t\treturn;\n\t\t}\n\n\t\tconst cancellationTokenSource = new CancellationTokenSource();\n\t\tlet promise: Promise<any>;\n\n\t\ttry {\n\t\t\tpromise = channel.call(this.ctx, request.name, request.arg, cancellationTokenSource.token);\n\t\t} catch (err) {\n\t\t\tpromise = Promise.reject(err);\n\t\t}\n\n\t\tconst id = request.id;\n\n\t\tpromise.then(data => {\n\t\t\tthis.sendResponse(<IRawResponse>{ id, data, type: ResponseType.PromiseSuccess });\n\t\t\tthis.activeRequests.delete(request.id);\n\t\t}, err => {\n\t\t\tif (err instanceof Error) {\n\t\t\t\tthis.sendResponse(<IRawResponse>{\n\t\t\t\t\tid, data: {\n\t\t\t\t\t\tmessage: err.message,\n\t\t\t\t\t\tname: err.name,\n\t\t\t\t\t\tstack: err.stack ? (err.stack.split ? err.stack.split('\\n') : err.stack) : undefined\n\t\t\t\t\t}, type: ResponseType.PromiseError\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.sendResponse(<IRawResponse>{ id, data: err, type: ResponseType.PromiseErrorObj });\n\t\t\t}\n\n\t\t\tthis.activeRequests.delete(request.id);\n\t\t});\n\n\t\tconst disposable = toDisposable(() => cancellationTokenSource.cancel());\n\t\tthis.activeRequests.set(request.id, disposable);\n\t}\n\n\tprivate onEventListen(request: IRawEventListenRequest): void {\n\t\tconst channel = this.channels.get(request.channelName);\n\n\t\tif (!channel) {\n\t\t\tthis.collectPendingRequest(request);\n\t\t\treturn;\n\t\t}\n\n\t\tconst id = request.id;\n\t\tconst event = channel.listen(this.ctx, request.name, request.arg);\n\t\tconst disposable = event(data => this.sendResponse(<IRawResponse>{ id, data, type: ResponseType.EventFire }));\n\n\t\tthis.activeRequests.set(request.id, disposable);\n\t}\n\n\tprivate disposeActiveRequest(request: IRawRequest): void {\n\t\tconst disposable = this.activeRequests.get(request.id);\n\n\t\tif (disposable) {\n\t\t\tdisposable.dispose();\n\t\t\tthis.activeRequests.delete(request.id);\n\t\t}\n\t}\n\n\tprivate collectPendingRequest(request: IRawPromiseRequest | IRawEventListenRequest): void {\n\t\tlet pendingRequests = this.pendingRequests.get(request.channelName);\n\n\t\tif (!pendingRequests) {\n\t\t\tpendingRequests = [];\n\t\t\tthis.pendingRequests.set(request.channelName, pendingRequests);\n\t\t}\n\n\t\tconst timer = setTimeout(() => {\n\t\t\tconsole.error(`Unknown channel: ${request.channelName}`);\n\n\t\t\tif (request.type === RequestType.Promise) {\n\t\t\t\tthis.sendResponse(<IRawResponse>{\n\t\t\t\t\tid: request.id,\n\t\t\t\t\tdata: { name: 'Unknown channel', message: `Channel name '${request.channelName}' timed out after ${this.timeoutDelay}ms`, stack: undefined },\n\t\t\t\t\ttype: ResponseType.PromiseError\n\t\t\t\t});\n\t\t\t}\n\t\t}, this.timeoutDelay);\n\n\t\tpendingRequests.push({ request, timeoutTimer: timer });\n\t}\n\n\tprivate flushPendingRequests(channelName: string): void {\n\t\tconst requests = this.pendingRequests.get(channelName);\n\n\t\tif (requests) {\n\t\t\tfor (const request of requests) {\n\t\t\t\tclearTimeout(request.timeoutTimer);\n\n\t\t\t\tswitch (request.request.type) {\n\t\t\t\t\tcase RequestType.Promise: this.onPromise(request.request); break;\n\t\t\t\t\tcase RequestType.EventListen: this.onEventListen(request.request); break;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.pendingRequests.delete(channelName);\n\t\t}\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.protocolListener) {\n\t\t\tthis.protocolListener.dispose();\n\t\t\tthis.protocolListener = null;\n\t\t}\n\t\tthis.activeRequests.forEach(d => d.dispose());\n\t\tthis.activeRequests.clear();\n\t}\n}\n\nexport const enum RequestInitiator {\n\tLocalSide = 0,\n\tOtherSide = 1\n}\n\nexport interface IIPCLogger {\n\tlogIncoming(msgLength: number, requestId: number, initiator: RequestInitiator, str: string, data?: any): void;\n\tlogOutgoing(msgLength: number, requestId: number, initiator: RequestInitiator, str: string, data?: any): void;\n}\n\nexport class ChannelClient implements IChannelClient, IDisposable {\n\n\tprivate isDisposed: boolean = false;\n\tprivate state: State = State.Uninitialized;\n\tprivate activeRequests = new Set<IDisposable>();\n\tprivate handlers = new Map<number, IHandler>();\n\tprivate lastRequestId: number = 0;\n\tprivate protocolListener: IDisposable | null;\n\tprivate logger: IIPCLogger | null;\n\n\tprivate readonly _onDidInitialize = new Emitter<void>();\n\treadonly onDidInitialize = this._onDidInitialize.event;\n\n\tconstructor(private protocol: IMessagePassingProtocol, logger: IIPCLogger | null = null) {\n\t\tthis.protocolListener = this.protocol.onMessage(msg => this.onBuffer(msg));\n\t\tthis.logger = logger;\n\t}\n\n\tgetChannel<T extends IChannel>(channelName: string): T {\n\t\tconst that = this;\n\n\t\treturn {\n\t\t\tcall(command: string, arg?: any, cancellationToken?: CancellationToken) {\n\t\t\t\tif (that.isDisposed) {\n\t\t\t\t\treturn Promise.reject(errors.canceled());\n\t\t\t\t}\n\t\t\t\treturn that.requestPromise(channelName, command, arg, cancellationToken);\n\t\t\t},\n\t\t\tlisten(event: string, arg: any) {\n\t\t\t\tif (that.isDisposed) {\n\t\t\t\t\treturn Promise.reject(errors.canceled());\n\t\t\t\t}\n\t\t\t\treturn that.requestEvent(channelName, event, arg);\n\t\t\t}\n\t\t} as T;\n\t}\n\n\tprivate requestPromise(channelName: string, name: string, arg?: any, cancellationToken = CancellationToken.None): Promise<any> {\n\t\tconst id = this.lastRequestId++;\n\t\tconst type = RequestType.Promise;\n\t\tconst request: IRawRequest = { id, type, channelName, name, arg };\n\n\t\tif (cancellationToken.isCancellationRequested) {\n\t\t\treturn Promise.reject(errors.canceled());\n\t\t}\n\n\t\tlet disposable: IDisposable;\n\n\t\tconst result = new Promise((c, e) => {\n\t\t\tif (cancellationToken.isCancellationRequested) {\n\t\t\t\treturn e(errors.canceled());\n\t\t\t}\n\n\t\t\tconst doRequest = () => {\n\t\t\t\tconst handler: IHandler = response => {\n\t\t\t\t\tswitch (response.type) {\n\t\t\t\t\t\tcase ResponseType.PromiseSuccess:\n\t\t\t\t\t\t\tthis.handlers.delete(id);\n\t\t\t\t\t\t\tc(response.data);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase ResponseType.PromiseError:\n\t\t\t\t\t\t\tthis.handlers.delete(id);\n\t\t\t\t\t\t\tconst error = new Error(response.data.message);\n\t\t\t\t\t\t\t(<any>error).stack = response.data.stack;\n\t\t\t\t\t\t\terror.name = response.data.name;\n\t\t\t\t\t\t\te(error);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase ResponseType.PromiseErrorObj:\n\t\t\t\t\t\t\tthis.handlers.delete(id);\n\t\t\t\t\t\t\te(response.data);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tthis.handlers.set(id, handler);\n\t\t\t\tthis.sendRequest(request);\n\t\t\t};\n\n\t\t\tlet uninitializedPromise: CancelablePromise<void> | null = null;\n\t\t\tif (this.state === State.Idle) {\n\t\t\t\tdoRequest();\n\t\t\t} else {\n\t\t\t\tuninitializedPromise = createCancelablePromise(_ => this.whenInitialized());\n\t\t\t\tuninitializedPromise.then(() => {\n\t\t\t\t\tuninitializedPromise = null;\n\t\t\t\t\tdoRequest();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst cancel = () => {\n\t\t\t\tif (uninitializedPromise) {\n\t\t\t\t\tuninitializedPromise.cancel();\n\t\t\t\t\tuninitializedPromise = null;\n\t\t\t\t} else {\n\t\t\t\t\tthis.sendRequest({ id, type: RequestType.PromiseCancel });\n\t\t\t\t}\n\n\t\t\t\te(errors.canceled());\n\t\t\t};\n\n\t\t\tconst cancellationTokenListener = cancellationToken.onCancellationRequested(cancel);\n\t\t\tdisposable = combinedDisposable(toDisposable(cancel), cancellationTokenListener);\n\t\t\tthis.activeRequests.add(disposable);\n\t\t});\n\n\t\treturn result.finally(() => { this.activeRequests.delete(disposable); });\n\t}\n\n\tprivate requestEvent(channelName: string, name: string, arg?: any): Event<any> {\n\t\tconst id = this.lastRequestId++;\n\t\tconst type = RequestType.EventListen;\n\t\tconst request: IRawRequest = { id, type, channelName, name, arg };\n\n\t\tlet uninitializedPromise: CancelablePromise<void> | null = null;\n\n\t\tconst emitter = new Emitter<any>({\n\t\t\tonFirstListenerAdd: () => {\n\t\t\t\tuninitializedPromise = createCancelablePromise(_ => this.whenInitialized());\n\t\t\t\tuninitializedPromise.then(() => {\n\t\t\t\t\tuninitializedPromise = null;\n\t\t\t\t\tthis.activeRequests.add(emitter);\n\t\t\t\t\tthis.sendRequest(request);\n\t\t\t\t});\n\t\t\t},\n\t\t\tonLastListenerRemove: () => {\n\t\t\t\tif (uninitializedPromise) {\n\t\t\t\t\tuninitializedPromise.cancel();\n\t\t\t\t\tuninitializedPromise = null;\n\t\t\t\t} else {\n\t\t\t\t\tthis.activeRequests.delete(emitter);\n\t\t\t\t\tthis.sendRequest({ id, type: RequestType.EventDispose });\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tconst handler: IHandler = (res: IRawResponse) => emitter.fire((res as IRawEventFireResponse).data);\n\t\tthis.handlers.set(id, handler);\n\n\t\treturn emitter.event;\n\t}\n\n\tprivate sendRequest(request: IRawRequest): void {\n\t\tswitch (request.type) {\n\t\t\tcase RequestType.Promise:\n\t\t\tcase RequestType.EventListen: {\n\t\t\t\tconst msgLength = this.send([request.type, request.id, request.channelName, request.name], request.arg);\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logOutgoing(msgLength, request.id, RequestInitiator.LocalSide, `${requestTypeToStr(request.type)}: ${request.channelName}.${request.name}`, request.arg);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcase RequestType.PromiseCancel:\n\t\t\tcase RequestType.EventDispose: {\n\t\t\t\tconst msgLength = this.send([request.type, request.id]);\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logOutgoing(msgLength, request.id, RequestInitiator.LocalSide, requestTypeToStr(request.type));\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate send(header: any, body: any = undefined): number {\n\t\tconst writer = new BufferWriter();\n\t\tserialize(writer, header);\n\t\tserialize(writer, body);\n\t\treturn this.sendBuffer(writer.buffer);\n\t}\n\n\tprivate sendBuffer(message: VSBuffer): number {\n\t\ttry {\n\t\t\tthis.protocol.send(message);\n\t\t\treturn message.byteLength;\n\t\t} catch (err) {\n\t\t\t// noop\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tprivate onBuffer(message: VSBuffer): void {\n\t\tconst reader = new BufferReader(message);\n\t\tconst header = deserialize(reader);\n\t\tconst body = deserialize(reader);\n\t\tconst type: ResponseType = header[0];\n\n\t\tswitch (type) {\n\t\t\tcase ResponseType.Initialize:\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logIncoming(message.byteLength, 0, RequestInitiator.LocalSide, responseTypeToStr(type));\n\t\t\t\t}\n\t\t\t\treturn this.onResponse({ type: header[0] });\n\n\t\t\tcase ResponseType.PromiseSuccess:\n\t\t\tcase ResponseType.PromiseError:\n\t\t\tcase ResponseType.EventFire:\n\t\t\tcase ResponseType.PromiseErrorObj:\n\t\t\t\tif (this.logger) {\n\t\t\t\t\tthis.logger.logIncoming(message.byteLength, header[1], RequestInitiator.LocalSide, responseTypeToStr(type), body);\n\t\t\t\t}\n\t\t\t\treturn this.onResponse({ type: header[0], id: header[1], data: body });\n\t\t}\n\t}\n\n\tprivate onResponse(response: IRawResponse): void {\n\t\tif (response.type === ResponseType.Initialize) {\n\t\t\tthis.state = State.Idle;\n\t\t\tthis._onDidInitialize.fire();\n\t\t\treturn;\n\t\t}\n\n\t\tconst handler = this.handlers.get(response.id);\n\n\t\tif (handler) {\n\t\t\thandler(response);\n\t\t}\n\t}\n\n\tprivate whenInitialized(): Promise<void> {\n\t\tif (this.state === State.Idle) {\n\t\t\treturn Promise.resolve();\n\t\t} else {\n\t\t\treturn Event.toPromise(this.onDidInitialize);\n\t\t}\n\t}\n\n\tdispose(): void {\n\t\tthis.isDisposed = true;\n\t\tif (this.protocolListener) {\n\t\t\tthis.protocolListener.dispose();\n\t\t\tthis.protocolListener = null;\n\t\t}\n\t\tthis.activeRequests.forEach(p => p.dispose());\n\t\tthis.activeRequests.clear();\n\t}\n}\n\nexport interface ClientConnectionEvent {\n\tprotocol: IMessagePassingProtocol;\n\tonDidClientDisconnect: Event<void>;\n}\n\ninterface Connection<TContext> extends Client<TContext> {\n\treadonly channelServer: ChannelServer<TContext>;\n\treadonly channelClient: ChannelClient;\n}\n\n/**\n * An `IPCServer` is both a channel server and a routing channel\n * client.\n *\n * As the owner of a protocol, you should extend both this\n * and the `IPCClient` classes to get IPC implementations\n * for your protocol.\n */\nexport class IPCServer<TContext = string> implements IChannelServer<TContext>, IRoutingChannelClient<TContext>, IConnectionHub<TContext>, IDisposable {\n\n\tprivate channels = new Map<string, IServerChannel<TContext>>();\n\tprivate _connections = new Set<Connection<TContext>>();\n\n\tprivate readonly _onDidAddConnection = new Emitter<Connection<TContext>>();\n\treadonly onDidAddConnection: Event<Connection<TContext>> = this._onDidAddConnection.event;\n\n\tprivate readonly _onDidRemoveConnection = new Emitter<Connection<TContext>>();\n\treadonly onDidRemoveConnection: Event<Connection<TContext>> = this._onDidRemoveConnection.event;\n\n\tget connections(): Connection<TContext>[] {\n\t\tconst result: Connection<TContext>[] = [];\n\t\tthis._connections.forEach(ctx => result.push(ctx));\n\t\treturn result;\n\t}\n\n\tconstructor(onDidClientConnect: Event<ClientConnectionEvent>) {\n\t\tonDidClientConnect(({ protocol, onDidClientDisconnect }) => {\n\t\t\tconst onFirstMessage = Event.once(protocol.onMessage);\n\n\t\t\tonFirstMessage(msg => {\n\t\t\t\tconst reader = new BufferReader(msg);\n\t\t\t\tconst ctx = deserialize(reader) as TContext;\n\n\t\t\t\tconst channelServer = new ChannelServer(protocol, ctx);\n\t\t\t\tconst channelClient = new ChannelClient(protocol);\n\n\t\t\t\tthis.channels.forEach((channel, name) => channelServer.registerChannel(name, channel));\n\n\t\t\t\tconst connection: Connection<TContext> = { channelServer, channelClient, ctx };\n\t\t\t\tthis._connections.add(connection);\n\t\t\t\tthis._onDidAddConnection.fire(connection);\n\n\t\t\t\tonDidClientDisconnect(() => {\n\t\t\t\t\tchannelServer.dispose();\n\t\t\t\t\tchannelClient.dispose();\n\t\t\t\t\tthis._connections.delete(connection);\n\t\t\t\t\tthis._onDidRemoveConnection.fire(connection);\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Get a channel from a remote client. When passed a router,\n\t * one can specify which client it wants to call and listen to/from.\n\t * Otherwise, when calling without a router, a random client will\n\t * be selected and when listening without a router, every client\n\t * will be listened to.\n\t */\n\tgetChannel<T extends IChannel>(channelName: string, router: IClientRouter<TContext>): T;\n\tgetChannel<T extends IChannel>(channelName: string, clientFilter: (client: Client<TContext>) => boolean): T;\n\tgetChannel<T extends IChannel>(channelName: string, routerOrClientFilter: IClientRouter<TContext> | ((client: Client<TContext>) => boolean)): T {\n\t\tconst that = this;\n\n\t\treturn {\n\t\t\tcall(command: string, arg?: any, cancellationToken?: CancellationToken): Promise<T> {\n\t\t\t\tlet connectionPromise: Promise<Client<TContext>>;\n\n\t\t\t\tif (isFunction(routerOrClientFilter)) {\n\t\t\t\t\t// when no router is provided, we go random client picking\n\t\t\t\t\tlet connection = getRandomElement(that.connections.filter(routerOrClientFilter));\n\n\t\t\t\t\tconnectionPromise = connection\n\t\t\t\t\t\t// if we found a client, let's call on it\n\t\t\t\t\t\t? Promise.resolve(connection)\n\t\t\t\t\t\t// else, let's wait for a client to come along\n\t\t\t\t\t\t: Event.toPromise(Event.filter(that.onDidAddConnection, routerOrClientFilter));\n\t\t\t\t} else {\n\t\t\t\t\tconnectionPromise = routerOrClientFilter.routeCall(that, command, arg);\n\t\t\t\t}\n\n\t\t\t\tconst channelPromise = connectionPromise\n\t\t\t\t\t.then(connection => (connection as Connection<TContext>).channelClient.getChannel(channelName));\n\n\t\t\t\treturn getDelayedChannel(channelPromise)\n\t\t\t\t\t.call(command, arg, cancellationToken);\n\t\t\t},\n\t\t\tlisten(event: string, arg: any): Event<T> {\n\t\t\t\tif (isFunction(routerOrClientFilter)) {\n\t\t\t\t\treturn that.getMulticastEvent(channelName, routerOrClientFilter, event, arg);\n\t\t\t\t}\n\n\t\t\t\tconst channelPromise = routerOrClientFilter.routeEvent(that, event, arg)\n\t\t\t\t\t.then(connection => (connection as Connection<TContext>).channelClient.getChannel(channelName));\n\n\t\t\t\treturn getDelayedChannel(channelPromise)\n\t\t\t\t\t.listen(event, arg);\n\t\t\t}\n\t\t} as T;\n\t}\n\n\tprivate getMulticastEvent<T extends IChannel>(channelName: string, clientFilter: (client: Client<TContext>) => boolean, eventName: string, arg: any): Event<T> {\n\t\tconst that = this;\n\t\tlet disposables = new DisposableStore();\n\n\t\t// Create an emitter which hooks up to all clients\n\t\t// as soon as first listener is added. It also\n\t\t// disconnects from all clients as soon as the last listener\n\t\t// is removed.\n\t\tconst emitter = new Emitter<T>({\n\t\t\tonFirstListenerAdd: () => {\n\t\t\t\tdisposables = new DisposableStore();\n\n\t\t\t\t// The event multiplexer is useful since the active\n\t\t\t\t// client list is dynamic. We need to hook up and disconnection\n\t\t\t\t// to/from clients as they come and go.\n\t\t\t\tconst eventMultiplexer = new EventMultiplexer<T>();\n\t\t\t\tconst map = new Map<Connection<TContext>, IDisposable>();\n\n\t\t\t\tconst onDidAddConnection = (connection: Connection<TContext>) => {\n\t\t\t\t\tconst channel = connection.channelClient.getChannel(channelName);\n\t\t\t\t\tconst event = channel.listen<T>(eventName, arg);\n\t\t\t\t\tconst disposable = eventMultiplexer.add(event);\n\n\t\t\t\t\tmap.set(connection, disposable);\n\t\t\t\t};\n\n\t\t\t\tconst onDidRemoveConnection = (connection: Connection<TContext>) => {\n\t\t\t\t\tconst disposable = map.get(connection);\n\n\t\t\t\t\tif (!disposable) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tdisposable.dispose();\n\t\t\t\t\tmap.delete(connection);\n\t\t\t\t};\n\n\t\t\t\tthat.connections.filter(clientFilter).forEach(onDidAddConnection);\n\t\t\t\tEvent.filter(that.onDidAddConnection, clientFilter)(onDidAddConnection, undefined, disposables);\n\t\t\t\tthat.onDidRemoveConnection(onDidRemoveConnection, undefined, disposables);\n\t\t\t\teventMultiplexer.event(emitter.fire, emitter, disposables);\n\n\t\t\t\tdisposables.add(eventMultiplexer);\n\t\t\t},\n\t\t\tonLastListenerRemove: () => {\n\t\t\t\tdisposables.dispose();\n\t\t\t}\n\t\t});\n\n\t\treturn emitter.event;\n\t}\n\n\tregisterChannel(channelName: string, channel: IServerChannel<TContext>): void {\n\t\tthis.channels.set(channelName, channel);\n\n\t\tthis._connections.forEach(connection => {\n\t\t\tconnection.channelServer.registerChannel(channelName, channel);\n\t\t});\n\t}\n\n\tdispose(): void {\n\t\tthis.channels.clear();\n\t\tthis._connections.clear();\n\t\tthis._onDidAddConnection.dispose();\n\t\tthis._onDidRemoveConnection.dispose();\n\t}\n}\n\n/**\n * An `IPCClient` is both a channel client and a channel server.\n *\n * As the owner of a protocol, you should extend both this\n * and the `IPCClient` classes to get IPC implementations\n * for your protocol.\n */\nexport class IPCClient<TContext = string> implements IChannelClient, IChannelServer<TContext>, IDisposable {\n\n\tprivate channelClient: ChannelClient;\n\tprivate channelServer: ChannelServer<TContext>;\n\n\tconstructor(protocol: IMessagePassingProtocol, ctx: TContext, ipcLogger: IIPCLogger | null = null) {\n\t\tconst writer = new BufferWriter();\n\t\tserialize(writer, ctx);\n\t\tprotocol.send(writer.buffer);\n\n\t\tthis.channelClient = new ChannelClient(protocol, ipcLogger);\n\t\tthis.channelServer = new ChannelServer(protocol, ctx, ipcLogger);\n\t}\n\n\tgetChannel<T extends IChannel>(channelName: string): T {\n\t\treturn this.channelClient.getChannel(channelName) as T;\n\t}\n\n\tregisterChannel(channelName: string, channel: IServerChannel<TContext>): void {\n\t\tthis.channelServer.registerChannel(channelName, channel);\n\t}\n\n\tdispose(): void {\n\t\tthis.channelClient.dispose();\n\t\tthis.channelServer.dispose();\n\t}\n}\n\nexport function getDelayedChannel<T extends IChannel>(promise: Promise<T>): T {\n\treturn {\n\t\tcall(command: string, arg?: any, cancellationToken?: CancellationToken): Promise<T> {\n\t\t\treturn promise.then(c => c.call<T>(command, arg, cancellationToken));\n\t\t},\n\n\t\tlisten<T>(event: string, arg?: any): Event<T> {\n\t\t\tconst relay = new Relay<any>();\n\t\t\tpromise.then(c => relay.input = c.listen(event, arg));\n\t\t\treturn relay.event;\n\t\t}\n\t} as T;\n}\n\nexport function getNextTickChannel<T extends IChannel>(channel: T): T {\n\tlet didTick = false;\n\n\treturn {\n\t\tcall<T>(command: string, arg?: any, cancellationToken?: CancellationToken): Promise<T> {\n\t\t\tif (didTick) {\n\t\t\t\treturn channel.call(command, arg, cancellationToken);\n\t\t\t}\n\n\t\t\treturn timeout(0)\n\t\t\t\t.then(() => didTick = true)\n\t\t\t\t.then(() => channel.call<T>(command, arg, cancellationToken));\n\t\t},\n\t\tlisten<T>(event: string, arg?: any): Event<T> {\n\t\t\tif (didTick) {\n\t\t\t\treturn channel.listen<T>(event, arg);\n\t\t\t}\n\n\t\t\tconst relay = new Relay<T>();\n\n\t\t\ttimeout(0)\n\t\t\t\t.then(() => didTick = true)\n\t\t\t\t.then(() => relay.input = channel.listen<T>(event, arg));\n\n\t\t\treturn relay.event;\n\t\t}\n\t} as T;\n}\n\nexport class StaticRouter<TContext = string> implements IClientRouter<TContext> {\n\n\tconstructor(private fn: (ctx: TContext) => boolean | Promise<boolean>) { }\n\n\trouteCall(hub: IConnectionHub<TContext>): Promise<Client<TContext>> {\n\t\treturn this.route(hub);\n\t}\n\n\trouteEvent(hub: IConnectionHub<TContext>): Promise<Client<TContext>> {\n\t\treturn this.route(hub);\n\t}\n\n\tprivate async route(hub: IConnectionHub<TContext>): Promise<Client<TContext>> {\n\t\tfor (const connection of hub.connections) {\n\t\t\tif (await Promise.resolve(this.fn(connection.ctx))) {\n\t\t\t\treturn Promise.resolve(connection);\n\t\t\t}\n\t\t}\n\n\t\tawait Event.toPromise(hub.onDidAddConnection);\n\t\treturn await this.route(hub);\n\t}\n}\n\n/**\n * Use ProxyChannels to automatically wrapping and unwrapping\n * services to/from IPC channels, instead of manually wrapping\n * each service method and event.\n *\n * Restrictions:\n * - If marshalling is enabled, only `URI` and `RegExp` is converted\n *   automatically for you\n * - Events must follow the naming convention `onUpperCase`\n * - `CancellationToken` is currently not supported\n * - If a context is provided, you can use `AddFirstParameterToFunctions`\n *   utility to signal this in the receiving side type\n */\nexport namespace ProxyChannel {\n\n\texport interface IProxyOptions {\n\n\t\t/**\n\t\t * Disables automatic marshalling of `URI`.\n\t\t * If marshalling is disabled, `UriComponents`\n\t\t * must be used instead.\n\t\t */\n\t\tdisableMarshalling?: boolean;\n\t}\n\n\texport interface ICreateServiceChannelOptions extends IProxyOptions { }\n\n\texport function fromService(service: unknown, options?: ICreateServiceChannelOptions): IServerChannel {\n\t\tconst handler = service as { [key: string]: unknown };\n\t\tconst disableMarshalling = options && options.disableMarshalling;\n\n\t\t// Buffer any event that should be supported by\n\t\t// iterating over all property keys and finding them\n\t\tconst mapEventNameToEvent = new Map<string, Event<unknown>>();\n\t\tfor (const key in handler) {\n\t\t\tif (propertyIsEvent(key)) {\n\t\t\t\tmapEventNameToEvent.set(key, Event.buffer(handler[key] as Event<unknown>, true));\n\t\t\t}\n\t\t}\n\n\t\treturn new class implements IServerChannel {\n\n\t\t\tlisten<T>(_: unknown, event: string): Event<T> {\n\t\t\t\tconst eventImpl = mapEventNameToEvent.get(event);\n\t\t\t\tif (eventImpl) {\n\t\t\t\t\treturn eventImpl as Event<T>;\n\t\t\t\t}\n\n\t\t\t\tthrow new Error(`Event not found: ${event}`);\n\t\t\t}\n\n\t\t\tcall(_: unknown, command: string, args?: any[]): Promise<any> {\n\t\t\t\tconst target = handler[command];\n\t\t\t\tif (typeof target === 'function') {\n\n\t\t\t\t\t// Revive unless marshalling disabled\n\t\t\t\t\tif (!disableMarshalling && Array.isArray(args)) {\n\t\t\t\t\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\t\t\t\t\targs[i] = revive(args[i]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn target.apply(handler, args);\n\t\t\t\t}\n\n\t\t\t\tthrow new Error(`Method not found: ${command}`);\n\t\t\t}\n\t\t};\n\t}\n\n\texport interface ICreateProxyServiceOptions extends IProxyOptions {\n\n\t\t/**\n\t\t * If provided, will add the value of `context`\n\t\t * to each method call to the target.\n\t\t */\n\t\tcontext?: unknown;\n\n\t\t/**\n\t\t * If provided, will not proxy any of the properties\n\t\t * that are part of the Map but rather return that value.\n\t\t */\n\t\tproperties?: Map<string, unknown>;\n\t}\n\n\texport function toService<T>(channel: IChannel, options?: ICreateProxyServiceOptions): T {\n\t\tconst disableMarshalling = options && options.disableMarshalling;\n\n\t\treturn new Proxy({}, {\n\t\t\tget(_target: T, propKey: PropertyKey) {\n\t\t\t\tif (typeof propKey === 'string') {\n\n\t\t\t\t\t// Check for predefined values\n\t\t\t\t\tif (options?.properties?.has(propKey)) {\n\t\t\t\t\t\treturn options.properties.get(propKey);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Event\n\t\t\t\t\tif (propertyIsEvent(propKey)) {\n\t\t\t\t\t\treturn channel.listen(propKey);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Function\n\t\t\t\t\treturn async function (...args: any[]) {\n\n\t\t\t\t\t\t// Add context if any\n\t\t\t\t\t\tlet methodArgs: any[];\n\t\t\t\t\t\tif (options && !isUndefinedOrNull(options.context)) {\n\t\t\t\t\t\t\tmethodArgs = [options.context, ...args];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tmethodArgs = args;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst result = await channel.call(propKey, methodArgs);\n\n\t\t\t\t\t\t// Revive unless marshalling disabled\n\t\t\t\t\t\tif (!disableMarshalling) {\n\t\t\t\t\t\t\treturn revive(result);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tthrow new Error(`Property not found: ${String(propKey)}`);\n\t\t\t}\n\t\t}) as T;\n\t}\n\n\tfunction propertyIsEvent(name: string): boolean {\n\t\t// Assume a property is an event if it has a form of \"onSomething\"\n\t\treturn name[0] === 'o' && name[1] === 'n' && strings.isUpperAsciiLetter(name.charCodeAt(2));\n\t}\n}\n\nconst colorTables = [\n\t['#2977B1', '#FC802D', '#34A13A', '#D3282F', '#9366BA'],\n\t['#8B564C', '#E177C0', '#7F7F7F', '#BBBE3D', '#2EBECD']\n];\n\nfunction prettyWithoutArrays(data: any): any {\n\tif (Array.isArray(data)) {\n\t\treturn data;\n\t}\n\tif (data && typeof data === 'object' && typeof data.toString === 'function') {\n\t\tlet result = data.toString();\n\t\tif (result !== '[object Object]') {\n\t\t\treturn result;\n\t\t}\n\t}\n\treturn data;\n}\n\nfunction pretty(data: any): any {\n\tif (Array.isArray(data)) {\n\t\treturn data.map(prettyWithoutArrays);\n\t}\n\treturn prettyWithoutArrays(data);\n}\n\nexport function logWithColors(direction: string, totalLength: number, msgLength: number, req: number, initiator: RequestInitiator, str: string, data: any): void {\n\tdata = pretty(data);\n\n\tconst colorTable = colorTables[initiator];\n\tconst color = colorTable[req % colorTable.length];\n\tlet args = [`%c[${direction}]%c[${String(totalLength).padStart(7, ' ')}]%c[len: ${String(msgLength).padStart(5, ' ')}]%c${String(req).padStart(5, ' ')} - ${str}`, 'color: darkgreen', 'color: grey', 'color: grey', `color: ${color}`];\n\tif (/\\($/.test(str)) {\n\t\targs = args.concat(data);\n\t\targs.push(')');\n\t} else {\n\t\targs.push(data);\n\t}\n\tconsole.log.apply(console, args as [string, ...string[]]);\n}\n\nexport class IPCLogger implements IIPCLogger {\n\tprivate _totalIncoming = 0;\n\tprivate _totalOutgoing = 0;\n\n\tconstructor(\n\t\tprivate readonly _outgoingPrefix: string,\n\t\tprivate readonly _incomingPrefix: string,\n\t) { }\n\n\tpublic logOutgoing(msgLength: number, requestId: number, initiator: RequestInitiator, str: string, data?: any): void {\n\t\tthis._totalOutgoing += msgLength;\n\t\tlogWithColors(this._outgoingPrefix, this._totalOutgoing, msgLength, requestId, initiator, str, data);\n\t}\n\n\tpublic logIncoming(msgLength: number, requestId: number, initiator: RequestInitiator, str: string, data?: any): void {\n\t\tthis._totalIncoming += msgLength;\n\t\tlogWithColors(this._incomingPrefix, this._totalIncoming, msgLength, requestId, initiator, str, data);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IMessagePassingProtocol } from 'vs/base/parts/ipc/common/ipc';\nimport { Event } from 'vs/base/common/event';\nimport { VSBuffer } from 'vs/base/common/buffer';\n\nexport interface Sender {\n\tsend(channel: string, msg: unknown): void;\n}\n\n/**\n * The Electron `Protocol` leverages Electron style IPC communication (`ipcRenderer`, `ipcMain`)\n * for the implementation of the `IMessagePassingProtocol`. That style of API requires a channel\n * name for sending data.\n */\nexport class Protocol implements IMessagePassingProtocol {\n\n\tconstructor(private sender: Sender, readonly onMessage: Event<VSBuffer>) { }\n\n\tsend(message: VSBuffer): void {\n\t\ttry {\n\t\t\tthis.sender.send('vscode:message', message.buffer);\n\t\t} catch (e) {\n\t\t\t// systems are going down\n\t\t}\n\t}\n\n\tdisconnect(): void {\n\t\tthis.sender.send('vscode:disconnect', null);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { globals, INodeProcess, IProcessEnvironment } from 'vs/base/common/platform';\nimport { ISandboxConfiguration } from 'vs/base/parts/sandbox/common/sandboxTypes';\nimport { ProcessMemoryInfo, CrashReporter, IpcRenderer, WebFrame } from 'vs/base/parts/sandbox/electron-sandbox/electronTypes';\n\n/**\n * In sandboxed renderers we cannot expose all of the `process` global of node.js\n */\nexport interface ISandboxNodeProcess extends INodeProcess {\n\n\t/**\n\t * The process.platform property returns a string identifying the operating system platform\n\t * on which the Node.js process is running.\n\t */\n\treadonly platform: string;\n\n\t/**\n\t * The process.arch property returns a string identifying the CPU architecture\n\t * on which the Node.js process is running.\n\t */\n\treadonly arch: string;\n\n\t/**\n\t * The type will always be `renderer`.\n\t */\n\treadonly type: string;\n\n\t/**\n\t * Whether the process is sandboxed or not.\n\t */\n\treadonly sandboxed: boolean;\n\n\t/**\n\t * A list of versions for the current node.js/electron configuration.\n\t */\n\treadonly versions: { [key: string]: string | undefined };\n\n\t/**\n\t * The process.env property returns an object containing the user environment.\n\t */\n\treadonly env: IProcessEnvironment;\n\n\t/**\n\t * The `execPath` will be the location of the executable of this application.\n\t */\n\treadonly execPath: string;\n\n\t/**\n\t * A listener on the process. Only a small subset of listener types are allowed.\n\t */\n\ton: (type: string, callback: Function) => void;\n\n\t/**\n\t * The current working directory of the process.\n\t */\n\tcwd: () => string;\n\n\t/**\n\t * Resolves with a ProcessMemoryInfo\n\t *\n\t * Returns an object giving memory usage statistics about the current process. Note\n\t * that all statistics are reported in Kilobytes. This api should be called after\n\t * app ready.\n\t *\n\t * Chromium does not provide `residentSet` value for macOS. This is because macOS\n\t * performs in-memory compression of pages that haven't been recently used. As a\n\t * result the resident set size value is not what one would expect. `private`\n\t * memory is more representative of the actual pre-compression memory usage of the\n\t * process on macOS.\n\t */\n\tgetProcessMemoryInfo: () => Promise<ProcessMemoryInfo>;\n\n\t/**\n\t * Returns a process environment that includes all shell environment variables even if\n\t * the application was not started from a shell / terminal / console.\n\t *\n\t * There are different layers of environment that will apply:\n\t * - `process.env`: this is the actual environment of the process before this method\n\t * - `shellEnv`   : if the program was not started from a terminal, we resolve all shell\n\t *                  variables to get the same experience as if the program was started from\n\t *                  a terminal (Linux, macOS)\n\t * - `userEnv`    : this is instance specific environment, e.g. if the user started the program\n\t *                  from a terminal and changed certain variables\n\t *\n\t * The order of overwrites is `process.env` < `shellEnv` < `userEnv`.\n\t */\n\tshellEnv(): Promise<IProcessEnvironment>;\n}\n\nexport interface IpcMessagePort {\n\n\t/**\n\t * Establish a connection via `MessagePort` to a target. The main process\n\t * will need to transfer the port over to the `channelResponse` after listening\n\t * to `channelRequest` with a payload of `requestNonce` so that the\n\t * source can correlate the response.\n\t *\n\t * The source should install a `window.on('message')` listener, ensuring `e.data`\n\t * matches `requestNonce`, `e.source` matches `window` and then receiving the\n\t * `MessagePort` via `e.ports[0]`.\n\t */\n\tconnect(channelRequest: string, channelResponse: string, requestNonce: string): void;\n}\n\nexport interface ISandboxContext {\n\n\t/**\n\t * A configuration object made accessible from the main side\n\t * to configure the sandbox browser window. Will be `undefined`\n\t * for as long as `resolveConfiguration` is not awaited.\n\t */\n\tconfiguration(): ISandboxConfiguration | undefined;\n\n\t/**\n\t * Allows to await the resolution of the configuration object.\n\t */\n\tresolveConfiguration(): Promise<ISandboxConfiguration>;\n}\n\nexport const ipcRenderer: IpcRenderer = globals.vscode.ipcRenderer;\nexport const ipcMessagePort: IpcMessagePort = globals.vscode.ipcMessagePort;\nexport const webFrame: WebFrame = globals.vscode.webFrame;\nexport const crashReporter: CrashReporter = globals.vscode.crashReporter;\nexport const process: ISandboxNodeProcess = globals.vscode.process;\nexport const context: ISandboxContext = globals.vscode.context;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ipcRenderer } from 'vs/base/parts/sandbox/electron-sandbox/globals';\nimport { IContextMenuItem, ISerializableContextMenuItem, CONTEXT_MENU_CLOSE_CHANNEL, CONTEXT_MENU_CHANNEL, IPopupOptions, IContextMenuEvent } from 'vs/base/parts/contextmenu/common/contextmenu';\n\nlet contextMenuIdPool = 0;\n\nexport function popup(items: IContextMenuItem[], options?: IPopupOptions, onHide?: () => void): void {\n\tconst processedItems: IContextMenuItem[] = [];\n\n\tconst contextMenuId = contextMenuIdPool++;\n\tconst onClickChannel = `vscode:onContextMenu${contextMenuId}`;\n\tconst onClickChannelHandler = (event: unknown, itemId: number, context: IContextMenuEvent) => {\n\t\tconst item = processedItems[itemId];\n\t\tif (item.click) {\n\t\t\titem.click(context);\n\t\t}\n\t};\n\n\tipcRenderer.once(onClickChannel, onClickChannelHandler);\n\tipcRenderer.once(CONTEXT_MENU_CLOSE_CHANNEL, (event: unknown, closedContextMenuId: number) => {\n\t\tif (closedContextMenuId !== contextMenuId) {\n\t\t\treturn;\n\t\t}\n\n\t\tipcRenderer.removeListener(onClickChannel, onClickChannelHandler);\n\n\t\tif (onHide) {\n\t\t\tonHide();\n\t\t}\n\t});\n\n\tipcRenderer.send(CONTEXT_MENU_CHANNEL, contextMenuId, items.map(item => createItem(item, processedItems)), onClickChannel, options);\n}\n\nfunction createItem(item: IContextMenuItem, processedItems: IContextMenuItem[]): ISerializableContextMenuItem {\n\tconst serializableItem: ISerializableContextMenuItem = {\n\t\tid: processedItems.length,\n\t\tlabel: item.label,\n\t\ttype: item.type,\n\t\taccelerator: item.accelerator,\n\t\tchecked: item.checked,\n\t\tenabled: typeof item.enabled === 'boolean' ? item.enabled : true,\n\t\tvisible: typeof item.visible === 'boolean' ? item.visible : true\n\t};\n\n\tprocessedItems.push(item);\n\n\t// Submenu\n\tif (Array.isArray(item.submenu)) {\n\t\tserializableItem.submenu = item.submenu.map(submenuItem => createItem(submenuItem, processedItems));\n\t}\n\n\treturn serializableItem;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from 'vs/base/common/event';\nimport { IPCClient } from 'vs/base/parts/ipc/common/ipc';\nimport { Protocol as ElectronProtocol } from 'vs/base/parts/ipc/common/ipc.electron';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { VSBuffer } from 'vs/base/common/buffer';\nimport { ipcRenderer } from 'vs/base/parts/sandbox/electron-sandbox/globals';\n\n/**\n * An implemention of `IPCClient` on top of Electron `ipcRenderer` IPC communication\n * provided from sandbox globals (via preload script).\n */\nexport class Client extends IPCClient implements IDisposable {\n\n\tprivate protocol: ElectronProtocol;\n\n\tprivate static createProtocol(): ElectronProtocol {\n\t\tconst onMessage = Event.fromNodeEventEmitter<VSBuffer>(ipcRenderer, 'vscode:message', (_, message) => VSBuffer.wrap(message));\n\t\tipcRenderer.send('vscode:hello');\n\n\t\treturn new ElectronProtocol(ipcRenderer, onMessage);\n\t}\n\n\tconstructor(id: string) {\n\t\tconst protocol = Client.createProtocol();\n\t\tsuper(protocol, id);\n\n\t\tthis.protocol = protocol;\n\t}\n\n\toverride dispose(): void {\n\t\tthis.protocol.disconnect();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./aria';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport * as dom from 'vs/base/browser/dom';\n\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\nconst MAX_MESSAGE_LENGTH = 20000;\nlet ariaContainer: HTMLElement;\nlet alertContainer: HTMLElement;\nlet alertContainer2: HTMLElement;\nlet statusContainer: HTMLElement;\nlet statusContainer2: HTMLElement;\nexport function setARIAContainer(parent: HTMLElement) {\n\tariaContainer = document.createElement('div');\n\tariaContainer.className = 'monaco-aria-container';\n\n\tconst createAlertContainer = () => {\n\t\tconst element = document.createElement('div');\n\t\telement.className = 'monaco-alert';\n\t\telement.setAttribute('role', 'alert');\n\t\telement.setAttribute('aria-atomic', 'true');\n\t\tariaContainer.appendChild(element);\n\t\treturn element;\n\t};\n\talertContainer = createAlertContainer();\n\talertContainer2 = createAlertContainer();\n\n\tconst createStatusContainer = () => {\n\t\tconst element = document.createElement('div');\n\t\telement.className = 'monaco-status';\n\t\telement.setAttribute('role', 'complementary');\n\t\telement.setAttribute('aria-live', 'polite');\n\t\telement.setAttribute('aria-atomic', 'true');\n\t\tariaContainer.appendChild(element);\n\t\treturn element;\n\t};\n\tstatusContainer = createStatusContainer();\n\tstatusContainer2 = createStatusContainer();\n\n\tparent.appendChild(ariaContainer);\n}\n/**\n * Given the provided message, will make sure that it is read as alert to screen readers.\n */\nexport function alert(msg: string): void {\n\tif (!ariaContainer) {\n\t\treturn;\n\t}\n\n\t// Use alternate containers such that duplicated messages get read out by screen readers #99466\n\tif (alertContainer.textContent !== msg) {\n\t\tdom.clearNode(alertContainer2);\n\t\tinsertMessage(alertContainer, msg);\n\t} else {\n\t\tdom.clearNode(alertContainer);\n\t\tinsertMessage(alertContainer2, msg);\n\t}\n}\n\n/**\n * Given the provided message, will make sure that it is read as status to screen readers.\n */\nexport function status(msg: string): void {\n\tif (!ariaContainer) {\n\t\treturn;\n\t}\n\n\tif (isMacintosh) {\n\t\talert(msg); // VoiceOver does not seem to support status role\n\t} else {\n\t\tif (statusContainer.textContent !== msg) {\n\t\t\tdom.clearNode(statusContainer2);\n\t\t\tinsertMessage(statusContainer, msg);\n\t\t} else {\n\t\t\tdom.clearNode(statusContainer);\n\t\t\tinsertMessage(statusContainer2, msg);\n\t\t}\n\t}\n}\n\nfunction insertMessage(target: HTMLElement, msg: string): void {\n\tdom.clearNode(target);\n\tif (msg.length > MAX_MESSAGE_LENGTH) {\n\t\tmsg = msg.substr(0, MAX_MESSAGE_LENGTH);\n\t}\n\ttarget.textContent = msg;\n\n\t// See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n\ttarget.style.visibility = 'hidden';\n\ttarget.style.visibility = 'visible';\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./codicon/codicon';\nimport 'vs/css!./codicon/codicon-modifiers';\n\nimport { Codicon } from 'vs/base/common/codicons';\n\nexport function formatRule(c: Codicon) {\n\tlet def = c.definition;\n\twhile (def instanceof Codicon) {\n\t\tdef = def.definition;\n\t}\n\treturn `.codicon-${c.id}:before { content: '${def.fontCharacter}'; }`;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/scrollbars';\nimport * as dom from 'vs/base/browser/dom';\nimport { FastDomNode, createFastDomNode } from 'vs/base/browser/fastDomNode';\nimport { IMouseEvent, StandardWheelEvent, IMouseWheelEvent } from 'vs/base/browser/mouseEvent';\nimport { ScrollbarHost } from 'vs/base/browser/ui/scrollbar/abstractScrollbar';\nimport { HorizontalScrollbar } from 'vs/base/browser/ui/scrollbar/horizontalScrollbar';\nimport { ScrollableElementChangeOptions, ScrollableElementCreationOptions, ScrollableElementResolvedOptions } from 'vs/base/browser/ui/scrollbar/scrollableElementOptions';\nimport { VerticalScrollbar } from 'vs/base/browser/ui/scrollbar/verticalScrollbar';\nimport { Widget } from 'vs/base/browser/ui/widget';\nimport { TimeoutTimer } from 'vs/base/common/async';\nimport { Emitter, Event } from 'vs/base/common/event';\nimport { IDisposable, dispose } from 'vs/base/common/lifecycle';\nimport * as platform from 'vs/base/common/platform';\nimport { INewScrollDimensions, INewScrollPosition, IScrollDimensions, IScrollPosition, ScrollEvent, Scrollable, ScrollbarVisibility } from 'vs/base/common/scrollable';\nimport { getZoomFactor } from 'vs/base/browser/browser';\n\nconst HIDE_TIMEOUT = 500;\nconst SCROLL_WHEEL_SENSITIVITY = 50;\nconst SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\n\nexport interface IOverviewRulerLayoutInfo {\n\tparent: HTMLElement;\n\tinsertBefore: HTMLElement;\n}\n\nclass MouseWheelClassifierItem {\n\tpublic timestamp: number;\n\tpublic deltaX: number;\n\tpublic deltaY: number;\n\tpublic score: number;\n\n\tconstructor(timestamp: number, deltaX: number, deltaY: number) {\n\t\tthis.timestamp = timestamp;\n\t\tthis.deltaX = deltaX;\n\t\tthis.deltaY = deltaY;\n\t\tthis.score = 0;\n\t}\n}\n\nexport class MouseWheelClassifier {\n\n\tpublic static readonly INSTANCE = new MouseWheelClassifier();\n\n\tprivate readonly _capacity: number;\n\tprivate _memory: MouseWheelClassifierItem[];\n\tprivate _front: number;\n\tprivate _rear: number;\n\n\tconstructor() {\n\t\tthis._capacity = 5;\n\t\tthis._memory = [];\n\t\tthis._front = -1;\n\t\tthis._rear = -1;\n\t}\n\n\tpublic isPhysicalMouseWheel(): boolean {\n\t\tif (this._front === -1 && this._rear === -1) {\n\t\t\t// no elements\n\t\t\treturn false;\n\t\t}\n\n\t\t// 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n\t\tlet remainingInfluence = 1;\n\t\tlet score = 0;\n\t\tlet iteration = 1;\n\n\t\tlet index = this._rear;\n\t\tdo {\n\t\t\tconst influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\n\t\t\tremainingInfluence -= influence;\n\t\t\tscore += this._memory[index].score * influence;\n\n\t\t\tif (index === this._front) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tindex = (this._capacity + index - 1) % this._capacity;\n\t\t\titeration++;\n\t\t} while (true);\n\n\t\treturn (score <= 0.5);\n\t}\n\n\tpublic accept(timestamp: number, deltaX: number, deltaY: number): void {\n\t\tconst item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n\t\titem.score = this._computeScore(item);\n\n\t\tif (this._front === -1 && this._rear === -1) {\n\t\t\tthis._memory[0] = item;\n\t\t\tthis._front = 0;\n\t\t\tthis._rear = 0;\n\t\t} else {\n\t\t\tthis._rear = (this._rear + 1) % this._capacity;\n\t\t\tif (this._rear === this._front) {\n\t\t\t\t// Drop oldest\n\t\t\t\tthis._front = (this._front + 1) % this._capacity;\n\t\t\t}\n\t\t\tthis._memory[this._rear] = item;\n\t\t}\n\t}\n\n\t/**\n\t * A score between 0 and 1 for `item`.\n\t *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\n\t *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\n\t */\n\tprivate _computeScore(item: MouseWheelClassifierItem): number {\n\n\t\tif (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n\t\t\t// both axes exercised => definitely not a physical mouse wheel\n\t\t\treturn 1;\n\t\t}\n\n\t\tlet score: number = 0.5;\n\t\tconst prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\n\t\tif (prev) {\n\t\t\t// const deltaT = item.timestamp - prev.timestamp;\n\t\t\t// if (deltaT < 1000 / 30) {\n\t\t\t// \t// sooner than X times per second => indicator that this is not a physical mouse wheel\n\t\t\t// \tscore += 0.25;\n\t\t\t// }\n\n\t\t\t// if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\n\t\t\t// \t// equal amplitude => indicator that this is a physical mouse wheel\n\t\t\t// \tscore -= 0.25;\n\t\t\t// }\n\t\t}\n\n\t\tif (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\n\t\t\t// non-integer deltas => indicator that this is not a physical mouse wheel\n\t\t\tscore += 0.25;\n\t\t}\n\n\t\treturn Math.min(Math.max(score, 0), 1);\n\t}\n\n\tprivate _isAlmostInt(value: number): boolean {\n\t\tconst delta = Math.abs(Math.round(value) - value);\n\t\treturn (delta < 0.01);\n\t}\n}\n\nexport abstract class AbstractScrollableElement extends Widget {\n\n\tprivate readonly _options: ScrollableElementResolvedOptions;\n\tprotected readonly _scrollable: Scrollable;\n\tprivate readonly _verticalScrollbar: VerticalScrollbar;\n\tprivate readonly _horizontalScrollbar: HorizontalScrollbar;\n\tprivate readonly _domNode: HTMLElement;\n\n\tprivate readonly _leftShadowDomNode: FastDomNode<HTMLElement> | null;\n\tprivate readonly _topShadowDomNode: FastDomNode<HTMLElement> | null;\n\tprivate readonly _topLeftShadowDomNode: FastDomNode<HTMLElement> | null;\n\n\tprivate readonly _listenOnDomNode: HTMLElement;\n\n\tprivate _mouseWheelToDispose: IDisposable[];\n\n\tprivate _isDragging: boolean;\n\tprivate _mouseIsOver: boolean;\n\n\tprivate readonly _hideTimeout: TimeoutTimer;\n\tprivate _shouldRender: boolean;\n\n\tprivate _revealOnScroll: boolean;\n\n\tprivate readonly _onScroll = this._register(new Emitter<ScrollEvent>());\n\tpublic readonly onScroll: Event<ScrollEvent> = this._onScroll.event;\n\n\tprivate readonly _onWillScroll = this._register(new Emitter<ScrollEvent>());\n\tpublic readonly onWillScroll: Event<ScrollEvent> = this._onWillScroll.event;\n\n\tprotected constructor(element: HTMLElement, options: ScrollableElementCreationOptions, scrollable: Scrollable) {\n\t\tsuper();\n\t\telement.style.overflow = 'hidden';\n\t\tthis._options = resolveOptions(options);\n\t\tthis._scrollable = scrollable;\n\n\t\tthis._register(this._scrollable.onScroll((e) => {\n\t\t\tthis._onWillScroll.fire(e);\n\t\t\tthis._onDidScroll(e);\n\t\t\tthis._onScroll.fire(e);\n\t\t}));\n\n\t\tconst scrollbarHost: ScrollbarHost = {\n\t\t\tonMouseWheel: (mouseWheelEvent: StandardWheelEvent) => this._onMouseWheel(mouseWheelEvent),\n\t\t\tonDragStart: () => this._onDragStart(),\n\t\t\tonDragEnd: () => this._onDragEnd(),\n\t\t};\n\t\tthis._verticalScrollbar = this._register(new VerticalScrollbar(this._scrollable, this._options, scrollbarHost));\n\t\tthis._horizontalScrollbar = this._register(new HorizontalScrollbar(this._scrollable, this._options, scrollbarHost));\n\n\t\tthis._domNode = document.createElement('div');\n\t\tthis._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n\t\tthis._domNode.setAttribute('role', 'presentation');\n\t\tthis._domNode.style.position = 'relative';\n\t\tthis._domNode.style.overflow = 'hidden';\n\t\tthis._domNode.appendChild(element);\n\t\tthis._domNode.appendChild(this._horizontalScrollbar.domNode.domNode);\n\t\tthis._domNode.appendChild(this._verticalScrollbar.domNode.domNode);\n\n\t\tif (this._options.useShadows) {\n\t\t\tthis._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n\t\t\tthis._leftShadowDomNode.setClassName('shadow');\n\t\t\tthis._domNode.appendChild(this._leftShadowDomNode.domNode);\n\n\t\t\tthis._topShadowDomNode = createFastDomNode(document.createElement('div'));\n\t\t\tthis._topShadowDomNode.setClassName('shadow');\n\t\t\tthis._domNode.appendChild(this._topShadowDomNode.domNode);\n\n\t\t\tthis._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n\t\t\tthis._topLeftShadowDomNode.setClassName('shadow');\n\t\t\tthis._domNode.appendChild(this._topLeftShadowDomNode.domNode);\n\t\t} else {\n\t\t\tthis._leftShadowDomNode = null;\n\t\t\tthis._topShadowDomNode = null;\n\t\t\tthis._topLeftShadowDomNode = null;\n\t\t}\n\n\t\tthis._listenOnDomNode = this._options.listenOnDomNode || this._domNode;\n\n\t\tthis._mouseWheelToDispose = [];\n\t\tthis._setListeningToMouseWheel(this._options.handleMouseWheel);\n\n\t\tthis.onmouseover(this._listenOnDomNode, (e) => this._onMouseOver(e));\n\t\tthis.onnonbubblingmouseout(this._listenOnDomNode, (e) => this._onMouseOut(e));\n\n\t\tthis._hideTimeout = this._register(new TimeoutTimer());\n\t\tthis._isDragging = false;\n\t\tthis._mouseIsOver = false;\n\n\t\tthis._shouldRender = true;\n\n\t\tthis._revealOnScroll = true;\n\t}\n\n\tpublic override dispose(): void {\n\t\tthis._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n\t\tsuper.dispose();\n\t}\n\n\t/**\n\t * Get the generated 'scrollable' dom node\n\t */\n\tpublic getDomNode(): HTMLElement {\n\t\treturn this._domNode;\n\t}\n\n\tpublic getOverviewRulerLayoutInfo(): IOverviewRulerLayoutInfo {\n\t\treturn {\n\t\t\tparent: this._domNode,\n\t\t\tinsertBefore: this._verticalScrollbar.domNode.domNode,\n\t\t};\n\t}\n\n\t/**\n\t * Delegate a mouse down event to the vertical scrollbar.\n\t * This is to help with clicking somewhere else and having the scrollbar react.\n\t */\n\tpublic delegateVerticalScrollbarMouseDown(browserEvent: IMouseEvent): void {\n\t\tthis._verticalScrollbar.delegateMouseDown(browserEvent);\n\t}\n\n\tpublic getScrollDimensions(): IScrollDimensions {\n\t\treturn this._scrollable.getScrollDimensions();\n\t}\n\n\tpublic setScrollDimensions(dimensions: INewScrollDimensions): void {\n\t\tthis._scrollable.setScrollDimensions(dimensions, false);\n\t}\n\n\t/**\n\t * Update the class name of the scrollable element.\n\t */\n\tpublic updateClassName(newClassName: string): void {\n\t\tthis._options.className = newClassName;\n\t\t// Defaults are different on Macs\n\t\tif (platform.isMacintosh) {\n\t\t\tthis._options.className += ' mac';\n\t\t}\n\t\tthis._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n\t}\n\n\t/**\n\t * Update configuration options for the scrollbar.\n\t * Really this is Editor.IEditorScrollbarOptions, but base shouldn't\n\t * depend on Editor.\n\t */\n\tpublic updateOptions(newOptions: ScrollableElementChangeOptions): void {\n\t\tif (typeof newOptions.handleMouseWheel !== 'undefined') {\n\t\t\tthis._options.handleMouseWheel = newOptions.handleMouseWheel;\n\t\t\tthis._setListeningToMouseWheel(this._options.handleMouseWheel);\n\t\t}\n\t\tif (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\n\t\t\tthis._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\n\t\t}\n\t\tif (typeof newOptions.fastScrollSensitivity !== 'undefined') {\n\t\t\tthis._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\n\t\t}\n\t\tif (typeof newOptions.scrollPredominantAxis !== 'undefined') {\n\t\t\tthis._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\n\t\t}\n\t\tif (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\n\t\t\tthis._horizontalScrollbar.updateScrollbarSize(newOptions.horizontalScrollbarSize);\n\t\t}\n\n\t\tif (!this._options.lazyRender) {\n\t\t\tthis._render();\n\t\t}\n\t}\n\n\tpublic setRevealOnScroll(value: boolean) {\n\t\tthis._revealOnScroll = value;\n\t}\n\n\tpublic triggerScrollFromMouseWheelEvent(browserEvent: IMouseWheelEvent) {\n\t\tthis._onMouseWheel(new StandardWheelEvent(browserEvent));\n\t}\n\n\t// -------------------- mouse wheel scrolling --------------------\n\n\tprivate _setListeningToMouseWheel(shouldListen: boolean): void {\n\t\tconst isListening = (this._mouseWheelToDispose.length > 0);\n\n\t\tif (isListening === shouldListen) {\n\t\t\t// No change\n\t\t\treturn;\n\t\t}\n\n\t\t// Stop listening (if necessary)\n\t\tthis._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n\n\t\t// Start listening (if necessary)\n\t\tif (shouldListen) {\n\t\t\tconst onMouseWheel = (browserEvent: IMouseWheelEvent) => {\n\t\t\t\tthis._onMouseWheel(new StandardWheelEvent(browserEvent));\n\t\t\t};\n\n\t\t\tthis._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { passive: false }));\n\t\t}\n\t}\n\n\tprivate _onMouseWheel(e: StandardWheelEvent): void {\n\n\t\tconst classifier = MouseWheelClassifier.INSTANCE;\n\t\tif (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n\t\t\tconst osZoomFactor = window.devicePixelRatio / getZoomFactor();\n\t\t\tif (platform.isWindows || platform.isLinux) {\n\t\t\t\t// On Windows and Linux, the incoming delta events are multiplied with the OS zoom factor.\n\t\t\t\t// The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\n\t\t\t\tclassifier.accept(Date.now(), e.deltaX / osZoomFactor, e.deltaY / osZoomFactor);\n\t\t\t} else {\n\t\t\t\tclassifier.accept(Date.now(), e.deltaX, e.deltaY);\n\t\t\t}\n\t\t}\n\n\t\t// console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n\n\t\tlet didScroll = false;\n\n\t\tif (e.deltaY || e.deltaX) {\n\t\t\tlet deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n\t\t\tlet deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n\n\t\t\tif (this._options.scrollPredominantAxis) {\n\t\t\t\tif (Math.abs(deltaY) >= Math.abs(deltaX)) {\n\t\t\t\t\tdeltaX = 0;\n\t\t\t\t} else {\n\t\t\t\t\tdeltaY = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._options.flipAxes) {\n\t\t\t\t[deltaY, deltaX] = [deltaX, deltaY];\n\t\t\t}\n\n\t\t\t// Convert vertical scrolling to horizontal if shift is held, this\n\t\t\t// is handled at a higher level on Mac\n\t\t\tconst shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n\t\t\tif ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n\t\t\t\tdeltaX = deltaY;\n\t\t\t\tdeltaY = 0;\n\t\t\t}\n\n\t\t\tif (e.browserEvent && e.browserEvent.altKey) {\n\t\t\t\t// fastScrolling\n\t\t\t\tdeltaX = deltaX * this._options.fastScrollSensitivity;\n\t\t\t\tdeltaY = deltaY * this._options.fastScrollSensitivity;\n\t\t\t}\n\n\t\t\tconst futureScrollPosition = this._scrollable.getFutureScrollPosition();\n\n\t\t\tlet desiredScrollPosition: INewScrollPosition = {};\n\t\t\tif (deltaY) {\n\t\t\t\tconst desiredScrollTop = futureScrollPosition.scrollTop - SCROLL_WHEEL_SENSITIVITY * deltaY;\n\t\t\t\tthis._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n\t\t\t}\n\t\t\tif (deltaX) {\n\t\t\t\tconst desiredScrollLeft = futureScrollPosition.scrollLeft - SCROLL_WHEEL_SENSITIVITY * deltaX;\n\t\t\t\tthis._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n\t\t\t}\n\n\t\t\t// Check that we are scrolling towards a location which is valid\n\t\t\tdesiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n\n\t\t\tif (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n\n\t\t\t\tconst canPerformSmoothScroll = (\n\t\t\t\t\tSCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\n\t\t\t\t\t&& this._options.mouseWheelSmoothScroll\n\t\t\t\t\t&& classifier.isPhysicalMouseWheel()\n\t\t\t\t);\n\n\t\t\t\tif (canPerformSmoothScroll) {\n\t\t\t\t\tthis._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n\t\t\t\t} else {\n\t\t\t\t\tthis._scrollable.setScrollPositionNow(desiredScrollPosition);\n\t\t\t\t}\n\n\t\t\t\tdidScroll = true;\n\t\t\t}\n\t\t}\n\n\t\tlet consumeMouseWheel = didScroll;\n\t\tif (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\n\t\t\tconsumeMouseWheel = true;\n\t\t}\n\t\tif (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\n\t\t\tconsumeMouseWheel = true;\n\t\t}\n\n\t\tif (consumeMouseWheel) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t}\n\t}\n\n\tprivate _onDidScroll(e: ScrollEvent): void {\n\t\tthis._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n\t\tthis._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n\n\t\tif (this._options.useShadows) {\n\t\t\tthis._shouldRender = true;\n\t\t}\n\n\t\tif (this._revealOnScroll) {\n\t\t\tthis._reveal();\n\t\t}\n\n\t\tif (!this._options.lazyRender) {\n\t\t\tthis._render();\n\t\t}\n\t}\n\n\t/**\n\t * Render / mutate the DOM now.\n\t * Should be used together with the ctor option `lazyRender`.\n\t */\n\tpublic renderNow(): void {\n\t\tif (!this._options.lazyRender) {\n\t\t\tthrow new Error('Please use `lazyRender` together with `renderNow`!');\n\t\t}\n\n\t\tthis._render();\n\t}\n\n\tprivate _render(): void {\n\t\tif (!this._shouldRender) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._shouldRender = false;\n\n\t\tthis._horizontalScrollbar.render();\n\t\tthis._verticalScrollbar.render();\n\n\t\tif (this._options.useShadows) {\n\t\t\tconst scrollState = this._scrollable.getCurrentScrollPosition();\n\t\t\tconst enableTop = scrollState.scrollTop > 0;\n\t\t\tconst enableLeft = scrollState.scrollLeft > 0;\n\n\t\t\tconst leftClassName = (enableLeft ? ' left' : '');\n\t\t\tconst topClassName = (enableTop ? ' top' : '');\n\t\t\tconst topLeftClassName = (enableLeft || enableTop ? ' top-left-corner' : '');\n\t\t\tthis._leftShadowDomNode!.setClassName(`shadow${leftClassName}`);\n\t\t\tthis._topShadowDomNode!.setClassName(`shadow${topClassName}`);\n\t\t\tthis._topLeftShadowDomNode!.setClassName(`shadow${topLeftClassName}${topClassName}${leftClassName}`);\n\t\t}\n\t}\n\n\t// -------------------- fade in / fade out --------------------\n\n\tprivate _onDragStart(): void {\n\t\tthis._isDragging = true;\n\t\tthis._reveal();\n\t}\n\n\tprivate _onDragEnd(): void {\n\t\tthis._isDragging = false;\n\t\tthis._hide();\n\t}\n\n\tprivate _onMouseOut(e: IMouseEvent): void {\n\t\tthis._mouseIsOver = false;\n\t\tthis._hide();\n\t}\n\n\tprivate _onMouseOver(e: IMouseEvent): void {\n\t\tthis._mouseIsOver = true;\n\t\tthis._reveal();\n\t}\n\n\tprivate _reveal(): void {\n\t\tthis._verticalScrollbar.beginReveal();\n\t\tthis._horizontalScrollbar.beginReveal();\n\t\tthis._scheduleHide();\n\t}\n\n\tprivate _hide(): void {\n\t\tif (!this._mouseIsOver && !this._isDragging) {\n\t\t\tthis._verticalScrollbar.beginHide();\n\t\t\tthis._horizontalScrollbar.beginHide();\n\t\t}\n\t}\n\n\tprivate _scheduleHide(): void {\n\t\tif (!this._mouseIsOver && !this._isDragging) {\n\t\t\tthis._hideTimeout.cancelAndSet(() => this._hide(), HIDE_TIMEOUT);\n\t\t}\n\t}\n}\n\nexport class ScrollableElement extends AbstractScrollableElement {\n\n\tconstructor(element: HTMLElement, options: ScrollableElementCreationOptions) {\n\t\toptions = options || {};\n\t\toptions.mouseWheelSmoothScroll = false;\n\t\tconst scrollable = new Scrollable(0, (callback) => dom.scheduleAtNextAnimationFrame(callback));\n\t\tsuper(element, options, scrollable);\n\t\tthis._register(scrollable);\n\t}\n\n\tpublic setScrollPosition(update: INewScrollPosition): void {\n\t\tthis._scrollable.setScrollPositionNow(update);\n\t}\n\n\tpublic getScrollPosition(): IScrollPosition {\n\t\treturn this._scrollable.getCurrentScrollPosition();\n\t}\n}\n\nexport class SmoothScrollableElement extends AbstractScrollableElement {\n\n\tconstructor(element: HTMLElement, options: ScrollableElementCreationOptions, scrollable: Scrollable) {\n\t\tsuper(element, options, scrollable);\n\t}\n\n\tpublic setScrollPosition(update: INewScrollPosition & { reuseAnimation?: boolean }): void {\n\t\tif (update.reuseAnimation) {\n\t\t\tthis._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\n\t\t} else {\n\t\t\tthis._scrollable.setScrollPositionNow(update);\n\t\t}\n\t}\n\n\tpublic getScrollPosition(): IScrollPosition {\n\t\treturn this._scrollable.getCurrentScrollPosition();\n\t}\n\n}\n\nexport class DomScrollableElement extends ScrollableElement {\n\n\tprivate _element: HTMLElement;\n\n\tconstructor(element: HTMLElement, options: ScrollableElementCreationOptions) {\n\t\tsuper(element, options);\n\t\tthis._element = element;\n\t\tthis.onScroll((e) => {\n\t\t\tif (e.scrollTopChanged) {\n\t\t\t\tthis._element.scrollTop = e.scrollTop;\n\t\t\t}\n\t\t\tif (e.scrollLeftChanged) {\n\t\t\t\tthis._element.scrollLeft = e.scrollLeft;\n\t\t\t}\n\t\t});\n\t\tthis.scanDomNode();\n\t}\n\n\tpublic scanDomNode(): void {\n\t\t// width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n\t\tthis.setScrollDimensions({\n\t\t\twidth: this._element.clientWidth,\n\t\t\tscrollWidth: this._element.scrollWidth,\n\t\t\theight: this._element.clientHeight,\n\t\t\tscrollHeight: this._element.scrollHeight\n\t\t});\n\t\tthis.setScrollPosition({\n\t\t\tscrollLeft: this._element.scrollLeft,\n\t\t\tscrollTop: this._element.scrollTop,\n\t\t});\n\t}\n}\n\nfunction resolveOptions(opts: ScrollableElementCreationOptions): ScrollableElementResolvedOptions {\n\tconst result: ScrollableElementResolvedOptions = {\n\t\tlazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\n\t\tclassName: (typeof opts.className !== 'undefined' ? opts.className : ''),\n\t\tuseShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\n\t\thandleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\n\t\tflipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\n\t\tconsumeMouseWheelIfScrollbarIsNeeded: (typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false),\n\t\talwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\n\t\tscrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\n\t\tmouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\n\t\tfastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\n\t\tscrollPredominantAxis: (typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true),\n\t\tmouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\n\t\tarrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\n\n\t\tlistenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\n\n\t\thorizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : ScrollbarVisibility.Auto),\n\t\thorizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\n\t\thorizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\n\t\thorizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\n\n\t\tvertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : ScrollbarVisibility.Auto),\n\t\tverticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\n\t\tverticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\n\t\tverticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0),\n\n\t\tscrollByPage: (typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false)\n\t};\n\n\tresult.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\n\tresult.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\n\n\t// Defaults are different on Macs\n\tif (platform.isMacintosh) {\n\t\tresult.className += ' mac';\n\t}\n\n\treturn result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { getOrDefault } from 'vs/base/common/objects';\nimport { IDisposable, dispose, Disposable, toDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { Gesture, EventType as TouchEventType, GestureEvent } from 'vs/base/browser/touch';\nimport { Event, Emitter } from 'vs/base/common/event';\nimport { domEvent } from 'vs/base/browser/event';\nimport { SmoothScrollableElement } from 'vs/base/browser/ui/scrollbar/scrollableElement';\nimport { ScrollEvent, ScrollbarVisibility, INewScrollDimensions, Scrollable } from 'vs/base/common/scrollable';\nimport { RangeMap, shift } from './rangeMap';\nimport { IListVirtualDelegate, IListRenderer, IListMouseEvent, IListTouchEvent, IListGestureEvent, IListDragEvent, IListDragAndDrop, ListDragOverEffect } from './list';\nimport { RowCache, IRow } from './rowCache';\nimport { ISpliceable } from 'vs/base/common/sequence';\nimport { memoize } from 'vs/base/common/decorators';\nimport { Range, IRange } from 'vs/base/common/range';\nimport { equals, distinct } from 'vs/base/common/arrays';\nimport { DataTransfers, StaticDND, IDragAndDropData } from 'vs/base/browser/dnd';\nimport { disposableTimeout, Delayer } from 'vs/base/common/async';\nimport { isFirefox } from 'vs/base/browser/browser';\nimport { IMouseWheelEvent } from 'vs/base/browser/mouseEvent';\nimport { $, animate, getContentHeight, getContentWidth, getTopLeftOffset, scheduleAtNextAnimationFrame } from 'vs/base/browser/dom';\n\ninterface IItem<T> {\n\treadonly id: string;\n\treadonly element: T;\n\treadonly templateId: string;\n\trow: IRow | null;\n\tsize: number;\n\twidth: number | undefined;\n\thasDynamicHeight: boolean;\n\tlastDynamicHeightWidth: number | undefined;\n\turi: string | undefined;\n\tdropTarget: boolean;\n\tdragStartDisposable: IDisposable;\n}\n\nexport interface IListViewDragAndDrop<T> extends IListDragAndDrop<T> {\n\tgetDragElements(element: T): T[];\n}\n\nexport interface IListViewAccessibilityProvider<T> {\n\tgetSetSize?(element: T, index: number, listLength: number): number;\n\tgetPosInSet?(element: T, index: number): number;\n\tgetRole?(element: T): string | undefined;\n\tisChecked?(element: T): boolean | undefined;\n}\n\nexport interface IListViewOptionsUpdate {\n\treadonly additionalScrollHeight?: number;\n\treadonly smoothScrolling?: boolean;\n\treadonly horizontalScrolling?: boolean;\n}\n\nexport interface IListViewOptions<T> extends IListViewOptionsUpdate {\n\treadonly dnd?: IListViewDragAndDrop<T>;\n\treadonly useShadows?: boolean;\n\treadonly verticalScrollMode?: ScrollbarVisibility;\n\treadonly setRowLineHeight?: boolean;\n\treadonly setRowHeight?: boolean;\n\treadonly supportDynamicHeights?: boolean;\n\treadonly mouseSupport?: boolean;\n\treadonly accessibilityProvider?: IListViewAccessibilityProvider<T>;\n\treadonly transformOptimization?: boolean;\n\treadonly alwaysConsumeMouseWheel?: boolean;\n}\n\nconst DefaultOptions = {\n\tuseShadows: true,\n\tverticalScrollMode: ScrollbarVisibility.Auto,\n\tsetRowLineHeight: true,\n\tsetRowHeight: true,\n\tsupportDynamicHeights: false,\n\tdnd: {\n\t\tgetDragElements<T>(e: T) { return [e]; },\n\t\tgetDragURI() { return null; },\n\t\tonDragStart(): void { },\n\t\tonDragOver() { return false; },\n\t\tdrop() { }\n\t},\n\thorizontalScrolling: false,\n\ttransformOptimization: true,\n\talwaysConsumeMouseWheel: true,\n};\n\nexport class ElementsDragAndDropData<T, TContext = void> implements IDragAndDropData {\n\n\treadonly elements: T[];\n\n\tprivate _context: TContext | undefined;\n\tpublic get context(): TContext | undefined {\n\t\treturn this._context;\n\t}\n\tpublic set context(value: TContext | undefined) {\n\t\tthis._context = value;\n\t}\n\n\tconstructor(elements: T[]) {\n\t\tthis.elements = elements;\n\t}\n\n\tupdate(): void { }\n\n\tgetData(): T[] {\n\t\treturn this.elements;\n\t}\n}\n\nexport class ExternalElementsDragAndDropData<T> implements IDragAndDropData {\n\n\treadonly elements: T[];\n\n\tconstructor(elements: T[]) {\n\t\tthis.elements = elements;\n\t}\n\n\tupdate(): void { }\n\n\tgetData(): T[] {\n\t\treturn this.elements;\n\t}\n}\n\nexport class NativeDragAndDropData implements IDragAndDropData {\n\n\treadonly types: any[];\n\treadonly files: any[];\n\n\tconstructor() {\n\t\tthis.types = [];\n\t\tthis.files = [];\n\t}\n\n\tupdate(dataTransfer: DataTransfer): void {\n\t\tif (dataTransfer.types) {\n\t\t\tthis.types.splice(0, this.types.length, ...dataTransfer.types);\n\t\t}\n\n\t\tif (dataTransfer.files) {\n\t\t\tthis.files.splice(0, this.files.length);\n\n\t\t\tfor (let i = 0; i < dataTransfer.files.length; i++) {\n\t\t\t\tconst file = dataTransfer.files.item(i);\n\n\t\t\t\tif (file && (file.size || file.type)) {\n\t\t\t\t\tthis.files.push(file);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgetData(): any {\n\t\treturn {\n\t\t\ttypes: this.types,\n\t\t\tfiles: this.files\n\t\t};\n\t}\n}\n\nfunction equalsDragFeedback(f1: number[] | undefined, f2: number[] | undefined): boolean {\n\tif (Array.isArray(f1) && Array.isArray(f2)) {\n\t\treturn equals(f1, f2!);\n\t}\n\n\treturn f1 === f2;\n}\n\nclass ListViewAccessibilityProvider<T> implements Required<IListViewAccessibilityProvider<T>> {\n\n\treadonly getSetSize: (element: any, index: number, listLength: number) => number;\n\treadonly getPosInSet: (element: any, index: number) => number;\n\treadonly getRole: (element: T) => string | undefined;\n\treadonly isChecked: (element: T) => boolean | undefined;\n\n\tconstructor(accessibilityProvider?: IListViewAccessibilityProvider<T>) {\n\t\tif (accessibilityProvider?.getSetSize) {\n\t\t\tthis.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n\t\t} else {\n\t\t\tthis.getSetSize = (e, i, l) => l;\n\t\t}\n\n\t\tif (accessibilityProvider?.getPosInSet) {\n\t\t\tthis.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n\t\t} else {\n\t\t\tthis.getPosInSet = (e, i) => i + 1;\n\t\t}\n\n\t\tif (accessibilityProvider?.getRole) {\n\t\t\tthis.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n\t\t} else {\n\t\t\tthis.getRole = _ => 'listitem';\n\t\t}\n\n\t\tif (accessibilityProvider?.isChecked) {\n\t\t\tthis.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n\t\t} else {\n\t\t\tthis.isChecked = _ => undefined;\n\t\t}\n\t}\n}\n\nexport class ListView<T> implements ISpliceable<T>, IDisposable {\n\n\tprivate static InstanceCount = 0;\n\treadonly domId = `list_id_${++ListView.InstanceCount}`;\n\n\treadonly domNode: HTMLElement;\n\n\tprivate items: IItem<T>[];\n\tprivate itemId: number;\n\tprivate rangeMap: RangeMap;\n\tprivate cache: RowCache<T>;\n\tprivate renderers = new Map<string, IListRenderer<any /* TODO@joao */, any>>();\n\tprivate lastRenderTop: number;\n\tprivate lastRenderHeight: number;\n\tprivate renderWidth = 0;\n\tprivate rowsContainer: HTMLElement;\n\tprivate scrollable: Scrollable;\n\tprivate scrollableElement: SmoothScrollableElement;\n\tprivate _scrollHeight: number = 0;\n\tprivate scrollableElementUpdateDisposable: IDisposable | null = null;\n\tprivate scrollableElementWidthDelayer = new Delayer<void>(50);\n\tprivate splicing = false;\n\tprivate dragOverAnimationDisposable: IDisposable | undefined;\n\tprivate dragOverAnimationStopDisposable: IDisposable = Disposable.None;\n\tprivate dragOverMouseY: number = 0;\n\tprivate setRowLineHeight: boolean;\n\tprivate setRowHeight: boolean;\n\tprivate supportDynamicHeights: boolean;\n\tprivate additionalScrollHeight: number;\n\tprivate accessibilityProvider: ListViewAccessibilityProvider<T>;\n\tprivate scrollWidth: number | undefined;\n\n\tprivate dnd: IListViewDragAndDrop<T>;\n\tprivate canDrop: boolean = false;\n\tprivate currentDragData: IDragAndDropData | undefined;\n\tprivate currentDragFeedback: number[] | undefined;\n\tprivate currentDragFeedbackDisposable: IDisposable = Disposable.None;\n\tprivate onDragLeaveTimeout: IDisposable = Disposable.None;\n\n\tprivate readonly disposables: DisposableStore = new DisposableStore();\n\n\tprivate readonly _onDidChangeContentHeight = new Emitter<number>();\n\treadonly onDidChangeContentHeight: Event<number> = Event.latch(this._onDidChangeContentHeight.event);\n\tget contentHeight(): number { return this.rangeMap.size; }\n\n\tget onDidScroll(): Event<ScrollEvent> { return this.scrollableElement.onScroll; }\n\tget onWillScroll(): Event<ScrollEvent> { return this.scrollableElement.onWillScroll; }\n\tget containerDomNode(): HTMLElement { return this.rowsContainer; }\n\n\tprivate _horizontalScrolling: boolean = false;\n\tprivate get horizontalScrolling(): boolean { return this._horizontalScrolling; }\n\tprivate set horizontalScrolling(value: boolean) {\n\t\tif (value === this._horizontalScrolling) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (value && this.supportDynamicHeights) {\n\t\t\tthrow new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n\t\t}\n\n\t\tthis._horizontalScrolling = value;\n\t\tthis.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n\n\t\tif (this._horizontalScrolling) {\n\t\t\tfor (const item of this.items) {\n\t\t\t\tthis.measureItemWidth(item);\n\t\t\t}\n\n\t\t\tthis.updateScrollWidth();\n\t\t\tthis.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n\t\t\tthis.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n\t\t} else {\n\t\t\tthis.scrollableElementWidthDelayer.cancel();\n\t\t\tthis.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n\t\t\tthis.rowsContainer.style.width = '';\n\t\t}\n\t}\n\n\tconstructor(\n\t\tcontainer: HTMLElement,\n\t\tprivate virtualDelegate: IListVirtualDelegate<T>,\n\t\trenderers: IListRenderer<any /* TODO@joao */, any>[],\n\t\toptions: IListViewOptions<T> = DefaultOptions as IListViewOptions<T>\n\t) {\n\t\tif (options.horizontalScrolling && options.supportDynamicHeights) {\n\t\t\tthrow new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n\t\t}\n\n\t\tthis.items = [];\n\t\tthis.itemId = 0;\n\t\tthis.rangeMap = new RangeMap();\n\n\t\tfor (const renderer of renderers) {\n\t\t\tthis.renderers.set(renderer.templateId, renderer);\n\t\t}\n\n\t\tthis.cache = this.disposables.add(new RowCache(this.renderers));\n\n\t\tthis.lastRenderTop = 0;\n\t\tthis.lastRenderHeight = 0;\n\n\t\tthis.domNode = document.createElement('div');\n\t\tthis.domNode.className = 'monaco-list';\n\n\t\tthis.domNode.classList.add(this.domId);\n\t\tthis.domNode.tabIndex = 0;\n\n\t\tthis.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n\n\t\tthis._horizontalScrolling = getOrDefault(options, o => o.horizontalScrolling, DefaultOptions.horizontalScrolling);\n\t\tthis.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n\n\t\tthis.additionalScrollHeight = typeof options.additionalScrollHeight === 'undefined' ? 0 : options.additionalScrollHeight;\n\n\t\tthis.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n\n\t\tthis.rowsContainer = document.createElement('div');\n\t\tthis.rowsContainer.className = 'monaco-list-rows';\n\n\t\tconst transformOptimization = getOrDefault(options, o => o.transformOptimization, DefaultOptions.transformOptimization);\n\t\tif (transformOptimization) {\n\t\t\tthis.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n\t\t}\n\n\t\tthis.disposables.add(Gesture.addTarget(this.rowsContainer));\n\n\t\tthis.scrollable = new Scrollable(getOrDefault(options, o => o.smoothScrolling, false) ? 125 : 0, cb => scheduleAtNextAnimationFrame(cb));\n\t\tthis.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n\t\t\talwaysConsumeMouseWheel: getOrDefault(options, o => o.alwaysConsumeMouseWheel, DefaultOptions.alwaysConsumeMouseWheel),\n\t\t\thorizontal: ScrollbarVisibility.Auto,\n\t\t\tvertical: getOrDefault(options, o => o.verticalScrollMode, DefaultOptions.verticalScrollMode),\n\t\t\tuseShadows: getOrDefault(options, o => o.useShadows, DefaultOptions.useShadows),\n\t\t}, this.scrollable));\n\n\t\tthis.domNode.appendChild(this.scrollableElement.getDomNode());\n\t\tcontainer.appendChild(this.domNode);\n\n\t\tthis.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n\t\tdomEvent(this.rowsContainer, TouchEventType.Change)(e => this.onTouchChange(e as GestureEvent), this, this.disposables);\n\n\t\t// Prevent the monaco-scrollable-element from scrolling\n\t\t// https://github.com/microsoft/vscode/issues/44181\n\t\tdomEvent(this.scrollableElement.getDomNode(), 'scroll')\n\t\t\t(e => (e.target as HTMLElement).scrollTop = 0, null, this.disposables);\n\n\t\tEvent.map(domEvent(this.domNode, 'dragover'), e => this.toDragEvent(e))(this.onDragOver, this, this.disposables);\n\t\tEvent.map(domEvent(this.domNode, 'drop'), e => this.toDragEvent(e))(this.onDrop, this, this.disposables);\n\t\tdomEvent(this.domNode, 'dragleave')(this.onDragLeave, this, this.disposables);\n\t\tdomEvent(window, 'dragend')(this.onDragEnd, this, this.disposables);\n\n\t\tthis.setRowLineHeight = getOrDefault(options, o => o.setRowLineHeight, DefaultOptions.setRowLineHeight);\n\t\tthis.setRowHeight = getOrDefault(options, o => o.setRowHeight, DefaultOptions.setRowHeight);\n\t\tthis.supportDynamicHeights = getOrDefault(options, o => o.supportDynamicHeights, DefaultOptions.supportDynamicHeights);\n\t\tthis.dnd = getOrDefault<IListViewOptions<T>, IListViewDragAndDrop<T>>(options, o => o.dnd, DefaultOptions.dnd);\n\n\t\tthis.layout();\n\t}\n\n\tupdateOptions(options: IListViewOptionsUpdate) {\n\t\tif (options.additionalScrollHeight !== undefined) {\n\t\t\tthis.additionalScrollHeight = options.additionalScrollHeight;\n\t\t\tthis.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n\t\t}\n\n\t\tif (options.smoothScrolling !== undefined) {\n\t\t\tthis.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n\t\t}\n\n\t\tif (options.horizontalScrolling !== undefined) {\n\t\t\tthis.horizontalScrolling = options.horizontalScrolling;\n\t\t}\n\t}\n\n\ttriggerScrollFromMouseWheelEvent(browserEvent: IMouseWheelEvent) {\n\t\tthis.scrollableElement.triggerScrollFromMouseWheelEvent(browserEvent);\n\t}\n\n\tupdateElementHeight(index: number, size: number, anchorIndex: number | null): void {\n\t\tif (index < 0 || index >= this.items.length) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.items[index].size === size) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst lastRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n\n\t\tlet heightDiff = 0;\n\n\t\tif (index < lastRenderRange.start) {\n\t\t\t// do not scroll the viewport if resized element is out of viewport\n\t\t\theightDiff = size - this.items[index].size;\n\t\t} else {\n\t\t\tif (anchorIndex !== null && anchorIndex > index && anchorIndex <= lastRenderRange.end) {\n\t\t\t\t// anchor in viewport\n\t\t\t\t// resized elemnet in viewport and above the anchor\n\t\t\t\theightDiff = size - this.items[index].size;\n\t\t\t} else {\n\t\t\t\theightDiff = 0;\n\t\t\t}\n\t\t}\n\n\t\tthis.rangeMap.splice(index, 1, [{ size: size }]);\n\t\tthis.items[index].size = size;\n\n\t\tthis.render(lastRenderRange, Math.max(0, this.lastRenderTop + heightDiff), this.lastRenderHeight, undefined, undefined, true);\n\t\tthis.setScrollTop(this.lastRenderTop);\n\n\t\tthis.eventuallyUpdateScrollDimensions();\n\n\t\tif (this.supportDynamicHeights) {\n\t\t\tthis._rerender(this.lastRenderTop, this.lastRenderHeight);\n\t\t}\n\t}\n\n\tsplice(start: number, deleteCount: number, elements: T[] = []): T[] {\n\t\tif (this.splicing) {\n\t\t\tthrow new Error('Can\\'t run recursive splices.');\n\t\t}\n\n\t\tthis.splicing = true;\n\n\t\ttry {\n\t\t\treturn this._splice(start, deleteCount, elements);\n\t\t} finally {\n\t\t\tthis.splicing = false;\n\t\t\tthis._onDidChangeContentHeight.fire(this.contentHeight);\n\t\t}\n\t}\n\n\tprivate _splice(start: number, deleteCount: number, elements: T[] = []): T[] {\n\t\tconst previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n\t\tconst deleteRange = { start, end: start + deleteCount };\n\t\tconst removeRange = Range.intersect(previousRenderRange, deleteRange);\n\n\t\t// try to reuse rows, avoid removing them from DOM\n\t\tconst rowsToDispose = new Map<string, IRow[]>();\n\t\tfor (let i = removeRange.start; i < removeRange.end; i++) {\n\t\t\tconst item = this.items[i];\n\t\t\titem.dragStartDisposable.dispose();\n\n\t\t\tif (item.row) {\n\t\t\t\tlet rows = rowsToDispose.get(item.templateId);\n\n\t\t\t\tif (!rows) {\n\t\t\t\t\trows = [];\n\t\t\t\t\trowsToDispose.set(item.templateId, rows);\n\t\t\t\t}\n\n\t\t\t\tconst renderer = this.renderers.get(item.templateId);\n\n\t\t\t\tif (renderer && renderer.disposeElement) {\n\t\t\t\t\trenderer.disposeElement(item.element, i, item.row.templateData, item.size);\n\t\t\t\t}\n\n\t\t\t\trows.push(item.row);\n\t\t\t}\n\n\t\t\titem.row = null;\n\t\t}\n\n\t\tconst previousRestRange: IRange = { start: start + deleteCount, end: this.items.length };\n\t\tconst previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n\t\tconst previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n\n\t\tconst inserted = elements.map<IItem<T>>(element => ({\n\t\t\tid: String(this.itemId++),\n\t\t\telement,\n\t\t\ttemplateId: this.virtualDelegate.getTemplateId(element),\n\t\t\tsize: this.virtualDelegate.getHeight(element),\n\t\t\twidth: undefined,\n\t\t\thasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n\t\t\tlastDynamicHeightWidth: undefined,\n\t\t\trow: null,\n\t\t\turi: undefined,\n\t\t\tdropTarget: false,\n\t\t\tdragStartDisposable: Disposable.None\n\t\t}));\n\n\t\tlet deleted: IItem<T>[];\n\n\t\t// TODO@joao: improve this optimization to catch even more cases\n\t\tif (start === 0 && deleteCount >= this.items.length) {\n\t\t\tthis.rangeMap = new RangeMap();\n\t\t\tthis.rangeMap.splice(0, 0, inserted);\n\t\t\tdeleted = this.items;\n\t\t\tthis.items = inserted;\n\t\t} else {\n\t\t\tthis.rangeMap.splice(start, deleteCount, inserted);\n\t\t\tdeleted = this.items.splice(start, deleteCount, ...inserted);\n\t\t}\n\n\t\tconst delta = elements.length - deleteCount;\n\t\tconst renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n\t\tconst renderedRestRange = shift(previousRenderedRestRange, delta);\n\t\tconst updateRange = Range.intersect(renderRange, renderedRestRange);\n\n\t\tfor (let i = updateRange.start; i < updateRange.end; i++) {\n\t\t\tthis.updateItemInDOM(this.items[i], i);\n\t\t}\n\n\t\tconst removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n\n\t\tfor (const range of removeRanges) {\n\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\tthis.removeItemFromDOM(i);\n\t\t\t}\n\t\t}\n\n\t\tconst unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n\t\tconst elementsRange = { start, end: start + elements.length };\n\t\tconst insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r));\n\t\tconst beforeElement = this.getNextToLastElement(insertRanges);\n\n\t\tfor (const range of insertRanges) {\n\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\tconst item = this.items[i];\n\t\t\t\tconst rows = rowsToDispose.get(item.templateId);\n\t\t\t\tconst row = rows?.pop();\n\t\t\t\tthis.insertItemInDOM(i, beforeElement, row);\n\t\t\t}\n\t\t}\n\n\t\tfor (const rows of rowsToDispose.values()) {\n\t\t\tfor (const row of rows) {\n\t\t\t\tthis.cache.release(row);\n\t\t\t}\n\t\t}\n\n\t\tthis.eventuallyUpdateScrollDimensions();\n\n\t\tif (this.supportDynamicHeights) {\n\t\t\tthis._rerender(this.scrollTop, this.renderHeight);\n\t\t}\n\n\t\treturn deleted.map(i => i.element);\n\t}\n\n\tprivate eventuallyUpdateScrollDimensions(): void {\n\t\tthis._scrollHeight = this.contentHeight;\n\t\tthis.rowsContainer.style.height = `${this._scrollHeight}px`;\n\n\t\tif (!this.scrollableElementUpdateDisposable) {\n\t\t\tthis.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(() => {\n\t\t\t\tthis.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n\t\t\t\tthis.updateScrollWidth();\n\t\t\t\tthis.scrollableElementUpdateDisposable = null;\n\t\t\t});\n\t\t}\n\t}\n\n\tprivate eventuallyUpdateScrollWidth(): void {\n\t\tif (!this.horizontalScrolling) {\n\t\t\tthis.scrollableElementWidthDelayer.cancel();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n\t}\n\n\tprivate updateScrollWidth(): void {\n\t\tif (!this.horizontalScrolling) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet scrollWidth = 0;\n\n\t\tfor (const item of this.items) {\n\t\t\tif (typeof item.width !== 'undefined') {\n\t\t\t\tscrollWidth = Math.max(scrollWidth, item.width);\n\t\t\t}\n\t\t}\n\n\t\tthis.scrollWidth = scrollWidth;\n\t\tthis.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n\t}\n\n\tupdateWidth(index: number): void {\n\t\tif (!this.horizontalScrolling || typeof this.scrollWidth === 'undefined') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = this.items[index];\n\t\tthis.measureItemWidth(item);\n\n\t\tif (typeof item.width !== 'undefined' && item.width > this.scrollWidth) {\n\t\t\tthis.scrollWidth = item.width;\n\t\t\tthis.scrollableElement.setScrollDimensions({ scrollWidth: this.scrollWidth + 10 });\n\t\t}\n\t}\n\n\trerender(): void {\n\t\tif (!this.supportDynamicHeights) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const item of this.items) {\n\t\t\titem.lastDynamicHeightWidth = undefined;\n\t\t}\n\n\t\tthis._rerender(this.lastRenderTop, this.lastRenderHeight);\n\t}\n\n\tget length(): number {\n\t\treturn this.items.length;\n\t}\n\n\tget renderHeight(): number {\n\t\tconst scrollDimensions = this.scrollableElement.getScrollDimensions();\n\t\treturn scrollDimensions.height;\n\t}\n\n\tget firstVisibleIndex(): number {\n\t\tconst range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n\t\tconst firstElTop = this.rangeMap.positionAt(range.start);\n\t\tconst nextElTop = this.rangeMap.positionAt(range.start + 1);\n\t\tif (nextElTop !== -1) {\n\t\t\tconst firstElMidpoint = (nextElTop - firstElTop) / 2 + firstElTop;\n\t\t\tif (firstElMidpoint < this.scrollTop) {\n\t\t\t\treturn range.start + 1;\n\t\t\t}\n\t\t}\n\n\t\treturn range.start;\n\t}\n\n\tget lastVisibleIndex(): number {\n\t\tconst range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n\t\treturn range.end - 1;\n\t}\n\n\telement(index: number): T {\n\t\treturn this.items[index].element;\n\t}\n\n\tindexOf(element: T): number {\n\t\treturn this.items.findIndex(item => item.element === element);\n\t}\n\n\tdomElement(index: number): HTMLElement | null {\n\t\tconst row = this.items[index].row;\n\t\treturn row && row.domNode;\n\t}\n\n\telementHeight(index: number): number {\n\t\treturn this.items[index].size;\n\t}\n\n\telementTop(index: number): number {\n\t\treturn this.rangeMap.positionAt(index);\n\t}\n\n\tindexAt(position: number): number {\n\t\treturn this.rangeMap.indexAt(position);\n\t}\n\n\tindexAfter(position: number): number {\n\t\treturn this.rangeMap.indexAfter(position);\n\t}\n\n\tlayout(height?: number, width?: number): void {\n\t\tlet scrollDimensions: INewScrollDimensions = {\n\t\t\theight: typeof height === 'number' ? height : getContentHeight(this.domNode)\n\t\t};\n\n\t\tif (this.scrollableElementUpdateDisposable) {\n\t\t\tthis.scrollableElementUpdateDisposable.dispose();\n\t\t\tthis.scrollableElementUpdateDisposable = null;\n\t\t\tscrollDimensions.scrollHeight = this.scrollHeight;\n\t\t}\n\n\t\tthis.scrollableElement.setScrollDimensions(scrollDimensions);\n\n\t\tif (typeof width !== 'undefined') {\n\t\t\tthis.renderWidth = width;\n\n\t\t\tif (this.supportDynamicHeights) {\n\t\t\t\tthis._rerender(this.scrollTop, this.renderHeight);\n\t\t\t}\n\t\t}\n\n\t\tif (this.horizontalScrolling) {\n\t\t\tthis.scrollableElement.setScrollDimensions({\n\t\t\t\twidth: typeof width === 'number' ? width : getContentWidth(this.domNode)\n\t\t\t});\n\t\t}\n\t}\n\n\t// Render\n\n\tprivate render(previousRenderRange: IRange, renderTop: number, renderHeight: number, renderLeft: number | undefined, scrollWidth: number | undefined, updateItemsInDOM: boolean = false): void {\n\t\tconst renderRange = this.getRenderRange(renderTop, renderHeight);\n\n\t\tconst rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange);\n\t\tconst rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n\t\tconst beforeElement = this.getNextToLastElement(rangesToInsert);\n\n\t\tif (updateItemsInDOM) {\n\t\t\tconst rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n\n\t\t\tfor (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n\t\t\t\tthis.updateItemInDOM(this.items[i], i);\n\t\t\t}\n\t\t}\n\n\t\tfor (const range of rangesToInsert) {\n\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\tthis.insertItemInDOM(i, beforeElement);\n\t\t\t}\n\t\t}\n\n\t\tfor (const range of rangesToRemove) {\n\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\tthis.removeItemFromDOM(i);\n\t\t\t}\n\t\t}\n\n\t\tif (renderLeft !== undefined) {\n\t\t\tthis.rowsContainer.style.left = `-${renderLeft}px`;\n\t\t}\n\n\t\tthis.rowsContainer.style.top = `-${renderTop}px`;\n\n\t\tif (this.horizontalScrolling && scrollWidth !== undefined) {\n\t\t\tthis.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n\t\t}\n\n\t\tthis.lastRenderTop = renderTop;\n\t\tthis.lastRenderHeight = renderHeight;\n\t}\n\n\t// DOM operations\n\n\tprivate insertItemInDOM(index: number, beforeElement: HTMLElement | null, row?: IRow): void {\n\t\tconst item = this.items[index];\n\n\t\tif (!item.row) {\n\t\t\titem.row = row ?? this.cache.alloc(item.templateId);\n\t\t}\n\n\t\tconst role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n\t\titem.row.domNode.setAttribute('role', role);\n\n\t\tconst checked = this.accessibilityProvider.isChecked(item.element);\n\t\tif (typeof checked !== 'undefined') {\n\t\t\titem.row.domNode.setAttribute('aria-checked', String(!!checked));\n\t\t}\n\n\t\tif (!item.row.domNode.parentElement) {\n\t\t\tif (beforeElement) {\n\t\t\t\tthis.rowsContainer.insertBefore(item.row.domNode, beforeElement);\n\t\t\t} else {\n\t\t\t\tthis.rowsContainer.appendChild(item.row.domNode);\n\t\t\t}\n\t\t}\n\n\t\tthis.updateItemInDOM(item, index);\n\n\t\tconst renderer = this.renderers.get(item.templateId);\n\n\t\tif (!renderer) {\n\t\t\tthrow new Error(`No renderer found for template id ${item.templateId}`);\n\t\t}\n\n\t\tif (renderer) {\n\t\t\trenderer.renderElement(item.element, index, item.row.templateData, item.size);\n\t\t}\n\n\t\tconst uri = this.dnd.getDragURI(item.element);\n\t\titem.dragStartDisposable.dispose();\n\t\titem.row.domNode.draggable = !!uri;\n\n\t\tif (uri) {\n\t\t\tconst onDragStart = domEvent(item.row.domNode, 'dragstart');\n\t\t\titem.dragStartDisposable = onDragStart(event => this.onDragStart(item.element, uri, event));\n\t\t}\n\n\t\tif (this.horizontalScrolling) {\n\t\t\tthis.measureItemWidth(item);\n\t\t\tthis.eventuallyUpdateScrollWidth();\n\t\t}\n\t}\n\n\tprivate measureItemWidth(item: IItem<T>): void {\n\t\tif (!item.row || !item.row.domNode) {\n\t\t\treturn;\n\t\t}\n\n\t\titem.row.domNode.style.width = isFirefox ? '-moz-fit-content' : 'fit-content';\n\t\titem.width = getContentWidth(item.row.domNode);\n\t\tconst style = window.getComputedStyle(item.row.domNode);\n\n\t\tif (style.paddingLeft) {\n\t\t\titem.width += parseFloat(style.paddingLeft);\n\t\t}\n\n\t\tif (style.paddingRight) {\n\t\t\titem.width += parseFloat(style.paddingRight);\n\t\t}\n\n\t\titem.row.domNode.style.width = '';\n\t}\n\n\tprivate updateItemInDOM(item: IItem<T>, index: number): void {\n\t\titem.row!.domNode.style.top = `${this.elementTop(index)}px`;\n\n\t\tif (this.setRowHeight) {\n\t\t\titem.row!.domNode.style.height = `${item.size}px`;\n\t\t}\n\n\t\tif (this.setRowLineHeight) {\n\t\t\titem.row!.domNode.style.lineHeight = `${item.size}px`;\n\t\t}\n\n\t\titem.row!.domNode.setAttribute('data-index', `${index}`);\n\t\titem.row!.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n\t\titem.row!.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n\t\titem.row!.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n\t\titem.row!.domNode.setAttribute('id', this.getElementDomId(index));\n\n\t\titem.row!.domNode.classList.toggle('drop-target', item.dropTarget);\n\t}\n\n\tprivate removeItemFromDOM(index: number): void {\n\t\tconst item = this.items[index];\n\t\titem.dragStartDisposable.dispose();\n\n\t\tif (item.row) {\n\t\t\tconst renderer = this.renderers.get(item.templateId);\n\n\t\t\tif (renderer && renderer.disposeElement) {\n\t\t\t\trenderer.disposeElement(item.element, index, item.row.templateData, item.size);\n\t\t\t}\n\n\t\t\tthis.cache.release(item.row);\n\t\t\titem.row = null;\n\t\t}\n\n\t\tif (this.horizontalScrolling) {\n\t\t\tthis.eventuallyUpdateScrollWidth();\n\t\t}\n\t}\n\n\tgetScrollTop(): number {\n\t\tconst scrollPosition = this.scrollableElement.getScrollPosition();\n\t\treturn scrollPosition.scrollTop;\n\t}\n\n\tsetScrollTop(scrollTop: number, reuseAnimation?: boolean): void {\n\t\tif (this.scrollableElementUpdateDisposable) {\n\t\t\tthis.scrollableElementUpdateDisposable.dispose();\n\t\t\tthis.scrollableElementUpdateDisposable = null;\n\t\t\tthis.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n\t\t}\n\n\t\tthis.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n\t}\n\n\tgetScrollLeft(): number {\n\t\tconst scrollPosition = this.scrollableElement.getScrollPosition();\n\t\treturn scrollPosition.scrollLeft;\n\t}\n\n\tsetScrollLeft(scrollLeft: number): void {\n\t\tif (this.scrollableElementUpdateDisposable) {\n\t\t\tthis.scrollableElementUpdateDisposable.dispose();\n\t\t\tthis.scrollableElementUpdateDisposable = null;\n\t\t\tthis.scrollableElement.setScrollDimensions({ scrollWidth: this.scrollWidth });\n\t\t}\n\n\t\tthis.scrollableElement.setScrollPosition({ scrollLeft });\n\t}\n\n\n\tget scrollTop(): number {\n\t\treturn this.getScrollTop();\n\t}\n\n\tset scrollTop(scrollTop: number) {\n\t\tthis.setScrollTop(scrollTop);\n\t}\n\n\tget scrollHeight(): number {\n\t\treturn this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.additionalScrollHeight;\n\t}\n\n\t// Events\n\n\t@memoize get onMouseClick(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'click'), e => this.toMouseEvent(e)); }\n\t@memoize get onMouseDblClick(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'dblclick'), e => this.toMouseEvent(e)); }\n\t@memoize get onMouseMiddleClick(): Event<IListMouseEvent<T>> { return Event.filter(Event.map(domEvent(this.domNode, 'auxclick'), e => this.toMouseEvent(e as MouseEvent)), e => e.browserEvent.button === 1); }\n\t@memoize get onMouseUp(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'mouseup'), e => this.toMouseEvent(e)); }\n\t@memoize get onMouseDown(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'mousedown'), e => this.toMouseEvent(e)); }\n\t@memoize get onMouseOver(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'mouseover'), e => this.toMouseEvent(e)); }\n\t@memoize get onMouseMove(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'mousemove'), e => this.toMouseEvent(e)); }\n\t@memoize get onMouseOut(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'mouseout'), e => this.toMouseEvent(e)); }\n\t@memoize get onContextMenu(): Event<IListMouseEvent<T>> { return Event.map(domEvent(this.domNode, 'contextmenu'), e => this.toMouseEvent(e)); }\n\t@memoize get onTouchStart(): Event<IListTouchEvent<T>> { return Event.map(domEvent(this.domNode, 'touchstart'), e => this.toTouchEvent(e)); }\n\t@memoize get onTap(): Event<IListGestureEvent<T>> { return Event.map(domEvent(this.rowsContainer, TouchEventType.Tap), e => this.toGestureEvent(e as GestureEvent)); }\n\n\tprivate toMouseEvent(browserEvent: MouseEvent): IListMouseEvent<T> {\n\t\tconst index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n\t\tconst item = typeof index === 'undefined' ? undefined : this.items[index];\n\t\tconst element = item && item.element;\n\t\treturn { browserEvent, index, element };\n\t}\n\n\tprivate toTouchEvent(browserEvent: TouchEvent): IListTouchEvent<T> {\n\t\tconst index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n\t\tconst item = typeof index === 'undefined' ? undefined : this.items[index];\n\t\tconst element = item && item.element;\n\t\treturn { browserEvent, index, element };\n\t}\n\n\tprivate toGestureEvent(browserEvent: GestureEvent): IListGestureEvent<T> {\n\t\tconst index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n\t\tconst item = typeof index === 'undefined' ? undefined : this.items[index];\n\t\tconst element = item && item.element;\n\t\treturn { browserEvent, index, element };\n\t}\n\n\tprivate toDragEvent(browserEvent: DragEvent): IListDragEvent<T> {\n\t\tconst index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n\t\tconst item = typeof index === 'undefined' ? undefined : this.items[index];\n\t\tconst element = item && item.element;\n\t\treturn { browserEvent, index, element };\n\t}\n\n\tprivate onScroll(e: ScrollEvent): void {\n\t\ttry {\n\t\t\tconst previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n\t\t\tthis.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n\n\t\t\tif (this.supportDynamicHeights) {\n\t\t\t\tthis._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n\t\t\t}\n\t\t} catch (err) {\n\t\t\tconsole.error('Got bad scroll event:', e);\n\t\t\tthrow err;\n\t\t}\n\t}\n\n\tprivate onTouchChange(event: GestureEvent): void {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tthis.scrollTop -= event.translationY;\n\t}\n\n\t// DND\n\n\tprivate onDragStart(element: T, uri: string, event: DragEvent): void {\n\t\tif (!event.dataTransfer) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst elements = this.dnd.getDragElements(element);\n\n\t\tevent.dataTransfer.effectAllowed = 'copyMove';\n\t\tevent.dataTransfer.setData(DataTransfers.RESOURCES, JSON.stringify([uri]));\n\n\t\tif (event.dataTransfer.setDragImage) {\n\t\t\tlet label: string | undefined;\n\n\t\t\tif (this.dnd.getDragLabel) {\n\t\t\t\tlabel = this.dnd.getDragLabel(elements, event);\n\t\t\t}\n\n\t\t\tif (typeof label === 'undefined') {\n\t\t\t\tlabel = String(elements.length);\n\t\t\t}\n\n\t\t\tconst dragImage = $('.monaco-drag-image');\n\t\t\tdragImage.textContent = label;\n\t\t\tdocument.body.appendChild(dragImage);\n\t\t\tevent.dataTransfer.setDragImage(dragImage, -10, -10);\n\t\t\tsetTimeout(() => document.body.removeChild(dragImage), 0);\n\t\t}\n\n\t\tthis.currentDragData = new ElementsDragAndDropData(elements);\n\t\tStaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n\n\t\tif (this.dnd.onDragStart) {\n\t\t\tthis.dnd.onDragStart(this.currentDragData, event);\n\t\t}\n\t}\n\n\tprivate onDragOver(event: IListDragEvent<T>): boolean {\n\t\tevent.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n\n\t\tthis.onDragLeaveTimeout.dispose();\n\n\t\tif (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.setupDragAndDropScrollTopAnimation(event.browserEvent);\n\n\t\tif (!event.browserEvent.dataTransfer) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// Drag over from outside\n\t\tif (!this.currentDragData) {\n\t\t\tif (StaticDND.CurrentDragAndDropData) {\n\t\t\t\t// Drag over from another list\n\t\t\t\tthis.currentDragData = StaticDND.CurrentDragAndDropData;\n\n\t\t\t} else {\n\t\t\t\t// Drag over from the desktop\n\t\t\t\tif (!event.browserEvent.dataTransfer.types) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tthis.currentDragData = new NativeDragAndDropData();\n\t\t\t}\n\t\t}\n\n\t\tconst result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.browserEvent);\n\t\tthis.canDrop = typeof result === 'boolean' ? result : result.accept;\n\n\t\tif (!this.canDrop) {\n\t\t\tthis.currentDragFeedback = undefined;\n\t\t\tthis.currentDragFeedbackDisposable.dispose();\n\t\t\treturn false;\n\t\t}\n\n\t\tevent.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && result.effect === ListDragOverEffect.Copy) ? 'copy' : 'move';\n\n\t\tlet feedback: number[];\n\n\t\tif (typeof result !== 'boolean' && result.feedback) {\n\t\t\tfeedback = result.feedback;\n\t\t} else {\n\t\t\tif (typeof event.index === 'undefined') {\n\t\t\t\tfeedback = [-1];\n\t\t\t} else {\n\t\t\t\tfeedback = [event.index];\n\t\t\t}\n\t\t}\n\n\t\t// sanitize feedback list\n\t\tfeedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n\t\tfeedback = feedback[0] === -1 ? [-1] : feedback;\n\n\t\tif (equalsDragFeedback(this.currentDragFeedback, feedback)) {\n\t\t\treturn true;\n\t\t}\n\n\t\tthis.currentDragFeedback = feedback;\n\t\tthis.currentDragFeedbackDisposable.dispose();\n\n\t\tif (feedback[0] === -1) { // entire list feedback\n\t\t\tthis.domNode.classList.add('drop-target');\n\t\t\tthis.rowsContainer.classList.add('drop-target');\n\t\t\tthis.currentDragFeedbackDisposable = toDisposable(() => {\n\t\t\t\tthis.domNode.classList.remove('drop-target');\n\t\t\t\tthis.rowsContainer.classList.remove('drop-target');\n\t\t\t});\n\t\t} else {\n\t\t\tfor (const index of feedback) {\n\t\t\t\tconst item = this.items[index]!;\n\t\t\t\titem.dropTarget = true;\n\n\t\t\t\tif (item.row) {\n\t\t\t\t\titem.row.domNode.classList.add('drop-target');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.currentDragFeedbackDisposable = toDisposable(() => {\n\t\t\t\tfor (const index of feedback) {\n\t\t\t\t\tconst item = this.items[index]!;\n\t\t\t\t\titem.dropTarget = false;\n\n\t\t\t\t\tif (item.row) {\n\t\t\t\t\t\titem.row.domNode.classList.remove('drop-target');\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprivate onDragLeave(): void {\n\t\tthis.onDragLeaveTimeout.dispose();\n\t\tthis.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100);\n\t}\n\n\tprivate onDrop(event: IListDragEvent<T>): void {\n\t\tif (!this.canDrop) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst dragData = this.currentDragData;\n\t\tthis.teardownDragAndDropScrollTopAnimation();\n\t\tthis.clearDragOverFeedback();\n\t\tthis.currentDragData = undefined;\n\t\tStaticDND.CurrentDragAndDropData = undefined;\n\n\t\tif (!dragData || !event.browserEvent.dataTransfer) {\n\t\t\treturn;\n\t\t}\n\n\t\tevent.browserEvent.preventDefault();\n\t\tdragData.update(event.browserEvent.dataTransfer);\n\t\tthis.dnd.drop(dragData, event.element, event.index, event.browserEvent);\n\t}\n\n\tprivate onDragEnd(event: DragEvent): void {\n\t\tthis.canDrop = false;\n\t\tthis.teardownDragAndDropScrollTopAnimation();\n\t\tthis.clearDragOverFeedback();\n\t\tthis.currentDragData = undefined;\n\t\tStaticDND.CurrentDragAndDropData = undefined;\n\n\t\tif (this.dnd.onDragEnd) {\n\t\t\tthis.dnd.onDragEnd(event);\n\t\t}\n\t}\n\n\tprivate clearDragOverFeedback(): void {\n\t\tthis.currentDragFeedback = undefined;\n\t\tthis.currentDragFeedbackDisposable.dispose();\n\t\tthis.currentDragFeedbackDisposable = Disposable.None;\n\t}\n\n\t// DND scroll top animation\n\n\tprivate setupDragAndDropScrollTopAnimation(event: DragEvent): void {\n\t\tif (!this.dragOverAnimationDisposable) {\n\t\t\tconst viewTop = getTopLeftOffset(this.domNode).top;\n\t\t\tthis.dragOverAnimationDisposable = animate(this.animateDragAndDropScrollTop.bind(this, viewTop));\n\t\t}\n\n\t\tthis.dragOverAnimationStopDisposable.dispose();\n\t\tthis.dragOverAnimationStopDisposable = disposableTimeout(() => {\n\t\t\tif (this.dragOverAnimationDisposable) {\n\t\t\t\tthis.dragOverAnimationDisposable.dispose();\n\t\t\t\tthis.dragOverAnimationDisposable = undefined;\n\t\t\t}\n\t\t}, 1000);\n\n\t\tthis.dragOverMouseY = event.pageY;\n\t}\n\n\tprivate animateDragAndDropScrollTop(viewTop: number): void {\n\t\tif (this.dragOverMouseY === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst diff = this.dragOverMouseY - viewTop;\n\t\tconst upperLimit = this.renderHeight - 35;\n\n\t\tif (diff < 35) {\n\t\t\tthis.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n\t\t} else if (diff > upperLimit) {\n\t\t\tthis.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n\t\t}\n\t}\n\n\tprivate teardownDragAndDropScrollTopAnimation(): void {\n\t\tthis.dragOverAnimationStopDisposable.dispose();\n\n\t\tif (this.dragOverAnimationDisposable) {\n\t\t\tthis.dragOverAnimationDisposable.dispose();\n\t\t\tthis.dragOverAnimationDisposable = undefined;\n\t\t}\n\t}\n\n\t// Util\n\n\tprivate getItemIndexFromEventTarget(target: EventTarget | null): number | undefined {\n\t\tconst scrollableElement = this.scrollableElement.getDomNode();\n\t\tlet element: HTMLElement | null = target as (HTMLElement | null);\n\n\t\twhile (element instanceof HTMLElement && element !== this.rowsContainer && scrollableElement.contains(element)) {\n\t\t\tconst rawIndex = element.getAttribute('data-index');\n\n\t\t\tif (rawIndex) {\n\t\t\t\tconst index = Number(rawIndex);\n\n\t\t\t\tif (!isNaN(index)) {\n\t\t\t\t\treturn index;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telement = element.parentElement;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tprivate getRenderRange(renderTop: number, renderHeight: number): IRange {\n\t\treturn {\n\t\t\tstart: this.rangeMap.indexAt(renderTop),\n\t\t\tend: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n\t\t};\n\t}\n\n\t/**\n\t * Given a stable rendered state, checks every rendered element whether it needs\n\t * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n\t */\n\tprivate _rerender(renderTop: number, renderHeight: number, inSmoothScrolling?: boolean): void {\n\t\tconst previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n\n\t\t// Let's remember the second element's position, this helps in scrolling up\n\t\t// and preserving a linear upwards scroll movement\n\t\tlet anchorElementIndex: number | undefined;\n\t\tlet anchorElementTopDelta: number | undefined;\n\n\t\tif (renderTop === this.elementTop(previousRenderRange.start)) {\n\t\t\tanchorElementIndex = previousRenderRange.start;\n\t\t\tanchorElementTopDelta = 0;\n\t\t} else if (previousRenderRange.end - previousRenderRange.start > 1) {\n\t\t\tanchorElementIndex = previousRenderRange.start + 1;\n\t\t\tanchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n\t\t}\n\n\t\tlet heightDiff = 0;\n\n\t\twhile (true) {\n\t\t\tconst renderRange = this.getRenderRange(renderTop, renderHeight);\n\n\t\t\tlet didChange = false;\n\n\t\t\tfor (let i = renderRange.start; i < renderRange.end; i++) {\n\t\t\t\tconst diff = this.probeDynamicHeight(i);\n\n\t\t\t\tif (diff !== 0) {\n\t\t\t\t\tthis.rangeMap.splice(i, 1, [this.items[i]]);\n\t\t\t\t}\n\n\t\t\t\theightDiff += diff;\n\t\t\t\tdidChange = didChange || diff !== 0;\n\t\t\t}\n\n\t\t\tif (!didChange) {\n\t\t\t\tif (heightDiff !== 0) {\n\t\t\t\t\tthis.eventuallyUpdateScrollDimensions();\n\t\t\t\t}\n\n\t\t\t\tconst unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n\n\t\t\t\tfor (const range of unrenderRanges) {\n\t\t\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\t\t\tif (this.items[i].row) {\n\t\t\t\t\t\t\tthis.removeItemFromDOM(i);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconst renderRanges = Range.relativeComplement(renderRange, previousRenderRange);\n\n\t\t\t\tfor (const range of renderRanges) {\n\t\t\t\t\tfor (let i = range.start; i < range.end; i++) {\n\t\t\t\t\t\tconst afterIndex = i + 1;\n\t\t\t\t\t\tconst beforeRow = afterIndex < this.items.length ? this.items[afterIndex].row : null;\n\t\t\t\t\t\tconst beforeElement = beforeRow ? beforeRow.domNode : null;\n\t\t\t\t\t\tthis.insertItemInDOM(i, beforeElement);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor (let i = renderRange.start; i < renderRange.end; i++) {\n\t\t\t\t\tif (this.items[i].row) {\n\t\t\t\t\t\tthis.updateItemInDOM(this.items[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof anchorElementIndex === 'number') {\n\t\t\t\t\t// To compute a destination scroll top, we need to take into account the current smooth scrolling\n\t\t\t\t\t// animation, and then reuse it with a new target (to avoid prolonging the scroll)\n\t\t\t\t\t// See https://github.com/microsoft/vscode/issues/104144\n\t\t\t\t\t// See https://github.com/microsoft/vscode/pull/104284\n\t\t\t\t\t// See https://github.com/microsoft/vscode/issues/107704\n\t\t\t\t\tconst deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n\t\t\t\t\tconst newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta! + deltaScrollTop;\n\t\t\t\t\tthis.setScrollTop(newScrollTop, inSmoothScrolling);\n\t\t\t\t}\n\n\t\t\t\tthis._onDidChangeContentHeight.fire(this.contentHeight);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate probeDynamicHeight(index: number): number {\n\t\tconst item = this.items[index];\n\n\t\tif (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tif (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst size = item.size;\n\n\t\tif (!this.setRowHeight && item.row) {\n\t\t\tlet newSize = item.row.domNode.offsetHeight;\n\t\t\titem.size = newSize;\n\t\t\titem.lastDynamicHeightWidth = this.renderWidth;\n\t\t\treturn newSize - size;\n\t\t}\n\n\t\tconst row = this.cache.alloc(item.templateId);\n\n\t\trow.domNode.style.height = '';\n\t\tthis.rowsContainer.appendChild(row.domNode);\n\n\t\tconst renderer = this.renderers.get(item.templateId);\n\t\tif (renderer) {\n\t\t\trenderer.renderElement(item.element, index, row.templateData, undefined);\n\n\t\t\tif (renderer.disposeElement) {\n\t\t\t\trenderer.disposeElement(item.element, index, row.templateData, undefined);\n\t\t\t}\n\t\t}\n\n\t\titem.size = row.domNode.offsetHeight;\n\n\t\tif (this.virtualDelegate.setDynamicHeight) {\n\t\t\tthis.virtualDelegate.setDynamicHeight(item.element, item.size);\n\t\t}\n\n\t\titem.lastDynamicHeightWidth = this.renderWidth;\n\t\tthis.rowsContainer.removeChild(row.domNode);\n\t\tthis.cache.release(row);\n\n\t\treturn item.size - size;\n\t}\n\n\tprivate getNextToLastElement(ranges: IRange[]): HTMLElement | null {\n\t\tconst lastRange = ranges[ranges.length - 1];\n\n\t\tif (!lastRange) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst nextToLastItem = this.items[lastRange.end];\n\n\t\tif (!nextToLastItem) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!nextToLastItem.row) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn nextToLastItem.row.domNode;\n\t}\n\n\tgetElementDomId(index: number): string {\n\t\treturn `${this.domId}_${index}`;\n\t}\n\n\t// Dispose\n\n\tdispose() {\n\t\tif (this.items) {\n\t\t\tfor (const item of this.items) {\n\t\t\t\tif (item.row) {\n\t\t\t\t\tconst renderer = this.renderers.get(item.row.templateId);\n\t\t\t\t\tif (renderer) {\n\t\t\t\t\t\tif (renderer.disposeElement) {\n\t\t\t\t\t\t\trenderer.disposeElement(item.element, -1, item.row.templateData, undefined);\n\t\t\t\t\t\t}\n\t\t\t\t\t\trenderer.disposeTemplate(item.row.templateData);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.items = [];\n\t\t}\n\n\t\tif (this.domNode && this.domNode.parentNode) {\n\t\t\tthis.domNode.parentNode.removeChild(this.domNode);\n\t\t}\n\n\t\tdispose(this.disposables);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./list';\nimport { IDisposable, dispose, DisposableStore } from 'vs/base/common/lifecycle';\nimport { isNumber } from 'vs/base/common/types';\nimport { range, binarySearch, firstOrDefault } from 'vs/base/common/arrays';\nimport { memoize } from 'vs/base/common/decorators';\nimport * as platform from 'vs/base/common/platform';\nimport { Gesture } from 'vs/base/browser/touch';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { StandardKeyboardEvent, IKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { Event, Emitter, EventBufferer } from 'vs/base/common/event';\nimport { domEvent, stopEvent } from 'vs/base/browser/event';\nimport { IListVirtualDelegate, IListRenderer, IListEvent, IListContextMenuEvent, IListMouseEvent, IListTouchEvent, IListGestureEvent, IIdentityProvider, IKeyboardNavigationLabelProvider, IListDragAndDrop, IListDragOverReaction, ListError, IKeyboardNavigationDelegate } from './list';\nimport { ListView, IListViewOptions, IListViewDragAndDrop, IListViewAccessibilityProvider, IListViewOptionsUpdate } from './listView';\nimport { Color } from 'vs/base/common/color';\nimport { mixin } from 'vs/base/common/objects';\nimport { ScrollbarVisibility, ScrollEvent } from 'vs/base/common/scrollable';\nimport { ISpliceable } from 'vs/base/common/sequence';\nimport { CombinedSpliceable } from 'vs/base/browser/ui/list/splice';\nimport { clamp } from 'vs/base/common/numbers';\nimport { matchesPrefix } from 'vs/base/common/filters';\nimport { IDragAndDropData } from 'vs/base/browser/dnd';\nimport { alert } from 'vs/base/browser/ui/aria/aria';\nimport { IThemable } from 'vs/base/common/styler';\nimport { createStyleSheet } from 'vs/base/browser/dom';\nimport { timeout } from 'vs/base/common/async';\n\ninterface ITraitChangeEvent {\n\tindexes: number[];\n\tbrowserEvent?: UIEvent;\n}\n\ntype ITraitTemplateData = HTMLElement;\n\ninterface IRenderedContainer {\n\ttemplateData: ITraitTemplateData;\n\tindex: number;\n}\n\nclass TraitRenderer<T> implements IListRenderer<T, ITraitTemplateData>\n{\n\tprivate renderedElements: IRenderedContainer[] = [];\n\n\tconstructor(private trait: Trait<T>) { }\n\n\tget templateId(): string {\n\t\treturn `template:${this.trait.trait}`;\n\t}\n\n\trenderTemplate(container: HTMLElement): ITraitTemplateData {\n\t\treturn container;\n\t}\n\n\trenderElement(element: T, index: number, templateData: ITraitTemplateData): void {\n\t\tconst renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n\n\t\tif (renderedElementIndex >= 0) {\n\t\t\tconst rendered = this.renderedElements[renderedElementIndex];\n\t\t\tthis.trait.unrender(templateData);\n\t\t\trendered.index = index;\n\t\t} else {\n\t\t\tconst rendered = { index, templateData };\n\t\t\tthis.renderedElements.push(rendered);\n\t\t}\n\n\t\tthis.trait.renderIndex(index, templateData);\n\t}\n\n\tsplice(start: number, deleteCount: number, insertCount: number): void {\n\t\tconst rendered: IRenderedContainer[] = [];\n\n\t\tfor (const renderedElement of this.renderedElements) {\n\n\t\t\tif (renderedElement.index < start) {\n\t\t\t\trendered.push(renderedElement);\n\t\t\t} else if (renderedElement.index >= start + deleteCount) {\n\t\t\t\trendered.push({\n\t\t\t\t\tindex: renderedElement.index + insertCount - deleteCount,\n\t\t\t\t\ttemplateData: renderedElement.templateData\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tthis.renderedElements = rendered;\n\t}\n\n\trenderIndexes(indexes: number[]): void {\n\t\tfor (const { index, templateData } of this.renderedElements) {\n\t\t\tif (indexes.indexOf(index) > -1) {\n\t\t\t\tthis.trait.renderIndex(index, templateData);\n\t\t\t}\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: ITraitTemplateData): void {\n\t\tconst index = this.renderedElements.findIndex(el => el.templateData === templateData);\n\n\t\tif (index < 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.renderedElements.splice(index, 1);\n\t}\n}\n\nclass Trait<T> implements ISpliceable<boolean>, IDisposable {\n\n\tprivate indexes: number[] = [];\n\tprivate sortedIndexes: number[] = [];\n\n\tprivate readonly _onChange = new Emitter<ITraitChangeEvent>();\n\treadonly onChange: Event<ITraitChangeEvent> = this._onChange.event;\n\n\tget trait(): string { return this._trait; }\n\n\t@memoize\n\tget renderer(): TraitRenderer<T> {\n\t\treturn new TraitRenderer<T>(this);\n\t}\n\n\tconstructor(private _trait: string) { }\n\n\tsplice(start: number, deleteCount: number, elements: boolean[]): void {\n\t\tconst diff = elements.length - deleteCount;\n\t\tconst end = start + deleteCount;\n\t\tconst indexes = [\n\t\t\t...this.sortedIndexes.filter(i => i < start),\n\t\t\t...elements.map((hasTrait, i) => hasTrait ? i + start : -1).filter(i => i !== -1),\n\t\t\t...this.sortedIndexes.filter(i => i >= end).map(i => i + diff)\n\t\t];\n\n\t\tthis.renderer.splice(start, deleteCount, elements.length);\n\t\tthis._set(indexes, indexes);\n\t}\n\n\trenderIndex(index: number, container: HTMLElement): void {\n\t\tcontainer.classList.toggle(this._trait, this.contains(index));\n\t}\n\n\tunrender(container: HTMLElement): void {\n\t\tcontainer.classList.remove(this._trait);\n\t}\n\n\t/**\n\t * Sets the indexes which should have this trait.\n\t *\n\t * @param indexes Indexes which should have this trait.\n\t * @return The old indexes which had this trait.\n\t */\n\tset(indexes: number[], browserEvent?: UIEvent): number[] {\n\t\treturn this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n\t}\n\n\tprivate _set(indexes: number[], sortedIndexes: number[], browserEvent?: UIEvent): number[] {\n\t\tconst result = this.indexes;\n\t\tconst sortedResult = this.sortedIndexes;\n\n\t\tthis.indexes = indexes;\n\t\tthis.sortedIndexes = sortedIndexes;\n\n\t\tconst toRender = disjunction(sortedResult, indexes);\n\t\tthis.renderer.renderIndexes(toRender);\n\n\t\tthis._onChange.fire({ indexes, browserEvent });\n\t\treturn result;\n\t}\n\n\tget(): number[] {\n\t\treturn this.indexes;\n\t}\n\n\tcontains(index: number): boolean {\n\t\treturn binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n\t}\n\n\tdispose() {\n\t\tdispose(this._onChange);\n\t}\n}\n\nclass SelectionTrait<T> extends Trait<T> {\n\n\tconstructor(private setAriaSelected: boolean) {\n\t\tsuper('selected');\n\t}\n\n\toverride renderIndex(index: number, container: HTMLElement): void {\n\t\tsuper.renderIndex(index, container);\n\n\t\tif (this.setAriaSelected) {\n\t\t\tif (this.contains(index)) {\n\t\t\t\tcontainer.setAttribute('aria-selected', 'true');\n\t\t\t} else {\n\t\t\t\tcontainer.setAttribute('aria-selected', 'false');\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable<T> implements ISpliceable<T> {\n\n\tconstructor(\n\t\tprivate trait: Trait<T>,\n\t\tprivate view: ListView<T>,\n\t\tprivate identityProvider?: IIdentityProvider<T>\n\t) { }\n\n\tsplice(start: number, deleteCount: number, elements: T[]): void {\n\t\tif (!this.identityProvider) {\n\t\t\treturn this.trait.splice(start, deleteCount, elements.map(() => false));\n\t\t}\n\n\t\tconst pastElementsWithTrait = this.trait.get().map(i => this.identityProvider!.getId(this.view.element(i)).toString());\n\t\tconst elementsWithTrait = elements.map(e => pastElementsWithTrait.indexOf(this.identityProvider!.getId(e).toString()) > -1);\n\n\t\tthis.trait.splice(start, deleteCount, elementsWithTrait);\n\t}\n}\n\nexport function isInputElement(e: HTMLElement): boolean {\n\treturn e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\n\nexport function isMonacoEditor(e: HTMLElement): boolean {\n\tif (e.classList.contains('monaco-editor')) {\n\t\treturn true;\n\t}\n\n\tif (e.classList.contains('monaco-list')) {\n\t\treturn false;\n\t}\n\n\tif (!e.parentElement) {\n\t\treturn false;\n\t}\n\n\treturn isMonacoEditor(e.parentElement);\n}\n\nclass KeyboardController<T> implements IDisposable {\n\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate list: List<T>,\n\t\tprivate view: ListView<T>,\n\t\toptions: IListOptions<T>\n\t) {\n\t\tconst multipleSelectionSupport = options.multipleSelectionSupport !== false;\n\n\t\tconst onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\n\t\t\t.filter(e => !isInputElement(e.target as HTMLElement))\n\t\t\t.map(e => new StandardKeyboardEvent(e));\n\n\t\tonKeyDown.filter(e => e.keyCode === KeyCode.Enter).on(this.onEnter, this, this.disposables);\n\t\tonKeyDown.filter(e => e.keyCode === KeyCode.UpArrow).on(this.onUpArrow, this, this.disposables);\n\t\tonKeyDown.filter(e => e.keyCode === KeyCode.DownArrow).on(this.onDownArrow, this, this.disposables);\n\t\tonKeyDown.filter(e => e.keyCode === KeyCode.PageUp).on(this.onPageUpArrow, this, this.disposables);\n\t\tonKeyDown.filter(e => e.keyCode === KeyCode.PageDown).on(this.onPageDownArrow, this, this.disposables);\n\t\tonKeyDown.filter(e => e.keyCode === KeyCode.Escape).on(this.onEscape, this, this.disposables);\n\n\t\tif (multipleSelectionSupport) {\n\t\t\tonKeyDown.filter(e => (platform.isMacintosh ? e.metaKey : e.ctrlKey) && e.keyCode === KeyCode.KEY_A).on(this.onCtrlA, this, this.disposables);\n\t\t}\n\t}\n\n\tprivate onEnter(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.list.setSelection(this.list.getFocus(), e.browserEvent);\n\t}\n\n\tprivate onUpArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.list.focusPrevious(1, false, e.browserEvent);\n\t\tthis.list.reveal(this.list.getFocus()[0]);\n\t\tthis.view.domNode.focus();\n\t}\n\n\tprivate onDownArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.list.focusNext(1, false, e.browserEvent);\n\t\tthis.list.reveal(this.list.getFocus()[0]);\n\t\tthis.view.domNode.focus();\n\t}\n\n\tprivate onPageUpArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.list.focusPreviousPage(e.browserEvent);\n\t\tthis.list.reveal(this.list.getFocus()[0]);\n\t\tthis.view.domNode.focus();\n\t}\n\n\tprivate onPageDownArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.list.focusNextPage(e.browserEvent);\n\t\tthis.list.reveal(this.list.getFocus()[0]);\n\t\tthis.view.domNode.focus();\n\t}\n\n\tprivate onCtrlA(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.list.setSelection(range(this.list.length), e.browserEvent);\n\t\tthis.view.domNode.focus();\n\t}\n\n\tprivate onEscape(e: StandardKeyboardEvent): void {\n\t\tif (this.list.getSelection().length) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tthis.list.setSelection([], e.browserEvent);\n\t\t\tthis.view.domNode.focus();\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.disposables.dispose();\n\t}\n}\n\nenum TypeLabelControllerState {\n\tIdle,\n\tTyping\n}\n\nexport const DefaultKeyboardNavigationDelegate = new class implements IKeyboardNavigationDelegate {\n\tmightProducePrintableCharacter(event: IKeyboardEvent): boolean {\n\t\tif (event.ctrlKey || event.metaKey || event.altKey) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn (event.keyCode >= KeyCode.KEY_A && event.keyCode <= KeyCode.KEY_Z)\n\t\t\t|| (event.keyCode >= KeyCode.KEY_0 && event.keyCode <= KeyCode.KEY_9)\n\t\t\t|| (event.keyCode >= KeyCode.NUMPAD_0 && event.keyCode <= KeyCode.NUMPAD_9)\n\t\t\t|| (event.keyCode >= KeyCode.US_SEMICOLON && event.keyCode <= KeyCode.US_QUOTE);\n\t}\n};\n\nclass TypeLabelController<T> implements IDisposable {\n\n\tprivate enabled = false;\n\tprivate state: TypeLabelControllerState = TypeLabelControllerState.Idle;\n\n\tprivate automaticKeyboardNavigation = true;\n\tprivate triggered = false;\n\tprivate previouslyFocused = -1;\n\n\tprivate readonly enabledDisposables = new DisposableStore();\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate list: List<T>,\n\t\tprivate view: ListView<T>,\n\t\tprivate keyboardNavigationLabelProvider: IKeyboardNavigationLabelProvider<T>,\n\t\tprivate delegate: IKeyboardNavigationDelegate\n\t) {\n\t\tthis.updateOptions(list.options);\n\t}\n\n\tupdateOptions(options: IListOptions<T>): void {\n\t\tconst enableKeyboardNavigation = typeof options.enableKeyboardNavigation === 'undefined' ? true : !!options.enableKeyboardNavigation;\n\n\t\tif (enableKeyboardNavigation) {\n\t\t\tthis.enable();\n\t\t} else {\n\t\t\tthis.disable();\n\t\t}\n\n\t\tif (typeof options.automaticKeyboardNavigation !== 'undefined') {\n\t\t\tthis.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\n\t\t}\n\t}\n\n\ttoggle(): void {\n\t\tthis.triggered = !this.triggered;\n\t}\n\n\tprivate enable(): void {\n\t\tif (this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst onChar = Event.chain(domEvent(this.view.domNode, 'keydown'))\n\t\t\t.filter(e => !isInputElement(e.target as HTMLElement))\n\t\t\t.filter(() => this.automaticKeyboardNavigation || this.triggered)\n\t\t\t.map(event => new StandardKeyboardEvent(event))\n\t\t\t.filter(e => this.delegate.mightProducePrintableCharacter(e))\n\t\t\t.forEach(e => { e.stopPropagation(); e.preventDefault(); })\n\t\t\t.map(event => event.browserEvent.key)\n\t\t\t.event;\n\n\t\tconst onClear = Event.debounce<string, null>(onChar, () => null, 800);\n\t\tconst onInput = Event.reduce<string | null, string | null>(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i));\n\n\t\tonInput(this.onInput, this, this.enabledDisposables);\n\t\tonClear(this.onClear, this, this.enabledDisposables);\n\n\t\tthis.enabled = true;\n\t\tthis.triggered = false;\n\t}\n\n\tprivate disable(): void {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.enabledDisposables.clear();\n\t\tthis.enabled = false;\n\t\tthis.triggered = false;\n\t}\n\n\tprivate onClear(): void {\n\t\tconst focus = this.list.getFocus();\n\t\tif (focus.length > 0 && focus[0] === this.previouslyFocused) {\n\t\t\t// List: re-anounce element on typing end since typed keys will interupt aria label of focused element\n\t\t\t// Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n\t\t\tconst ariaLabel = this.list.options.accessibilityProvider?.getAriaLabel(this.list.element(focus[0]));\n\t\t\tif (ariaLabel) {\n\t\t\t\talert(ariaLabel);\n\t\t\t}\n\t\t}\n\t\tthis.previouslyFocused = -1;\n\t}\n\n\tprivate onInput(word: string | null): void {\n\t\tif (!word) {\n\t\t\tthis.state = TypeLabelControllerState.Idle;\n\t\t\tthis.triggered = false;\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = this.list.getFocus();\n\t\tconst start = focus.length > 0 ? focus[0] : 0;\n\t\tconst delta = this.state === TypeLabelControllerState.Idle ? 1 : 0;\n\t\tthis.state = TypeLabelControllerState.Typing;\n\n\t\tfor (let i = 0; i < this.list.length; i++) {\n\t\t\tconst index = (start + i + delta) % this.list.length;\n\t\t\tconst label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n\t\t\tconst labelStr = label && label.toString();\n\n\t\t\tif (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n\t\t\t\tthis.previouslyFocused = start;\n\t\t\t\tthis.list.setFocus([index]);\n\t\t\t\tthis.list.reveal(index);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.disable();\n\t\tthis.enabledDisposables.dispose();\n\t\tthis.disposables.dispose();\n\t}\n}\n\nclass DOMFocusController<T> implements IDisposable {\n\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate list: List<T>,\n\t\tprivate view: ListView<T>\n\t) {\n\t\tconst onKeyDown = Event.chain(domEvent(view.domNode, 'keydown'))\n\t\t\t.filter(e => !isInputElement(e.target as HTMLElement))\n\t\t\t.map(e => new StandardKeyboardEvent(e));\n\n\t\tonKeyDown.filter(e => e.keyCode === KeyCode.Tab && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey)\n\t\t\t.on(this.onTab, this, this.disposables);\n\t}\n\n\tprivate onTab(e: StandardKeyboardEvent): void {\n\t\tif (e.target !== this.view.domNode) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = this.list.getFocus();\n\n\t\tif (focus.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focusedDomElement = this.view.domElement(focus[0]);\n\n\t\tif (!focusedDomElement) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n\n\t\tif (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst style = window.getComputedStyle(tabIndexElement);\n\t\tif (style.visibility === 'hidden' || style.display === 'none') {\n\t\t\treturn;\n\t\t}\n\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\ttabIndexElement.focus();\n\t}\n\n\tdispose() {\n\t\tthis.disposables.dispose();\n\t}\n}\n\nexport function isSelectionSingleChangeEvent(event: IListMouseEvent<any> | IListTouchEvent<any>): boolean {\n\treturn platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\n\nexport function isSelectionRangeChangeEvent(event: IListMouseEvent<any> | IListTouchEvent<any>): boolean {\n\treturn event.browserEvent.shiftKey;\n}\n\nfunction isMouseRightClick(event: UIEvent): boolean {\n\treturn event instanceof MouseEvent && event.button === 2;\n}\n\nconst DefaultMultipleSelectionController = {\n\tisSelectionSingleChangeEvent,\n\tisSelectionRangeChangeEvent\n};\n\nexport class MouseController<T> implements IDisposable {\n\n\tprivate multipleSelectionSupport: boolean;\n\treadonly multipleSelectionController: IMultipleSelectionController<T> | undefined;\n\tprivate mouseSupport: boolean;\n\tprivate readonly disposables = new DisposableStore();\n\n\tprivate _onPointer = new Emitter<IListMouseEvent<T>>();\n\treadonly onPointer: Event<IListMouseEvent<T>> = this._onPointer.event;\n\n\tconstructor(protected list: List<T>) {\n\t\tthis.multipleSelectionSupport = !(list.options.multipleSelectionSupport === false);\n\n\t\tif (this.multipleSelectionSupport) {\n\t\t\tthis.multipleSelectionController = list.options.multipleSelectionController || DefaultMultipleSelectionController;\n\t\t}\n\n\t\tthis.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n\n\t\tif (this.mouseSupport) {\n\t\t\tlist.onMouseDown(this.onMouseDown, this, this.disposables);\n\t\t\tlist.onContextMenu(this.onContextMenu, this, this.disposables);\n\t\t\tlist.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n\t\t\tlist.onTouchStart(this.onMouseDown, this, this.disposables);\n\t\t\tthis.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n\t\t}\n\n\t\tEvent.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n\t}\n\n\tprotected isSelectionSingleChangeEvent(event: IListMouseEvent<any> | IListTouchEvent<any>): boolean {\n\t\tif (this.multipleSelectionController) {\n\t\t\treturn this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n\t\t}\n\n\t\treturn platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n\t}\n\n\tprotected isSelectionRangeChangeEvent(event: IListMouseEvent<any> | IListTouchEvent<any>): boolean {\n\t\tif (this.multipleSelectionController) {\n\t\t\treturn this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n\t\t}\n\n\t\treturn event.browserEvent.shiftKey;\n\t}\n\n\tprivate isSelectionChangeEvent(event: IListMouseEvent<any> | IListTouchEvent<any>): boolean {\n\t\treturn this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n\t}\n\n\tprivate onMouseDown(e: IListMouseEvent<T> | IListTouchEvent<T>): void {\n\t\tif (isMonacoEditor(e.browserEvent.target as HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.activeElement !== e.browserEvent.target) {\n\t\t\tthis.list.domFocus();\n\t\t}\n\t}\n\n\tprivate onContextMenu(e: IListContextMenuEvent<T>): void {\n\t\tif (isMonacoEditor(e.browserEvent.target as HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = typeof e.index === 'undefined' ? [] : [e.index];\n\t\tthis.list.setFocus(focus, e.browserEvent);\n\t}\n\n\tprotected onViewPointer(e: IListMouseEvent<T>): void {\n\t\tif (!this.mouseSupport) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (isInputElement(e.browserEvent.target as HTMLElement) || isMonacoEditor(e.browserEvent.target as HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = e.index;\n\n\t\tif (typeof focus === 'undefined') {\n\t\t\tthis.list.setFocus([], e.browserEvent);\n\t\t\tthis.list.setSelection([], e.browserEvent);\n\t\t\tthis.list.setAnchor(undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.multipleSelectionSupport && this.isSelectionRangeChangeEvent(e)) {\n\t\t\treturn this.changeSelection(e);\n\t\t}\n\n\t\tif (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\n\t\t\treturn this.changeSelection(e);\n\t\t}\n\n\t\tthis.list.setFocus([focus], e.browserEvent);\n\t\tthis.list.setAnchor(focus);\n\n\t\tif (!isMouseRightClick(e.browserEvent)) {\n\t\t\tthis.list.setSelection([focus], e.browserEvent);\n\t\t}\n\n\t\tthis._onPointer.fire(e);\n\t}\n\n\tprotected onDoubleClick(e: IListMouseEvent<T>): void {\n\t\tif (isInputElement(e.browserEvent.target as HTMLElement) || isMonacoEditor(e.browserEvent.target as HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.multipleSelectionSupport && this.isSelectionChangeEvent(e)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus = this.list.getFocus();\n\t\tthis.list.setSelection(focus, e.browserEvent);\n\t}\n\n\tprivate changeSelection(e: IListMouseEvent<T> | IListTouchEvent<T>): void {\n\t\tconst focus = e.index!;\n\t\tconst anchor = this.list.getAnchor();\n\n\t\tif (this.isSelectionRangeChangeEvent(e) && typeof anchor === 'number') {\n\t\t\tconst min = Math.min(anchor, focus);\n\t\t\tconst max = Math.max(anchor, focus);\n\t\t\tconst rangeSelection = range(min, max + 1);\n\t\t\tconst selection = this.list.getSelection();\n\t\t\tconst contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n\n\t\t\tif (contiguousRange.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n\t\t\tthis.list.setSelection(newSelection, e.browserEvent);\n\t\t\tthis.list.setFocus([focus], e.browserEvent);\n\n\t\t} else if (this.isSelectionSingleChangeEvent(e)) {\n\t\t\tconst selection = this.list.getSelection();\n\t\t\tconst newSelection = selection.filter(i => i !== focus);\n\n\t\t\tthis.list.setFocus([focus]);\n\t\t\tthis.list.setAnchor(focus);\n\n\t\t\tif (selection.length === newSelection.length) {\n\t\t\t\tthis.list.setSelection([...newSelection, focus], e.browserEvent);\n\t\t\t} else {\n\t\t\t\tthis.list.setSelection(newSelection, e.browserEvent);\n\t\t\t}\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.disposables.dispose();\n\t}\n}\n\nexport interface IMultipleSelectionController<T> {\n\tisSelectionSingleChangeEvent(event: IListMouseEvent<T> | IListTouchEvent<T>): boolean;\n\tisSelectionRangeChangeEvent(event: IListMouseEvent<T> | IListTouchEvent<T>): boolean;\n}\n\nexport interface IStyleController {\n\tstyle(styles: IListStyles): void;\n}\n\nexport interface IListAccessibilityProvider<T> extends IListViewAccessibilityProvider<T> {\n\tgetAriaLabel(element: T): string | null;\n\tgetWidgetAriaLabel(): string;\n\tgetWidgetRole?(): string;\n\tgetAriaLevel?(element: T): number | undefined;\n\tonDidChangeActiveDescendant?: Event<void>;\n\tgetActiveDescendantId?(element: T): string | undefined;\n}\n\nexport class DefaultStyleController implements IStyleController {\n\n\tconstructor(private styleElement: HTMLStyleElement, private selectorSuffix: string) { }\n\n\tstyle(styles: IListStyles): void {\n\t\tconst suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n\t\tconst content: string[] = [];\n\n\t\tif (styles.listBackground) {\n\t\t\tif (styles.listBackground.isOpaque()) {\n\t\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n\t\t\t} else if (!platform.isMacintosh) { // subpixel AA doesn't exist in macOS\n\t\t\t\tconsole.warn(`List with id '${this.selectorSuffix}' was styled with a non-opaque background color. This will break sub-pixel antialiasing.`);\n\t\t\t}\n\t\t}\n\n\t\tif (styles.listFocusBackground) {\n\t\t\tcontent.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n\t\t\tcontent.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n\t\t}\n\n\t\tif (styles.listFocusForeground) {\n\t\t\tcontent.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n\t\t}\n\n\t\tif (styles.listActiveSelectionBackground) {\n\t\t\tcontent.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n\t\t\tcontent.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n\t\t}\n\n\t\tif (styles.listActiveSelectionForeground) {\n\t\t\tcontent.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n\t\t}\n\n\t\tif (styles.listFocusAndSelectionBackground) {\n\t\t\tcontent.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n\t\t}\n\n\t\tif (styles.listFocusAndSelectionForeground) {\n\t\t\tcontent.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n\t\t}\n\n\t\tif (styles.listInactiveFocusForeground) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n\t\t}\n\n\t\tif (styles.listInactiveFocusBackground) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n\t\t}\n\n\t\tif (styles.listInactiveSelectionBackground) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n\t\t}\n\n\t\tif (styles.listInactiveSelectionForeground) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n\t\t}\n\n\t\tif (styles.listHoverBackground) {\n\t\t\tcontent.push(`.monaco-list${suffix}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n\t\t}\n\n\t\tif (styles.listHoverForeground) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n\t\t}\n\n\t\tif (styles.listSelectionOutline) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n\t\t}\n\n\t\tif (styles.listFocusOutline) {\n\t\t\tcontent.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n\t\t}\n\n\t\tif (styles.listInactiveFocusOutline) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n\t\t}\n\n\t\tif (styles.listHoverOutline) {\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n\t\t}\n\n\t\tif (styles.listDropBackground) {\n\t\t\tcontent.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropBackground} !important; color: inherit !important; }\n\t\t\t`);\n\t\t}\n\n\t\tif (styles.listFilterWidgetBackground) {\n\t\t\tcontent.push(`.monaco-list-type-filter { background-color: ${styles.listFilterWidgetBackground} }`);\n\t\t}\n\n\t\tif (styles.listFilterWidgetOutline) {\n\t\t\tcontent.push(`.monaco-list-type-filter { border: 1px solid ${styles.listFilterWidgetOutline}; }`);\n\t\t}\n\n\t\tif (styles.listFilterWidgetNoMatchesOutline) {\n\t\t\tcontent.push(`.monaco-list-type-filter.no-matches { border: 1px solid ${styles.listFilterWidgetNoMatchesOutline}; }`);\n\t\t}\n\n\t\tif (styles.listMatchesShadow) {\n\t\t\tcontent.push(`.monaco-list-type-filter { box-shadow: 1px 1px 1px ${styles.listMatchesShadow}; }`);\n\t\t}\n\n\t\tif (styles.tableColumnsBorder) {\n\t\t\tcontent.push(`\n\t\t\t\t.monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t}`);\n\t\t}\n\n\t\tthis.styleElement.textContent = content.join('\\n');\n\t}\n}\n\nexport interface IListOptions<T> {\n\treadonly identityProvider?: IIdentityProvider<T>;\n\treadonly dnd?: IListDragAndDrop<T>;\n\treadonly enableKeyboardNavigation?: boolean;\n\treadonly automaticKeyboardNavigation?: boolean;\n\treadonly keyboardNavigationLabelProvider?: IKeyboardNavigationLabelProvider<T>;\n\treadonly keyboardNavigationDelegate?: IKeyboardNavigationDelegate;\n\treadonly keyboardSupport?: boolean;\n\treadonly multipleSelectionSupport?: boolean;\n\treadonly multipleSelectionController?: IMultipleSelectionController<T>;\n\treadonly styleController?: (suffix: string) => IStyleController;\n\treadonly accessibilityProvider?: IListAccessibilityProvider<T>;\n\n\t// list view options\n\treadonly useShadows?: boolean;\n\treadonly verticalScrollMode?: ScrollbarVisibility;\n\treadonly setRowLineHeight?: boolean;\n\treadonly setRowHeight?: boolean;\n\treadonly supportDynamicHeights?: boolean;\n\treadonly mouseSupport?: boolean;\n\treadonly horizontalScrolling?: boolean;\n\treadonly additionalScrollHeight?: number;\n\treadonly transformOptimization?: boolean;\n\treadonly smoothScrolling?: boolean;\n\treadonly alwaysConsumeMouseWheel?: boolean;\n}\n\nexport interface IListStyles {\n\tlistBackground?: Color;\n\tlistFocusBackground?: Color;\n\tlistFocusForeground?: Color;\n\tlistActiveSelectionBackground?: Color;\n\tlistActiveSelectionForeground?: Color;\n\tlistFocusAndSelectionBackground?: Color;\n\tlistFocusAndSelectionForeground?: Color;\n\tlistInactiveSelectionBackground?: Color;\n\tlistInactiveSelectionForeground?: Color;\n\tlistInactiveFocusForeground?: Color;\n\tlistInactiveFocusBackground?: Color;\n\tlistHoverBackground?: Color;\n\tlistHoverForeground?: Color;\n\tlistDropBackground?: Color;\n\tlistFocusOutline?: Color;\n\tlistInactiveFocusOutline?: Color;\n\tlistSelectionOutline?: Color;\n\tlistHoverOutline?: Color;\n\tlistFilterWidgetBackground?: Color;\n\tlistFilterWidgetOutline?: Color;\n\tlistFilterWidgetNoMatchesOutline?: Color;\n\tlistMatchesShadow?: Color;\n\ttreeIndentGuidesStroke?: Color;\n\ttableColumnsBorder?: Color;\n}\n\nconst defaultStyles: IListStyles = {\n\tlistFocusBackground: Color.fromHex('#7FB0D0'),\n\tlistActiveSelectionBackground: Color.fromHex('#0E639C'),\n\tlistActiveSelectionForeground: Color.fromHex('#FFFFFF'),\n\tlistFocusAndSelectionBackground: Color.fromHex('#094771'),\n\tlistFocusAndSelectionForeground: Color.fromHex('#FFFFFF'),\n\tlistInactiveSelectionBackground: Color.fromHex('#3F3F46'),\n\tlistHoverBackground: Color.fromHex('#2A2D2E'),\n\tlistDropBackground: Color.fromHex('#383B3D'),\n\ttreeIndentGuidesStroke: Color.fromHex('#a9a9a9'),\n\ttableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2)\n};\n\nconst DefaultOptions: IListOptions<any> = {\n\tkeyboardSupport: true,\n\tmouseSupport: true,\n\tmultipleSelectionSupport: true,\n\tdnd: {\n\t\tgetDragURI() { return null; },\n\t\tonDragStart(): void { },\n\t\tonDragOver() { return false; },\n\t\tdrop() { }\n\t}\n};\n\n// TODO@Joao: move these utils into a SortedArray class\n\nfunction getContiguousRangeContaining(range: number[], value: number): number[] {\n\tconst index = range.indexOf(value);\n\n\tif (index === -1) {\n\t\treturn [];\n\t}\n\n\tconst result: number[] = [];\n\tlet i = index - 1;\n\twhile (i >= 0 && range[i] === value - (index - i)) {\n\t\tresult.push(range[i--]);\n\t}\n\n\tresult.reverse();\n\ti = index;\n\twhile (i < range.length && range[i] === value + (i - index)) {\n\t\tresult.push(range[i++]);\n\t}\n\n\treturn result;\n}\n\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one: number[], other: number[]): number[] {\n\tconst result: number[] = [];\n\tlet i = 0, j = 0;\n\n\twhile (i < one.length || j < other.length) {\n\t\tif (i >= one.length) {\n\t\t\tresult.push(other[j++]);\n\t\t} else if (j >= other.length) {\n\t\t\tresult.push(one[i++]);\n\t\t} else if (one[i] === other[j]) {\n\t\t\tresult.push(one[i]);\n\t\t\ti++;\n\t\t\tj++;\n\t\t\tcontinue;\n\t\t} else if (one[i] < other[j]) {\n\t\t\tresult.push(one[i++]);\n\t\t} else {\n\t\t\tresult.push(other[j++]);\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one: number[], other: number[]): number[] {\n\tconst result: number[] = [];\n\tlet i = 0, j = 0;\n\n\twhile (i < one.length || j < other.length) {\n\t\tif (i >= one.length) {\n\t\t\tresult.push(other[j++]);\n\t\t} else if (j >= other.length) {\n\t\t\tresult.push(one[i++]);\n\t\t} else if (one[i] === other[j]) {\n\t\t\ti++;\n\t\t\tj++;\n\t\t\tcontinue;\n\t\t} else if (one[i] < other[j]) {\n\t\t\tresult.push(one[i++]);\n\t\t} else {\n\t\t\tj++;\n\t\t}\n\t}\n\n\treturn result;\n}\n\nconst numericSort = (a: number, b: number) => a - b;\n\nclass PipelineRenderer<T> implements IListRenderer<T, any> {\n\n\tconstructor(\n\t\tprivate _templateId: string,\n\t\tprivate renderers: IListRenderer<any /* TODO@joao */, any>[]\n\t) { }\n\n\tget templateId(): string {\n\t\treturn this._templateId;\n\t}\n\n\trenderTemplate(container: HTMLElement): any[] {\n\t\treturn this.renderers.map(r => r.renderTemplate(container));\n\t}\n\n\trenderElement(element: T, index: number, templateData: any[], height: number | undefined): void {\n\t\tlet i = 0;\n\n\t\tfor (const renderer of this.renderers) {\n\t\t\trenderer.renderElement(element, index, templateData[i++], height);\n\t\t}\n\t}\n\n\tdisposeElement(element: T, index: number, templateData: any[], height: number | undefined): void {\n\t\tlet i = 0;\n\n\t\tfor (const renderer of this.renderers) {\n\t\t\tif (renderer.disposeElement) {\n\t\t\t\trenderer.disposeElement(element, index, templateData[i], height);\n\t\t\t}\n\n\t\t\ti += 1;\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: any[]): void {\n\t\tlet i = 0;\n\n\t\tfor (const renderer of this.renderers) {\n\t\t\trenderer.disposeTemplate(templateData[i++]);\n\t\t}\n\t}\n}\n\nclass AccessibiltyRenderer<T> implements IListRenderer<T, HTMLElement> {\n\n\ttemplateId: string = 'a18n';\n\n\tconstructor(private accessibilityProvider: IListAccessibilityProvider<T>) { }\n\n\trenderTemplate(container: HTMLElement): HTMLElement {\n\t\treturn container;\n\t}\n\n\trenderElement(element: T, index: number, container: HTMLElement): void {\n\t\tconst ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n\n\t\tif (ariaLabel) {\n\t\t\tcontainer.setAttribute('aria-label', ariaLabel);\n\t\t} else {\n\t\t\tcontainer.removeAttribute('aria-label');\n\t\t}\n\n\t\tconst ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n\n\t\tif (typeof ariaLevel === 'number') {\n\t\t\tcontainer.setAttribute('aria-level', `${ariaLevel}`);\n\t\t} else {\n\t\t\tcontainer.removeAttribute('aria-level');\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: any): void {\n\t\t// noop\n\t}\n}\n\nclass ListViewDragAndDrop<T> implements IListViewDragAndDrop<T> {\n\n\tconstructor(private list: List<T>, private dnd: IListDragAndDrop<T>) { }\n\n\tgetDragElements(element: T): T[] {\n\t\tconst selection = this.list.getSelectedElements();\n\t\tconst elements = selection.indexOf(element) > -1 ? selection : [element];\n\t\treturn elements;\n\t}\n\n\tgetDragURI(element: T): string | null {\n\t\treturn this.dnd.getDragURI(element);\n\t}\n\n\tgetDragLabel?(elements: T[], originalEvent: DragEvent): string | undefined {\n\t\tif (this.dnd.getDragLabel) {\n\t\t\treturn this.dnd.getDragLabel(elements, originalEvent);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tif (this.dnd.onDragStart) {\n\t\t\tthis.dnd.onDragStart(data, originalEvent);\n\t\t}\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetElement: T, targetIndex: number, originalEvent: DragEvent): boolean | IListDragOverReaction {\n\t\treturn this.dnd.onDragOver(data, targetElement, targetIndex, originalEvent);\n\t}\n\n\tonDragEnd(originalEvent: DragEvent): void {\n\t\tif (this.dnd.onDragEnd) {\n\t\t\tthis.dnd.onDragEnd(originalEvent);\n\t\t}\n\t}\n\n\tdrop(data: IDragAndDropData, targetElement: T, targetIndex: number, originalEvent: DragEvent): void {\n\t\tthis.dnd.drop(data, targetElement, targetIndex, originalEvent);\n\t}\n}\n\nexport interface IListOptionsUpdate extends IListViewOptionsUpdate {\n\treadonly enableKeyboardNavigation?: boolean;\n\treadonly automaticKeyboardNavigation?: boolean;\n}\n\nexport class List<T> implements ISpliceable<T>, IThemable, IDisposable {\n\n\tprivate focus = new Trait<T>('focused');\n\tprivate selection: Trait<T>;\n\tprivate anchor = new Trait<T>('anchor');\n\tprivate eventBufferer = new EventBufferer();\n\tprotected view: ListView<T>;\n\tprivate spliceable: ISpliceable<T>;\n\tprivate styleController: IStyleController;\n\tprivate typeLabelController?: TypeLabelController<T>;\n\tprivate accessibilityProvider?: IListAccessibilityProvider<T>;\n\tprivate mouseController: MouseController<T>;\n\tprivate _ariaLabel: string = '';\n\n\tprotected readonly disposables = new DisposableStore();\n\n\t@memoize get onDidChangeFocus(): Event<IListEvent<T>> {\n\t\treturn Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e));\n\t}\n\n\t@memoize get onDidChangeSelection(): Event<IListEvent<T>> {\n\t\treturn Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e));\n\t}\n\n\tget domId(): string { return this.view.domId; }\n\tget onDidScroll(): Event<ScrollEvent> { return this.view.onDidScroll; }\n\tget onMouseClick(): Event<IListMouseEvent<T>> { return this.view.onMouseClick; }\n\tget onMouseDblClick(): Event<IListMouseEvent<T>> { return this.view.onMouseDblClick; }\n\tget onMouseMiddleClick(): Event<IListMouseEvent<T>> { return this.view.onMouseMiddleClick; }\n\tget onPointer(): Event<IListMouseEvent<T>> { return this.mouseController.onPointer; }\n\tget onMouseUp(): Event<IListMouseEvent<T>> { return this.view.onMouseUp; }\n\tget onMouseDown(): Event<IListMouseEvent<T>> { return this.view.onMouseDown; }\n\tget onMouseOver(): Event<IListMouseEvent<T>> { return this.view.onMouseOver; }\n\tget onMouseMove(): Event<IListMouseEvent<T>> { return this.view.onMouseMove; }\n\tget onMouseOut(): Event<IListMouseEvent<T>> { return this.view.onMouseOut; }\n\tget onTouchStart(): Event<IListTouchEvent<T>> { return this.view.onTouchStart; }\n\tget onTap(): Event<IListGestureEvent<T>> { return this.view.onTap; }\n\n\t/**\n\t * Possible context menu trigger events:\n\t * - ContextMenu key\n\t * - Shift F10\n\t * - Ctrl Option Shift M (macOS with VoiceOver)\n\t * - Mouse right click\n\t */\n\t@memoize get onContextMenu(): Event<IListContextMenuEvent<T>> {\n\t\tlet didJustPressContextMenuKey = false;\n\n\t\tconst fromKeyDown = Event.chain(domEvent(this.view.domNode, 'keydown'))\n\t\t\t.map(e => new StandardKeyboardEvent(e))\n\t\t\t.filter(e => didJustPressContextMenuKey = e.keyCode === KeyCode.ContextMenu || (e.shiftKey && e.keyCode === KeyCode.F10))\n\t\t\t.map(stopEvent)\n\t\t\t.filter(() => false)\n\t\t\t.event as Event<any>;\n\n\t\tconst fromKeyUp = Event.chain(domEvent(this.view.domNode, 'keyup'))\n\t\t\t.forEach(() => didJustPressContextMenuKey = false)\n\t\t\t.map(e => new StandardKeyboardEvent(e))\n\t\t\t.filter(e => e.keyCode === KeyCode.ContextMenu || (e.shiftKey && e.keyCode === KeyCode.F10))\n\t\t\t.map(stopEvent)\n\t\t\t.map(({ browserEvent }) => {\n\t\t\t\tconst focus = this.getFocus();\n\t\t\t\tconst index = focus.length ? focus[0] : undefined;\n\t\t\t\tconst element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n\t\t\t\tconst anchor = typeof index !== 'undefined' ? this.view.domElement(index) as HTMLElement : this.view.domNode;\n\t\t\t\treturn { index, element, anchor, browserEvent };\n\t\t\t})\n\t\t\t.event;\n\n\t\tconst fromMouse = Event.chain(this.view.onContextMenu)\n\t\t\t.filter(_ => !didJustPressContextMenuKey)\n\t\t\t.map(({ element, index, browserEvent }) => ({ element, index, anchor: { x: browserEvent.clientX + 1, y: browserEvent.clientY }, browserEvent }))\n\t\t\t.event;\n\n\t\treturn Event.any<IListContextMenuEvent<T>>(fromKeyDown, fromKeyUp, fromMouse);\n\t}\n\n\tget onKeyDown(): Event<KeyboardEvent> { return domEvent(this.view.domNode, 'keydown'); }\n\tget onKeyUp(): Event<KeyboardEvent> { return domEvent(this.view.domNode, 'keyup'); }\n\tget onKeyPress(): Event<KeyboardEvent> { return domEvent(this.view.domNode, 'keypress'); }\n\n\treadonly onDidFocus: Event<void>;\n\treadonly onDidBlur: Event<void>;\n\n\tprivate readonly _onDidDispose = new Emitter<void>();\n\treadonly onDidDispose: Event<void> = this._onDidDispose.event;\n\n\tconstructor(\n\t\tprivate user: string,\n\t\tcontainer: HTMLElement,\n\t\tvirtualDelegate: IListVirtualDelegate<T>,\n\t\trenderers: IListRenderer<any /* TODO@joao */, any>[],\n\t\tprivate _options: IListOptions<T> = DefaultOptions\n\t) {\n\t\tconst role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? this._options.accessibilityProvider?.getWidgetRole() : 'list';\n\t\tthis.selection = new SelectionTrait(role !== 'listbox');\n\n\t\tmixin(_options, defaultStyles, false);\n\n\t\tconst baseRenderers: IListRenderer<T, ITraitTemplateData>[] = [this.focus.renderer, this.selection.renderer];\n\n\t\tthis.accessibilityProvider = _options.accessibilityProvider;\n\n\t\tif (this.accessibilityProvider) {\n\t\t\tbaseRenderers.push(new AccessibiltyRenderer<T>(this.accessibilityProvider));\n\n\t\t\tif (this.accessibilityProvider.onDidChangeActiveDescendant) {\n\t\t\t\tthis.accessibilityProvider.onDidChangeActiveDescendant(this.onDidChangeActiveDescendant, this, this.disposables);\n\t\t\t}\n\t\t}\n\n\t\trenderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n\n\t\tconst viewOptions: IListViewOptions<T> = {\n\t\t\t..._options,\n\t\t\tdnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd)\n\t\t};\n\n\t\tthis.view = new ListView(container, virtualDelegate, renderers, viewOptions);\n\t\tthis.view.domNode.setAttribute('role', role);\n\n\t\tif (_options.styleController) {\n\t\t\tthis.styleController = _options.styleController(this.view.domId);\n\t\t} else {\n\t\t\tconst styleElement = createStyleSheet(this.view.domNode);\n\t\t\tthis.styleController = new DefaultStyleController(styleElement, this.view.domId);\n\t\t}\n\n\t\tthis.spliceable = new CombinedSpliceable([\n\t\t\tnew TraitSpliceable(this.focus, this.view, _options.identityProvider),\n\t\t\tnew TraitSpliceable(this.selection, this.view, _options.identityProvider),\n\t\t\tnew TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n\t\t\tthis.view\n\t\t]);\n\n\t\tthis.disposables.add(this.focus);\n\t\tthis.disposables.add(this.selection);\n\t\tthis.disposables.add(this.anchor);\n\t\tthis.disposables.add(this.view);\n\t\tthis.disposables.add(this._onDidDispose);\n\n\t\tthis.onDidFocus = Event.map(domEvent(this.view.domNode, 'focus', true), () => null!);\n\t\tthis.onDidBlur = Event.map(domEvent(this.view.domNode, 'blur', true), () => null!);\n\n\t\tthis.disposables.add(new DOMFocusController(this, this.view));\n\n\t\tif (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n\t\t\tconst controller = new KeyboardController(this, this.view, _options);\n\t\t\tthis.disposables.add(controller);\n\t\t}\n\n\t\tif (_options.keyboardNavigationLabelProvider) {\n\t\t\tconst delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n\t\t\tthis.typeLabelController = new TypeLabelController(this, this.view, _options.keyboardNavigationLabelProvider, delegate);\n\t\t\tthis.disposables.add(this.typeLabelController);\n\t\t}\n\n\t\tthis.mouseController = this.createMouseController(_options);\n\t\tthis.disposables.add(this.mouseController);\n\n\t\tthis.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n\t\tthis.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n\n\t\tif (this.accessibilityProvider) {\n\t\t\tthis.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n\t\t}\n\t\tif (_options.multipleSelectionSupport) {\n\t\t\tthis.view.domNode.setAttribute('aria-multiselectable', 'true');\n\t\t}\n\t}\n\n\tprotected createMouseController(options: IListOptions<T>): MouseController<T> {\n\t\treturn new MouseController(this);\n\t}\n\n\tupdateOptions(optionsUpdate: IListOptionsUpdate = {}): void {\n\t\tthis._options = { ...this._options, ...optionsUpdate };\n\n\t\tif (this.typeLabelController) {\n\t\t\tthis.typeLabelController.updateOptions(this._options);\n\t\t}\n\n\t\tthis.view.updateOptions(optionsUpdate);\n\t}\n\n\tget options(): IListOptions<T> {\n\t\treturn this._options;\n\t}\n\n\tsplice(start: number, deleteCount: number, elements: T[] = []): void {\n\t\tif (start < 0 || start > this.view.length) {\n\t\t\tthrow new ListError(this.user, `Invalid start index: ${start}`);\n\t\t}\n\n\t\tif (deleteCount < 0) {\n\t\t\tthrow new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n\t\t}\n\n\t\tif (deleteCount === 0 && elements.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n\t}\n\n\tupdateWidth(index: number): void {\n\t\tthis.view.updateWidth(index);\n\t}\n\n\tupdateElementHeight(index: number, size: number): void {\n\t\tthis.view.updateElementHeight(index, size, null);\n\t}\n\n\trerender(): void {\n\t\tthis.view.rerender();\n\t}\n\n\telement(index: number): T {\n\t\treturn this.view.element(index);\n\t}\n\n\tindexOf(element: T): number {\n\t\treturn this.view.indexOf(element);\n\t}\n\n\tget length(): number {\n\t\treturn this.view.length;\n\t}\n\n\tget contentHeight(): number {\n\t\treturn this.view.contentHeight;\n\t}\n\n\tget onDidChangeContentHeight(): Event<number> {\n\t\treturn this.view.onDidChangeContentHeight;\n\t}\n\n\tget scrollTop(): number {\n\t\treturn this.view.getScrollTop();\n\t}\n\n\tset scrollTop(scrollTop: number) {\n\t\tthis.view.setScrollTop(scrollTop);\n\t}\n\n\tget scrollLeft(): number {\n\t\treturn this.view.getScrollLeft();\n\t}\n\n\tset scrollLeft(scrollLeft: number) {\n\t\tthis.view.setScrollLeft(scrollLeft);\n\t}\n\n\tget scrollHeight(): number {\n\t\treturn this.view.scrollHeight;\n\t}\n\n\tget renderHeight(): number {\n\t\treturn this.view.renderHeight;\n\t}\n\n\tget firstVisibleIndex(): number {\n\t\treturn this.view.firstVisibleIndex;\n\t}\n\n\tget lastVisibleIndex(): number {\n\t\treturn this.view.lastVisibleIndex;\n\t}\n\n\tget ariaLabel(): string {\n\t\treturn this._ariaLabel;\n\t}\n\n\tset ariaLabel(value: string) {\n\t\tthis._ariaLabel = value;\n\t\tthis.view.domNode.setAttribute('aria-label', value);\n\t}\n\n\tdomFocus(): void {\n\t\tthis.view.domNode.focus({ preventScroll: true });\n\t}\n\n\tlayout(height?: number, width?: number): void {\n\t\tthis.view.layout(height, width);\n\t}\n\n\ttoggleKeyboardNavigation(): void {\n\t\tif (this.typeLabelController) {\n\t\t\tthis.typeLabelController.toggle();\n\t\t}\n\t}\n\n\tsetSelection(indexes: number[], browserEvent?: UIEvent): void {\n\t\tfor (const index of indexes) {\n\t\t\tif (index < 0 || index >= this.length) {\n\t\t\t\tthrow new ListError(this.user, `Invalid index ${index}`);\n\t\t\t}\n\t\t}\n\n\t\tthis.selection.set(indexes, browserEvent);\n\t}\n\n\tgetSelection(): number[] {\n\t\treturn this.selection.get();\n\t}\n\n\tgetSelectedElements(): T[] {\n\t\treturn this.getSelection().map(i => this.view.element(i));\n\t}\n\n\tsetAnchor(index: number | undefined): void {\n\t\tif (typeof index === 'undefined') {\n\t\t\tthis.anchor.set([]);\n\t\t\treturn;\n\t\t}\n\n\t\tif (index < 0 || index >= this.length) {\n\t\t\tthrow new ListError(this.user, `Invalid index ${index}`);\n\t\t}\n\n\t\tthis.anchor.set([index]);\n\t}\n\n\tgetAnchor(): number | undefined {\n\t\treturn firstOrDefault(this.anchor.get(), undefined);\n\t}\n\n\tsetFocus(indexes: number[], browserEvent?: UIEvent): void {\n\t\tfor (const index of indexes) {\n\t\t\tif (index < 0 || index >= this.length) {\n\t\t\t\tthrow new ListError(this.user, `Invalid index ${index}`);\n\t\t\t}\n\t\t}\n\n\t\tthis.focus.set(indexes, browserEvent);\n\t}\n\n\tfocusNext(n = 1, loop = false, browserEvent?: UIEvent, filter?: (element: T) => boolean): void {\n\t\tif (this.length === 0) { return; }\n\n\t\tconst focus = this.focus.get();\n\t\tconst index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n\n\t\tif (index > -1) {\n\t\t\tthis.setFocus([index], browserEvent);\n\t\t}\n\t}\n\n\tfocusPrevious(n = 1, loop = false, browserEvent?: UIEvent, filter?: (element: T) => boolean): void {\n\t\tif (this.length === 0) { return; }\n\n\t\tconst focus = this.focus.get();\n\t\tconst index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n\n\t\tif (index > -1) {\n\t\t\tthis.setFocus([index], browserEvent);\n\t\t}\n\t}\n\n\tasync focusNextPage(browserEvent?: UIEvent, filter?: (element: T) => boolean): Promise<void> {\n\t\tlet lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n\t\tlastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n\t\tconst lastPageElement = this.view.element(lastPageIndex);\n\t\tconst currentlyFocusedElement = this.getFocusedElements()[0];\n\n\t\tif (currentlyFocusedElement !== lastPageElement) {\n\t\t\tconst lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n\n\t\t\tif (lastGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(lastGoodPageIndex)) {\n\t\t\t\tthis.setFocus([lastGoodPageIndex], browserEvent);\n\t\t\t} else {\n\t\t\t\tthis.setFocus([lastPageIndex], browserEvent);\n\t\t\t}\n\t\t} else {\n\t\t\tconst previousScrollTop = this.view.getScrollTop();\n\t\t\tthis.view.setScrollTop(previousScrollTop + this.view.renderHeight - this.view.elementHeight(lastPageIndex));\n\n\t\t\tif (this.view.getScrollTop() !== previousScrollTop) {\n\t\t\t\tthis.setFocus([]);\n\n\t\t\t\t// Let the scroll event listener run\n\t\t\t\tawait timeout(0);\n\t\t\t\tawait this.focusNextPage(browserEvent, filter);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync focusPreviousPage(browserEvent?: UIEvent, filter?: (element: T) => boolean): Promise<void> {\n\t\tlet firstPageIndex: number;\n\t\tconst scrollTop = this.view.getScrollTop();\n\n\t\tif (scrollTop === 0) {\n\t\t\tfirstPageIndex = this.view.indexAt(scrollTop);\n\t\t} else {\n\t\t\tfirstPageIndex = this.view.indexAfter(scrollTop - 1);\n\t\t}\n\n\t\tconst firstPageElement = this.view.element(firstPageIndex);\n\t\tconst currentlyFocusedElement = this.getFocusedElements()[0];\n\n\t\tif (currentlyFocusedElement !== firstPageElement) {\n\t\t\tconst firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n\n\t\t\tif (firstGoodPageIndex > -1 && currentlyFocusedElement !== this.view.element(firstGoodPageIndex)) {\n\t\t\t\tthis.setFocus([firstGoodPageIndex], browserEvent);\n\t\t\t} else {\n\t\t\t\tthis.setFocus([firstPageIndex], browserEvent);\n\t\t\t}\n\t\t} else {\n\t\t\tconst previousScrollTop = scrollTop;\n\t\t\tthis.view.setScrollTop(scrollTop - this.view.renderHeight);\n\n\t\t\tif (this.view.getScrollTop() !== previousScrollTop) {\n\t\t\t\tthis.setFocus([]);\n\n\t\t\t\t// Let the scroll event listener run\n\t\t\t\tawait timeout(0);\n\t\t\t\tawait this.focusPreviousPage(browserEvent, filter);\n\t\t\t}\n\t\t}\n\t}\n\n\tfocusLast(browserEvent?: UIEvent, filter?: (element: T) => boolean): void {\n\t\tif (this.length === 0) { return; }\n\n\t\tconst index = this.findPreviousIndex(this.length - 1, false, filter);\n\n\t\tif (index > -1) {\n\t\t\tthis.setFocus([index], browserEvent);\n\t\t}\n\t}\n\n\tfocusFirst(browserEvent?: UIEvent, filter?: (element: T) => boolean): void {\n\t\tthis.focusNth(0, browserEvent, filter);\n\t}\n\n\tfocusNth(n: number, browserEvent?: UIEvent, filter?: (element: T) => boolean): void {\n\t\tif (this.length === 0) { return; }\n\n\t\tconst index = this.findNextIndex(n, false, filter);\n\n\t\tif (index > -1) {\n\t\t\tthis.setFocus([index], browserEvent);\n\t\t}\n\t}\n\n\tprivate findNextIndex(index: number, loop = false, filter?: (element: T) => boolean): number {\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tif (index >= this.length && !loop) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tindex = index % this.length;\n\n\t\t\tif (!filter || filter(this.element(index))) {\n\t\t\t\treturn index;\n\t\t\t}\n\n\t\t\tindex++;\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tprivate findPreviousIndex(index: number, loop = false, filter?: (element: T) => boolean): number {\n\t\tfor (let i = 0; i < this.length; i++) {\n\t\t\tif (index < 0 && !loop) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tindex = (this.length + (index % this.length)) % this.length;\n\n\t\t\tif (!filter || filter(this.element(index))) {\n\t\t\t\treturn index;\n\t\t\t}\n\n\t\t\tindex--;\n\t\t}\n\n\t\treturn -1;\n\t}\n\n\tgetFocus(): number[] {\n\t\treturn this.focus.get();\n\t}\n\n\tgetFocusedElements(): T[] {\n\t\treturn this.getFocus().map(i => this.view.element(i));\n\t}\n\n\treveal(index: number, relativeTop?: number): void {\n\t\tif (index < 0 || index >= this.length) {\n\t\t\tthrow new ListError(this.user, `Invalid index ${index}`);\n\t\t}\n\n\t\tconst scrollTop = this.view.getScrollTop();\n\t\tconst elementTop = this.view.elementTop(index);\n\t\tconst elementHeight = this.view.elementHeight(index);\n\n\t\tif (isNumber(relativeTop)) {\n\t\t\t// y = mx + b\n\t\t\tconst m = elementHeight - this.view.renderHeight;\n\t\t\tthis.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop);\n\t\t} else {\n\t\t\tconst viewItemBottom = elementTop + elementHeight;\n\t\t\tconst scrollBottom = scrollTop + this.view.renderHeight;\n\n\t\t\tif (elementTop < scrollTop && viewItemBottom >= scrollBottom) {\n\t\t\t\t// The element is already overflowing the viewport, no-op\n\t\t\t} else if (elementTop < scrollTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n\t\t\t\tthis.view.setScrollTop(elementTop);\n\t\t\t} else if (viewItemBottom >= scrollBottom) {\n\t\t\t\tthis.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Returns the relative position of an element rendered in the list.\n\t * Returns `null` if the element isn't *entirely* in the visible viewport.\n\t */\n\tgetRelativeTop(index: number): number | null {\n\t\tif (index < 0 || index >= this.length) {\n\t\t\tthrow new ListError(this.user, `Invalid index ${index}`);\n\t\t}\n\n\t\tconst scrollTop = this.view.getScrollTop();\n\t\tconst elementTop = this.view.elementTop(index);\n\t\tconst elementHeight = this.view.elementHeight(index);\n\n\t\tif (elementTop < scrollTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\n\t\t\treturn null;\n\t\t}\n\n\t\t// y = mx + b\n\t\tconst m = elementHeight - this.view.renderHeight;\n\t\treturn Math.abs((scrollTop - elementTop) / m);\n\t}\n\n\tisDOMFocused(): boolean {\n\t\treturn this.view.domNode === document.activeElement;\n\t}\n\n\tgetHTMLElement(): HTMLElement {\n\t\treturn this.view.domNode;\n\t}\n\n\tstyle(styles: IListStyles): void {\n\t\tthis.styleController.style(styles);\n\t}\n\n\tprivate toListEvent({ indexes, browserEvent }: ITraitChangeEvent) {\n\t\treturn { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n\t}\n\n\tprivate _onFocusChange(): void {\n\t\tconst focus = this.focus.get();\n\t\tthis.view.domNode.classList.toggle('element-focused', focus.length > 0);\n\t\tthis.onDidChangeActiveDescendant();\n\t}\n\n\tprivate onDidChangeActiveDescendant(): void {\n\t\tconst focus = this.focus.get();\n\n\t\tif (focus.length > 0) {\n\t\t\tlet id: string | undefined;\n\n\t\t\tif (this.accessibilityProvider?.getActiveDescendantId) {\n\t\t\t\tid = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n\t\t\t}\n\n\t\t\tthis.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n\t\t} else {\n\t\t\tthis.view.domNode.removeAttribute('aria-activedescendant');\n\t\t}\n\t}\n\n\tprivate _onSelectionChange(): void {\n\t\tconst selection = this.selection.get();\n\n\t\tthis.view.domNode.classList.toggle('selection-none', selection.length === 0);\n\t\tthis.view.domNode.classList.toggle('selection-single', selection.length === 1);\n\t\tthis.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n\t}\n\n\tdispose(): void {\n\t\tthis._onDidDispose.fire();\n\t\tthis.disposables.dispose();\n\n\t\tthis._onDidDispose.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/tree';\nimport { IDisposable, dispose, Disposable, toDisposable, DisposableStore } from 'vs/base/common/lifecycle';\nimport { IListOptions, List, IListStyles, MouseController, DefaultKeyboardNavigationDelegate, isInputElement, isMonacoEditor } from 'vs/base/browser/ui/list/listWidget';\nimport { IListVirtualDelegate, IListRenderer, IListMouseEvent, IListContextMenuEvent, IListDragAndDrop, IListDragOverReaction, IKeyboardNavigationLabelProvider, IIdentityProvider, IKeyboardNavigationDelegate } from 'vs/base/browser/ui/list/list';\nimport { append, $, getDomNodePagePosition, hasParentWithClass, createStyleSheet, clearNode } from 'vs/base/browser/dom';\nimport { Event, Relay, Emitter, EventBufferer } from 'vs/base/common/event';\nimport { StandardKeyboardEvent } from 'vs/base/browser/keyboardEvent';\nimport { KeyCode } from 'vs/base/common/keyCodes';\nimport { ITreeModel, ITreeNode, ITreeRenderer, ITreeEvent, ITreeMouseEvent, ITreeContextMenuEvent, ITreeFilter, ITreeNavigator, ICollapseStateChangeEvent, ITreeDragAndDrop, TreeDragOverBubble, TreeVisibility, TreeFilterResult, ITreeModelSpliceEvent, TreeMouseEventTarget } from 'vs/base/browser/ui/tree/tree';\nimport { ISpliceable } from 'vs/base/common/sequence';\nimport { IDragAndDropData, StaticDND, DragAndDropData } from 'vs/base/browser/dnd';\nimport { range, equals, distinctES6, firstOrDefault } from 'vs/base/common/arrays';\nimport { ElementsDragAndDropData } from 'vs/base/browser/ui/list/listView';\nimport { domEvent } from 'vs/base/browser/event';\nimport { fuzzyScore, FuzzyScore } from 'vs/base/common/filters';\nimport { getVisibleState, isFilterResult } from 'vs/base/browser/ui/tree/indexTreeModel';\nimport { localize } from 'vs/nls';\nimport { disposableTimeout } from 'vs/base/common/async';\nimport { isMacintosh } from 'vs/base/common/platform';\nimport { clamp } from 'vs/base/common/numbers';\nimport { ScrollEvent } from 'vs/base/common/scrollable';\nimport { SetMap } from 'vs/base/common/collections';\nimport { treeItemExpandedIcon, treeFilterOnTypeOnIcon, treeFilterOnTypeOffIcon, treeFilterClearIcon } from 'vs/base/browser/ui/tree/treeIcons';\n\nclass TreeElementsDragAndDropData<T, TFilterData, TContext> extends ElementsDragAndDropData<T, TContext> {\n\n\toverride set context(context: TContext | undefined) {\n\t\tthis.data.context = context;\n\t}\n\n\toverride get context(): TContext | undefined {\n\t\treturn this.data.context;\n\t}\n\n\tconstructor(private data: ElementsDragAndDropData<ITreeNode<T, TFilterData>, TContext>) {\n\t\tsuper(data.elements.map(node => node.element));\n\t}\n}\n\nfunction asTreeDragAndDropData<T, TFilterData>(data: IDragAndDropData): IDragAndDropData {\n\tif (data instanceof ElementsDragAndDropData) {\n\t\treturn new TreeElementsDragAndDropData(data);\n\t}\n\n\treturn data;\n}\n\nclass TreeNodeListDragAndDrop<T, TFilterData, TRef> implements IListDragAndDrop<ITreeNode<T, TFilterData>> {\n\n\tprivate autoExpandNode: ITreeNode<T, TFilterData> | undefined;\n\tprivate autoExpandDisposable: IDisposable = Disposable.None;\n\n\tconstructor(private modelProvider: () => ITreeModel<T, TFilterData, TRef>, private dnd: ITreeDragAndDrop<T>) { }\n\n\tgetDragURI(node: ITreeNode<T, TFilterData>): string | null {\n\t\treturn this.dnd.getDragURI(node.element);\n\t}\n\n\tgetDragLabel(nodes: ITreeNode<T, TFilterData>[], originalEvent: DragEvent): string | undefined {\n\t\tif (this.dnd.getDragLabel) {\n\t\t\treturn this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\tonDragStart(data: IDragAndDropData, originalEvent: DragEvent): void {\n\t\tif (this.dnd.onDragStart) {\n\t\t\tthis.dnd.onDragStart(asTreeDragAndDropData(data), originalEvent);\n\t\t}\n\t}\n\n\tonDragOver(data: IDragAndDropData, targetNode: ITreeNode<T, TFilterData> | undefined, targetIndex: number | undefined, originalEvent: DragEvent, raw = true): boolean | IListDragOverReaction {\n\t\tconst result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n\t\tconst didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n\n\t\tif (didChangeAutoExpandNode) {\n\t\t\tthis.autoExpandDisposable.dispose();\n\t\t\tthis.autoExpandNode = targetNode;\n\t\t}\n\n\t\tif (typeof targetNode === 'undefined') {\n\t\t\treturn result;\n\t\t}\n\n\t\tif (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n\t\t\tthis.autoExpandDisposable = disposableTimeout(() => {\n\t\t\t\tconst model = this.modelProvider();\n\t\t\t\tconst ref = model.getNodeLocation(targetNode);\n\n\t\t\t\tif (model.isCollapsed(ref)) {\n\t\t\t\t\tmodel.setCollapsed(ref, false);\n\t\t\t\t}\n\n\t\t\t\tthis.autoExpandNode = undefined;\n\t\t\t}, 500);\n\t\t}\n\n\t\tif (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n\t\t\tif (!raw) {\n\t\t\t\tconst accept = typeof result === 'boolean' ? result : result.accept;\n\t\t\t\tconst effect = typeof result === 'boolean' ? undefined : result.effect;\n\t\t\t\treturn { accept, effect, feedback: [targetIndex!] };\n\t\t\t}\n\n\t\t\treturn result;\n\t\t}\n\n\t\tif (result.bubble === TreeDragOverBubble.Up) {\n\t\t\tconst model = this.modelProvider();\n\t\t\tconst ref = model.getNodeLocation(targetNode);\n\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\t\t\tconst parentNode = model.getNode(parentRef);\n\t\t\tconst parentIndex = parentRef && model.getListIndex(parentRef);\n\n\t\t\treturn this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\n\t\t}\n\n\t\tconst model = this.modelProvider();\n\t\tconst ref = model.getNodeLocation(targetNode);\n\t\tconst start = model.getListIndex(ref);\n\t\tconst length = model.getListRenderCount(ref);\n\n\t\treturn { ...result, feedback: range(start, start + length) };\n\t}\n\n\tdrop(data: IDragAndDropData, targetNode: ITreeNode<T, TFilterData> | undefined, targetIndex: number | undefined, originalEvent: DragEvent): void {\n\t\tthis.autoExpandDisposable.dispose();\n\t\tthis.autoExpandNode = undefined;\n\n\t\tthis.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n\t}\n\n\tonDragEnd(originalEvent: DragEvent): void {\n\t\tif (this.dnd.onDragEnd) {\n\t\t\tthis.dnd.onDragEnd(originalEvent);\n\t\t}\n\t}\n}\n\nfunction asListOptions<T, TFilterData, TRef>(modelProvider: () => ITreeModel<T, TFilterData, TRef>, options?: IAbstractTreeOptions<T, TFilterData>): IListOptions<ITreeNode<T, TFilterData>> | undefined {\n\treturn options && {\n\t\t...options,\n\t\tidentityProvider: options.identityProvider && {\n\t\t\tgetId(el) {\n\t\t\t\treturn options.identityProvider!.getId(el.element);\n\t\t\t}\n\t\t},\n\t\tdnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd),\n\t\tmultipleSelectionController: options.multipleSelectionController && {\n\t\t\tisSelectionSingleChangeEvent(e) {\n\t\t\t\treturn options.multipleSelectionController!.isSelectionSingleChangeEvent({ ...e, element: e.element } as any);\n\t\t\t},\n\t\t\tisSelectionRangeChangeEvent(e) {\n\t\t\t\treturn options.multipleSelectionController!.isSelectionRangeChangeEvent({ ...e, element: e.element } as any);\n\t\t\t}\n\t\t},\n\t\taccessibilityProvider: options.accessibilityProvider && {\n\t\t\t...options.accessibilityProvider,\n\t\t\tgetSetSize(node) {\n\t\t\t\tconst model = modelProvider();\n\t\t\t\tconst ref = model.getNodeLocation(node);\n\t\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\t\t\t\tconst parentNode = model.getNode(parentRef);\n\n\t\t\t\treturn parentNode.visibleChildrenCount;\n\t\t\t},\n\t\t\tgetPosInSet(node) {\n\t\t\t\treturn node.visibleChildIndex + 1;\n\t\t\t},\n\t\t\tisChecked: options.accessibilityProvider && options.accessibilityProvider.isChecked ? (node) => {\n\t\t\t\treturn options.accessibilityProvider!.isChecked!(node.element);\n\t\t\t} : undefined,\n\t\t\tgetRole: options.accessibilityProvider && options.accessibilityProvider.getRole ? (node) => {\n\t\t\t\treturn options.accessibilityProvider!.getRole!(node.element);\n\t\t\t} : () => 'treeitem',\n\t\t\tgetAriaLabel(e) {\n\t\t\t\treturn options.accessibilityProvider!.getAriaLabel(e.element);\n\t\t\t},\n\t\t\tgetWidgetAriaLabel() {\n\t\t\t\treturn options.accessibilityProvider!.getWidgetAriaLabel();\n\t\t\t},\n\t\t\tgetWidgetRole: options.accessibilityProvider && options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider!.getWidgetRole!() : () => 'tree',\n\t\t\tgetAriaLevel: options.accessibilityProvider && options.accessibilityProvider.getAriaLevel ? (node) => options.accessibilityProvider!.getAriaLevel!(node.element) : (node) => {\n\t\t\t\treturn node.depth;\n\t\t\t},\n\t\t\tgetActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n\t\t\t\treturn options.accessibilityProvider!.getActiveDescendantId!(node.element);\n\t\t\t})\n\t\t},\n\t\tkeyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n\t\t\t...options.keyboardNavigationLabelProvider,\n\t\t\tgetKeyboardNavigationLabel(node) {\n\t\t\t\treturn options.keyboardNavigationLabelProvider!.getKeyboardNavigationLabel(node.element);\n\t\t\t}\n\t\t},\n\t\tenableKeyboardNavigation: options.simpleKeyboardNavigation\n\t};\n}\n\nexport class ComposedTreeDelegate<T, N extends { element: T }> implements IListVirtualDelegate<N> {\n\n\tconstructor(private delegate: IListVirtualDelegate<T>) { }\n\n\tgetHeight(element: N): number {\n\t\treturn this.delegate.getHeight(element.element);\n\t}\n\n\tgetTemplateId(element: N): string {\n\t\treturn this.delegate.getTemplateId(element.element);\n\t}\n\n\thasDynamicHeight(element: N): boolean {\n\t\treturn !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n\t}\n\n\tsetDynamicHeight(element: N, height: number): void {\n\t\tif (this.delegate.setDynamicHeight) {\n\t\t\tthis.delegate.setDynamicHeight(element.element, height);\n\t\t}\n\t}\n}\n\ninterface ITreeListTemplateData<T> {\n\treadonly container: HTMLElement;\n\treadonly indent: HTMLElement;\n\treadonly twistie: HTMLElement;\n\tindentGuidesDisposable: IDisposable;\n\treadonly templateData: T;\n}\n\nexport enum RenderIndentGuides {\n\tNone = 'none',\n\tOnHover = 'onHover',\n\tAlways = 'always'\n}\n\ninterface ITreeRendererOptions {\n\treadonly indent?: number;\n\treadonly renderIndentGuides?: RenderIndentGuides;\n\t// TODO@joao replace this with collapsible: boolean | 'ondemand'\n\treadonly hideTwistiesOfChildlessElements?: boolean;\n}\n\ninterface IRenderData<TTemplateData> {\n\ttemplateData: ITreeListTemplateData<TTemplateData>;\n\theight: number;\n}\n\ninterface Collection<T> {\n\treadonly elements: T[];\n\treadonly onDidChange: Event<T[]>;\n}\n\nclass EventCollection<T> implements Collection<T> {\n\n\treadonly onDidChange: Event<T[]>;\n\n\tget elements(): T[] {\n\t\treturn this._elements;\n\t}\n\n\tconstructor(onDidChange: Event<T[]>, private _elements: T[] = []) {\n\t\tthis.onDidChange = Event.forEach(onDidChange, elements => this._elements = elements);\n\t}\n}\n\nclass TreeRenderer<T, TFilterData, TRef, TTemplateData> implements IListRenderer<ITreeNode<T, TFilterData>, ITreeListTemplateData<TTemplateData>> {\n\n\tprivate static readonly DefaultIndent = 8;\n\n\treadonly templateId: string;\n\tprivate renderedElements = new Map<T, ITreeNode<T, TFilterData>>();\n\tprivate renderedNodes = new Map<ITreeNode<T, TFilterData>, IRenderData<TTemplateData>>();\n\tprivate indent: number = TreeRenderer.DefaultIndent;\n\tprivate hideTwistiesOfChildlessElements: boolean = false;\n\n\tprivate shouldRenderIndentGuides: boolean = false;\n\tprivate renderedIndentGuides = new SetMap<ITreeNode<T, TFilterData>, HTMLDivElement>();\n\tprivate activeIndentNodes = new Set<ITreeNode<T, TFilterData>>();\n\tprivate indentGuidesDisposable: IDisposable = Disposable.None;\n\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate renderer: ITreeRenderer<T, TFilterData, TTemplateData>,\n\t\tprivate modelProvider: () => ITreeModel<T, TFilterData, TRef>,\n\t\tonDidChangeCollapseState: Event<ICollapseStateChangeEvent<T, TFilterData>>,\n\t\tprivate activeNodes: Collection<ITreeNode<T, TFilterData>>,\n\t\toptions: ITreeRendererOptions = {}\n\t) {\n\t\tthis.templateId = renderer.templateId;\n\t\tthis.updateOptions(options);\n\n\t\tEvent.map(onDidChangeCollapseState, e => e.node)(this.onDidChangeNodeTwistieState, this, this.disposables);\n\n\t\tif (renderer.onDidChangeTwistieState) {\n\t\t\trenderer.onDidChangeTwistieState(this.onDidChangeTwistieState, this, this.disposables);\n\t\t}\n\t}\n\n\tupdateOptions(options: ITreeRendererOptions = {}): void {\n\t\tif (typeof options.indent !== 'undefined') {\n\t\t\tthis.indent = clamp(options.indent, 0, 40);\n\t\t}\n\n\t\tif (typeof options.renderIndentGuides !== 'undefined') {\n\t\t\tconst shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n\n\t\t\tif (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n\t\t\t\tthis.shouldRenderIndentGuides = shouldRenderIndentGuides;\n\t\t\t\tthis.indentGuidesDisposable.dispose();\n\n\t\t\t\tif (shouldRenderIndentGuides) {\n\t\t\t\t\tconst disposables = new DisposableStore();\n\t\t\t\t\tthis.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n\t\t\t\t\tthis.indentGuidesDisposable = disposables;\n\n\t\t\t\t\tthis._onDidChangeActiveNodes(this.activeNodes.elements);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n\t\t\tthis.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n\t\t}\n\t}\n\n\trenderTemplate(container: HTMLElement): ITreeListTemplateData<TTemplateData> {\n\t\tconst el = append(container, $('.monaco-tl-row'));\n\t\tconst indent = append(el, $('.monaco-tl-indent'));\n\t\tconst twistie = append(el, $('.monaco-tl-twistie'));\n\t\tconst contents = append(el, $('.monaco-tl-contents'));\n\t\tconst templateData = this.renderer.renderTemplate(contents);\n\n\t\treturn { container, indent, twistie, indentGuidesDisposable: Disposable.None, templateData };\n\t}\n\n\trenderElement(node: ITreeNode<T, TFilterData>, index: number, templateData: ITreeListTemplateData<TTemplateData>, height: number | undefined): void {\n\t\tif (typeof height === 'number') {\n\t\t\tthis.renderedNodes.set(node, { templateData, height });\n\t\t\tthis.renderedElements.set(node.element, node);\n\t\t}\n\n\t\tconst indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n\t\ttemplateData.twistie.style.paddingLeft = `${indent}px`;\n\t\ttemplateData.indent.style.width = `${indent + this.indent - 16}px`;\n\n\t\tthis.renderTwistie(node, templateData);\n\n\t\tif (typeof height === 'number') {\n\t\t\tthis.renderIndentGuides(node, templateData);\n\t\t}\n\n\t\tthis.renderer.renderElement(node, index, templateData.templateData, height);\n\t}\n\n\tdisposeElement(node: ITreeNode<T, TFilterData>, index: number, templateData: ITreeListTemplateData<TTemplateData>, height: number | undefined): void {\n\t\ttemplateData.indentGuidesDisposable.dispose();\n\n\t\tif (this.renderer.disposeElement) {\n\t\t\tthis.renderer.disposeElement(node, index, templateData.templateData, height);\n\t\t}\n\n\t\tif (typeof height === 'number') {\n\t\t\tthis.renderedNodes.delete(node);\n\t\t\tthis.renderedElements.delete(node.element);\n\t\t}\n\t}\n\n\tdisposeTemplate(templateData: ITreeListTemplateData<TTemplateData>): void {\n\t\tthis.renderer.disposeTemplate(templateData.templateData);\n\t}\n\n\tprivate onDidChangeTwistieState(element: T): void {\n\t\tconst node = this.renderedElements.get(element);\n\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.onDidChangeNodeTwistieState(node);\n\t}\n\n\tprivate onDidChangeNodeTwistieState(node: ITreeNode<T, TFilterData>): void {\n\t\tconst data = this.renderedNodes.get(node);\n\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.renderTwistie(node, data.templateData);\n\t\tthis._onDidChangeActiveNodes(this.activeNodes.elements);\n\t\tthis.renderIndentGuides(node, data.templateData);\n\t}\n\n\tprivate renderTwistie(node: ITreeNode<T, TFilterData>, templateData: ITreeListTemplateData<TTemplateData>) {\n\t\ttemplateData.twistie.classList.remove(...treeItemExpandedIcon.classNamesArray);\n\n\t\tlet twistieRendered = false;\n\n\t\tif (this.renderer.renderTwistie) {\n\t\t\ttwistieRendered = this.renderer.renderTwistie(node.element, templateData.twistie);\n\t\t}\n\n\t\tif (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n\t\t\tif (!twistieRendered) {\n\t\t\t\ttemplateData.twistie.classList.add(...treeItemExpandedIcon.classNamesArray);\n\t\t\t}\n\n\t\t\ttemplateData.twistie.classList.add('collapsible');\n\t\t\ttemplateData.twistie.classList.toggle('collapsed', node.collapsed);\n\t\t} else {\n\t\t\ttemplateData.twistie.classList.remove('collapsible', 'collapsed');\n\t\t}\n\n\t\tif (node.collapsible) {\n\t\t\ttemplateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n\t\t} else {\n\t\t\ttemplateData.container.removeAttribute('aria-expanded');\n\t\t}\n\t}\n\n\tprivate renderIndentGuides(target: ITreeNode<T, TFilterData>, templateData: ITreeListTemplateData<TTemplateData>): void {\n\t\tclearNode(templateData.indent);\n\t\ttemplateData.indentGuidesDisposable.dispose();\n\n\t\tif (!this.shouldRenderIndentGuides) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst disposableStore = new DisposableStore();\n\t\tconst model = this.modelProvider();\n\n\t\tlet node = target;\n\n\t\twhile (true) {\n\t\t\tconst ref = model.getNodeLocation(node);\n\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\n\t\t\tif (!parentRef) {\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tconst parent = model.getNode(parentRef);\n\t\t\tconst guide = $<HTMLDivElement>('.indent-guide', { style: `width: ${this.indent}px` });\n\n\t\t\tif (this.activeIndentNodes.has(parent)) {\n\t\t\t\tguide.classList.add('active');\n\t\t\t}\n\n\t\t\tif (templateData.indent.childElementCount === 0) {\n\t\t\t\ttemplateData.indent.appendChild(guide);\n\t\t\t} else {\n\t\t\t\ttemplateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n\t\t\t}\n\n\t\t\tthis.renderedIndentGuides.add(parent, guide);\n\t\t\tdisposableStore.add(toDisposable(() => this.renderedIndentGuides.delete(parent, guide)));\n\n\t\t\tnode = parent;\n\t\t}\n\n\t\ttemplateData.indentGuidesDisposable = disposableStore;\n\t}\n\n\tprivate _onDidChangeActiveNodes(nodes: ITreeNode<T, TFilterData>[]): void {\n\t\tif (!this.shouldRenderIndentGuides) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst set = new Set<ITreeNode<T, TFilterData>>();\n\t\tconst model = this.modelProvider();\n\n\t\tnodes.forEach(node => {\n\t\t\tconst ref = model.getNodeLocation(node);\n\t\t\ttry {\n\t\t\t\tconst parentRef = model.getParentNodeLocation(ref);\n\n\t\t\t\tif (node.collapsible && node.children.length > 0 && !node.collapsed) {\n\t\t\t\t\tset.add(node);\n\t\t\t\t} else if (parentRef) {\n\t\t\t\t\tset.add(model.getNode(parentRef));\n\t\t\t\t}\n\t\t\t} catch {\n\t\t\t\t// noop\n\t\t\t}\n\t\t});\n\n\t\tthis.activeIndentNodes.forEach(node => {\n\t\t\tif (!set.has(node)) {\n\t\t\t\tthis.renderedIndentGuides.forEach(node, line => line.classList.remove('active'));\n\t\t\t}\n\t\t});\n\n\t\tset.forEach(node => {\n\t\t\tif (!this.activeIndentNodes.has(node)) {\n\t\t\t\tthis.renderedIndentGuides.forEach(node, line => line.classList.add('active'));\n\t\t\t}\n\t\t});\n\n\t\tthis.activeIndentNodes = set;\n\t}\n\n\tdispose(): void {\n\t\tthis.renderedNodes.clear();\n\t\tthis.renderedElements.clear();\n\t\tthis.indentGuidesDisposable.dispose();\n\t\tdispose(this.disposables);\n\t}\n}\n\nexport type LabelFuzzyScore = { label: string; score: FuzzyScore };\n\nclass TypeFilter<T> implements ITreeFilter<T, FuzzyScore | LabelFuzzyScore>, IDisposable {\n\tprivate _totalCount = 0;\n\tget totalCount(): number { return this._totalCount; }\n\tprivate _matchCount = 0;\n\tget matchCount(): number { return this._matchCount; }\n\n\tprivate _pattern: string = '';\n\tprivate _lowercasePattern: string = '';\n\tprivate readonly disposables = new DisposableStore();\n\n\tset pattern(pattern: string) {\n\t\tthis._pattern = pattern;\n\t\tthis._lowercasePattern = pattern.toLowerCase();\n\t}\n\n\tconstructor(\n\t\tprivate tree: AbstractTree<T, any, any>,\n\t\tprivate keyboardNavigationLabelProvider: IKeyboardNavigationLabelProvider<T>,\n\t\tprivate _filter?: ITreeFilter<T, FuzzyScore>\n\t) {\n\t\ttree.onWillRefilter(this.reset, this, this.disposables);\n\t}\n\n\tfilter(element: T, parentVisibility: TreeVisibility): TreeFilterResult<FuzzyScore | LabelFuzzyScore> {\n\t\tif (this._filter) {\n\t\t\tconst result = this._filter.filter(element, parentVisibility);\n\n\t\t\tif (this.tree.options.simpleKeyboardNavigation) {\n\t\t\t\treturn result;\n\t\t\t}\n\n\t\t\tlet visibility: TreeVisibility;\n\n\t\t\tif (typeof result === 'boolean') {\n\t\t\t\tvisibility = result ? TreeVisibility.Visible : TreeVisibility.Hidden;\n\t\t\t} else if (isFilterResult(result)) {\n\t\t\t\tvisibility = getVisibleState(result.visibility);\n\t\t\t} else {\n\t\t\t\tvisibility = result;\n\t\t\t}\n\n\t\t\tif (visibility === TreeVisibility.Hidden) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tthis._totalCount++;\n\n\t\tif (this.tree.options.simpleKeyboardNavigation || !this._pattern) {\n\t\t\tthis._matchCount++;\n\t\t\treturn { data: FuzzyScore.Default, visibility: true };\n\t\t}\n\n\t\tconst label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n\t\tconst labels = Array.isArray(label) ? label : [label];\n\n\t\tfor (const l of labels) {\n\t\t\tconst labelStr = l && l.toString();\n\t\t\tif (typeof labelStr === 'undefined') {\n\t\t\t\treturn { data: FuzzyScore.Default, visibility: true };\n\t\t\t}\n\n\t\t\tconst score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, true);\n\t\t\tif (score) {\n\t\t\t\tthis._matchCount++;\n\t\t\t\treturn labels.length === 1 ?\n\t\t\t\t\t{ data: score, visibility: true } :\n\t\t\t\t\t{ data: { label: labelStr, score: score }, visibility: true };\n\t\t\t}\n\t\t}\n\n\t\tif (this.tree.options.filterOnType) {\n\t\t\treturn TreeVisibility.Recurse;\n\t\t} else {\n\t\t\treturn { data: FuzzyScore.Default, visibility: true };\n\t\t}\n\t}\n\n\tprivate reset(): void {\n\t\tthis._totalCount = 0;\n\t\tthis._matchCount = 0;\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.disposables);\n\t}\n}\n\nclass TypeFilterController<T, TFilterData> implements IDisposable {\n\n\tprivate _enabled = false;\n\tget enabled(): boolean { return this._enabled; }\n\n\tprivate _pattern = '';\n\tget pattern(): string { return this._pattern; }\n\n\tprivate _filterOnType: boolean;\n\tget filterOnType(): boolean { return this._filterOnType; }\n\n\tprivate _empty: boolean = false;\n\tget empty(): boolean { return this._empty; }\n\n\tprivate readonly _onDidChangeEmptyState = new Emitter<boolean>();\n\treadonly onDidChangeEmptyState: Event<boolean> = Event.latch(this._onDidChangeEmptyState.event);\n\n\tprivate positionClassName = 'ne';\n\tprivate domNode: HTMLElement;\n\tprivate messageDomNode: HTMLElement;\n\tprivate labelDomNode: HTMLElement;\n\tprivate filterOnTypeDomNode: HTMLInputElement;\n\tprivate clearDomNode: HTMLElement;\n\tprivate keyboardNavigationEventFilter?: IKeyboardNavigationEventFilter;\n\n\tprivate automaticKeyboardNavigation = true;\n\tprivate triggered = false;\n\n\tprivate readonly _onDidChangePattern = new Emitter<string>();\n\treadonly onDidChangePattern = this._onDidChangePattern.event;\n\n\tprivate readonly enabledDisposables = new DisposableStore();\n\tprivate readonly disposables = new DisposableStore();\n\n\tconstructor(\n\t\tprivate tree: AbstractTree<T, TFilterData, any>,\n\t\tmodel: ITreeModel<T, TFilterData, any>,\n\t\tprivate view: List<ITreeNode<T, TFilterData>>,\n\t\tprivate filter: TypeFilter<T>,\n\t\tprivate keyboardNavigationDelegate: IKeyboardNavigationDelegate\n\t) {\n\t\tthis.domNode = $(`.monaco-list-type-filter.${this.positionClassName}`);\n\t\tthis.domNode.draggable = true;\n\t\tdomEvent(this.domNode, 'dragstart')(this.onDragStart, this, this.disposables);\n\n\t\tthis.messageDomNode = append(view.getHTMLElement(), $(`.monaco-list-type-filter-message`));\n\n\t\tthis.labelDomNode = append(this.domNode, $('span.label'));\n\t\tconst controls = append(this.domNode, $('.controls'));\n\n\t\tthis._filterOnType = !!tree.options.filterOnType;\n\t\tthis.filterOnTypeDomNode = append(controls, $<HTMLInputElement>('input.filter'));\n\t\tthis.filterOnTypeDomNode.type = 'checkbox';\n\t\tthis.filterOnTypeDomNode.checked = this._filterOnType;\n\t\tthis.filterOnTypeDomNode.tabIndex = -1;\n\t\tthis.updateFilterOnTypeTitleAndIcon();\n\t\tdomEvent(this.filterOnTypeDomNode, 'input')(this.onDidChangeFilterOnType, this, this.disposables);\n\n\t\tthis.clearDomNode = append(controls, $<HTMLInputElement>('button.clear' + treeFilterClearIcon.cssSelector));\n\t\tthis.clearDomNode.tabIndex = -1;\n\t\tthis.clearDomNode.title = localize('clear', \"Clear\");\n\n\t\tthis.keyboardNavigationEventFilter = tree.options.keyboardNavigationEventFilter;\n\n\t\tmodel.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n\t\tthis.updateOptions(tree.options);\n\t}\n\n\tupdateOptions(options: IAbstractTreeOptions<T, TFilterData>): void {\n\t\tif (options.simpleKeyboardNavigation) {\n\t\t\tthis.disable();\n\t\t} else {\n\t\t\tthis.enable();\n\t\t}\n\n\t\tif (typeof options.filterOnType !== 'undefined') {\n\t\t\tthis._filterOnType = !!options.filterOnType;\n\t\t\tthis.filterOnTypeDomNode.checked = this._filterOnType;\n\t\t\tthis.updateFilterOnTypeTitleAndIcon();\n\t\t}\n\n\t\tif (typeof options.automaticKeyboardNavigation !== 'undefined') {\n\t\t\tthis.automaticKeyboardNavigation = options.automaticKeyboardNavigation;\n\t\t}\n\n\t\tthis.tree.refilter();\n\t\tthis.render();\n\n\t\tif (!this.automaticKeyboardNavigation) {\n\t\t\tthis.onEventOrInput('');\n\t\t}\n\t}\n\n\ttoggle(): void {\n\t\tthis.triggered = !this.triggered;\n\n\t\tif (!this.triggered) {\n\t\t\tthis.onEventOrInput('');\n\t\t}\n\t}\n\n\tprivate enable(): void {\n\t\tif (this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst onKeyDown = Event.chain(domEvent(this.view.getHTMLElement(), 'keydown'))\n\t\t\t.filter(e => !isInputElement(e.target as HTMLElement) || e.target === this.filterOnTypeDomNode)\n\t\t\t.filter(e => e.key !== 'Dead' && !/^Media/.test(e.key))\n\t\t\t.map(e => new StandardKeyboardEvent(e))\n\t\t\t.filter(this.keyboardNavigationEventFilter || (() => true))\n\t\t\t.filter(() => this.automaticKeyboardNavigation || this.triggered)\n\t\t\t.filter(e => (this.keyboardNavigationDelegate.mightProducePrintableCharacter(e) && !(e.keyCode === KeyCode.DownArrow || e.keyCode === KeyCode.UpArrow || e.keyCode === KeyCode.LeftArrow || e.keyCode === KeyCode.RightArrow)) || ((this.pattern.length > 0 || this.triggered) && ((e.keyCode === KeyCode.Escape || e.keyCode === KeyCode.Backspace) && !e.altKey && !e.ctrlKey && !e.metaKey) || (e.keyCode === KeyCode.Backspace && (isMacintosh ? (e.altKey && !e.metaKey) : e.ctrlKey) && !e.shiftKey)))\n\t\t\t.forEach(e => { e.stopPropagation(); e.preventDefault(); })\n\t\t\t.event;\n\n\t\tconst onClear = domEvent(this.clearDomNode, 'click');\n\n\t\tEvent.chain(Event.any<MouseEvent | StandardKeyboardEvent>(onKeyDown, onClear))\n\t\t\t.event(this.onEventOrInput, this, this.enabledDisposables);\n\n\t\tthis.filter.pattern = '';\n\t\tthis.tree.refilter();\n\t\tthis.render();\n\t\tthis._enabled = true;\n\t\tthis.triggered = false;\n\t}\n\n\tprivate disable(): void {\n\t\tif (!this._enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.domNode.remove();\n\t\tthis.enabledDisposables.clear();\n\t\tthis.tree.refilter();\n\t\tthis.render();\n\t\tthis._enabled = false;\n\t\tthis.triggered = false;\n\t}\n\n\tprivate onEventOrInput(e: MouseEvent | StandardKeyboardEvent | string): void {\n\t\tif (typeof e === 'string') {\n\t\t\tthis.onInput(e);\n\t\t} else if (e instanceof MouseEvent || e.keyCode === KeyCode.Escape || (e.keyCode === KeyCode.Backspace && (isMacintosh ? e.altKey : e.ctrlKey))) {\n\t\t\tthis.onInput('');\n\t\t} else if (e.keyCode === KeyCode.Backspace) {\n\t\t\tthis.onInput(this.pattern.length === 0 ? '' : this.pattern.substr(0, this.pattern.length - 1));\n\t\t} else {\n\t\t\tthis.onInput(this.pattern + e.browserEvent.key);\n\t\t}\n\t}\n\n\tprivate onInput(pattern: string): void {\n\t\tconst container = this.view.getHTMLElement();\n\n\t\tif (pattern && !this.domNode.parentElement) {\n\t\t\tcontainer.append(this.domNode);\n\t\t} else if (!pattern && this.domNode.parentElement) {\n\t\t\tthis.domNode.remove();\n\t\t\tthis.tree.domFocus();\n\t\t}\n\n\t\tthis._pattern = pattern;\n\t\tthis._onDidChangePattern.fire(pattern);\n\n\t\tthis.filter.pattern = pattern;\n\t\tthis.tree.refilter();\n\n\t\tif (pattern) {\n\t\t\tthis.tree.focusNext(0, true, undefined, node => !FuzzyScore.isDefault(node.filterData as any as FuzzyScore));\n\t\t}\n\n\t\tconst focus = this.tree.getFocus();\n\n\t\tif (focus.length > 0) {\n\t\t\tconst element = focus[0];\n\n\t\t\tif (this.tree.getRelativeTop(element) === null) {\n\t\t\t\tthis.tree.reveal(element, 0.5);\n\t\t\t}\n\t\t}\n\n\t\tthis.render();\n\n\t\tif (!pattern) {\n\t\t\tthis.triggered = false;\n\t\t}\n\t}\n\n\tprivate onDragStart(): void {\n\t\tconst container = this.view.getHTMLElement();\n\t\tconst { left } = getDomNodePagePosition(container);\n\t\tconst containerWidth = container.clientWidth;\n\t\tconst midContainerWidth = containerWidth / 2;\n\t\tconst width = this.domNode.clientWidth;\n\t\tconst disposables = new DisposableStore();\n\t\tlet positionClassName = this.positionClassName;\n\n\t\tconst updatePosition = () => {\n\t\t\tswitch (positionClassName) {\n\t\t\t\tcase 'nw':\n\t\t\t\t\tthis.domNode.style.top = `4px`;\n\t\t\t\t\tthis.domNode.style.left = `4px`;\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'ne':\n\t\t\t\t\tthis.domNode.style.top = `4px`;\n\t\t\t\t\tthis.domNode.style.left = `${containerWidth - width - 6}px`;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t};\n\n\t\tconst onDragOver = (event: DragEvent) => {\n\t\t\tevent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n\n\t\t\tconst x = event.clientX - left;\n\t\t\tif (event.dataTransfer) {\n\t\t\t\tevent.dataTransfer.dropEffect = 'none';\n\t\t\t}\n\n\t\t\tif (x < midContainerWidth) {\n\t\t\t\tpositionClassName = 'nw';\n\t\t\t} else {\n\t\t\t\tpositionClassName = 'ne';\n\t\t\t}\n\n\t\t\tupdatePosition();\n\t\t};\n\n\t\tconst onDragEnd = () => {\n\t\t\tthis.positionClassName = positionClassName;\n\t\t\tthis.domNode.className = `monaco-list-type-filter ${this.positionClassName}`;\n\t\t\tthis.domNode.style.top = '';\n\t\t\tthis.domNode.style.left = '';\n\n\t\t\tdispose(disposables);\n\t\t};\n\n\t\tupdatePosition();\n\t\tthis.domNode.classList.remove(positionClassName);\n\n\t\tthis.domNode.classList.add('dragging');\n\t\tdisposables.add(toDisposable(() => this.domNode.classList.remove('dragging')));\n\n\t\tdomEvent(document, 'dragover')(onDragOver, null, disposables);\n\t\tdomEvent(this.domNode, 'dragend')(onDragEnd, null, disposables);\n\n\t\tStaticDND.CurrentDragAndDropData = new DragAndDropData('vscode-ui');\n\t\tdisposables.add(toDisposable(() => StaticDND.CurrentDragAndDropData = undefined));\n\t}\n\n\tprivate onDidSpliceModel(): void {\n\t\tif (!this._enabled || this.pattern.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.tree.refilter();\n\t\tthis.render();\n\t}\n\n\tprivate onDidChangeFilterOnType(): void {\n\t\tthis.tree.updateOptions({ filterOnType: this.filterOnTypeDomNode.checked });\n\t\tthis.tree.refilter();\n\t\tthis.tree.domFocus();\n\t\tthis.render();\n\t\tthis.updateFilterOnTypeTitleAndIcon();\n\t}\n\n\tprivate updateFilterOnTypeTitleAndIcon(): void {\n\t\tif (this.filterOnType) {\n\t\t\tthis.filterOnTypeDomNode.classList.remove(...treeFilterOnTypeOffIcon.classNamesArray);\n\t\t\tthis.filterOnTypeDomNode.classList.add(...treeFilterOnTypeOnIcon.classNamesArray);\n\t\t\tthis.filterOnTypeDomNode.title = localize('disable filter on type', \"Disable Filter on Type\");\n\t\t} else {\n\t\t\tthis.filterOnTypeDomNode.classList.remove(...treeFilterOnTypeOnIcon.classNamesArray);\n\t\t\tthis.filterOnTypeDomNode.classList.add(...treeFilterOnTypeOffIcon.classNamesArray);\n\t\t\tthis.filterOnTypeDomNode.title = localize('enable filter on type', \"Enable Filter on Type\");\n\t\t}\n\t}\n\n\tprivate render(): void {\n\t\tconst noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n\n\t\tif (this.pattern && this.tree.options.filterOnType && noMatches) {\n\t\t\tthis.messageDomNode.textContent = localize('empty', \"No elements found\");\n\t\t\tthis._empty = true;\n\t\t} else {\n\t\t\tthis.messageDomNode.innerText = '';\n\t\t\tthis._empty = false;\n\t\t}\n\n\t\tthis.domNode.classList.toggle('no-matches', noMatches);\n\t\tthis.domNode.title = localize('found', \"Matched {0} out of {1} elements\", this.filter.matchCount, this.filter.totalCount);\n\t\tthis.labelDomNode.textContent = this.pattern.length > 16 ? '' + this.pattern.substr(this.pattern.length - 16) : this.pattern;\n\n\t\tthis._onDidChangeEmptyState.fire(this._empty);\n\t}\n\n\tshouldAllowFocus(node: ITreeNode<T, TFilterData>): boolean {\n\t\tif (!this.enabled || !this.pattern || this.filterOnType) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !FuzzyScore.isDefault(node.filterData as any as FuzzyScore);\n\t}\n\n\tdispose() {\n\t\tif (this._enabled) {\n\t\t\tthis.domNode.remove();\n\t\t\tthis.enabledDisposables.dispose();\n\t\t\tthis._enabled = false;\n\t\t\tthis.triggered = false;\n\t\t}\n\n\t\tthis._onDidChangePattern.dispose();\n\t\tdispose(this.disposables);\n\t}\n}\n\nfunction asTreeMouseEvent<T>(event: IListMouseEvent<ITreeNode<T, any>>): ITreeMouseEvent<T> {\n\tlet target: TreeMouseEventTarget = TreeMouseEventTarget.Unknown;\n\n\tif (hasParentWithClass(event.browserEvent.target as HTMLElement, 'monaco-tl-twistie', 'monaco-tl-row')) {\n\t\ttarget = TreeMouseEventTarget.Twistie;\n\t} else if (hasParentWithClass(event.browserEvent.target as HTMLElement, 'monaco-tl-contents', 'monaco-tl-row')) {\n\t\ttarget = TreeMouseEventTarget.Element;\n\t}\n\n\treturn {\n\t\tbrowserEvent: event.browserEvent,\n\t\telement: event.element ? event.element.element : null,\n\t\ttarget\n\t};\n}\n\nfunction asTreeContextMenuEvent<T>(event: IListContextMenuEvent<ITreeNode<T, any>>): ITreeContextMenuEvent<T> {\n\treturn {\n\t\telement: event.element ? event.element.element : null,\n\t\tbrowserEvent: event.browserEvent,\n\t\tanchor: event.anchor\n\t};\n}\n\nexport interface IKeyboardNavigationEventFilter {\n\t(e: StandardKeyboardEvent): boolean;\n}\n\nexport interface IAbstractTreeOptionsUpdate extends ITreeRendererOptions {\n\treadonly automaticKeyboardNavigation?: boolean;\n\treadonly simpleKeyboardNavigation?: boolean;\n\treadonly filterOnType?: boolean;\n\treadonly smoothScrolling?: boolean;\n\treadonly horizontalScrolling?: boolean;\n\treadonly expandOnDoubleClick?: boolean;\n\treadonly expandOnlyOnTwistieClick?: boolean | ((e: any) => boolean); // e is T\n}\n\nexport interface IAbstractTreeOptions<T, TFilterData = void> extends IAbstractTreeOptionsUpdate, IListOptions<T> {\n\treadonly collapseByDefault?: boolean; // defaults to false\n\treadonly filter?: ITreeFilter<T, TFilterData>;\n\treadonly dnd?: ITreeDragAndDrop<T>;\n\treadonly keyboardNavigationEventFilter?: IKeyboardNavigationEventFilter;\n\treadonly additionalScrollHeight?: number;\n}\n\nfunction dfs<T, TFilterData>(node: ITreeNode<T, TFilterData>, fn: (node: ITreeNode<T, TFilterData>) => void): void {\n\tfn(node);\n\tnode.children.forEach(child => dfs(child, fn));\n}\n\n/**\n * The trait concept needs to exist at the tree level, because collapsed\n * tree nodes will not be known by the list.\n */\nclass Trait<T> {\n\n\tprivate nodes: ITreeNode<T, any>[] = [];\n\tprivate elements: T[] | undefined;\n\n\tprivate readonly _onDidChange = new Emitter<ITreeEvent<T>>();\n\treadonly onDidChange = this._onDidChange.event;\n\n\tprivate _nodeSet: Set<ITreeNode<T, any>> | undefined;\n\tprivate get nodeSet(): Set<ITreeNode<T, any>> {\n\t\tif (!this._nodeSet) {\n\t\t\tthis._nodeSet = this.createNodeSet();\n\t\t}\n\n\t\treturn this._nodeSet;\n\t}\n\n\tconstructor(private identityProvider?: IIdentityProvider<T>) { }\n\n\tset(nodes: ITreeNode<T, any>[], browserEvent?: UIEvent): void {\n\t\tif (!(browserEvent as any)?.__forceEvent && equals(this.nodes, nodes)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._set(nodes, false, browserEvent);\n\t}\n\n\tprivate _set(nodes: ITreeNode<T, any>[], silent: boolean, browserEvent?: UIEvent): void {\n\t\tthis.nodes = [...nodes];\n\t\tthis.elements = undefined;\n\t\tthis._nodeSet = undefined;\n\n\t\tif (!silent) {\n\t\t\tconst that = this;\n\t\t\tthis._onDidChange.fire({ get elements() { return that.get(); }, browserEvent });\n\t\t}\n\t}\n\n\tget(): T[] {\n\t\tif (!this.elements) {\n\t\t\tthis.elements = this.nodes.map(node => node.element);\n\t\t}\n\n\t\treturn [...this.elements];\n\t}\n\n\tgetNodes(): readonly ITreeNode<T, any>[] {\n\t\treturn this.nodes;\n\t}\n\n\thas(node: ITreeNode<T, any>): boolean {\n\t\treturn this.nodeSet.has(node);\n\t}\n\n\tonDidModelSplice({ insertedNodes, deletedNodes }: ITreeModelSpliceEvent<T, any>): void {\n\t\tif (!this.identityProvider) {\n\t\t\tconst set = this.createNodeSet();\n\t\t\tconst visit = (node: ITreeNode<T, any>) => set.delete(node);\n\t\t\tdeletedNodes.forEach(node => dfs(node, visit));\n\t\t\tthis.set([...set.values()]);\n\t\t\treturn;\n\t\t}\n\n\t\tconst deletedNodesIdSet = new Set<string>();\n\t\tconst deletedNodesVisitor = (node: ITreeNode<T, any>) => deletedNodesIdSet.add(this.identityProvider!.getId(node.element).toString());\n\t\tdeletedNodes.forEach(node => dfs(node, deletedNodesVisitor));\n\n\t\tconst insertedNodesMap = new Map<string, ITreeNode<T, any>>();\n\t\tconst insertedNodesVisitor = (node: ITreeNode<T, any>) => insertedNodesMap.set(this.identityProvider!.getId(node.element).toString(), node);\n\t\tinsertedNodes.forEach(node => dfs(node, insertedNodesVisitor));\n\n\t\tconst nodes: ITreeNode<T, any>[] = [];\n\n\t\tfor (const node of this.nodes) {\n\t\t\tconst id = this.identityProvider.getId(node.element).toString();\n\t\t\tconst wasDeleted = deletedNodesIdSet.has(id);\n\n\t\t\tif (!wasDeleted) {\n\t\t\t\tnodes.push(node);\n\t\t\t} else {\n\t\t\t\tconst insertedNode = insertedNodesMap.get(id);\n\n\t\t\t\tif (insertedNode) {\n\t\t\t\t\tnodes.push(insertedNode);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._set(nodes, true);\n\t}\n\n\tprivate createNodeSet(): Set<ITreeNode<T, any>> {\n\t\tconst set = new Set<ITreeNode<T, any>>();\n\n\t\tfor (const node of this.nodes) {\n\t\t\tset.add(node);\n\t\t}\n\n\t\treturn set;\n\t}\n}\n\nclass TreeNodeListMouseController<T, TFilterData, TRef> extends MouseController<ITreeNode<T, TFilterData>> {\n\n\tconstructor(list: TreeNodeList<T, TFilterData, TRef>, private tree: AbstractTree<T, TFilterData, TRef>) {\n\t\tsuper(list);\n\t}\n\n\tprotected override onViewPointer(e: IListMouseEvent<ITreeNode<T, TFilterData>>): void {\n\t\tif (isInputElement(e.browserEvent.target as HTMLElement) || isMonacoEditor(e.browserEvent.target as HTMLElement)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = e.element;\n\n\t\tif (!node) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tif (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tconst target = e.browserEvent.target as HTMLElement;\n\t\tconst onTwistie = target.classList.contains('monaco-tl-twistie')\n\t\t\t|| (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && e.browserEvent.offsetX < 16);\n\n\t\tlet expandOnlyOnTwistieClick = false;\n\n\t\tif (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n\t\t\texpandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n\t\t} else {\n\t\t\texpandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n\t\t}\n\n\t\tif (expandOnlyOnTwistieClick && !onTwistie && e.browserEvent.detail !== 2) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tif (!this.tree.expandOnDoubleClick && e.browserEvent.detail === 2) {\n\t\t\treturn super.onViewPointer(e);\n\t\t}\n\n\t\tif (node.collapsible) {\n\t\t\tconst model = ((this.tree as any).model as ITreeModel<T, TFilterData, TRef>); // internal\n\t\t\tconst location = model.getNodeLocation(node);\n\t\t\tconst recursive = e.browserEvent.altKey;\n\t\t\tthis.tree.setFocus([location]);\n\t\t\tmodel.setCollapsed(location, undefined, recursive);\n\n\t\t\tif (expandOnlyOnTwistieClick && onTwistie) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tsuper.onViewPointer(e);\n\t}\n\n\tprotected override onDoubleClick(e: IListMouseEvent<ITreeNode<T, TFilterData>>): void {\n\t\tconst onTwistie = (e.browserEvent.target as HTMLElement).classList.contains('monaco-tl-twistie');\n\n\t\tif (onTwistie || !this.tree.expandOnDoubleClick) {\n\t\t\treturn;\n\t\t}\n\n\t\tsuper.onDoubleClick(e);\n\t}\n}\n\ninterface ITreeNodeListOptions<T, TFilterData, TRef> extends IListOptions<ITreeNode<T, TFilterData>> {\n\treadonly tree: AbstractTree<T, TFilterData, TRef>;\n}\n\n/**\n * We use this List subclass to restore selection and focus as nodes\n * get rendered in the list, possibly due to a node expand() call.\n */\nclass TreeNodeList<T, TFilterData, TRef> extends List<ITreeNode<T, TFilterData>> {\n\n\tconstructor(\n\t\tuser: string,\n\t\tcontainer: HTMLElement,\n\t\tvirtualDelegate: IListVirtualDelegate<ITreeNode<T, TFilterData>>,\n\t\trenderers: IListRenderer<any /* TODO@joao */, any>[],\n\t\tprivate focusTrait: Trait<T>,\n\t\tprivate selectionTrait: Trait<T>,\n\t\tprivate anchorTrait: Trait<T>,\n\t\toptions: ITreeNodeListOptions<T, TFilterData, TRef>\n\t) {\n\t\tsuper(user, container, virtualDelegate, renderers, options);\n\t}\n\n\tprotected override createMouseController(options: ITreeNodeListOptions<T, TFilterData, TRef>): MouseController<ITreeNode<T, TFilterData>> {\n\t\treturn new TreeNodeListMouseController(this, options.tree);\n\t}\n\n\toverride splice(start: number, deleteCount: number, elements: ITreeNode<T, TFilterData>[] = []): void {\n\t\tsuper.splice(start, deleteCount, elements);\n\n\t\tif (elements.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst additionalFocus: number[] = [];\n\t\tconst additionalSelection: number[] = [];\n\t\tlet anchor: number | undefined;\n\n\t\telements.forEach((node, index) => {\n\t\t\tif (this.focusTrait.has(node)) {\n\t\t\t\tadditionalFocus.push(start + index);\n\t\t\t}\n\n\t\t\tif (this.selectionTrait.has(node)) {\n\t\t\t\tadditionalSelection.push(start + index);\n\t\t\t}\n\n\t\t\tif (this.anchorTrait.has(node)) {\n\t\t\t\tanchor = start + index;\n\t\t\t}\n\t\t});\n\n\t\tif (additionalFocus.length > 0) {\n\t\t\tsuper.setFocus(distinctES6([...super.getFocus(), ...additionalFocus]));\n\t\t}\n\n\t\tif (additionalSelection.length > 0) {\n\t\t\tsuper.setSelection(distinctES6([...super.getSelection(), ...additionalSelection]));\n\t\t}\n\n\t\tif (typeof anchor === 'number') {\n\t\t\tsuper.setAnchor(anchor);\n\t\t}\n\t}\n\n\toverride setFocus(indexes: number[], browserEvent?: UIEvent, fromAPI = false): void {\n\t\tsuper.setFocus(indexes, browserEvent);\n\n\t\tif (!fromAPI) {\n\t\t\tthis.focusTrait.set(indexes.map(i => this.element(i)), browserEvent);\n\t\t}\n\t}\n\n\toverride setSelection(indexes: number[], browserEvent?: UIEvent, fromAPI = false): void {\n\t\tsuper.setSelection(indexes, browserEvent);\n\n\t\tif (!fromAPI) {\n\t\t\tthis.selectionTrait.set(indexes.map(i => this.element(i)), browserEvent);\n\t\t}\n\t}\n\n\toverride setAnchor(index: number | undefined, fromAPI = false): void {\n\t\tsuper.setAnchor(index);\n\n\t\tif (!fromAPI) {\n\t\t\tif (typeof index === 'undefined') {\n\t\t\t\tthis.anchorTrait.set([]);\n\t\t\t} else {\n\t\t\t\tthis.anchorTrait.set([this.element(index)]);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport abstract class AbstractTree<T, TFilterData, TRef> implements IDisposable {\n\n\tprotected view: TreeNodeList<T, TFilterData, TRef>;\n\tprivate renderers: TreeRenderer<T, TFilterData, TRef, any>[];\n\tprotected model: ITreeModel<T, TFilterData, TRef>;\n\tprivate focus: Trait<T>;\n\tprivate selection: Trait<T>;\n\tprivate anchor: Trait<T>;\n\tprivate eventBufferer = new EventBufferer();\n\tprivate typeFilterController?: TypeFilterController<T, TFilterData>;\n\tprivate focusNavigationFilter: ((node: ITreeNode<T, TFilterData>) => boolean) | undefined;\n\tprivate styleElement: HTMLStyleElement;\n\tprotected readonly disposables = new DisposableStore();\n\n\tget onDidScroll(): Event<ScrollEvent> { return this.view.onDidScroll; }\n\n\tget onDidChangeFocus(): Event<ITreeEvent<T>> { return this.eventBufferer.wrapEvent(this.focus.onDidChange); }\n\tget onDidChangeSelection(): Event<ITreeEvent<T>> { return this.eventBufferer.wrapEvent(this.selection.onDidChange); }\n\n\tget onMouseClick(): Event<ITreeMouseEvent<T>> { return Event.map(this.view.onMouseClick, asTreeMouseEvent); }\n\tget onMouseDblClick(): Event<ITreeMouseEvent<T>> { return Event.map(this.view.onMouseDblClick, asTreeMouseEvent); }\n\tget onContextMenu(): Event<ITreeContextMenuEvent<T>> { return Event.map(this.view.onContextMenu, asTreeContextMenuEvent); }\n\tget onTap(): Event<ITreeMouseEvent<T>> { return Event.map(this.view.onTap, asTreeMouseEvent); }\n\tget onPointer(): Event<ITreeMouseEvent<T>> { return Event.map(this.view.onPointer, asTreeMouseEvent); }\n\n\tget onKeyDown(): Event<KeyboardEvent> { return this.view.onKeyDown; }\n\tget onKeyUp(): Event<KeyboardEvent> { return this.view.onKeyUp; }\n\tget onKeyPress(): Event<KeyboardEvent> { return this.view.onKeyPress; }\n\n\tget onDidFocus(): Event<void> { return this.view.onDidFocus; }\n\tget onDidBlur(): Event<void> { return this.view.onDidBlur; }\n\n\tget onDidChangeCollapseState(): Event<ICollapseStateChangeEvent<T, TFilterData>> { return this.model.onDidChangeCollapseState; }\n\tget onDidChangeRenderNodeCount(): Event<ITreeNode<T, TFilterData>> { return this.model.onDidChangeRenderNodeCount; }\n\n\tprivate readonly _onWillRefilter = new Emitter<void>();\n\treadonly onWillRefilter: Event<void> = this._onWillRefilter.event;\n\n\tget filterOnType(): boolean { return !!this._options.filterOnType; }\n\tget onDidChangeTypeFilterPattern(): Event<string> { return this.typeFilterController ? this.typeFilterController.onDidChangePattern : Event.None; }\n\n\tget expandOnDoubleClick(): boolean { return typeof this._options.expandOnDoubleClick === 'undefined' ? true : this._options.expandOnDoubleClick; }\n\tget expandOnlyOnTwistieClick(): boolean | ((e: T) => boolean) { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? true : this._options.expandOnlyOnTwistieClick; }\n\n\tprivate readonly _onDidUpdateOptions = new Emitter<IAbstractTreeOptions<T, TFilterData>>();\n\treadonly onDidUpdateOptions: Event<IAbstractTreeOptions<T, TFilterData>> = this._onDidUpdateOptions.event;\n\n\tget onDidDispose(): Event<void> { return this.view.onDidDispose; }\n\n\tconstructor(\n\t\tuser: string,\n\t\tcontainer: HTMLElement,\n\t\tdelegate: IListVirtualDelegate<T>,\n\t\trenderers: ITreeRenderer<T, TFilterData, any>[],\n\t\tprivate _options: IAbstractTreeOptions<T, TFilterData> = {}\n\t) {\n\t\tconst treeDelegate = new ComposedTreeDelegate<T, ITreeNode<T, TFilterData>>(delegate);\n\n\t\tconst onDidChangeCollapseStateRelay = new Relay<ICollapseStateChangeEvent<T, TFilterData>>();\n\t\tconst onDidChangeActiveNodes = new Relay<ITreeNode<T, TFilterData>[]>();\n\t\tconst activeNodes = new EventCollection(onDidChangeActiveNodes.event);\n\t\tthis.renderers = renderers.map(r => new TreeRenderer<T, TFilterData, TRef, any>(r, () => this.model, onDidChangeCollapseStateRelay.event, activeNodes, _options));\n\t\tfor (let r of this.renderers) {\n\t\t\tthis.disposables.add(r);\n\t\t}\n\n\t\tlet filter: TypeFilter<T> | undefined;\n\n\t\tif (_options.keyboardNavigationLabelProvider) {\n\t\t\tfilter = new TypeFilter(this, _options.keyboardNavigationLabelProvider, _options.filter as any as ITreeFilter<T, FuzzyScore>);\n\t\t\t_options = { ..._options, filter: filter as ITreeFilter<T, TFilterData> }; // TODO need typescript help here\n\t\t\tthis.disposables.add(filter);\n\t\t}\n\n\t\tthis.focus = new Trait(_options.identityProvider);\n\t\tthis.selection = new Trait(_options.identityProvider);\n\t\tthis.anchor = new Trait(_options.identityProvider);\n\t\tthis.view = new TreeNodeList(user, container, treeDelegate, this.renderers, this.focus, this.selection, this.anchor, { ...asListOptions(() => this.model, _options), tree: this });\n\n\t\tthis.model = this.createModel(user, this.view, _options);\n\t\tonDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n\n\t\tconst onDidModelSplice = Event.forEach(this.model.onDidSplice, e => {\n\t\t\tthis.eventBufferer.bufferEvents(() => {\n\t\t\t\tthis.focus.onDidModelSplice(e);\n\t\t\t\tthis.selection.onDidModelSplice(e);\n\t\t\t});\n\t\t});\n\n\t\t// Make sure the `forEach` always runs\n\t\tonDidModelSplice(() => null, null, this.disposables);\n\n\t\t// Active nodes can change when the model changes or when focus or selection change.\n\t\t// We debounce it with 0 delay since these events may fire in the same stack and we only\n\t\t// want to run this once. It also doesn't matter if it runs on the next tick since it's only\n\t\t// a nice to have UI feature.\n\t\tonDidChangeActiveNodes.input = Event.chain(Event.any<any>(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange))\n\t\t\t.debounce(() => null, 0)\n\t\t\t.map(() => {\n\t\t\t\tconst set = new Set<ITreeNode<T, TFilterData>>();\n\n\t\t\t\tfor (const node of this.focus.getNodes()) {\n\t\t\t\t\tset.add(node);\n\t\t\t\t}\n\n\t\t\t\tfor (const node of this.selection.getNodes()) {\n\t\t\t\t\tset.add(node);\n\t\t\t\t}\n\n\t\t\t\treturn [...set.values()];\n\t\t\t}).event;\n\n\t\tif (_options.keyboardSupport !== false) {\n\t\t\tconst onKeyDown = Event.chain(this.view.onKeyDown)\n\t\t\t\t.filter(e => !isInputElement(e.target as HTMLElement))\n\t\t\t\t.map(e => new StandardKeyboardEvent(e));\n\n\t\t\tonKeyDown.filter(e => e.keyCode === KeyCode.LeftArrow).on(this.onLeftArrow, this, this.disposables);\n\t\t\tonKeyDown.filter(e => e.keyCode === KeyCode.RightArrow).on(this.onRightArrow, this, this.disposables);\n\t\t\tonKeyDown.filter(e => e.keyCode === KeyCode.Space).on(this.onSpace, this, this.disposables);\n\t\t}\n\n\t\tif (_options.keyboardNavigationLabelProvider) {\n\t\t\tconst delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n\t\t\tthis.typeFilterController = new TypeFilterController(this, this.model, this.view, filter!, delegate);\n\t\t\tthis.focusNavigationFilter = node => this.typeFilterController!.shouldAllowFocus(node);\n\t\t\tthis.disposables.add(this.typeFilterController!);\n\t\t}\n\n\t\tthis.styleElement = createStyleSheet(this.view.getHTMLElement());\n\t\tthis.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n\t}\n\n\tupdateOptions(optionsUpdate: IAbstractTreeOptionsUpdate = {}): void {\n\t\tthis._options = { ...this._options, ...optionsUpdate };\n\n\t\tfor (const renderer of this.renderers) {\n\t\t\trenderer.updateOptions(optionsUpdate);\n\t\t}\n\n\t\tthis.view.updateOptions({\n\t\t\tenableKeyboardNavigation: this._options.simpleKeyboardNavigation,\n\t\t\tautomaticKeyboardNavigation: this._options.automaticKeyboardNavigation,\n\t\t\tsmoothScrolling: this._options.smoothScrolling,\n\t\t\thorizontalScrolling: this._options.horizontalScrolling\n\t\t});\n\n\t\tif (this.typeFilterController) {\n\t\t\tthis.typeFilterController.updateOptions(this._options);\n\t\t}\n\n\t\tthis._onDidUpdateOptions.fire(this._options);\n\n\t\tthis.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n\t}\n\n\tget options(): IAbstractTreeOptions<T, TFilterData> {\n\t\treturn this._options;\n\t}\n\n\tupdateWidth(element: TRef): void {\n\t\tconst index = this.model.getListIndex(element);\n\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.view.updateWidth(index);\n\t}\n\n\t// Widget\n\n\tgetHTMLElement(): HTMLElement {\n\t\treturn this.view.getHTMLElement();\n\t}\n\n\tget contentHeight(): number {\n\t\tif (this.typeFilterController && this.typeFilterController.filterOnType && this.typeFilterController.empty) {\n\t\t\treturn 100;\n\t\t}\n\n\t\treturn this.view.contentHeight;\n\t}\n\n\tget onDidChangeContentHeight(): Event<number> {\n\t\tlet result = this.view.onDidChangeContentHeight;\n\n\t\tif (this.typeFilterController) {\n\t\t\tresult = Event.any(result, Event.map(this.typeFilterController.onDidChangeEmptyState, () => this.contentHeight));\n\t\t}\n\n\t\treturn result;\n\t}\n\n\tget scrollTop(): number {\n\t\treturn this.view.scrollTop;\n\t}\n\n\tset scrollTop(scrollTop: number) {\n\t\tthis.view.scrollTop = scrollTop;\n\t}\n\n\tget scrollLeft(): number {\n\t\treturn this.view.scrollLeft;\n\t}\n\n\tset scrollLeft(scrollLeft: number) {\n\t\tthis.view.scrollLeft = scrollLeft;\n\t}\n\n\tget scrollHeight(): number {\n\t\treturn this.view.scrollHeight;\n\t}\n\n\tget renderHeight(): number {\n\t\treturn this.view.renderHeight;\n\t}\n\n\tget firstVisibleElement(): T | undefined {\n\t\tconst index = this.view.firstVisibleIndex;\n\n\t\tif (index < 0 || index >= this.view.length) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst node = this.view.element(index);\n\t\treturn node.element;\n\t}\n\n\tget lastVisibleElement(): T {\n\t\tconst index = this.view.lastVisibleIndex;\n\t\tconst node = this.view.element(index);\n\t\treturn node.element;\n\t}\n\n\tget ariaLabel(): string {\n\t\treturn this.view.ariaLabel;\n\t}\n\n\tset ariaLabel(value: string) {\n\t\tthis.view.ariaLabel = value;\n\t}\n\n\tdomFocus(): void {\n\t\tthis.view.domFocus();\n\t}\n\n\tisDOMFocused(): boolean {\n\t\treturn this.getHTMLElement() === document.activeElement;\n\t}\n\n\tlayout(height?: number, width?: number): void {\n\t\tthis.view.layout(height, width);\n\t}\n\n\tstyle(styles: IListStyles): void {\n\t\tconst suffix = `.${this.view.domId}`;\n\t\tconst content: string[] = [];\n\n\t\tif (styles.treeIndentGuidesStroke) {\n\t\t\tcontent.push(`.monaco-list${suffix}:hover .monaco-tl-indent > .indent-guide, .monaco-list${suffix}.always .monaco-tl-indent > .indent-guide  { border-color: ${styles.treeIndentGuidesStroke.transparent(0.4)}; }`);\n\t\t\tcontent.push(`.monaco-list${suffix} .monaco-tl-indent > .indent-guide.active { border-color: ${styles.treeIndentGuidesStroke}; }`);\n\t\t}\n\n\t\tthis.styleElement.textContent = content.join('\\n');\n\t\tthis.view.style(styles);\n\t}\n\n\t// Tree navigation\n\n\tgetParentElement(location: TRef): T {\n\t\tconst parentRef = this.model.getParentNodeLocation(location);\n\t\tconst parentNode = this.model.getNode(parentRef);\n\t\treturn parentNode.element;\n\t}\n\n\tgetFirstElementChild(location: TRef): T | undefined {\n\t\treturn this.model.getFirstElementChild(location);\n\t}\n\n\t// Tree\n\n\tgetNode(location?: TRef): ITreeNode<T, TFilterData> {\n\t\treturn this.model.getNode(location);\n\t}\n\n\tcollapse(location: TRef, recursive: boolean = false): boolean {\n\t\treturn this.model.setCollapsed(location, true, recursive);\n\t}\n\n\texpand(location: TRef, recursive: boolean = false): boolean {\n\t\treturn this.model.setCollapsed(location, false, recursive);\n\t}\n\n\ttoggleCollapsed(location: TRef, recursive: boolean = false): boolean {\n\t\treturn this.model.setCollapsed(location, undefined, recursive);\n\t}\n\n\texpandAll(): void {\n\t\tthis.model.setCollapsed(this.model.rootRef, false, true);\n\t}\n\n\tcollapseAll(): void {\n\t\tthis.model.setCollapsed(this.model.rootRef, true, true);\n\t}\n\n\tisCollapsible(location: TRef): boolean {\n\t\treturn this.model.isCollapsible(location);\n\t}\n\n\tsetCollapsible(location: TRef, collapsible?: boolean): boolean {\n\t\treturn this.model.setCollapsible(location, collapsible);\n\t}\n\n\tisCollapsed(location: TRef): boolean {\n\t\treturn this.model.isCollapsed(location);\n\t}\n\n\ttoggleKeyboardNavigation(): void {\n\t\tthis.view.toggleKeyboardNavigation();\n\n\t\tif (this.typeFilterController) {\n\t\t\tthis.typeFilterController.toggle();\n\t\t}\n\t}\n\n\trefilter(): void {\n\t\tthis._onWillRefilter.fire(undefined);\n\t\tthis.model.refilter();\n\t}\n\n\tsetAnchor(element: TRef | undefined): void {\n\t\tif (typeof element === 'undefined') {\n\t\t\treturn this.view.setAnchor(undefined);\n\t\t}\n\n\t\tconst node = this.model.getNode(element);\n\t\tthis.anchor.set([node]);\n\n\t\tconst index = this.model.getListIndex(element);\n\n\t\tif (index > -1) {\n\t\t\tthis.view.setAnchor(index, true);\n\t\t}\n\t}\n\n\tgetAnchor(): T | undefined {\n\t\treturn firstOrDefault(this.anchor.get(), undefined);\n\t}\n\n\tsetSelection(elements: TRef[], browserEvent?: UIEvent): void {\n\t\tconst nodes = elements.map(e => this.model.getNode(e));\n\t\tthis.selection.set(nodes, browserEvent);\n\n\t\tconst indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n\t\tthis.view.setSelection(indexes, browserEvent, true);\n\t}\n\n\tgetSelection(): T[] {\n\t\treturn this.selection.get();\n\t}\n\n\tsetFocus(elements: TRef[], browserEvent?: UIEvent): void {\n\t\tconst nodes = elements.map(e => this.model.getNode(e));\n\t\tthis.focus.set(nodes, browserEvent);\n\n\t\tconst indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n\t\tthis.view.setFocus(indexes, browserEvent, true);\n\t}\n\n\tfocusNext(n = 1, loop = false, browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusNext(n, loop, browserEvent, filter);\n\t}\n\n\tfocusPrevious(n = 1, loop = false, browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusPrevious(n, loop, browserEvent, filter);\n\t}\n\n\tfocusNextPage(browserEvent?: UIEvent, filter = this.focusNavigationFilter): Promise<void> {\n\t\treturn this.view.focusNextPage(browserEvent, filter);\n\t}\n\n\tfocusPreviousPage(browserEvent?: UIEvent, filter = this.focusNavigationFilter): Promise<void> {\n\t\treturn this.view.focusPreviousPage(browserEvent, filter);\n\t}\n\n\tfocusLast(browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusLast(browserEvent, filter);\n\t}\n\n\tfocusFirst(browserEvent?: UIEvent, filter = this.focusNavigationFilter): void {\n\t\tthis.view.focusFirst(browserEvent, filter);\n\t}\n\n\tgetFocus(): T[] {\n\t\treturn this.focus.get();\n\t}\n\n\treveal(location: TRef, relativeTop?: number): void {\n\t\tthis.model.expandTo(location);\n\n\t\tconst index = this.model.getListIndex(location);\n\n\t\tif (index === -1) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.view.reveal(index, relativeTop);\n\t}\n\n\t/**\n\t * Returns the relative position of an element rendered in the list.\n\t * Returns `null` if the element isn't *entirely* in the visible viewport.\n\t */\n\tgetRelativeTop(location: TRef): number | null {\n\t\tconst index = this.model.getListIndex(location);\n\n\t\tif (index === -1) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.view.getRelativeTop(index);\n\t}\n\n\t// List\n\n\tprivate onLeftArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst nodes = this.view.getFocusedElements();\n\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = nodes[0];\n\t\tconst location = this.model.getNodeLocation(node);\n\t\tconst didChange = this.model.setCollapsed(location, true);\n\n\t\tif (!didChange) {\n\t\t\tconst parentLocation = this.model.getParentNodeLocation(location);\n\n\t\t\tif (!parentLocation) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst parentListIndex = this.model.getListIndex(parentLocation);\n\n\t\t\tthis.view.reveal(parentListIndex);\n\t\t\tthis.view.setFocus([parentListIndex]);\n\t\t}\n\t}\n\n\tprivate onRightArrow(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst nodes = this.view.getFocusedElements();\n\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = nodes[0];\n\t\tconst location = this.model.getNodeLocation(node);\n\t\tconst didChange = this.model.setCollapsed(location, false);\n\n\t\tif (!didChange) {\n\t\t\tif (!node.children.some(child => child.visible)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst [focusedIndex] = this.view.getFocus();\n\t\t\tconst firstChildIndex = focusedIndex + 1;\n\n\t\t\tthis.view.reveal(firstChildIndex);\n\t\t\tthis.view.setFocus([firstChildIndex]);\n\t\t}\n\t}\n\n\tprivate onSpace(e: StandardKeyboardEvent): void {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst nodes = this.view.getFocusedElements();\n\n\t\tif (nodes.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node = nodes[0];\n\t\tconst location = this.model.getNodeLocation(node);\n\t\tconst recursive = e.browserEvent.altKey;\n\n\t\tthis.model.setCollapsed(location, undefined, recursive);\n\t}\n\n\tprotected abstract createModel(user: string, view: ISpliceable<ITreeNode<T, TFilterData>>, options: IAbstractTreeOptions<T, TFilterData>): ITreeModel<T, TFilterData, TRef>;\n\n\tnavigate(start?: TRef): ITreeNavigator<T> {\n\t\treturn new TreeNavigator(this.view, this.model, start);\n\t}\n\n\tdispose(): void {\n\t\tdispose(this.disposables);\n\t\tthis.view.dispose();\n\t}\n}\n\ninterface ITreeNavigatorView<T extends NonNullable<any>, TFilterData> {\n\treadonly length: number;\n\telement(index: number): ITreeNode<T, TFilterData>;\n}\n\nclass TreeNavigator<T extends NonNullable<any>, TFilterData, TRef> implements ITreeNavigator<T> {\n\n\tprivate index: number;\n\n\tconstructor(private view: ITreeNavigatorView<T, TFilterData>, private model: ITreeModel<T, TFilterData, TRef>, start?: TRef) {\n\t\tif (start) {\n\t\t\tthis.index = this.model.getListIndex(start);\n\t\t} else {\n\t\t\tthis.index = -1;\n\t\t}\n\t}\n\n\tcurrent(): T | null {\n\t\tif (this.index < 0 || this.index >= this.view.length) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this.view.element(this.index).element;\n\t}\n\n\tprevious(): T | null {\n\t\tthis.index--;\n\t\treturn this.current();\n\t}\n\n\tnext(): T | null {\n\t\tthis.index++;\n\t\treturn this.current();\n\t}\n\n\tfirst(): T | null {\n\t\tthis.index = 0;\n\t\treturn this.current();\n\t}\n\n\tlast(): T | null {\n\t\tthis.index = this.view.length - 1;\n\t\treturn this.current();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { AbstractTree, IAbstractTreeOptions } from 'vs/base/browser/ui/tree/abstractTree';\nimport { ITreeNode, ITreeModel, ITreeElement, ITreeRenderer, ITreeSorter, IDataSource, TreeError } from 'vs/base/browser/ui/tree/tree';\nimport { ObjectTreeModel } from 'vs/base/browser/ui/tree/objectTreeModel';\nimport { IListVirtualDelegate, IIdentityProvider } from 'vs/base/browser/ui/list/list';\nimport { Iterable } from 'vs/base/common/iterator';\nimport { IList } from 'vs/base/browser/ui/tree/indexTreeModel';\n\nexport interface IDataTreeOptions<T, TFilterData = void> extends IAbstractTreeOptions<T, TFilterData> {\n\treadonly sorter?: ITreeSorter<T>;\n}\n\nexport interface IDataTreeViewState {\n\treadonly focus: string[];\n\treadonly selection: string[];\n\treadonly expanded: string[];\n\treadonly scrollTop: number;\n}\n\nexport class DataTree<TInput, T, TFilterData = void> extends AbstractTree<T | null, TFilterData, T | null> {\n\n\tprotected override model!: ObjectTreeModel<T, TFilterData>;\n\tprivate input: TInput | undefined;\n\n\tprivate identityProvider: IIdentityProvider<T> | undefined;\n\tprivate nodesByIdentity = new Map<string, ITreeNode<T, TFilterData>>();\n\n\tconstructor(\n\t\tprivate user: string,\n\t\tcontainer: HTMLElement,\n\t\tdelegate: IListVirtualDelegate<T>,\n\t\trenderers: ITreeRenderer<T, TFilterData, any>[],\n\t\tprivate dataSource: IDataSource<TInput, T>,\n\t\toptions: IDataTreeOptions<T, TFilterData> = {}\n\t) {\n\t\tsuper(user, container, delegate, renderers, options as IDataTreeOptions<T | null, TFilterData>);\n\t\tthis.identityProvider = options.identityProvider;\n\t}\n\n\t// Model\n\n\tgetInput(): TInput | undefined {\n\t\treturn this.input;\n\t}\n\n\tsetInput(input: TInput | undefined, viewState?: IDataTreeViewState): void {\n\t\tif (viewState && !this.identityProvider) {\n\t\t\tthrow new TreeError(this.user, 'Can\\'t restore tree view state without an identity provider');\n\t\t}\n\n\t\tthis.input = input;\n\n\t\tif (!input) {\n\t\t\tthis.nodesByIdentity.clear();\n\t\t\tthis.model.setChildren(null, Iterable.empty());\n\t\t\treturn;\n\t\t}\n\n\t\tif (!viewState) {\n\t\t\tthis._refresh(input);\n\t\t\treturn;\n\t\t}\n\n\t\tconst focus: T[] = [];\n\t\tconst selection: T[] = [];\n\n\t\tconst isCollapsed = (element: T) => {\n\t\t\tconst id = this.identityProvider!.getId(element).toString();\n\t\t\treturn viewState.expanded.indexOf(id) === -1;\n\t\t};\n\n\t\tconst onDidCreateNode = (node: ITreeNode<T, TFilterData>) => {\n\t\t\tconst id = this.identityProvider!.getId(node.element).toString();\n\n\t\t\tif (viewState.focus.indexOf(id) > -1) {\n\t\t\t\tfocus.push(node.element);\n\t\t\t}\n\n\t\t\tif (viewState.selection.indexOf(id) > -1) {\n\t\t\t\tselection.push(node.element);\n\t\t\t}\n\t\t};\n\n\t\tthis._refresh(input, isCollapsed, onDidCreateNode);\n\t\tthis.setFocus(focus);\n\t\tthis.setSelection(selection);\n\n\t\tif (viewState && typeof viewState.scrollTop === 'number') {\n\t\t\tthis.scrollTop = viewState.scrollTop;\n\t\t}\n\t}\n\n\tupdateChildren(element: TInput | T = this.input!): void {\n\t\tif (typeof this.input === 'undefined') {\n\t\t\tthrow new TreeError(this.user, 'Tree input not set');\n\t\t}\n\n\t\tlet isCollapsed: ((el: T) => boolean | undefined) | undefined;\n\n\t\tif (this.identityProvider) {\n\t\t\tisCollapsed = element => {\n\t\t\t\tconst id = this.identityProvider!.getId(element).toString();\n\t\t\t\tconst node = this.nodesByIdentity.get(id);\n\n\t\t\t\tif (!node) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\n\t\t\t\treturn node.collapsed;\n\t\t\t};\n\t\t}\n\n\t\tthis._refresh(element, isCollapsed);\n\t}\n\n\tresort(element: T | TInput = this.input!, recursive = true): void {\n\t\tthis.model.resort((element === this.input ? null : element) as T, recursive);\n\t}\n\n\t// View\n\n\trefresh(element?: T): void {\n\t\tif (element === undefined) {\n\t\t\tthis.view.rerender();\n\t\t\treturn;\n\t\t}\n\n\t\tthis.model.rerender(element);\n\t}\n\n\t// Implementation\n\n\tprivate _refresh(element: TInput | T, isCollapsed?: (el: T) => boolean | undefined, onDidCreateNode?: (node: ITreeNode<T, TFilterData>) => void): void {\n\t\tlet onDidDeleteNode: ((node: ITreeNode<T, TFilterData>) => void) | undefined;\n\n\t\tif (this.identityProvider) {\n\t\t\tconst insertedElements = new Set<string>();\n\n\t\t\tconst outerOnDidCreateNode = onDidCreateNode;\n\t\t\tonDidCreateNode = (node: ITreeNode<T, TFilterData>) => {\n\t\t\t\tconst id = this.identityProvider!.getId(node.element).toString();\n\n\t\t\t\tinsertedElements.add(id);\n\t\t\t\tthis.nodesByIdentity.set(id, node);\n\n\t\t\t\tif (outerOnDidCreateNode) {\n\t\t\t\t\touterOnDidCreateNode(node);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tonDidDeleteNode = (node: ITreeNode<T, TFilterData>) => {\n\t\t\t\tconst id = this.identityProvider!.getId(node.element).toString();\n\n\t\t\t\tif (!insertedElements.has(id)) {\n\t\t\t\t\tthis.nodesByIdentity.delete(id);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\tthis.model.setChildren((element === this.input ? null : element) as T, this.iterate(element, isCollapsed).elements, { onDidCreateNode, onDidDeleteNode });\n\t}\n\n\tprivate iterate(element: TInput | T, isCollapsed?: (el: T) => boolean | undefined): { elements: Iterable<ITreeElement<T>>, size: number } {\n\t\tconst children = [...this.dataSource.getChildren(element)];\n\t\tconst elements = Iterable.map(children, element => {\n\t\t\tconst { elements: children, size } = this.iterate(element, isCollapsed);\n\t\t\tconst collapsible = this.dataSource.hasChildren ? this.dataSource.hasChildren(element) : undefined;\n\t\t\tconst collapsed = size === 0 ? undefined : (isCollapsed && isCollapsed(element));\n\n\t\t\treturn { element, children, collapsible, collapsed };\n\t\t});\n\n\t\treturn { elements, size: children.length };\n\t}\n\n\tprotected createModel(user: string, view: IList<ITreeNode<T, TFilterData>>, options: IDataTreeOptions<T, TFilterData>): ITreeModel<T | null, TFilterData, T | null> {\n\t\treturn new ObjectTreeModel(user, view, options);\n\t}\n\n\t// view state\n\n\tgetViewState(): IDataTreeViewState {\n\t\tif (!this.identityProvider) {\n\t\t\tthrow new TreeError(this.user, 'Can\\'t get tree view state without an identity provider');\n\t\t}\n\n\t\tconst getId = (element: T | null) => this.identityProvider!.getId(element!).toString();\n\t\tconst focus = this.getFocus().map(getId);\n\t\tconst selection = this.getSelection().map(getId);\n\n\t\tconst expanded: string[] = [];\n\t\tconst root = this.model.getNode();\n\t\tconst queue = [root];\n\n\t\twhile (queue.length > 0) {\n\t\t\tconst node = queue.shift()!;\n\n\t\t\tif (node !== root && node.collapsible && !node.collapsed) {\n\t\t\t\texpanded.push(getId(node.element!));\n\t\t\t}\n\n\t\t\tqueue.push(...node.children);\n\t\t}\n\n\t\treturn { focus, selection, expanded, scrollTop: this.scrollTop };\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as instantiation from './instantiation';\n\nexport class SyncDescriptor<T> {\n\n\treadonly ctor: any;\n\treadonly staticArguments: any[];\n\treadonly supportsDelayedInstantiation: boolean;\n\n\tconstructor(ctor: new (...args: any[]) => T, staticArguments: any[] = [], supportsDelayedInstantiation: boolean = false) {\n\t\tthis.ctor = ctor;\n\t\tthis.staticArguments = staticArguments;\n\t\tthis.supportsDelayedInstantiation = supportsDelayedInstantiation;\n\t}\n}\n\nexport interface CreateSyncFunc {\n\n\t<T>(ctor: instantiation.IConstructorSignature0<T>): SyncDescriptor0<T>;\n\n\t<A1, T>(ctor: instantiation.IConstructorSignature1<A1, T>): SyncDescriptor1<A1, T>;\n\t<A1, T>(ctor: instantiation.IConstructorSignature1<A1, T>, a1: A1): SyncDescriptor0<T>;\n\n\t<A1, A2, T>(ctor: instantiation.IConstructorSignature2<A1, A2, T>): SyncDescriptor2<A1, A2, T>;\n\t<A1, A2, T>(ctor: instantiation.IConstructorSignature2<A1, A2, T>, a1: A1): SyncDescriptor1<A2, T>;\n\t<A1, A2, T>(ctor: instantiation.IConstructorSignature2<A1, A2, T>, a1: A1, a2: A2): SyncDescriptor0<T>;\n\n\t<A1, A2, A3, T>(ctor: instantiation.IConstructorSignature3<A1, A2, A3, T>): SyncDescriptor3<A1, A2, A3, T>;\n\t<A1, A2, A3, T>(ctor: instantiation.IConstructorSignature3<A1, A2, A3, T>, a1: A1): SyncDescriptor2<A2, A3, T>;\n\t<A1, A2, A3, T>(ctor: instantiation.IConstructorSignature3<A1, A2, A3, T>, a1: A1, a2: A2): SyncDescriptor1<A3, T>;\n\t<A1, A2, A3, T>(ctor: instantiation.IConstructorSignature3<A1, A2, A3, T>, a1: A1, a2: A2, a3: A3): SyncDescriptor0<T>;\n\n\t<A1, A2, A3, A4, T>(ctor: instantiation.IConstructorSignature4<A1, A2, A3, A4, T>): SyncDescriptor4<A1, A2, A3, A4, T>;\n\t<A1, A2, A3, A4, T>(ctor: instantiation.IConstructorSignature4<A1, A2, A3, A4, T>, a1: A1): SyncDescriptor3<A2, A3, A4, T>;\n\t<A1, A2, A3, A4, T>(ctor: instantiation.IConstructorSignature4<A1, A2, A3, A4, T>, a1: A1, a2: A2): SyncDescriptor2<A3, A4, T>;\n\t<A1, A2, A3, A4, T>(ctor: instantiation.IConstructorSignature4<A1, A2, A3, A4, T>, a1: A1, a2: A2, a3: A3): SyncDescriptor1<A4, T>;\n\t<A1, A2, A3, A4, T>(ctor: instantiation.IConstructorSignature4<A1, A2, A3, A4, T>, a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor0<T>;\n\n\t<A1, A2, A3, A4, A5, T>(ctor: instantiation.IConstructorSignature5<A1, A2, A3, A4, A5, T>): SyncDescriptor5<A1, A2, A3, A4, A5, T>;\n\t<A1, A2, A3, A4, A5, T>(ctor: instantiation.IConstructorSignature5<A1, A2, A3, A4, A5, T>, a1: A1): SyncDescriptor4<A2, A3, A4, A5, T>;\n\t<A1, A2, A3, A4, A5, T>(ctor: instantiation.IConstructorSignature5<A1, A2, A3, A4, A5, T>, a1: A1, a2: A2): SyncDescriptor3<A3, A4, A5, T>;\n\t<A1, A2, A3, A4, A5, T>(ctor: instantiation.IConstructorSignature5<A1, A2, A3, A4, A5, T>, a1: A1, a2: A2, a3: A3): SyncDescriptor2<A4, A5, T>;\n\t<A1, A2, A3, A4, A5, T>(ctor: instantiation.IConstructorSignature5<A1, A2, A3, A4, A5, T>, a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor1<A5, T>;\n\t<A1, A2, A3, A4, A5, T>(ctor: instantiation.IConstructorSignature5<A1, A2, A3, A4, A5, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor0<T>;\n\n\t<A1, A2, A3, A4, A5, A6, T>(ctor: instantiation.IConstructorSignature6<A1, A2, A3, A4, A5, A6, T>): SyncDescriptor6<A1, A2, A3, A4, A5, A6, T>;\n\t<A1, A2, A3, A4, A5, A6, T>(ctor: instantiation.IConstructorSignature6<A1, A2, A3, A4, A5, A6, T>, a1: A1): SyncDescriptor5<A2, A3, A4, A5, A6, T>;\n\t<A1, A2, A3, A4, A5, A6, T>(ctor: instantiation.IConstructorSignature6<A1, A2, A3, A4, A5, A6, T>, a1: A1, a2: A2): SyncDescriptor4<A3, A4, A5, A6, T>;\n\t<A1, A2, A3, A4, A5, A6, T>(ctor: instantiation.IConstructorSignature6<A1, A2, A3, A4, A5, A6, T>, a1: A1, a2: A2, a3: A3): SyncDescriptor3<A4, A5, A6, T>;\n\t<A1, A2, A3, A4, A5, A6, T>(ctor: instantiation.IConstructorSignature6<A1, A2, A3, A4, A5, A6, T>, a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor2<A5, A6, T>;\n\t<A1, A2, A3, A4, A5, A6, T>(ctor: instantiation.IConstructorSignature6<A1, A2, A3, A4, A5, A6, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor1<A6, T>;\n\t<A1, A2, A3, A4, A5, A6, T>(ctor: instantiation.IConstructorSignature6<A1, A2, A3, A4, A5, A6, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6): SyncDescriptor0<T>;\n\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>): SyncDescriptor7<A1, A2, A3, A4, A5, A6, A7, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1): SyncDescriptor6<A2, A3, A4, A5, A6, A7, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1, a2: A2): SyncDescriptor5<A3, A4, A5, A6, A7, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1, a2: A2, a3: A3): SyncDescriptor4<A4, A5, A6, A7, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor3<A5, A6, A7, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor2<A6, A7, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6): SyncDescriptor1<A7, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, T>(ctor: instantiation.IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7): SyncDescriptor0<T>;\n\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>): SyncDescriptor8<A1, A2, A3, A4, A5, A6, A7, A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1): SyncDescriptor7<A2, A3, A4, A5, A6, A7, A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2): SyncDescriptor6<A3, A4, A5, A6, A7, A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2, a3: A3): SyncDescriptor5<A4, A5, A6, A7, A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor4<A5, A6, A7, A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor3<A6, A7, A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6): SyncDescriptor2<A7, A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7): SyncDescriptor1<A8, T>;\n\t<A1, A2, A3, A4, A5, A6, A7, A8, T>(ctor: instantiation.IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7, a8: A8): SyncDescriptor0<T>;\n}\nexport const createSyncDescriptor: CreateSyncFunc = <T>(ctor: any, ...staticArguments: any[]): any => {\n\treturn new SyncDescriptor<T>(ctor, staticArguments);\n};\n\nexport interface SyncDescriptor0<T> {\n\tctor: any;\n\tbind(): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor1<A1, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor2<A1, A2, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor1<A2, T>;\n\tbind(a1: A1, a2: A2): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor3<A1, A2, A3, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor2<A2, A3, T>;\n\tbind(a1: A1, a2: A2): SyncDescriptor1<A3, T>;\n\tbind(a1: A1, a2: A2, a3: A3): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor4<A1, A2, A3, A4, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor3<A2, A3, A4, T>;\n\tbind(a1: A1, a2: A2): SyncDescriptor2<A3, A4, T>;\n\tbind(a1: A1, a2: A2, a3: A3): SyncDescriptor1<A4, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor5<A1, A2, A3, A4, A5, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor4<A2, A3, A4, A5, T>;\n\tbind(a1: A1, a2: A2): SyncDescriptor3<A3, A4, A5, T>;\n\tbind(a1: A1, a2: A2, a3: A3): SyncDescriptor2<A4, A5, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor1<A5, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor6<A1, A2, A3, A4, A5, A6, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor5<A2, A3, A4, A5, A6, T>;\n\tbind(a1: A1, a2: A2): SyncDescriptor4<A3, A4, A5, A6, T>;\n\tbind(a1: A1, a2: A2, a3: A3): SyncDescriptor3<A4, A5, A6, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor2<A5, A6, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor1<A6, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor7<A1, A2, A3, A4, A5, A6, A7, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor6<A2, A3, A4, A5, A6, A7, T>;\n\tbind(a1: A1, a2: A2): SyncDescriptor5<A3, A4, A5, A6, A7, T>;\n\tbind(a1: A1, a2: A2, a3: A3): SyncDescriptor4<A4, A5, A6, A7, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor3<A5, A6, A7, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor2<A6, A7, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6): SyncDescriptor1<A7, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7): SyncDescriptor0<T>;\n}\nexport interface SyncDescriptor8<A1, A2, A3, A4, A5, A6, A7, A8, T> {\n\tctor: any;\n\tbind(a1: A1): SyncDescriptor7<A2, A3, A4, A5, A6, A7, A8, T>;\n\tbind(a1: A1, a2: A2): SyncDescriptor6<A3, A4, A5, A6, A7, A8, T>;\n\tbind(a1: A1, a2: A2, a3: A3): SyncDescriptor5<A4, A5, A6, A7, A8, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4): SyncDescriptor4<A5, A6, A7, A8, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): SyncDescriptor3<A6, A7, A8, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6): SyncDescriptor2<A7, A8, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7): SyncDescriptor1<A8, T>;\n\tbind(a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7, a8: A8): SyncDescriptor0<T>;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { SyncDescriptor } from './descriptors';\nimport { ServiceIdentifier, BrandedService } from './instantiation';\n\nconst _registry: [ServiceIdentifier<any>, SyncDescriptor<any>][] = [];\n\nexport function registerSingleton<T, Services extends BrandedService[]>(id: ServiceIdentifier<T>, ctor: new (...services: Services) => T, supportsDelayedInstantiation?: boolean): void;\nexport function registerSingleton<T, Services extends BrandedService[]>(id: ServiceIdentifier<T>, descriptor: SyncDescriptor<any>): void;\nexport function registerSingleton<T, Services extends BrandedService[]>(id: ServiceIdentifier<T>, ctorOrDescriptor: { new(...services: Services): T } | SyncDescriptor<any>, supportsDelayedInstantiation?: boolean): void {\n\tif (!(ctorOrDescriptor instanceof SyncDescriptor)) {\n\t\tctorOrDescriptor = new SyncDescriptor<T>(ctorOrDescriptor as new (...args: any[]) => T, [], supportsDelayedInstantiation);\n\t}\n\n\t_registry.push([id, ctorOrDescriptor]);\n}\n\nexport function getSingletonServiceDescriptors(): [ServiceIdentifier<any>, SyncDescriptor<any>][] {\n\treturn _registry;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { ServiceCollection } from './serviceCollection';\nimport * as descriptors from './descriptors';\n\n// ------ internal util\n\nexport namespace _util {\n\n\texport const serviceIds = new Map<string, ServiceIdentifier<any>>();\n\n\texport const DI_TARGET = '$di$target';\n\texport const DI_DEPENDENCIES = '$di$dependencies';\n\n\texport function getServiceDependencies(ctor: any): { id: ServiceIdentifier<any>, index: number, optional: boolean }[] {\n\t\treturn ctor[DI_DEPENDENCIES] || [];\n\t}\n}\n\n// --- interfaces ------\n\nexport type BrandedService = { _serviceBrand: undefined };\n\nexport interface IConstructorSignature0<T> {\n\tnew(...services: BrandedService[]): T;\n}\n\nexport interface IConstructorSignature1<A1, T> {\n\tnew <Services extends BrandedService[]>(first: A1, ...services: Services): T;\n}\n\nexport interface IConstructorSignature2<A1, A2, T> {\n\tnew(first: A1, second: A2, ...services: BrandedService[]): T;\n}\n\nexport interface IConstructorSignature3<A1, A2, A3, T> {\n\tnew(first: A1, second: A2, third: A3, ...services: BrandedService[]): T;\n}\n\nexport interface IConstructorSignature4<A1, A2, A3, A4, T> {\n\tnew(first: A1, second: A2, third: A3, fourth: A4, ...services: BrandedService[]): T;\n}\n\nexport interface IConstructorSignature5<A1, A2, A3, A4, A5, T> {\n\tnew(first: A1, second: A2, third: A3, fourth: A4, fifth: A5, ...services: BrandedService[]): T;\n}\n\nexport interface IConstructorSignature6<A1, A2, A3, A4, A5, A6, T> {\n\tnew(first: A1, second: A2, third: A3, fourth: A4, fifth: A5, sixth: A6, ...services: BrandedService[]): T;\n}\n\nexport interface IConstructorSignature7<A1, A2, A3, A4, A5, A6, A7, T> {\n\tnew(first: A1, second: A2, third: A3, fourth: A4, fifth: A5, sixth: A6, seventh: A7, ...services: BrandedService[]): T;\n}\n\nexport interface IConstructorSignature8<A1, A2, A3, A4, A5, A6, A7, A8, T> {\n\tnew(first: A1, second: A2, third: A3, fourth: A4, fifth: A5, sixth: A6, seventh: A7, eigth: A8, ...services: BrandedService[]): T;\n}\n\nexport interface ServicesAccessor {\n\tget<T>(id: ServiceIdentifier<T>): T;\n\tget<T>(id: ServiceIdentifier<T>, isOptional: typeof optional): T | undefined;\n}\n\nexport const IInstantiationService = createDecorator<IInstantiationService>('instantiationService');\n\n/**\n * Given a list of arguments as a tuple, attempt to extract the leading, non-service arguments\n * to their own tuple.\n */\ntype GetLeadingNonServiceArgs<Args> =\n\tArgs extends [...BrandedService[]] ? []\n\t: Args extends [infer A1, ...BrandedService[]] ? [A1]\n\t: Args extends [infer A1, infer A2, ...BrandedService[]] ? [A1, A2]\n\t: Args extends [infer A1, infer A2, infer A3, ...BrandedService[]] ? [A1, A2, A3]\n\t: Args extends [infer A1, infer A2, infer A3, infer A4, ...BrandedService[]] ? [A1, A2, A3, A4]\n\t: Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, ...BrandedService[]] ? [A1, A2, A3, A4, A5]\n\t: Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, ...BrandedService[]] ? [A1, A2, A3, A4, A5, A6]\n\t: Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, infer A7, ...BrandedService[]] ? [A1, A2, A3, A4, A5, A6, A7]\n\t: Args extends [infer A1, infer A2, infer A3, infer A4, infer A5, infer A6, infer A7, infer A8, ...BrandedService[]] ? [A1, A2, A3, A4, A5, A6, A7, A8]\n\t: never;\n\nexport interface IInstantiationService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Synchronously creates an instance that is denoted by\n\t * the descriptor\n\t */\n\tcreateInstance<T>(descriptor: descriptors.SyncDescriptor0<T>): T;\n\tcreateInstance<A1, T>(descriptor: descriptors.SyncDescriptor1<A1, T>, a1: A1): T;\n\tcreateInstance<A1, A2, T>(descriptor: descriptors.SyncDescriptor2<A1, A2, T>, a1: A1, a2: A2): T;\n\tcreateInstance<A1, A2, A3, T>(descriptor: descriptors.SyncDescriptor3<A1, A2, A3, T>, a1: A1, a2: A2, a3: A3): T;\n\tcreateInstance<A1, A2, A3, A4, T>(descriptor: descriptors.SyncDescriptor4<A1, A2, A3, A4, T>, a1: A1, a2: A2, a3: A3, a4: A4): T;\n\tcreateInstance<A1, A2, A3, A4, A5, T>(descriptor: descriptors.SyncDescriptor5<A1, A2, A3, A4, A5, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5): T;\n\tcreateInstance<A1, A2, A3, A4, A5, A6, T>(descriptor: descriptors.SyncDescriptor6<A1, A2, A3, A4, A5, A6, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6): T;\n\tcreateInstance<A1, A2, A3, A4, A5, A6, A7, T>(descriptor: descriptors.SyncDescriptor7<A1, A2, A3, A4, A5, A6, A7, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7): T;\n\tcreateInstance<A1, A2, A3, A4, A5, A6, A7, A8, T>(descriptor: descriptors.SyncDescriptor8<A1, A2, A3, A4, A5, A6, A7, A8, T>, a1: A1, a2: A2, a3: A3, a4: A4, a5: A5, a6: A6, a7: A7, a8: A8): T;\n\n\tcreateInstance<Ctor extends new (...args: any[]) => any, R extends InstanceType<Ctor>>(t: Ctor, ...args: GetLeadingNonServiceArgs<ConstructorParameters<Ctor>>): R;\n\n\t/**\n\t *\n\t */\n\tinvokeFunction<R, TS extends any[] = []>(fn: (accessor: ServicesAccessor, ...args: TS) => R, ...args: TS): R;\n\n\t/**\n\t * Creates a child of this service which inherts all current services\n\t * and adds/overwrites the given services\n\t */\n\tcreateChild(services: ServiceCollection): IInstantiationService;\n}\n\n\n/**\n * Identifies a service of type T\n */\nexport interface ServiceIdentifier<T> {\n\t(...args: any[]): void;\n\ttype: T;\n}\n\nfunction storeServiceDependency(id: Function, target: Function, index: number, optional: boolean): void {\n\tif ((target as any)[_util.DI_TARGET] === target) {\n\t\t(target as any)[_util.DI_DEPENDENCIES].push({ id, index, optional });\n\t} else {\n\t\t(target as any)[_util.DI_DEPENDENCIES] = [{ id, index, optional }];\n\t\t(target as any)[_util.DI_TARGET] = target;\n\t}\n}\n\n/**\n * The *only* valid way to create a {{ServiceIdentifier}}.\n */\nexport function createDecorator<T>(serviceId: string): ServiceIdentifier<T> {\n\n\tif (_util.serviceIds.has(serviceId)) {\n\t\treturn _util.serviceIds.get(serviceId)!;\n\t}\n\n\tconst id = <any>function (target: Function, key: string, index: number): any {\n\t\tif (arguments.length !== 3) {\n\t\t\tthrow new Error('@IServiceName-decorator can only be used to decorate a parameter');\n\t\t}\n\t\tstoreServiceDependency(id, target, index, false);\n\t};\n\n\tid.toString = () => serviceId;\n\n\t_util.serviceIds.set(serviceId, id);\n\treturn id;\n}\n\nexport function refineServiceDecorator<T1, T extends T1>(serviceIdentifier: ServiceIdentifier<T1>): ServiceIdentifier<T> {\n\treturn <ServiceIdentifier<T>>serviceIdentifier;\n}\n\n/**\n * Mark a service dependency as optional.\n */\nexport function optional<T>(serviceIdentifier: ServiceIdentifier<T>) {\n\n\treturn function (target: Function, key: string, index: number) {\n\t\tif (arguments.length !== 3) {\n\t\t\tthrow new Error('@optional-decorator can only be used to decorate a parameter');\n\t\t}\n\t\tstoreServiceDependency(serviceIdentifier, target, index, true);\n\t};\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { UriComponents } from 'vs/base/common/uri';\nimport { ProcessItem } from 'vs/base/common/processes';\nimport { IWorkspace } from 'vs/platform/workspace/common/workspace';\nimport { IStringDictionary } from 'vs/base/common/collections';\nimport { IMainProcessInfo } from 'vs/platform/launch/common/launch';\nimport { createDecorator } from 'vs/platform/instantiation/common/instantiation';\n\nexport const ID = 'diagnosticsService';\nexport const IDiagnosticsService = createDecorator<IDiagnosticsService>(ID);\n\nexport interface IDiagnosticsService {\n\treadonly _serviceBrand: undefined;\n\n\tgetPerformanceInfo(mainProcessInfo: IMainProcessInfo, remoteInfo: (IRemoteDiagnosticInfo | IRemoteDiagnosticError)[]): Promise<PerformanceInfo>;\n\tgetSystemInfo(mainProcessInfo: IMainProcessInfo, remoteInfo: (IRemoteDiagnosticInfo | IRemoteDiagnosticError)[]): Promise<SystemInfo>;\n\tgetDiagnostics(mainProcessInfo: IMainProcessInfo, remoteInfo: (IRemoteDiagnosticInfo | IRemoteDiagnosticError)[]): Promise<string>;\n\treportWorkspaceStats(workspace: IWorkspaceInformation): Promise<void>;\n}\n\nexport interface IMachineInfo {\n\tos: string;\n\tcpus?: string;\n\tmemory: string;\n\tvmHint: string;\n\tlinuxEnv?: ILinuxEnv;\n}\n\nexport interface ILinuxEnv {\n\tdesktopSession?: string;\n\txdgSessionDesktop?: string;\n\txdgCurrentDesktop?: string;\n\txdgSessionType?: string;\n}\n\nexport interface IDiagnosticInfo {\n\tmachineInfo: IMachineInfo;\n\tworkspaceMetadata?: IStringDictionary<WorkspaceStats>;\n\tprocesses?: ProcessItem;\n}\nexport interface SystemInfo extends IMachineInfo {\n\tprocessArgs: string;\n\tgpuStatus: any;\n\tscreenReader: string;\n\tremoteData: (IRemoteDiagnosticInfo | IRemoteDiagnosticError)[];\n\tload?: string;\n}\n\nexport interface IRemoteDiagnosticInfo extends IDiagnosticInfo {\n\thostName: string;\n}\n\nexport interface IRemoteDiagnosticError {\n\thostName: string;\n\terrorMessage: string;\n}\n\nexport interface IDiagnosticInfoOptions {\n\tincludeProcesses?: boolean;\n\tfolders?: UriComponents[];\n\tincludeExtensions?: boolean;\n}\n\nexport interface WorkspaceStatItem {\n\tname: string;\n\tcount: number;\n}\n\nexport interface WorkspaceStats {\n\tfileTypes: WorkspaceStatItem[];\n\tconfigFiles: WorkspaceStatItem[];\n\tfileCount: number;\n\tmaxFilesReached: boolean;\n\tlaunchConfigFiles: WorkspaceStatItem[];\n}\n\nexport interface PerformanceInfo {\n\tprocessInfo?: string;\n\tworkspaceInfo?: string;\n}\n\nexport interface IWorkspaceInformation extends IWorkspace {\n\ttelemetryId: string | undefined;\n\trendererSessionId: string;\n}\n\nexport function isRemoteDiagnosticError(x: any): x is IRemoteDiagnosticError {\n\treturn !!x.hostName && !!x.errorMessage;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from 'vs/nls';\nimport { sep } from 'vs/base/common/path';\nimport { URI } from 'vs/base/common/uri';\nimport { IExpression } from 'vs/base/common/glob';\nimport { createDecorator } from 'vs/platform/instantiation/common/instantiation';\nimport { Event } from 'vs/base/common/event';\nimport { startsWithIgnoreCase } from 'vs/base/common/strings';\nimport { IDisposable } from 'vs/base/common/lifecycle';\nimport { isNumber, isUndefinedOrNull } from 'vs/base/common/types';\nimport { VSBuffer, VSBufferReadable, VSBufferReadableStream } from 'vs/base/common/buffer';\nimport { ReadableStreamEvents } from 'vs/base/common/stream';\nimport { CancellationToken } from 'vs/base/common/cancellation';\nimport { TernarySearchTree } from 'vs/base/common/map';\n\n//#region file service & providers\n\nexport const IFileService = createDecorator<IFileService>('fileService');\n\nexport interface IFileService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * An event that is fired when a file system provider is added or removed\n\t */\n\treadonly onDidChangeFileSystemProviderRegistrations: Event<IFileSystemProviderRegistrationEvent>;\n\n\t/**\n\t * An event that is fired when a registered file system provider changes it's capabilities.\n\t */\n\treadonly onDidChangeFileSystemProviderCapabilities: Event<IFileSystemProviderCapabilitiesChangeEvent>;\n\n\t/**\n\t * An event that is fired when a file system provider is about to be activated. Listeners\n\t * can join this event with a long running promise to help in the activation process.\n\t */\n\treadonly onWillActivateFileSystemProvider: Event<IFileSystemProviderActivationEvent>;\n\n\t/**\n\t * Registers a file system provider for a certain scheme.\n\t */\n\tregisterProvider(scheme: string, provider: IFileSystemProvider): IDisposable;\n\n\t/**\n\t * Returns a file system provider for a certain scheme.\n\t */\n\tgetProvider(scheme: string): IFileSystemProvider | undefined;\n\n\t/**\n\t * Tries to activate a provider with the given scheme.\n\t */\n\tactivateProvider(scheme: string): Promise<void>;\n\n\t/**\n\t * Checks if this file service can handle the given resource.\n\t */\n\tcanHandleResource(resource: URI): boolean;\n\n\t/**\n\t * Checks if the provider for the provided resource has the provided file system capability.\n\t */\n\thasCapability(resource: URI, capability: FileSystemProviderCapabilities): boolean;\n\n\t/**\n\t * List the schemes and capabilies for registered file system providers\n\t */\n\tlistCapabilities(): Iterable<{ scheme: string, capabilities: FileSystemProviderCapabilities }>\n\n\t/**\n\t * Allows to listen for file changes. The event will fire for every file within the opened workspace\n\t * (if any) as well as all files that have been watched explicitly using the #watch() API.\n\t */\n\treadonly onDidFilesChange: Event<FileChangesEvent>;\n\n\t/**\n\t * An event that is fired upon successful completion of a certain file operation.\n\t */\n\treadonly onDidRunOperation: Event<FileOperationEvent>;\n\n\t/**\n\t * Resolve the properties of a file/folder identified by the resource.\n\t *\n\t * If the optional parameter \"resolveTo\" is specified in options, the stat service is asked\n\t * to provide a stat object that should contain the full graph of folders up to all of the\n\t * target resources.\n\t *\n\t * If the optional parameter \"resolveSingleChildDescendants\" is specified in options,\n\t * the stat service is asked to automatically resolve child folders that only\n\t * contain a single element.\n\t *\n\t * If the optional parameter \"resolveMetadata\" is specified in options,\n\t * the stat will contain metadata information such as size, mtime and etag.\n\t */\n\tresolve(resource: URI, options: IResolveMetadataFileOptions): Promise<IFileStatWithMetadata>;\n\tresolve(resource: URI, options?: IResolveFileOptions): Promise<IFileStat>;\n\n\t/**\n\t * Same as resolve() but supports resolving multiple resources in parallel.\n\t * If one of the resolve targets fails to resolve returns a fake IFileStat instead of making the whole call fail.\n\t */\n\tresolveAll(toResolve: { resource: URI, options: IResolveMetadataFileOptions }[]): Promise<IResolveFileResult[]>;\n\tresolveAll(toResolve: { resource: URI, options?: IResolveFileOptions }[]): Promise<IResolveFileResult[]>;\n\n\t/**\n\t * Finds out if a file/folder identified by the resource exists.\n\t */\n\texists(resource: URI): Promise<boolean>;\n\n\t/**\n\t * Read the contents of the provided resource unbuffered.\n\t */\n\treadFile(resource: URI, options?: IReadFileOptions): Promise<IFileContent>;\n\n\t/**\n\t * Read the contents of the provided resource buffered as stream.\n\t */\n\treadFileStream(resource: URI, options?: IReadFileStreamOptions): Promise<IFileStreamContent>;\n\n\t/**\n\t * Updates the content replacing its previous value.\n\t */\n\twriteFile(resource: URI, bufferOrReadableOrStream: VSBuffer | VSBufferReadable | VSBufferReadableStream, options?: IWriteFileOptions): Promise<IFileStatWithMetadata>;\n\n\t/**\n\t * Moves the file/folder to a new path identified by the resource.\n\t *\n\t * The optional parameter overwrite can be set to replace an existing file at the location.\n\t */\n\tmove(source: URI, target: URI, overwrite?: boolean): Promise<IFileStatWithMetadata>;\n\n\t/**\n\t * Find out if a move operation is possible given the arguments. No changes on disk will\n\t * be performed. Returns an Error if the operation cannot be done.\n\t */\n\tcanMove(source: URI, target: URI, overwrite?: boolean): Promise<Error | true>;\n\n\t/**\n\t * Copies the file/folder to a path identified by the resource.\n\t *\n\t * The optional parameter overwrite can be set to replace an existing file at the location.\n\t */\n\tcopy(source: URI, target: URI, overwrite?: boolean): Promise<IFileStatWithMetadata>;\n\n\t/**\n\t * Find out if a copy operation is possible given the arguments. No changes on disk will\n\t * be performed. Returns an Error if the operation cannot be done.\n\t */\n\tcanCopy(source: URI, target: URI, overwrite?: boolean): Promise<Error | true>;\n\n\t/**\n\t * Find out if a file create operation is possible given the arguments. No changes on disk will\n\t * be performed. Returns an Error if the operation cannot be done.\n\t */\n\tcanCreateFile(resource: URI, options?: ICreateFileOptions): Promise<Error | true>;\n\n\t/**\n\t * Creates a new file with the given path and optional contents. The returned promise\n\t * will have the stat model object as a result.\n\t *\n\t * The optional parameter content can be used as value to fill into the new file.\n\t */\n\tcreateFile(resource: URI, bufferOrReadableOrStream?: VSBuffer | VSBufferReadable | VSBufferReadableStream, options?: ICreateFileOptions): Promise<IFileStatWithMetadata>;\n\n\t/**\n\t * Creates a new folder with the given path. The returned promise\n\t * will have the stat model object as a result.\n\t */\n\tcreateFolder(resource: URI): Promise<IFileStatWithMetadata>;\n\n\t/**\n\t * Deletes the provided file. The optional useTrash parameter allows to\n\t * move the file to trash. The optional recursive parameter allows to delete\n\t * non-empty folders recursively.\n\t */\n\tdel(resource: URI, options?: Partial<FileDeleteOptions>): Promise<void>;\n\n\t/**\n\t * Find out if a delete operation is possible given the arguments. No changes on disk will\n\t * be performed. Returns an Error if the operation cannot be done.\n\t */\n\tcanDelete(resource: URI, options?: Partial<FileDeleteOptions>): Promise<Error | true>;\n\n\t/**\n\t * Allows to start a watcher that reports file/folder change events on the provided resource.\n\t *\n\t * Note: watching a folder does not report events recursively for child folders yet.\n\t */\n\twatch(resource: URI): IDisposable;\n\n\t/**\n\t * Frees up any resources occupied by this service.\n\t */\n\tdispose(): void;\n}\n\nexport interface FileOverwriteOptions {\n\n\t/**\n\t * Set to `true` to overwrite a file if it exists. Will\n\t * throw an error otherwise if the file does exist.\n\t */\n\treadonly overwrite: boolean;\n}\n\nexport interface FileUnlockOptions {\n\n\t/**\n\t * Set to `true` to try to remove any write locks the file might\n\t * have. A file that is write locked will throw an error for any\n\t * attempt to write to unless `unlock: true` is provided.\n\t */\n\treadonly unlock: boolean;\n}\n\nexport interface FileReadStreamOptions {\n\n\t/**\n\t * Is an integer specifying where to begin reading from in the file. If position is undefined,\n\t * data will be read from the current file position.\n\t */\n\treadonly position?: number;\n\n\t/**\n\t * Is an integer specifying how many bytes to read from the file. By default, all bytes\n\t * will be read.\n\t */\n\treadonly length?: number;\n\n\t/**\n\t * If provided, the size of the file will be checked against the limits.\n\t */\n\tlimits?: {\n\t\treadonly size?: number;\n\t\treadonly memory?: number;\n\t};\n}\n\nexport interface FileWriteOptions extends FileOverwriteOptions, FileUnlockOptions {\n\n\t/**\n\t * Set to `true` to create a file when it does not exist. Will\n\t * throw an error otherwise if the file does not exist.\n\t */\n\treadonly create: boolean;\n}\n\nexport type FileOpenOptions = FileOpenForReadOptions | FileOpenForWriteOptions;\n\nexport function isFileOpenForWriteOptions(options: FileOpenOptions): options is FileOpenForWriteOptions {\n\treturn options.create === true;\n}\n\nexport interface FileOpenForReadOptions {\n\n\t/**\n\t * A hint that the file should be opened for reading only.\n\t */\n\treadonly create: false;\n}\n\nexport interface FileOpenForWriteOptions extends FileUnlockOptions {\n\n\t/**\n\t * A hint that the file should be opened for reading and writing.\n\t */\n\treadonly create: true;\n}\n\nexport interface FileDeleteOptions {\n\n\t/**\n\t * Set to `true` to recursively delete any children of the file. This\n\t * only applies to folders and can lead to an error unless provided\n\t * if the folder is not empty.\n\t */\n\treadonly recursive: boolean;\n\n\t/**\n\t * Set to `true` to attempt to move the file to trash\n\t * instead of deleting it permanently from disk. This\n\t * option maybe not be supported on all providers.\n\t */\n\treadonly useTrash: boolean;\n}\n\nexport enum FileType {\n\n\t/**\n\t * File is unknown (neither file, directory nor symbolic link).\n\t */\n\tUnknown = 0,\n\n\t/**\n\t * File is a normal file.\n\t */\n\tFile = 1,\n\n\t/**\n\t * File is a directory.\n\t */\n\tDirectory = 2,\n\n\t/**\n\t * File is a symbolic link.\n\t *\n\t * Note: even when the file is a symbolic link, you can test for\n\t * `FileType.File` and `FileType.Directory` to know the type of\n\t * the target the link points to.\n\t */\n\tSymbolicLink = 64\n}\n\nexport interface IStat {\n\n\t/**\n\t * The file type.\n\t */\n\treadonly type: FileType;\n\n\t/**\n\t * The last modification date represented as millis from unix epoch.\n\t */\n\treadonly mtime: number;\n\n\t/**\n\t * The creation date represented as millis from unix epoch.\n\t */\n\treadonly ctime: number;\n\n\t/**\n\t * The size of the file in bytes.\n\t */\n\tsize: number;\n}\n\nexport interface IWatchOptions {\n\n\t/**\n\t * Set to `true` to watch for changes recursively in a folder\n\t * and all of its children.\n\t */\n\treadonly recursive: boolean;\n\n\t/**\n\t * A set of paths to exclude from watching.\n\t */\n\texcludes: string[];\n}\n\nexport const enum FileSystemProviderCapabilities {\n\n\t/**\n\t * Provider supports unbuffered read/write.\n\t */\n\tFileReadWrite = 1 << 1,\n\n\t/**\n\t * Provider supports open/read/write/close low level file operations.\n\t */\n\tFileOpenReadWriteClose = 1 << 2,\n\n\t/**\n\t * Provider supports stream based reading.\n\t */\n\tFileReadStream = 1 << 4,\n\n\t/**\n\t * Provider supports copy operation.\n\t */\n\tFileFolderCopy = 1 << 3,\n\n\t/**\n\t * Provider is path case sensitive.\n\t */\n\tPathCaseSensitive = 1 << 10,\n\n\t/**\n\t * All files of the provider are readonly.\n\t */\n\tReadonly = 1 << 11,\n\n\t/**\n\t * Provider supports to delete via trash.\n\t */\n\tTrash = 1 << 12,\n\n\t/**\n\t * Provider support to unlock files for writing.\n\t */\n\tFileWriteUnlock = 1 << 13\n}\n\nexport interface IFileSystemProvider {\n\n\treadonly capabilities: FileSystemProviderCapabilities;\n\treadonly onDidChangeCapabilities: Event<void>;\n\n\treadonly onDidErrorOccur?: Event<string>; // TODO@bpasero remove once file watchers are solid\n\n\treadonly onDidChangeFile: Event<readonly IFileChange[]>;\n\twatch(resource: URI, opts: IWatchOptions): IDisposable;\n\n\tstat(resource: URI): Promise<IStat>;\n\tmkdir(resource: URI): Promise<void>;\n\treaddir(resource: URI): Promise<[string, FileType][]>;\n\tdelete(resource: URI, opts: FileDeleteOptions): Promise<void>;\n\n\trename(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\tcopy?(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\n\treadFile?(resource: URI): Promise<Uint8Array>;\n\twriteFile?(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n\n\treadFileStream?(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n\n\topen?(resource: URI, opts: FileOpenOptions): Promise<number>;\n\tclose?(fd: number): Promise<void>;\n\tread?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\twrite?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n}\n\nexport interface IFileSystemProviderWithFileReadWriteCapability extends IFileSystemProvider {\n\treadFile(resource: URI): Promise<Uint8Array>;\n\twriteFile(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n}\n\nexport function hasReadWriteCapability(provider: IFileSystemProvider): provider is IFileSystemProviderWithFileReadWriteCapability {\n\treturn !!(provider.capabilities & FileSystemProviderCapabilities.FileReadWrite);\n}\n\nexport interface IFileSystemProviderWithFileFolderCopyCapability extends IFileSystemProvider {\n\tcopy(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n}\n\nexport function hasFileFolderCopyCapability(provider: IFileSystemProvider): provider is IFileSystemProviderWithFileFolderCopyCapability {\n\treturn !!(provider.capabilities & FileSystemProviderCapabilities.FileFolderCopy);\n}\n\nexport interface IFileSystemProviderWithOpenReadWriteCloseCapability extends IFileSystemProvider {\n\topen(resource: URI, opts: FileOpenOptions): Promise<number>;\n\tclose(fd: number): Promise<void>;\n\tread(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\twrite(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n}\n\nexport function hasOpenReadWriteCloseCapability(provider: IFileSystemProvider): provider is IFileSystemProviderWithOpenReadWriteCloseCapability {\n\treturn !!(provider.capabilities & FileSystemProviderCapabilities.FileOpenReadWriteClose);\n}\n\nexport interface IFileSystemProviderWithFileReadStreamCapability extends IFileSystemProvider {\n\treadFileStream(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n}\n\nexport function hasFileReadStreamCapability(provider: IFileSystemProvider): provider is IFileSystemProviderWithFileReadStreamCapability {\n\treturn !!(provider.capabilities & FileSystemProviderCapabilities.FileReadStream);\n}\n\nexport enum FileSystemProviderErrorCode {\n\tFileExists = 'EntryExists',\n\tFileNotFound = 'EntryNotFound',\n\tFileNotADirectory = 'EntryNotADirectory',\n\tFileIsADirectory = 'EntryIsADirectory',\n\tFileExceedsMemoryLimit = 'EntryExceedsMemoryLimit',\n\tFileTooLarge = 'EntryTooLarge',\n\tFileWriteLocked = 'EntryWriteLocked',\n\tNoPermissions = 'NoPermissions',\n\tUnavailable = 'Unavailable',\n\tUnknown = 'Unknown'\n}\n\nexport class FileSystemProviderError extends Error {\n\n\tconstructor(message: string, public readonly code: FileSystemProviderErrorCode) {\n\t\tsuper(message);\n\t}\n}\n\nexport function createFileSystemProviderError(error: Error | string, code: FileSystemProviderErrorCode): FileSystemProviderError {\n\tconst providerError = new FileSystemProviderError(error.toString(), code);\n\tmarkAsFileSystemProviderError(providerError, code);\n\n\treturn providerError;\n}\n\nexport function ensureFileSystemProviderError(error?: Error): Error {\n\tif (!error) {\n\t\treturn createFileSystemProviderError(localize('unknownError', \"Unknown Error\"), FileSystemProviderErrorCode.Unknown); // https://github.com/microsoft/vscode/issues/72798\n\t}\n\n\treturn error;\n}\n\nexport function markAsFileSystemProviderError(error: Error, code: FileSystemProviderErrorCode): Error {\n\terror.name = code ? `${code} (FileSystemError)` : `FileSystemError`;\n\n\treturn error;\n}\n\nexport function toFileSystemProviderErrorCode(error: Error | undefined | null): FileSystemProviderErrorCode {\n\n\t// Guard against abuse\n\tif (!error) {\n\t\treturn FileSystemProviderErrorCode.Unknown;\n\t}\n\n\t// FileSystemProviderError comes with the code\n\tif (error instanceof FileSystemProviderError) {\n\t\treturn error.code;\n\t}\n\n\t// Any other error, check for name match by assuming that the error\n\t// went through the markAsFileSystemProviderError() method\n\tconst match = /^(.+) \\(FileSystemError\\)$/.exec(error.name);\n\tif (!match) {\n\t\treturn FileSystemProviderErrorCode.Unknown;\n\t}\n\n\tswitch (match[1]) {\n\t\tcase FileSystemProviderErrorCode.FileExists: return FileSystemProviderErrorCode.FileExists;\n\t\tcase FileSystemProviderErrorCode.FileIsADirectory: return FileSystemProviderErrorCode.FileIsADirectory;\n\t\tcase FileSystemProviderErrorCode.FileNotADirectory: return FileSystemProviderErrorCode.FileNotADirectory;\n\t\tcase FileSystemProviderErrorCode.FileNotFound: return FileSystemProviderErrorCode.FileNotFound;\n\t\tcase FileSystemProviderErrorCode.FileExceedsMemoryLimit: return FileSystemProviderErrorCode.FileExceedsMemoryLimit;\n\t\tcase FileSystemProviderErrorCode.FileTooLarge: return FileSystemProviderErrorCode.FileTooLarge;\n\t\tcase FileSystemProviderErrorCode.FileWriteLocked: return FileSystemProviderErrorCode.FileWriteLocked;\n\t\tcase FileSystemProviderErrorCode.NoPermissions: return FileSystemProviderErrorCode.NoPermissions;\n\t\tcase FileSystemProviderErrorCode.Unavailable: return FileSystemProviderErrorCode.Unavailable;\n\t}\n\n\treturn FileSystemProviderErrorCode.Unknown;\n}\n\nexport function toFileOperationResult(error: Error): FileOperationResult {\n\n\t// FileSystemProviderError comes with the result already\n\tif (error instanceof FileOperationError) {\n\t\treturn error.fileOperationResult;\n\t}\n\n\t// Otherwise try to find from code\n\tswitch (toFileSystemProviderErrorCode(error)) {\n\t\tcase FileSystemProviderErrorCode.FileNotFound:\n\t\t\treturn FileOperationResult.FILE_NOT_FOUND;\n\t\tcase FileSystemProviderErrorCode.FileIsADirectory:\n\t\t\treturn FileOperationResult.FILE_IS_DIRECTORY;\n\t\tcase FileSystemProviderErrorCode.FileNotADirectory:\n\t\t\treturn FileOperationResult.FILE_NOT_DIRECTORY;\n\t\tcase FileSystemProviderErrorCode.FileWriteLocked:\n\t\t\treturn FileOperationResult.FILE_WRITE_LOCKED;\n\t\tcase FileSystemProviderErrorCode.NoPermissions:\n\t\t\treturn FileOperationResult.FILE_PERMISSION_DENIED;\n\t\tcase FileSystemProviderErrorCode.FileExists:\n\t\t\treturn FileOperationResult.FILE_MOVE_CONFLICT;\n\t\tcase FileSystemProviderErrorCode.FileExceedsMemoryLimit:\n\t\t\treturn FileOperationResult.FILE_EXCEEDS_MEMORY_LIMIT;\n\t\tcase FileSystemProviderErrorCode.FileTooLarge:\n\t\t\treturn FileOperationResult.FILE_TOO_LARGE;\n\t\tdefault:\n\t\t\treturn FileOperationResult.FILE_OTHER_ERROR;\n\t}\n}\n\nexport interface IFileSystemProviderRegistrationEvent {\n\treadonly added: boolean;\n\treadonly scheme: string;\n\treadonly provider?: IFileSystemProvider;\n}\n\nexport interface IFileSystemProviderCapabilitiesChangeEvent {\n\treadonly provider: IFileSystemProvider;\n\treadonly scheme: string;\n}\n\nexport interface IFileSystemProviderActivationEvent {\n\treadonly scheme: string;\n\tjoin(promise: Promise<void>): void;\n}\n\nexport const enum FileOperation {\n\tCREATE,\n\tDELETE,\n\tMOVE,\n\tCOPY\n}\n\nexport class FileOperationEvent {\n\n\tconstructor(resource: URI, operation: FileOperation.DELETE);\n\tconstructor(resource: URI, operation: FileOperation.CREATE | FileOperation.MOVE | FileOperation.COPY, target: IFileStatWithMetadata);\n\tconstructor(public readonly resource: URI, public readonly operation: FileOperation, public readonly target?: IFileStatWithMetadata) { }\n\n\tisOperation(operation: FileOperation.DELETE): boolean;\n\tisOperation(operation: FileOperation.MOVE | FileOperation.COPY | FileOperation.CREATE): this is { readonly target: IFileStatWithMetadata };\n\tisOperation(operation: FileOperation): boolean {\n\t\treturn this.operation === operation;\n\t}\n}\n\n/**\n * Possible changes that can occur to a file.\n */\nexport const enum FileChangeType {\n\tUPDATED,\n\tADDED,\n\tDELETED\n}\n\n/**\n * Identifies a single change in a file.\n */\nexport interface IFileChange {\n\n\t/**\n\t * The type of change that occurred to the file.\n\t */\n\treadonly type: FileChangeType;\n\n\t/**\n\t * The unified resource identifier of the file that changed.\n\t */\n\treadonly resource: URI;\n}\n\nexport class FileChangesEvent {\n\n\t/**\n\t * @deprecated use the `contains()` or `affects` method to efficiently find\n\t * out if the event relates to a given resource. these methods ensure:\n\t * - that there is no expensive lookup needed (by using a `TernarySearchTree`)\n\t * - correctly handles `FileChangeType.DELETED` events\n\t */\n\treadonly changes: readonly IFileChange[];\n\n\tprivate readonly added: TernarySearchTree<URI, IFileChange> | undefined = undefined;\n\tprivate readonly updated: TernarySearchTree<URI, IFileChange> | undefined = undefined;\n\tprivate readonly deleted: TernarySearchTree<URI, IFileChange> | undefined = undefined;\n\n\tconstructor(changes: readonly IFileChange[], private readonly ignorePathCasing: boolean) {\n\t\tthis.changes = changes;\n\n\t\tfor (const change of changes) {\n\t\t\tswitch (change.type) {\n\t\t\t\tcase FileChangeType.ADDED:\n\t\t\t\t\tif (!this.added) {\n\t\t\t\t\t\tthis.added = TernarySearchTree.forUris<IFileChange>(() => this.ignorePathCasing);\n\t\t\t\t\t}\n\t\t\t\t\tthis.added.set(change.resource, change);\n\t\t\t\t\tbreak;\n\t\t\t\tcase FileChangeType.UPDATED:\n\t\t\t\t\tif (!this.updated) {\n\t\t\t\t\t\tthis.updated = TernarySearchTree.forUris<IFileChange>(() => this.ignorePathCasing);\n\t\t\t\t\t}\n\t\t\t\t\tthis.updated.set(change.resource, change);\n\t\t\t\t\tbreak;\n\t\t\t\tcase FileChangeType.DELETED:\n\t\t\t\t\tif (!this.deleted) {\n\t\t\t\t\t\tthis.deleted = TernarySearchTree.forUris<IFileChange>(() => this.ignorePathCasing);\n\t\t\t\t\t}\n\t\t\t\t\tthis.deleted.set(change.resource, change);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * Find out if the file change events match the provided resource.\n\t *\n\t * Note: when passing `FileChangeType.DELETED`, we consider a match\n\t * also when the parent of the resource got deleted.\n\t */\n\tcontains(resource: URI, ...types: FileChangeType[]): boolean {\n\t\treturn this.doContains(resource, { includeChildren: false }, ...types);\n\t}\n\n\t/**\n\t * Find out if the file change events either match the provided\n\t * resource, or contain a child of this resource.\n\t */\n\taffects(resource: URI, ...types: FileChangeType[]): boolean {\n\t\treturn this.doContains(resource, { includeChildren: true }, ...types);\n\t}\n\n\tprivate doContains(resource: URI, options: { includeChildren: boolean }, ...types: FileChangeType[]): boolean {\n\t\tif (!resource) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst hasTypesFilter = types.length > 0;\n\n\t\t// Added\n\t\tif (!hasTypesFilter || types.includes(FileChangeType.ADDED)) {\n\t\t\tif (this.added?.get(resource)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (options.includeChildren && this.added?.findSuperstr(resource)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Updated\n\t\tif (!hasTypesFilter || types.includes(FileChangeType.UPDATED)) {\n\t\t\tif (this.updated?.get(resource)) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (options.includeChildren && this.updated?.findSuperstr(resource)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\t// Deleted\n\t\tif (!hasTypesFilter || types.includes(FileChangeType.DELETED)) {\n\t\t\tif (this.deleted?.findSubstr(resource) /* deleted also considers parent folders */) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (options.includeChildren && this.deleted?.findSuperstr(resource)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t * @deprecated use the `contains()` method to efficiently find out if the event\n\t * relates to a given resource. this method ensures:\n\t * - that there is no expensive lookup needed by using a `TernarySearchTree`\n\t * - correctly handles `FileChangeType.DELETED` events\n\t */\n\tgetAdded(): IFileChange[] {\n\t\treturn this.getOfType(FileChangeType.ADDED);\n\t}\n\n\t/**\n\t * Returns if this event contains added files.\n\t */\n\tgotAdded(): boolean {\n\t\treturn !!this.added;\n\t}\n\n\t/**\n\t * @deprecated use the `contains()` method to efficiently find out if the event\n\t * relates to a given resource. this method ensures:\n\t * - that there is no expensive lookup needed by using a `TernarySearchTree`\n\t * - correctly handles `FileChangeType.DELETED` events\n\t */\n\tgetDeleted(): IFileChange[] {\n\t\treturn this.getOfType(FileChangeType.DELETED);\n\t}\n\n\t/**\n\t * Returns if this event contains deleted files.\n\t */\n\tgotDeleted(): boolean {\n\t\treturn !!this.deleted;\n\t}\n\n\t/**\n\t * @deprecated use the `contains()` method to efficiently find out if the event\n\t * relates to a given resource. this method ensures:\n\t * - that there is no expensive lookup needed by using a `TernarySearchTree`\n\t * - correctly handles `FileChangeType.DELETED` events\n\t */\n\tgetUpdated(): IFileChange[] {\n\t\treturn this.getOfType(FileChangeType.UPDATED);\n\t}\n\n\t/**\n\t * Returns if this event contains updated files.\n\t */\n\tgotUpdated(): boolean {\n\t\treturn !!this.updated;\n\t}\n\n\tprivate getOfType(type: FileChangeType): IFileChange[] {\n\t\tconst changes: IFileChange[] = [];\n\n\t\tconst eventsForType = type === FileChangeType.ADDED ? this.added : type === FileChangeType.UPDATED ? this.updated : this.deleted;\n\t\tif (eventsForType) {\n\t\t\tfor (const [, change] of eventsForType) {\n\t\t\t\tchanges.push(change);\n\t\t\t}\n\t\t}\n\n\t\treturn changes;\n\t}\n\n\t/**\n\t * @deprecated use the `contains()` method to efficiently find out if the event\n\t * relates to a given resource. this method ensures:\n\t * - that there is no expensive lookup needed by using a `TernarySearchTree`\n\t * - correctly handles `FileChangeType.DELETED` events\n\t */\n\tfilter(filterFn: (change: IFileChange) => boolean): FileChangesEvent {\n\t\treturn new FileChangesEvent(this.changes.filter(change => filterFn(change)), this.ignorePathCasing);\n\t}\n}\n\nexport function isParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n\tif (!path || !candidate || path === candidate) {\n\t\treturn false;\n\t}\n\n\tif (candidate.length > path.length) {\n\t\treturn false;\n\t}\n\n\tif (candidate.charAt(candidate.length - 1) !== sep) {\n\t\tcandidate += sep;\n\t}\n\n\tif (ignoreCase) {\n\t\treturn startsWithIgnoreCase(path, candidate);\n\t}\n\n\treturn path.indexOf(candidate) === 0;\n}\n\ninterface IBaseStat {\n\n\t/**\n\t * The unified resource identifier of this file or folder.\n\t */\n\treadonly resource: URI;\n\n\t/**\n\t * The name which is the last segment\n\t * of the {{path}}.\n\t */\n\treadonly name: string;\n\n\t/**\n\t * The size of the file.\n\t *\n\t * The value may or may not be resolved as\n\t * it is optional.\n\t */\n\treadonly size?: number;\n\n\t/**\n\t * The last modification date represented as millis from unix epoch.\n\t *\n\t * The value may or may not be resolved as\n\t * it is optional.\n\t */\n\treadonly mtime?: number;\n\n\t/**\n\t * The creation date represented as millis from unix epoch.\n\t *\n\t * The value may or may not be resolved as\n\t * it is optional.\n\t */\n\treadonly ctime?: number;\n\n\t/**\n\t * A unique identifier thet represents the\n\t * current state of the file or directory.\n\t *\n\t * The value may or may not be resolved as\n\t * it is optional.\n\t */\n\treadonly etag?: string;\n}\n\nexport interface IBaseStatWithMetadata extends Required<IBaseStat> { }\n\n/**\n * A file resource with meta information.\n */\nexport interface IFileStat extends IBaseStat {\n\n\t/**\n\t * The resource is a file.\n\t */\n\treadonly isFile: boolean;\n\n\t/**\n\t * The resource is a directory.\n\t */\n\treadonly isDirectory: boolean;\n\n\t/**\n\t * The resource is a symbolic link. Note: even when the\n\t * file is a symbolic link, you can test for `FileType.File`\n\t * and `FileType.Directory` to know the type of the target\n\t * the link points to.\n\t */\n\treadonly isSymbolicLink: boolean;\n\n\t/**\n\t * The children of the file stat or undefined if none.\n\t */\n\tchildren?: IFileStat[];\n}\n\nexport interface IFileStatWithMetadata extends IFileStat, IBaseStatWithMetadata {\n\treadonly mtime: number;\n\treadonly ctime: number;\n\treadonly etag: string;\n\treadonly size: number;\n\treadonly children?: IFileStatWithMetadata[];\n}\n\nexport interface IResolveFileResult {\n\treadonly stat?: IFileStat;\n\treadonly success: boolean;\n}\n\nexport interface IResolveFileResultWithMetadata extends IResolveFileResult {\n\treadonly stat?: IFileStatWithMetadata;\n}\n\nexport interface IFileContent extends IBaseStatWithMetadata {\n\n\t/**\n\t * The content of a file as buffer.\n\t */\n\treadonly value: VSBuffer;\n}\n\nexport interface IFileStreamContent extends IBaseStatWithMetadata {\n\n\t/**\n\t * The content of a file as stream.\n\t */\n\treadonly value: VSBufferReadableStream;\n}\n\nexport interface IBaseReadFileOptions extends FileReadStreamOptions {\n\n\t/**\n\t * The optional etag parameter allows to return early from resolving the resource if\n\t * the contents on disk match the etag. This prevents accumulated reading of resources\n\t * that have been read already with the same etag.\n\t * It is the task of the caller to makes sure to handle this error case from the promise.\n\t */\n\treadonly etag?: string;\n}\n\nexport interface IReadFileStreamOptions extends IBaseReadFileOptions { }\n\nexport interface IReadFileOptions extends IBaseReadFileOptions {\n\n\t/**\n\t * The optional `atomic` flag can be used to make sure\n\t * the `readFile` method is not running in parallel with\n\t * any `write` operations in the same process.\n\t *\n\t * Typically you should not need to use this flag but if\n\t * for example you are quickly reading a file right after\n\t * a file event occured and the file changes a lot, there\n\t * is a chance that a read returns an empty or partial file\n\t * because a pending write has not finished yet.\n\t *\n\t * Note: this does not prevent the file from being written\n\t * to from a different process. If you need such atomic\n\t * operations, you better use a real database as storage.\n\t */\n\treadonly atomic?: boolean;\n}\n\nexport interface IWriteFileOptions {\n\n\t/**\n\t * The last known modification time of the file. This can be used to prevent dirty writes.\n\t */\n\treadonly mtime?: number;\n\n\t/**\n\t * The etag of the file. This can be used to prevent dirty writes.\n\t */\n\treadonly etag?: string;\n\n\t/**\n\t * Whether to attempt to unlock a file before writing.\n\t */\n\treadonly unlock?: boolean;\n}\n\nexport interface IResolveFileOptions {\n\n\t/**\n\t * Automatically continue resolving children of a directory until the provided resources\n\t * are found.\n\t */\n\treadonly resolveTo?: readonly URI[];\n\n\t/**\n\t * Automatically continue resolving children of a directory if the number of children is 1.\n\t */\n\treadonly resolveSingleChildDescendants?: boolean;\n\n\t/**\n\t * Will resolve mtime, ctime, size and etag of files if enabled. This can have a negative impact\n\t * on performance and thus should only be used when these values are required.\n\t */\n\treadonly resolveMetadata?: boolean;\n}\n\nexport interface IResolveMetadataFileOptions extends IResolveFileOptions {\n\treadonly resolveMetadata: true;\n}\n\nexport interface ICreateFileOptions {\n\n\t/**\n\t * Overwrite the file to create if it already exists on disk. Otherwise\n\t * an error will be thrown (FILE_MODIFIED_SINCE).\n\t */\n\treadonly overwrite?: boolean;\n}\n\nexport class FileOperationError extends Error {\n\tconstructor(message: string, public fileOperationResult: FileOperationResult, public options?: IReadFileOptions & IWriteFileOptions & ICreateFileOptions) {\n\t\tsuper(message);\n\t}\n\n\tstatic isFileOperationError(obj: unknown): obj is FileOperationError {\n\t\treturn obj instanceof Error && !isUndefinedOrNull((obj as FileOperationError).fileOperationResult);\n\t}\n}\n\nexport const enum FileOperationResult {\n\tFILE_IS_DIRECTORY,\n\tFILE_NOT_FOUND,\n\tFILE_NOT_MODIFIED_SINCE,\n\tFILE_MODIFIED_SINCE,\n\tFILE_MOVE_CONFLICT,\n\tFILE_WRITE_LOCKED,\n\tFILE_PERMISSION_DENIED,\n\tFILE_TOO_LARGE,\n\tFILE_INVALID_PATH,\n\tFILE_EXCEEDS_MEMORY_LIMIT,\n\tFILE_NOT_DIRECTORY,\n\tFILE_OTHER_ERROR\n}\n\n//#endregion\n\n//#region Settings\n\nexport const AutoSaveConfiguration = {\n\tOFF: 'off',\n\tAFTER_DELAY: 'afterDelay',\n\tON_FOCUS_CHANGE: 'onFocusChange',\n\tON_WINDOW_CHANGE: 'onWindowChange'\n};\n\nexport const HotExitConfiguration = {\n\tOFF: 'off',\n\tON_EXIT: 'onExit',\n\tON_EXIT_AND_WINDOW_CLOSE: 'onExitAndWindowClose'\n};\n\nexport const FILES_ASSOCIATIONS_CONFIG = 'files.associations';\nexport const FILES_EXCLUDE_CONFIG = 'files.exclude';\n\nexport interface IFilesConfiguration {\n\tfiles: {\n\t\tassociations: { [filepattern: string]: string };\n\t\texclude: IExpression;\n\t\twatcherExclude: { [filepattern: string]: boolean };\n\t\tencoding: string;\n\t\tautoGuessEncoding: boolean;\n\t\tdefaultLanguage: string;\n\t\ttrimTrailingWhitespace: boolean;\n\t\tautoSave: string;\n\t\tautoSaveDelay: number;\n\t\teol: string;\n\t\tenableTrash: boolean;\n\t\thotExit: string;\n\t\tsaveConflictResolution: 'askUser' | 'overwriteFileOnDisk';\n\t};\n}\n\n//#endregion\n\n//#region Utilities\n\nexport enum FileKind {\n\tFILE,\n\tFOLDER,\n\tROOT_FOLDER\n}\n\n/**\n * A hint to disable etag checking for reading/writing.\n */\nexport const ETAG_DISABLED = '';\n\nexport function etag(stat: { mtime: number, size: number }): string;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined {\n\tif (typeof stat.size !== 'number' || typeof stat.mtime !== 'number') {\n\t\treturn undefined;\n\t}\n\n\treturn stat.mtime.toString(29) + stat.size.toString(31);\n}\n\nexport async function whenProviderRegistered(file: URI, fileService: IFileService): Promise<void> {\n\tif (fileService.canHandleResource(URI.from({ scheme: file.scheme }))) {\n\t\treturn;\n\t}\n\n\treturn new Promise(resolve => {\n\t\tconst disposable = fileService.onDidChangeFileSystemProviderRegistrations(e => {\n\t\t\tif (e.scheme === file.scheme && e.added) {\n\t\t\t\tdisposable.dispose();\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t});\n}\n\n/**\n * Native only: limits for memory sizes\n */\nexport const MIN_MAX_MEMORY_SIZE_MB = 2048;\nexport const FALLBACK_MAX_MEMORY_SIZE_MB = 4096;\n\n/**\n * Helper to format a raw byte size into a human readable label.\n */\nexport class ByteSize {\n\n\tstatic readonly KB = 1024;\n\tstatic readonly MB = ByteSize.KB * ByteSize.KB;\n\tstatic readonly GB = ByteSize.MB * ByteSize.KB;\n\tstatic readonly TB = ByteSize.GB * ByteSize.KB;\n\n\tstatic formatSize(size: number): string {\n\t\tif (!isNumber(size)) {\n\t\t\tsize = 0;\n\t\t}\n\n\t\tif (size < ByteSize.KB) {\n\t\t\treturn localize('sizeB', \"{0}B\", size.toFixed(0));\n\t\t}\n\n\t\tif (size < ByteSize.MB) {\n\t\t\treturn localize('sizeKB', \"{0}KB\", (size / ByteSize.KB).toFixed(2));\n\t\t}\n\n\t\tif (size < ByteSize.GB) {\n\t\t\treturn localize('sizeMB', \"{0}MB\", (size / ByteSize.MB).toFixed(2));\n\t\t}\n\n\t\tif (size < ByteSize.TB) {\n\t\t\treturn localize('sizeGB', \"{0}GB\", (size / ByteSize.GB).toFixed(2));\n\t\t}\n\n\t\treturn localize('sizeTB', \"{0}TB\", (size / ByteSize.TB).toFixed(2));\n\t}\n}\n\n// Native only: Arch limits\n\nexport interface IArchLimits {\n\treadonly maxFileSize: number;\n\treadonly maxHeapSize: number;\n}\n\nexport const enum Arch {\n\tIA32,\n\tOTHER\n}\n\nexport function getPlatformLimits(arch: Arch): IArchLimits {\n\treturn {\n\t\tmaxFileSize: arch === Arch.IA32 ? 300 * ByteSize.MB : 16 * ByteSize.GB,  // https://github.com/microsoft/vscode/issues/30180\n\t\tmaxHeapSize: arch === Arch.IA32 ? 700 * ByteSize.MB : 2 * 700 * ByteSize.MB, // https://github.com/v8/v8/blob/5918a23a3d571b9625e5cce246bdd5b46ff7cd8b/src/heap/heap.cc#L149\n\t};\n}\n\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IChannel, IServerChannel } from 'vs/base/parts/ipc/common/ipc';\nimport { Client as IPCElectronClient } from 'vs/base/parts/ipc/electron-sandbox/ipc.electron';\nimport { Disposable } from 'vs/base/common/lifecycle';\nimport { IMainProcessService } from 'vs/platform/ipc/electron-sandbox/services';\n\n/**\n * An implementation of `IMainProcessService` that leverages Electron's IPC.\n */\nexport class ElectronIPCMainProcessService extends Disposable implements IMainProcessService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tprivate mainProcessConnection: IPCElectronClient;\n\n\tconstructor(\n\t\twindowId: number\n\t) {\n\t\tsuper();\n\n\t\tthis.mainProcessConnection = this._register(new IPCElectronClient(`window:${windowId}`));\n\t}\n\n\tgetChannel(channelName: string): IChannel {\n\t\treturn this.mainProcessConnection.getChannel(channelName);\n\t}\n\n\tregisterChannel(channelName: string, channel: IServerChannel<string>): void {\n\t\tthis.mainProcessConnection.registerChannel(channelName, channel);\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { IChannel, IServerChannel, ProxyChannel } from 'vs/base/parts/ipc/common/ipc';\nimport { SyncDescriptor } from 'vs/platform/instantiation/common/descriptors';\nimport { registerSingleton } from 'vs/platform/instantiation/common/extensions';\nimport { createDecorator, ServiceIdentifier } from 'vs/platform/instantiation/common/instantiation';\n\ntype ChannelClientCtor<T> = { new(channel: IChannel): T };\ntype Remote = { getChannel(channelName: string): IChannel; };\n\nabstract class RemoteServiceStub<T> {\n\tconstructor(\n\t\tchannelName: string,\n\t\toptions: IRemoteServiceWithChannelClientOptions<T> | IRemoteServiceWithProxyOptions | undefined,\n\t\tremote: Remote\n\t) {\n\t\tconst channel = remote.getChannel(channelName);\n\n\t\tif (isRemoteServiceWithChannelClientOptions(options)) {\n\t\t\treturn new options.channelClientCtor(channel);\n\t\t}\n\n\t\treturn ProxyChannel.toService(channel, options?.proxyOptions);\n\t}\n}\n\nexport interface IBaseRemoteServiceOptions {\n\treadonly supportsDelayedInstantiation?: boolean;\n}\n\nexport interface IRemoteServiceWithChannelClientOptions<T> extends IBaseRemoteServiceOptions {\n\treadonly channelClientCtor: ChannelClientCtor<T>;\n}\n\nexport interface IRemoteServiceWithProxyOptions extends IBaseRemoteServiceOptions {\n\treadonly proxyOptions?: ProxyChannel.ICreateProxyServiceOptions;\n}\n\nfunction isRemoteServiceWithChannelClientOptions<T>(obj: unknown): obj is IRemoteServiceWithChannelClientOptions<T> {\n\tconst candidate = obj as IRemoteServiceWithChannelClientOptions<T> | undefined;\n\n\treturn !!candidate?.channelClientCtor;\n}\n\n//#region Main Process\n\nexport const IMainProcessService = createDecorator<IMainProcessService>('mainProcessService');\n\nexport interface IMainProcessService {\n\treadonly _serviceBrand: undefined;\n\tgetChannel(channelName: string): IChannel;\n\tregisterChannel(channelName: string, channel: IServerChannel<string>): void;\n}\n\nclass MainProcessRemoteServiceStub<T> extends RemoteServiceStub<T> {\n\tconstructor(channelName: string, options: IRemoteServiceWithChannelClientOptions<T> | IRemoteServiceWithProxyOptions | undefined, @IMainProcessService ipcService: IMainProcessService) {\n\t\tsuper(channelName, options, ipcService);\n\t}\n}\n\nexport function registerMainProcessRemoteService<T>(id: ServiceIdentifier<T>, channelName: string, options?: IRemoteServiceWithChannelClientOptions<T> | IRemoteServiceWithProxyOptions): void {\n\tregisterSingleton(id, new SyncDescriptor(MainProcessRemoteServiceStub, [channelName, options], options?.supportsDelayedInstantiation));\n}\n\n//#endregion\n\n//#region Shared Process\n\nexport const ISharedProcessService = createDecorator<ISharedProcessService>('sharedProcessService');\n\nexport interface ISharedProcessService {\n\treadonly _serviceBrand: undefined;\n\tgetChannel(channelName: string): IChannel;\n\tregisterChannel(channelName: string, channel: IServerChannel<string>): void;\n}\n\nclass SharedProcessRemoteServiceStub<T> extends RemoteServiceStub<T> {\n\tconstructor(channelName: string, options: IRemoteServiceWithChannelClientOptions<T> | IRemoteServiceWithProxyOptions | undefined, @ISharedProcessService ipcService: ISharedProcessService) {\n\t\tsuper(channelName, options, ipcService);\n\t}\n}\n\nexport function registerSharedProcessRemoteService<T>(id: ServiceIdentifier<T>, channelName: string, options?: IRemoteServiceWithChannelClientOptions<T> | IRemoteServiceWithProxyOptions): void {\n\tregisterSingleton(id, new SyncDescriptor(SharedProcessRemoteServiceStub, [channelName, options], options?.supportsDelayedInstantiation));\n}\n\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { INativeHostService } from 'vs/platform/native/electron-sandbox/native';\nimport { IMainProcessService } from 'vs/platform/ipc/electron-sandbox/services';\nimport { ProxyChannel } from 'vs/base/parts/ipc/common/ipc';\n\n// @ts-ignore: interface is implemented via proxy\nexport class NativeHostService implements INativeHostService {\n\n\tdeclare readonly _serviceBrand: undefined;\n\n\tconstructor(\n\t\treadonly windowId: number,\n\t\t@IMainProcessService mainProcessService: IMainProcessService\n\t) {\n\t\treturn ProxyChannel.toService<INativeHostService>(mainProcessService.getChannel('nativeHost'), {\n\t\t\tcontext: windowId,\n\t\t\tproperties: (() => {\n\t\t\t\tconst properties = new Map<string, unknown>();\n\t\t\t\tproperties.set('windowId', windowId);\n\n\t\t\t\treturn properties;\n\t\t\t})()\n\t\t});\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isMacintosh, isLinux, isWeb, isNative } from 'vs/base/common/platform';\nimport { URI, UriComponents } from 'vs/base/common/uri';\nimport { IConfigurationService } from 'vs/platform/configuration/common/configuration';\nimport { IWorkspaceIdentifier, ISingleFolderWorkspaceIdentifier } from 'vs/platform/workspaces/common/workspaces';\nimport { NativeParsedArgs } from 'vs/platform/environment/common/argv';\nimport { LogLevel } from 'vs/platform/log/common/log';\nimport { PerformanceMark } from 'vs/base/common/performance';\nimport { ISandboxConfiguration } from 'vs/base/parts/sandbox/common/sandboxTypes';\n\nexport const WindowMinimumSize = {\n\tWIDTH: 400,\n\tWIDTH_WITH_VERTICAL_PANEL: 600,\n\tHEIGHT: 270\n};\n\nexport interface IBaseOpenWindowsOptions {\n\treadonly forceReuseWindow?: boolean;\n\t/**\n\t * The remote authority to use when windows are opened with either\n\t * - no workspace (empty window)\n\t * - a workspace that is neither `file://` nor `vscode-remote://`\n\t * Use 'null' for a local window.\n\t * If not set, defaults to the remote authority of the current window.\n\t */\n\treadonly remoteAuthority?: string | null;\n}\n\nexport interface IOpenWindowOptions extends IBaseOpenWindowsOptions {\n\treadonly forceNewWindow?: boolean;\n\treadonly preferNewWindow?: boolean;\n\n\treadonly noRecentEntry?: boolean;\n\n\treadonly addMode?: boolean;\n\n\treadonly diffMode?: boolean;\n\treadonly gotoLineMode?: boolean;\n\n\treadonly waitMarkerFileURI?: URI;\n}\n\nexport interface IAddFoldersRequest {\n\treadonly foldersToAdd: UriComponents[];\n}\n\nexport interface IOpenedWindow {\n\treadonly id: number;\n\treadonly workspace?: IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier;\n\treadonly title: string;\n\treadonly filename?: string;\n\treadonly dirty: boolean;\n}\n\nexport interface IOpenEmptyWindowOptions extends IBaseOpenWindowsOptions {\n}\n\nexport type IWindowOpenable = IWorkspaceToOpen | IFolderToOpen | IFileToOpen;\n\nexport interface IBaseWindowOpenable {\n\tlabel?: string;\n}\n\nexport interface IWorkspaceToOpen extends IBaseWindowOpenable {\n\treadonly workspaceUri: URI;\n}\n\nexport interface IFolderToOpen extends IBaseWindowOpenable {\n\treadonly folderUri: URI;\n}\n\nexport interface IFileToOpen extends IBaseWindowOpenable {\n\treadonly fileUri: URI;\n}\n\nexport function isWorkspaceToOpen(uriToOpen: IWindowOpenable): uriToOpen is IWorkspaceToOpen {\n\treturn !!(uriToOpen as IWorkspaceToOpen).workspaceUri;\n}\n\nexport function isFolderToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFolderToOpen {\n\treturn !!(uriToOpen as IFolderToOpen).folderUri;\n}\n\nexport function isFileToOpen(uriToOpen: IWindowOpenable): uriToOpen is IFileToOpen {\n\treturn !!(uriToOpen as IFileToOpen).fileUri;\n}\n\nexport type MenuBarVisibility = 'classic' | 'visible' | 'toggle' | 'hidden' | 'compact';\n\nexport function getMenuBarVisibility(configurationService: IConfigurationService): MenuBarVisibility {\n\tconst titleBarStyle = getTitleBarStyle(configurationService);\n\tconst menuBarVisibility = configurationService.getValue<MenuBarVisibility | 'default'>('window.menuBarVisibility');\n\n\tif (menuBarVisibility === 'default' || (titleBarStyle === 'native' && menuBarVisibility === 'compact') || (isMacintosh && isNative)) {\n\t\treturn 'classic';\n\t} else {\n\t\treturn menuBarVisibility;\n\t}\n}\n\nexport interface IWindowsConfiguration {\n\treadonly window: IWindowSettings;\n}\n\nexport interface IWindowSettings {\n\treadonly openFilesInNewWindow: 'on' | 'off' | 'default';\n\treadonly openFoldersInNewWindow: 'on' | 'off' | 'default';\n\treadonly openWithoutArgumentsInNewWindow: 'on' | 'off';\n\treadonly restoreWindows: 'preserve' | 'all' | 'folders' | 'one' | 'none';\n\treadonly restoreFullscreen: boolean;\n\treadonly zoomLevel: number;\n\treadonly titleBarStyle: 'native' | 'custom';\n\treadonly autoDetectHighContrast: boolean;\n\treadonly menuBarVisibility: MenuBarVisibility;\n\treadonly newWindowDimensions: 'default' | 'inherit' | 'offset' | 'maximized' | 'fullscreen';\n\treadonly nativeTabs: boolean;\n\treadonly nativeFullScreen: boolean;\n\treadonly enableMenuBarMnemonics: boolean;\n\treadonly closeWhenEmpty: boolean;\n\treadonly clickThroughInactive: boolean;\n}\n\nexport function getTitleBarStyle(configurationService: IConfigurationService): 'native' | 'custom' {\n\tif (isWeb) {\n\t\treturn 'custom';\n\t}\n\n\tconst configuration = configurationService.getValue<IWindowSettings | undefined>('window');\n\n\tif (configuration) {\n\t\tconst useNativeTabs = isMacintosh && configuration.nativeTabs === true;\n\t\tif (useNativeTabs) {\n\t\t\treturn 'native'; // native tabs on sierra do not work with custom title style\n\t\t}\n\n\t\tconst useSimpleFullScreen = isMacintosh && configuration.nativeFullScreen === false;\n\t\tif (useSimpleFullScreen) {\n\t\t\treturn 'native'; // simple fullscreen does not work well with custom title style (https://github.com/microsoft/vscode/issues/63291)\n\t\t}\n\n\t\tconst style = configuration.titleBarStyle;\n\t\tif (style === 'native' || style === 'custom') {\n\t\t\treturn style;\n\t\t}\n\t}\n\n\treturn isLinux ? 'native' : 'custom'; // default to custom on all macOS and Windows\n}\n\nexport interface IPath extends IPathData {\n\n\t// the file path to open within the instance\n\tfileUri?: URI;\n}\n\nexport interface IPathData {\n\n\t// the file path to open within the instance\n\treadonly fileUri?: UriComponents;\n\n\t// the line number in the file path to open\n\treadonly lineNumber?: number;\n\n\t// the column number in the file path to open\n\treadonly columnNumber?: number;\n\n\t// a hint that the file exists. if true, the\n\t// file exists, if false it does not. with\n\t// undefined the state is unknown.\n\treadonly exists?: boolean;\n\n\t// Specifies if the file should be only be opened if it exists\n\treadonly openOnlyIfExists?: boolean;\n\n\t// Specifies an optional id to override the editor used to edit the resource, e.g. custom editor.\n\treadonly editorOverrideId?: string;\n}\n\nexport interface IPathsToWaitFor extends IPathsToWaitForData {\n\tpaths: IPath[];\n\twaitMarkerFileUri: URI;\n}\n\ninterface IPathsToWaitForData {\n\treadonly paths: IPathData[];\n\treadonly waitMarkerFileUri: UriComponents;\n}\n\nexport interface IOpenFileRequest {\n\treadonly filesToOpenOrCreate?: IPathData[];\n\treadonly filesToDiff?: IPathData[];\n}\n\n/**\n * Additional context for the request on native only.\n */\nexport interface INativeOpenFileRequest extends IOpenFileRequest {\n\treadonly termProgram?: string;\n\treadonly filesToWait?: IPathsToWaitForData;\n}\n\nexport interface INativeRunActionInWindowRequest {\n\treadonly id: string;\n\treadonly from: 'menu' | 'touchbar' | 'mouse';\n\treadonly args?: any[];\n}\n\nexport interface INativeRunKeybindingInWindowRequest {\n\treadonly userSettingsLabel: string;\n}\n\nexport interface IColorScheme {\n\treadonly dark: boolean;\n\treadonly highContrast: boolean;\n}\n\nexport interface IWindowConfiguration {\n\tremoteAuthority?: string;\n\n\tcolorScheme: IColorScheme;\n\tautoDetectHighContrast?: boolean;\n\n\tfilesToOpenOrCreate?: IPath[];\n\tfilesToDiff?: IPath[];\n}\n\nexport interface IOSConfiguration {\n\treadonly release: string;\n\treadonly hostname: string;\n}\n\nexport interface INativeWindowConfiguration extends IWindowConfiguration, NativeParsedArgs, ISandboxConfiguration {\n\tmainPid: number;\n\n\tmachineId: string;\n\n\texecPath: string;\n\tbackupPath?: string;\n\n\thomeDir: string;\n\ttmpDir: string;\n\tuserDataDir: string;\n\n\tpartsSplashPath: string;\n\n\tworkspace?: IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier;\n\n\tisInitialStartup?: boolean;\n\tlogLevel: LogLevel;\n\n\tfullscreen?: boolean;\n\tmaximized?: boolean;\n\taccessibilitySupport?: boolean;\n\n\tperfMarks: PerformanceMark[];\n\n\tfilesToWait?: IPathsToWaitFor;\n\n\tos: IOSConfiguration;\n}\n\n/**\n * According to Electron docs: `scale := 1.2 ^ level`.\n * https://github.com/electron/electron/blob/master/docs/api/web-contents.md#contentssetzoomlevellevel\n */\nexport function zoomLevelToZoomFactor(zoomLevel = 0): number {\n\treturn Math.pow(1.2, zoomLevel);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { webFrame } from 'vs/base/parts/sandbox/electron-sandbox/globals';\nimport { zoomLevelToZoomFactor } from 'vs/platform/windows/common/windows';\nimport { setZoomFactor, setZoomLevel, getZoomLevel } from 'vs/base/browser/browser';\n\n/**\n * Apply a zoom level to the window. Also sets it in our in-memory\n * browser helper so that it can be accessed in non-electron layers.\n */\nexport function applyZoom(zoomLevel: number): void {\n\twebFrame.setZoomLevel(zoomLevel);\n\tsetZoomFactor(zoomLevelToZoomFactor(zoomLevel));\n\t// Cannot be trusted because the webFrame might take some time\n\t// until it really applies the new zoom level\n\t// See https://github.com/microsoft/vscode/issues/26151\n\tsetZoomLevel(zoomLevel, false /* isTrusted */);\n}\n\nexport function zoomIn(): void {\n\tapplyZoom(getZoomLevel() + 1);\n}\n\nexport function zoomOut(): void {\n\tapplyZoom(getZoomLevel() - 1);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport 'vs/css!./media/processExplorer';\nimport 'vs/base/browser/ui/codicons/codiconStyles'; // make sure codicon css is loaded\nimport { INativeHostService } from 'vs/platform/native/electron-sandbox/native';\nimport { NativeHostService } from 'vs/platform/native/electron-sandbox/nativeHostService';\nimport { ipcRenderer } from 'vs/base/parts/sandbox/electron-sandbox/globals';\nimport { localize } from 'vs/nls';\nimport { ProcessExplorerStyles, ProcessExplorerData, ProcessExplorerWindowConfiguration } from 'vs/platform/issue/common/issue';\nimport { applyZoom, zoomIn, zoomOut } from 'vs/platform/windows/electron-sandbox/window';\nimport { IContextMenuItem } from 'vs/base/parts/contextmenu/common/contextmenu';\nimport { popup } from 'vs/base/parts/contextmenu/electron-sandbox/contextmenu';\nimport { ProcessItem } from 'vs/base/common/processes';\nimport { append, $ } from 'vs/base/browser/dom';\nimport { isRemoteDiagnosticError, IRemoteDiagnosticError } from 'vs/platform/diagnostics/common/diagnostics';\nimport { ElectronIPCMainProcessService } from 'vs/platform/ipc/electron-sandbox/mainProcessService';\nimport { ByteSize } from 'vs/platform/files/common/files';\nimport { IListVirtualDelegate } from 'vs/base/browser/ui/list/list';\nimport { IDataSource, ITreeNode, ITreeRenderer } from 'vs/base/browser/ui/tree/tree';\nimport { DataTree } from 'vs/base/browser/ui/tree/dataTree';\n\nconst DEBUG_FLAGS_PATTERN = /\\s--(inspect|debug)(-brk|port)?=(\\d+)?/;\nconst DEBUG_PORT_PATTERN = /\\s--(inspect|debug)-port=(\\d+)/;\n\nclass ProcessListDelegate implements IListVirtualDelegate<MachineProcessInformation | ProcessItem | IRemoteDiagnosticError> {\n\tgetHeight(element: MachineProcessInformation | ProcessItem | IRemoteDiagnosticError) {\n\t\treturn 22;\n\t}\n\n\tgetTemplateId(element: ProcessInformation | MachineProcessInformation | ProcessItem | IRemoteDiagnosticError) {\n\t\tif (isProcessItem(element)) {\n\t\t\treturn 'process';\n\t\t}\n\n\t\tif (isMachineProcessInformation(element)) {\n\t\t\treturn 'machine';\n\t\t}\n\n\t\tif (isRemoteDiagnosticError(element)) {\n\t\t\treturn 'error';\n\t\t}\n\n\t\tif (isProcessInformation(element)) {\n\t\t\treturn 'header';\n\t\t}\n\n\t\treturn '';\n\t}\n}\n\ninterface IProcessItemTemplateData extends IProcessRowTemplateData {\n\tCPU: HTMLElement;\n\tmemory: HTMLElement;\n\tPID: HTMLElement;\n}\n\ninterface IProcessRowTemplateData {\n\tname: HTMLElement;\n}\n\nclass ProcessTreeDataSource implements IDataSource<ProcessTree, ProcessInformation | MachineProcessInformation | ProcessItem | IRemoteDiagnosticError>  {\n\thasChildren(element: ProcessTree | ProcessInformation | MachineProcessInformation | ProcessItem | IRemoteDiagnosticError): boolean {\n\t\tif (isRemoteDiagnosticError(element)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isProcessItem(element)) {\n\t\t\treturn !!element.children?.length;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tgetChildren(element: ProcessTree | ProcessInformation | MachineProcessInformation | ProcessItem | IRemoteDiagnosticError) {\n\t\tif (isProcessItem(element)) {\n\t\t\treturn element.children ? element.children : [];\n\t\t}\n\n\t\tif (isRemoteDiagnosticError(element)) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (isProcessInformation(element)) {\n\t\t\t// If there are multiple process roots, return these, otherwise go directly to the root process\n\t\t\tif (element.processRoots.length > 1) {\n\t\t\t\treturn element.processRoots;\n\t\t\t} else {\n\t\t\t\treturn [element.processRoots[0].rootProcess];\n\t\t\t}\n\t\t}\n\n\t\tif (isMachineProcessInformation(element)) {\n\t\t\treturn [element.rootProcess];\n\t\t}\n\n\t\treturn [element.processes];\n\t}\n}\n\nclass ProcessHeaderTreeRenderer implements ITreeRenderer<ProcessInformation, void, IProcessItemTemplateData> {\n\ttemplateId: string = 'header';\n\trenderTemplate(container: HTMLElement): IProcessItemTemplateData {\n\t\tconst data = Object.create(null);\n\t\tconst row = append(container, $('.row'));\n\t\tdata.name = append(row, $('.nameLabel'));\n\t\tdata.CPU = append(row, $('.cpu'));\n\t\tdata.memory = append(row, $('.memory'));\n\t\tdata.PID = append(row, $('.pid'));\n\t\treturn data;\n\t}\n\trenderElement(node: ITreeNode<ProcessInformation, void>, index: number, templateData: IProcessItemTemplateData, height: number | undefined): void {\n\t\ttemplateData.name.textContent = localize('name', \"Process Name\");\n\t\ttemplateData.CPU.textContent = localize('cpu', \"CPU %\");\n\t\ttemplateData.PID.textContent = localize('pid', \"PID\");\n\t\ttemplateData.memory.textContent = localize('memory', \"Memory (MB)\");\n\n\t}\n\tdisposeTemplate(templateData: any): void {\n\t\t// Nothing to do\n\t}\n}\n\nclass MachineRenderer implements ITreeRenderer<MachineProcessInformation, void, IProcessRowTemplateData> {\n\ttemplateId: string = 'machine';\n\trenderTemplate(container: HTMLElement): IProcessRowTemplateData {\n\t\tconst data = Object.create(null);\n\t\tconst row = append(container, $('.row'));\n\t\tdata.name = append(row, $('.nameLabel'));\n\t\treturn data;\n\t}\n\trenderElement(node: ITreeNode<MachineProcessInformation, void>, index: number, templateData: IProcessRowTemplateData, height: number | undefined): void {\n\t\ttemplateData.name.textContent = node.element.name;\n\t}\n\tdisposeTemplate(templateData: IProcessRowTemplateData): void {\n\t\t// Nothing to do\n\t}\n}\n\nclass ErrorRenderer implements ITreeRenderer<IRemoteDiagnosticError, void, IProcessRowTemplateData> {\n\ttemplateId: string = 'error';\n\trenderTemplate(container: HTMLElement): IProcessRowTemplateData {\n\t\tconst data = Object.create(null);\n\t\tconst row = append(container, $('.row'));\n\t\tdata.name = append(row, $('.nameLabel'));\n\t\treturn data;\n\t}\n\trenderElement(node: ITreeNode<IRemoteDiagnosticError, void>, index: number, templateData: IProcessRowTemplateData, height: number | undefined): void {\n\t\ttemplateData.name.textContent = node.element.errorMessage;\n\t}\n\tdisposeTemplate(templateData: IProcessRowTemplateData): void {\n\t\t// Nothing to do\n\t}\n}\n\n\nclass ProcessRenderer implements ITreeRenderer<ProcessItem, void, IProcessItemTemplateData> {\n\tconstructor(private platform: string, private totalMem: number, private mapPidToWindowTitle: Map<number, string>) { }\n\n\ttemplateId: string = 'process';\n\trenderTemplate(container: HTMLElement): IProcessItemTemplateData {\n\t\tconst data = <IProcessItemTemplateData>Object.create(null);\n\t\tconst row = append(container, $('.row'));\n\n\t\tdata.name = append(row, $('.nameLabel'));\n\t\tdata.CPU = append(row, $('.cpu'));\n\t\tdata.memory = append(row, $('.memory'));\n\t\tdata.PID = append(row, $('.pid'));\n\n\t\treturn data;\n\t}\n\trenderElement(node: ITreeNode<ProcessItem, void>, index: number, templateData: IProcessItemTemplateData, height: number | undefined): void {\n\t\tconst { element } = node;\n\n\t\tlet name = element.name;\n\t\tif (name === 'window') {\n\t\t\tconst windowTitle = this.mapPidToWindowTitle.get(element.pid);\n\t\t\tname = windowTitle !== undefined ? `${name} (${this.mapPidToWindowTitle.get(element.pid)})` : name;\n\t\t}\n\n\t\ttemplateData.name.textContent = name;\n\t\ttemplateData.name.title = element.cmd;\n\n\t\ttemplateData.CPU.textContent = element.load.toFixed(0);\n\t\ttemplateData.PID.textContent = element.pid.toFixed(0);\n\n\t\tconst memory = this.platform === 'win32' ? element.mem : (this.totalMem * (element.mem / 100));\n\t\ttemplateData.memory.textContent = (memory / ByteSize.MB).toFixed(0);\n\t}\n\n\tdisposeTemplate(templateData: IProcessItemTemplateData): void {\n\t\t// Nothing to do\n\t}\n}\n\ninterface MachineProcessInformation {\n\tname: string;\n\trootProcess: ProcessItem | IRemoteDiagnosticError\n}\n\ninterface ProcessInformation {\n\tprocessRoots: MachineProcessInformation[];\n}\n\ninterface ProcessTree {\n\tprocesses: ProcessInformation;\n}\n\nfunction isMachineProcessInformation(item: any): item is MachineProcessInformation {\n\treturn !!item.name && !!item.rootProcess;\n}\n\nfunction isProcessInformation(item: any): item is ProcessInformation {\n\treturn !!item.processRoots;\n}\n\nfunction isProcessItem(item: any): item is ProcessItem {\n\treturn !!item.pid;\n}\n\nclass ProcessExplorer {\n\tprivate lastRequestTime: number;\n\n\tprivate mapPidToWindowTitle = new Map<number, string>();\n\n\tprivate nativeHostService: INativeHostService;\n\n\tprivate tree: DataTree<any, ProcessTree | MachineProcessInformation | ProcessItem | ProcessInformation | IRemoteDiagnosticError, any> | undefined;\n\n\tconstructor(windowId: number, private data: ProcessExplorerData) {\n\t\tconst mainProcessService = new ElectronIPCMainProcessService(windowId);\n\t\tthis.nativeHostService = new NativeHostService(windowId, mainProcessService) as INativeHostService;\n\n\t\tthis.applyStyles(data.styles);\n\t\tthis.setEventHandlers(data);\n\n\t\t// Map window process pids to titles, annotate process names with this when rendering to distinguish between them\n\t\tipcRenderer.on('vscode:windowsInfoResponse', (event: unknown, windows: any[]) => {\n\t\t\tthis.mapPidToWindowTitle = new Map<number, string>();\n\t\t\twindows.forEach(window => this.mapPidToWindowTitle.set(window.pid, window.title));\n\t\t});\n\n\t\tipcRenderer.on('vscode:listProcessesResponse', async (event: unknown, processRoots: MachineProcessInformation[]) => {\n\t\t\tprocessRoots.forEach((info, index) => {\n\t\t\t\tif (isProcessItem(info.rootProcess)) {\n\t\t\t\t\tinfo.rootProcess.name = index === 0 ? `${this.data.applicationName} main` : 'remote agent';\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (!this.tree) {\n\t\t\t\tawait this.createProcessTree(processRoots);\n\t\t\t} else {\n\t\t\t\tthis.tree.setInput({ processes: { processRoots } });\n\t\t\t}\n\n\t\t\tthis.requestProcessList(0);\n\t\t});\n\n\t\tthis.lastRequestTime = Date.now();\n\t\tipcRenderer.send('vscode:windowsInfoRequest');\n\t\tipcRenderer.send('vscode:listProcesses');\n\n\n\t}\n\n\tprivate setEventHandlers(data: ProcessExplorerData): void {\n\t\tdocument.onkeydown = (e: KeyboardEvent) => {\n\t\t\tconst cmdOrCtrlKey = data.platform === 'darwin' ? e.metaKey : e.ctrlKey;\n\n\t\t\t// Cmd/Ctrl + w closes issue window\n\t\t\tif (cmdOrCtrlKey && e.keyCode === 87) {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.preventDefault();\n\n\t\t\t\tipcRenderer.send('vscode:closeProcessExplorer');\n\t\t\t}\n\n\t\t\t// Cmd/Ctrl + zooms in\n\t\t\tif (cmdOrCtrlKey && e.keyCode === 187) {\n\t\t\t\tzoomIn();\n\t\t\t}\n\n\t\t\t// Cmd/Ctrl - zooms out\n\t\t\tif (cmdOrCtrlKey && e.keyCode === 189) {\n\t\t\t\tzoomOut();\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate async createProcessTree(processRoots: MachineProcessInformation[]): Promise<void> {\n\t\tconst container = document.getElementById('process-list');\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { totalmem } = await this.nativeHostService.getOSStatistics();\n\n\t\tconst renderers = [\n\t\t\tnew ProcessRenderer(this.data.platform, totalmem, this.mapPidToWindowTitle),\n\t\t\tnew ProcessHeaderTreeRenderer(),\n\t\t\tnew MachineRenderer(),\n\t\t\tnew ErrorRenderer()\n\t\t];\n\n\t\tthis.tree = new DataTree('processExplorer',\n\t\t\tcontainer,\n\t\t\tnew ProcessListDelegate(),\n\t\t\trenderers,\n\t\t\tnew ProcessTreeDataSource(),\n\t\t\t{\n\t\t\t\tidentityProvider:\n\t\t\t\t{\n\t\t\t\t\tgetId: (element: ProcessTree | ProcessItem | MachineProcessInformation | ProcessInformation | IRemoteDiagnosticError) => {\n\t\t\t\t\t\tif (isProcessItem(element)) {\n\t\t\t\t\t\t\treturn element.pid.toString();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isRemoteDiagnosticError(element)) {\n\t\t\t\t\t\t\treturn element.hostName;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isProcessInformation(element)) {\n\t\t\t\t\t\t\treturn 'processes';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isMachineProcessInformation(element)) {\n\t\t\t\t\t\t\treturn element.name;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn 'header';\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\tthis.tree.setInput({ processes: { processRoots } });\n\t\tthis.tree.layout(window.innerHeight, window.innerWidth);\n\t\tthis.tree.onContextMenu(e => {\n\t\t\tif (isProcessItem(e.element)) {\n\t\t\t\tthis.showContextMenu(e.element, true);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate isDebuggable(cmd: string): boolean {\n\t\tconst matches = DEBUG_FLAGS_PATTERN.exec(cmd);\n\t\treturn (matches && matches.length >= 2) || cmd.indexOf('node ') >= 0 || cmd.indexOf('node.exe') >= 0;\n\t}\n\n\tprivate attachTo(item: ProcessItem) {\n\t\tconst config: any = {\n\t\t\ttype: 'node',\n\t\t\trequest: 'attach',\n\t\t\tname: `process ${item.pid}`\n\t\t};\n\n\t\tlet matches = DEBUG_FLAGS_PATTERN.exec(item.cmd);\n\t\tif (matches && matches.length >= 2) {\n\t\t\t// attach via port\n\t\t\tif (matches.length === 4 && matches[3]) {\n\t\t\t\tconfig.port = parseInt(matches[3]);\n\t\t\t}\n\t\t\tconfig.protocol = matches[1] === 'debug' ? 'legacy' : 'inspector';\n\t\t} else {\n\t\t\t// no port -> try to attach via pid (send SIGUSR1)\n\t\t\tconfig.processId = String(item.pid);\n\t\t}\n\n\t\t// a debug-port=n or inspect-port=n overrides the port\n\t\tmatches = DEBUG_PORT_PATTERN.exec(item.cmd);\n\t\tif (matches && matches.length === 3) {\n\t\t\t// override port\n\t\t\tconfig.port = parseInt(matches[2]);\n\t\t}\n\n\t\tipcRenderer.send('vscode:workbenchCommand', { id: 'debug.startFromConfig', from: 'processExplorer', args: [config] });\n\t}\n\n\tprivate applyStyles(styles: ProcessExplorerStyles): void {\n\t\tconst styleTag = document.createElement('style');\n\t\tconst content: string[] = [];\n\n\t\tif (styles.hoverBackground) {\n\t\t\tcontent.push(`.monaco-list-row:hover  { background-color: ${styles.hoverBackground}; }`);\n\t\t}\n\n\t\tif (styles.hoverForeground) {\n\t\t\tcontent.push(`.monaco-list-row:hover { color: ${styles.hoverForeground}; }`);\n\t\t}\n\n\t\tstyleTag.textContent = content.join('\\n');\n\t\tif (document.head) {\n\t\t\tdocument.head.appendChild(styleTag);\n\t\t}\n\t\tif (styles.color) {\n\t\t\tdocument.body.style.color = styles.color;\n\t\t}\n\t}\n\n\tprivate showContextMenu(item: ProcessItem, isLocal: boolean) {\n\t\tconst items: IContextMenuItem[] = [];\n\t\tconst pid = Number(item.pid);\n\n\t\tif (isLocal) {\n\t\t\titems.push({\n\t\t\t\tlabel: localize('killProcess', \"Kill Process\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.nativeHostService.killProcess(pid, 'SIGTERM');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\titems.push({\n\t\t\t\tlabel: localize('forceKillProcess', \"Force Kill Process\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.nativeHostService.killProcess(pid, 'SIGKILL');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\titems.push({\n\t\t\t\ttype: 'separator'\n\t\t\t});\n\t\t}\n\n\t\titems.push({\n\t\t\tlabel: localize('copy', \"Copy\"),\n\t\t\tclick: () => {\n\t\t\t\tconst row = document.getElementById(pid.toString());\n\t\t\t\tif (row) {\n\t\t\t\t\tthis.nativeHostService.writeClipboardText(row.innerText);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\titems.push({\n\t\t\tlabel: localize('copyAll', \"Copy All\"),\n\t\t\tclick: () => {\n\t\t\t\tconst processList = document.getElementById('process-list');\n\t\t\t\tif (processList) {\n\t\t\t\t\tthis.nativeHostService.writeClipboardText(processList.innerText);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif (item && isLocal && this.isDebuggable(item.cmd)) {\n\t\t\titems.push({\n\t\t\t\ttype: 'separator'\n\t\t\t});\n\n\t\t\titems.push({\n\t\t\t\tlabel: localize('debug', \"Debug\"),\n\t\t\t\tclick: () => {\n\t\t\t\t\tthis.attachTo(item);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tpopup(items);\n\t}\n\n\tprivate requestProcessList(totalWaitTime: number): void {\n\t\tsetTimeout(() => {\n\t\t\tconst nextRequestTime = Date.now();\n\t\t\tconst waited = totalWaitTime + nextRequestTime - this.lastRequestTime;\n\t\t\tthis.lastRequestTime = nextRequestTime;\n\n\t\t\t// Wait at least a second between requests.\n\t\t\tif (waited > 1000) {\n\t\t\t\tipcRenderer.send('vscode:windowsInfoRequest');\n\t\t\t\tipcRenderer.send('vscode:listProcesses');\n\t\t\t} else {\n\t\t\t\tthis.requestProcessList(waited);\n\t\t\t}\n\t\t}, 200);\n\t}\n}\n\nexport function startup(configuration: ProcessExplorerWindowConfiguration): void {\n\tconst platformClass = configuration.data.platform === 'win32' ? 'windows' : configuration.data.platform === 'linux' ? 'linux' : 'mac';\n\tdocument.body.classList.add(platformClass); // used by our fonts\n\tapplyZoom(configuration.data.zoomLevel);\n\n\tnew ProcessExplorer(configuration.windowId, configuration.data);\n}\n"],"mappings":"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GAAE,GACT,EAAO,GAAE,GACT,EAAO,GAAE,GACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IAET,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IAET,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IAET,EAAO,GAAE,IAET,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,GAAE,IACT,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,KACV,EAAO,IAAG,KACV,EAAO,IAAG,KACV,EAAO,IAAG,KACV,EAAO,IAAG,KACV,EAAO,IAAG,KACV,EAAO,IAAG,KACV,EAAO,IAAG,KACV,EAAO,IAAG,KAEV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,IAAG,IACV,EAAO,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","names":[],"file":"processExplorerMain.js"}